import{klona as e}from'https://testingcf.jsdelivr.net/npm/klona/+esm';var t={230:(e,t,a)=>{var n=a(1664);n.__esModule&&(n=n.default),'string'==typeof n&&(n=[[e.id,n,'']]),n.locals&&(e.exports=n.locals);(0,a(4424).A)('3a810100',n,!1,{ssrId:!0})},431:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(8093),o=a.n(n),r=a(3054),l=a.n(r)()(o());l.push([e.id,'.conversation-tab-container[data-v-18297b7b]{display:flex;flex-direction:column;width:100%;height:100%}.main-content[data-v-18297b7b]{flex:1;display:flex;flex-direction:column;overflow:hidden}.dialogue-fullscreen[data-v-18297b7b]{display:flex;flex-direction:column;flex:1;overflow:hidden}.messages-container[data-v-18297b7b]{flex:1;overflow-y:auto;background-color:#1a1a1a;min-height:var(--v14702539);max-height:var(--v14702539)}.messages-container[data-v-18297b7b]::-webkit-scrollbar{width:8px}.messages-container[data-v-18297b7b]::-webkit-scrollbar-track{background:#2a2a2a;border-radius:4px}.messages-container[data-v-18297b7b]::-webkit-scrollbar-thumb{background:#555;border-radius:4px}.messages-container[data-v-18297b7b]::-webkit-scrollbar-thumb:hover{background:#666}.load-more-container[data-v-18297b7b]{display:flex;justify-content:center;padding:16px;margin-bottom:16px}.load-more-btn[data-v-18297b7b]{background-color:#2a2a2a;border:1px solid #404040;border-radius:20px;color:#b0b0b0;padding:8px 16px;font-size:14px;cursor:pointer;transition:all .2s ease}.load-more-btn[data-v-18297b7b]:hover{background-color:#3a3a3a;border-color:#007acc;color:#007acc}.message[data-v-18297b7b]{position:relative;border-bottom:1px solid #404040}.message.user[data-v-18297b7b]{background:linear-gradient(135deg,rgba(0,122,204,0.05) 0%,rgba(0,122,204,0.02) 100%);border-left:3px solid #007acc}.message.assistant[data-v-18297b7b]{background:linear-gradient(135deg,rgba(40,167,69,0.05) 0%,rgba(40,167,69,0.02) 100%);border-left:3px solid #28a745}.message-content[data-v-18297b7b]{line-height:1.5;word-wrap:break-word;white-space:pre-wrap;padding:16px 16px 24px 16px}[data-v-18297b7b] .dialogue-text{color:#f4c430;font-weight:500}.message-header[data-v-18297b7b]{margin-bottom:8px;background-color:rgba(0,0,0,.3);border-radius:8px 8px 0 0;overflow:hidden}.message-header-row[data-v-18297b7b]{display:flex;align-items:center;justify-content:space-between;padding:8px 16px}.message-status-row[data-v-18297b7b]{padding:4px 16px;background-color:rgba(0,0,0,.2);border-top:1px solid hsla(0,0%,100%,.1)}.message-id[data-v-18297b7b]{color:#b0b0b0;font-size:12px;font-weight:500;opacity:.8}.status-info[data-v-18297b7b]{color:#e0e0e0;font-size:12px;font-weight:400;opacity:.9;text-align:center;overflow:hidden;text-overflow:ellipsis}.status-datetime[data-v-18297b7b]{margin-bottom:2px}.status-location[data-v-18297b7b]{font-size:11px;opacity:.8}.message-actions[data-v-18297b7b]{display:flex;gap:8px}.edit-message-btn[data-v-18297b7b],.rewind-message-btn[data-v-18297b7b]{background:none;border:none;color:#888;font-size:14px;cursor:pointer;opacity:1;transition:opacity .2s ease;padding:4px 8px;border-radius:4px}.edit-message-btn[data-v-18297b7b]:hover,.rewind-message-btn[data-v-18297b7b]:hover{background-color:hsla(0,0%,100%,.1)}.edit-message-btn[data-v-18297b7b]:hover{color:#007acc}.rewind-message-btn[data-v-18297b7b]:hover{color:#28a745}.edit-mode[data-v-18297b7b]{width:100%;padding-left:16px}.edit-textarea[data-v-18297b7b]{width:100%;padding:12px;background-color:#2a2a2a;border:1px solid #007acc;border-radius:8px;color:#e0e0e0;font-size:14px;font-family:inherit;line-height:1.4;resize:none;outline:none;min-height:60px;field-sizing:content}.edit-textarea[data-v-18297b7b]:focus{border-color:#0056b3}.edit-textarea[data-v-18297b7b]::placeholder{color:#888}.edit-controls[data-v-18297b7b]{display:flex;justify-content:flex-end;gap:8px;margin-top:8px}.edit-btn[data-v-18297b7b]{width:32px;height:32px;border:none;border-radius:50%;cursor:pointer;font-size:16px;font-weight:bold;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.edit-btn.confirm-btn[data-v-18297b7b]{background-color:#28a745;color:#fff}.edit-btn.confirm-btn[data-v-18297b7b]:hover{background-color:#218838}.edit-btn.cancel-btn[data-v-18297b7b]{background-color:#dc3545;color:#fff}.edit-btn.cancel-btn[data-v-18297b7b]:hover{background-color:#c82333}.swipe-controls[data-v-18297b7b]{display:flex;align-items:center;justify-content:center;gap:8px;padding:12px 16px;background-color:rgba(0,0,0,.4);border:1px solid hsla(0,0%,100%,.1);backdrop-filter:blur(4px)}.swipe-btn[data-v-18297b7b]{background:none;border:none;color:#007acc;font-size:18px;font-weight:bold;cursor:pointer;padding:2px 6px;border-radius:4px;transition:background-color .2s ease}.swipe-btn[data-v-18297b7b]:hover:not(:disabled){background-color:rgba(0,122,204,.2)}.swipe-btn[data-v-18297b7b]:disabled{color:#666;cursor:not-allowed}.swipe-indicator[data-v-18297b7b]{color:#b0b0b0;font-size:12px;font-weight:500;min-width:40px;text-align:center}.delete-btn[data-v-18297b7b]{color:#ff6b6b !important;font-size:16px;font-weight:bold}.delete-btn[data-v-18297b7b]:hover:not(:disabled){background-color:rgba(255,107,107,.2)}.delete-btn[data-v-18297b7b]:disabled{color:#666 !important;cursor:not-allowed}.input-area[data-v-18297b7b]{padding:16px;background-color:#1a1a1a;border-top:1px solid #404040}.input-container[data-v-18297b7b]{display:flex;gap:8px;align-items:center}.message-input[data-v-18297b7b]{flex:1;padding:12px 16px;background-color:#2a2a2a;border:1px solid #404040;border-radius:24px;color:#e0e0e0;font-size:16px;outline:none;transition:border-color .2s ease;resize:none;min-height:20px;max-height:120px}.message-input[data-v-18297b7b]::-webkit-scrollbar{display:none}.message-input[data-v-18297b7b]{-ms-overflow-style:none;scrollbar-width:none}.message-input[data-v-18297b7b]:focus{border-color:#007acc}.message-input[data-v-18297b7b]::placeholder{color:#888}.send-button[data-v-18297b7b]{padding:12px 20px;background-color:#007acc;border:none;border-radius:24px;color:#fff;font-size:16px;font-weight:500;cursor:pointer;transition:background-color .2s ease;white-space:nowrap}.send-button[data-v-18297b7b]:hover{background-color:#0056b3}.send-button[data-v-18297b7b]:active{background-color:#004085}.loading-spinner[data-v-18297b7b]{width:20px;height:20px;border:2px solid #404040;border-top:2px solid #007acc;border-radius:50%;animation:spin-18297b7b 1s linear infinite;flex-shrink:0}@keyframes spin-18297b7b{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@media (max-width:768px){.input-area[data-v-18297b7b]{padding:12px}.message-input[data-v-18297b7b]{font-size:16px}.send-button[data-v-18297b7b]{padding:12px 16px;font-size:14px}}','']);const i=l},671:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(8093),o=a.n(n),r=a(3054),l=a.n(r)()(o());l.push([e.id,'.fold-bar[data-v-112e8be8]{background:rgba(0,0,0,0);border:none;border-radius:0;box-shadow:none;font-size:14px;font-weight:500;color:#e0e0e0;padding:0;margin:0}.fold-bar-header[data-v-112e8be8]{margin-bottom:0;padding-bottom:0;display:flex;align-items:center;justify-content:flex-start;position:relative}.fold-bar-header-actions[data-v-112e8be8]{display:flex;align-items:center;gap:8px;position:absolute;right:0;top:0;bottom:0}.fold-bar-btn[data-v-112e8be8]{cursor:pointer;display:flex;align-items:center;background:#333;border:1px solid #404040;border-bottom:none;flex:1;text-align:left;color:#e0e0e0;font-size:14px;font-weight:500;padding:6px 12px;border-radius:0}.fold-bar-title-actions[data-v-112e8be8]{display:flex;align-items:center;gap:4px;margin-left:auto;margin-right:8px}.fold-bar-btn[data-v-112e8be8]:hover{background:#404040}.fold-bar-btn[data-v-112e8be8]:focus{outline:none}.fold-bar-toggle-icon[data-v-112e8be8]{margin-left:8px;flex-shrink:0;font-size:12px;color:#b0b0b0;transition:transform .3s ease}.fold-bar-toggle-icon[data-v-112e8be8]::before{content:"â–¼"}.fold-bar-toggle-icon.open[data-v-112e8be8]{transform:rotate(180deg)}.fold-bar-content[data-v-112e8be8]{max-height:0;overflow:hidden;transition:max-height .3s ease;background:#1a1a1a;border:1px solid #404040;border-top:none;padding:0}.fold-bar-content.open[data-v-112e8be8]{overflow-y:auto;scrollbar-width:none;-ms-overflow-style:none}.fold-bar-content.open[data-v-112e8be8]::-webkit-scrollbar{display:none}.fold-bar-content-text[data-v-112e8be8]{padding:0 12px}.fold-bar-footer-toggle[data-v-112e8be8]{text-align:center;color:#888;font-size:12px;cursor:pointer;margin-top:8px;padding:8px 12px;border-top:1px solid #404040;background:#333}.fold-bar-footer-toggle[data-v-112e8be8]:hover{color:#b0b0b0;background:#404040}@media (max-width:768px){.fold-bar-btn[data-v-112e8be8]{font-size:12px}.fold-bar-footer-toggle[data-v-112e8be8]{font-size:11px}}','']);const i=l},676:(e,t,a)=>{var n=a(6850);n.__esModule&&(n=n.default),'string'==typeof n&&(n=[[e.id,n,'']]),n.locals&&(e.exports=n.locals);(0,a(4424).A)('343c4f96',n,!1,{ssrId:!0})},869:(e,t,a)=>{var n=a(1911);n.__esModule&&(n=n.default),'string'==typeof n&&(n=[[e.id,n,'']]),n.locals&&(e.exports=n.locals);(0,a(4424).A)('5237ca4f',n,!1,{ssrId:!0})},933:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(8093),o=a.n(n),r=a(3054),l=a.n(r)()(o());l.push([e.id,'.start-container[data-v-ef5b3c42]{color:#e0e0e0;max-width:1000px;margin:0 0;padding:16px}.start-container h3[data-v-ef5b3c42]{color:#007acc;margin-bottom:24px;font-size:20px}.section[data-v-ef5b3c42]{background-color:#2a2a2a;padding:20px;border-radius:12px;border:1px solid #404040;margin-bottom:20px}.section .input-group[data-v-ef5b3c42],.section .datetime-group[data-v-ef5b3c42]{margin-bottom:16px}.section .input-group[data-v-ef5b3c42]:last-child,.section .datetime-group[data-v-ef5b3c42]:last-child{margin-bottom:0}.section .input-group label[data-v-ef5b3c42],.section .datetime-group label[data-v-ef5b3c42]{display:block;margin-bottom:6px;color:#b0b0b0;font-weight:500;font-size:13px}.section .datetime-inputs[data-v-ef5b3c42]{display:flex;gap:8px;flex-wrap:wrap}.section .datetime-inputs .datetime-input[data-v-ef5b3c42]{display:flex;align-items:center;gap:4px}.section .datetime-inputs .datetime-input .form-input[data-v-ef5b3c42]{width:80px;text-align:center}.section .datetime-inputs .datetime-input .unit[data-v-ef5b3c42]{color:#b0b0b0;font-size:12px;font-weight:500;min-width:12px}.section .form-input[data-v-ef5b3c42],.section .form-textarea[data-v-ef5b3c42]{width:100%;padding:8px 12px;background:#2a2a2a;border:1px solid #404040;border-radius:4px;color:#e0e0e0;font-size:14px;font-family:inherit;transition:all .2s ease}.section .form-input[data-v-ef5b3c42]:focus,.section .form-textarea[data-v-ef5b3c42]:focus{outline:none;border-color:#007acc;box-shadow:0 0 0 2px rgba(0,122,204,.2)}.section .form-input[data-v-ef5b3c42]::placeholder,.section .form-textarea[data-v-ef5b3c42]::placeholder{color:#666}.section .form-textarea[data-v-ef5b3c42]{resize:vertical;min-height:60px;line-height:1.4}.item-actions[data-v-ef5b3c42]{display:flex;gap:8px;margin-top:12px}.item-actions .action-btn[data-v-ef5b3c42]{flex:1;display:flex;align-items:center;justify-content:center;gap:6px;min-width:0}.settings-actions[data-v-ef5b3c42]{display:flex;gap:8px;margin-top:20px}.settings-actions .action-btn[data-v-ef5b3c42]{flex:1;display:flex;align-items:center;justify-content:center;gap:6px;min-width:0}.settings-actions .import[data-v-ef5b3c42]{display:flex;align-items:center;justify-content:center}.start-action[data-v-ef5b3c42]{margin-top:20px;display:flex;justify-content:center}.start-action .action-btn[data-v-ef5b3c42]{min-width:120px;padding:12px 24px;font-size:16px;font-weight:600}.generated-result[data-v-ef5b3c42]{margin-top:8px;padding:8px;background-color:#1a1a1a;border:1px solid #404040;border-radius:6px}.generated-result label[data-v-ef5b3c42]{display:block;margin-bottom:4px;color:#007acc;font-size:12px;font-weight:500}.generated-result .generated-text[data-v-ef5b3c42]{color:#e0e0e0;font-size:14px;margin-bottom:8px;word-wrap:break-word;white-space:pre-wrap}.generated-result .replace-btn[data-v-ef5b3c42]{padding:6px 12px;background-color:#28a745;border:none;border-radius:4px;color:#fff;font-size:12px;font-weight:500;cursor:pointer;transition:background-color .2s ease}.generated-result .replace-btn[data-v-ef5b3c42]:hover{background-color:#218838}.action-btn[data-v-ef5b3c42]{padding:8px 16px;border:1px solid #555;background:#2a2a2a;color:#e0e0e0;border-radius:4px;cursor:pointer;font-size:13px;font-weight:500;transition:all .2s ease}.action-btn[data-v-ef5b3c42]:hover{background:#404040;border-color:#777}.action-btn.generate[data-v-ef5b3c42]{background-color:#28a745;border-color:#28a745;color:#fff}.action-btn.generate[data-v-ef5b3c42]:hover:not(:disabled){background-color:#218838;transform:translateY(-1px)}.action-btn.generate[data-v-ef5b3c42]:active{transform:translateY(0)}.action-btn.generate[data-v-ef5b3c42]:disabled{background-color:#666;cursor:not-allowed;transform:none}.action-btn.apply[data-v-ef5b3c42]{background:linear-gradient(135deg,#28a745,#20c997);border-color:#28a745;color:#fff}.action-btn.apply[data-v-ef5b3c42]:hover:not(:disabled){background:linear-gradient(135deg,#218838,#1aa085);transform:translateY(-1px)}.action-btn.apply[data-v-ef5b3c42]:active{transform:translateY(0)}.action-btn.apply[data-v-ef5b3c42]:disabled{background-color:#666;cursor:not-allowed;transform:none}.action-btn.apply-all[data-v-ef5b3c42]{background:linear-gradient(135deg,#007acc,#005999);border-color:#007acc;color:#fff}.action-btn.apply-all[data-v-ef5b3c42]:hover:not(:disabled){background:linear-gradient(135deg,#005999,#004477);transform:translateY(-1px)}.action-btn.apply-all[data-v-ef5b3c42]:active{transform:translateY(0)}.action-btn.apply-all[data-v-ef5b3c42]:disabled{background-color:#666;cursor:not-allowed;transform:none}.action-btn.start[data-v-ef5b3c42]{background:linear-gradient(135deg,#28a745,#20c997);border-color:#28a745;color:#fff;box-shadow:0 2px 4px rgba(40,167,69,.3)}.action-btn.start[data-v-ef5b3c42]:hover:not(:disabled){background:linear-gradient(135deg,#218838,#1aa085);transform:translateY(-1px);box-shadow:0 4px 8px rgba(40,167,69,.4)}.action-btn.start[data-v-ef5b3c42]:active{transform:translateY(0)}.action-btn.start[data-v-ef5b3c42]:disabled{background:linear-gradient(135deg,#444,#333);border-color:#555;color:#888;box-shadow:none;cursor:not-allowed;transform:none;opacity:.6}.action-btn.start[data-v-ef5b3c42]:disabled::before{content:"ðŸ”’";margin-right:8px}.action-btn.export[data-v-ef5b3c42]{background:linear-gradient(135deg,#007acc,#005999);border-color:#007acc;color:#fff}.action-btn.export[data-v-ef5b3c42]:hover{background:linear-gradient(135deg,#005999,#004477);transform:translateY(-1px)}.action-btn.export[data-v-ef5b3c42]:active{transform:translateY(0)}.action-btn.import[data-v-ef5b3c42]{background:linear-gradient(135deg,#ffc107,#e0a800);border-color:#ffc107;color:#212529;cursor:pointer}.action-btn.import[data-v-ef5b3c42]:hover{background:linear-gradient(135deg,#e0a800,#d39e00);transform:translateY(-1px)}.action-btn.import[data-v-ef5b3c42]:active{transform:translateY(0)}@media (max-width:768px){.start-container[data-v-ef5b3c42]{padding:16px}.section[data-v-ef5b3c42]{padding:16px}.section .datetime-inputs[data-v-ef5b3c42]{gap:6px}.section .datetime-inputs .datetime-input .form-input[data-v-ef5b3c42]{width:70px}.section .datetime-inputs .datetime-input .unit[data-v-ef5b3c42]{font-size:11px;min-width:10px}.item-actions[data-v-ef5b3c42]{gap:6px}.item-actions .action-btn[data-v-ef5b3c42]{padding:6px 12px;font-size:12px}.settings-actions[data-v-ef5b3c42]{gap:6px}.settings-actions .action-btn[data-v-ef5b3c42]{padding:8px 12px;font-size:13px}.completion-status[data-v-ef5b3c42]{padding:12px}.completion-status .status-item[data-v-ef5b3c42]{padding:6px 8px;margin-bottom:6px}.completion-status .status-item .status-label[data-v-ef5b3c42]{font-size:13px}.completion-status .status-item .status-value[data-v-ef5b3c42]{font-size:13px}.start-action .action-btn[data-v-ef5b3c42]{min-width:100px;padding:10px 20px;font-size:14px}}.loading-spinner[data-v-ef5b3c42]{display:inline-block;width:16px;height:16px;border:2px solid #fff;border-top:2px solid rgba(0,0,0,0);border-radius:50%;animation:spin-ef5b3c42 1s linear infinite;flex-shrink:0}@keyframes spin-ef5b3c42{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.completion-status[data-v-ef5b3c42]{margin-top:20px;padding:16px;background-color:#2a2a2a;border-radius:12px;border:1px solid #404040}.completion-status .status-item[data-v-ef5b3c42]{display:flex;justify-content:space-between;align-items:center;padding:8px 12px;margin-bottom:8px;border-radius:6px;background-color:#1a1a1a;border:1px solid #555;transition:all .2s ease}.completion-status .status-item[data-v-ef5b3c42]:last-child{margin-bottom:0}.completion-status .status-item.completed[data-v-ef5b3c42]{background-color:#0f2a0f;border-color:#28a745}.completion-status .status-item.completed .status-label[data-v-ef5b3c42]{color:#4ade80}.completion-status .status-item.completed .status-value[data-v-ef5b3c42]{color:#28a745;font-weight:600}.completion-status .status-item[data-v-ef5b3c42]:not(.completed){background-color:#2a0f0f;border-color:#dc3545}.completion-status .status-item:not(.completed) .status-label[data-v-ef5b3c42]{color:#fca5a5}.completion-status .status-item:not(.completed) .status-value[data-v-ef5b3c42]{color:#dc3545;font-weight:600}.completion-status .status-item .status-label[data-v-ef5b3c42]{font-size:14px;font-weight:500}.completion-status .status-item .status-value[data-v-ef5b3c42]{font-size:14px}','']);const i=l},1038:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(8093),o=a.n(n),r=a(3054),l=a.n(r)()(o());l.push([e.id,'.character-tab-container[data-v-684d53c6]{width:100%;height:100%;display:flex;flex-direction:column;background-color:#1a1a1a;color:#e0e0e0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif}.add-character-button[data-v-684d53c6]{padding:8px 16px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:background-color .2s;background:#007acc;color:#fff;margin-top:12px}.add-character-button[data-v-684d53c6]:hover{background:#005a99}.character-content[data-v-684d53c6],.character-detail-content[data-v-684d53c6]{flex:1;padding:12px;gap:16px;overflow-y:auto;display:flex;flex-direction:column;min-height:var(--v1299b277);max-height:var(--v1299b277)}.character-content[data-v-684d53c6]::-webkit-scrollbar,.character-detail-content[data-v-684d53c6]::-webkit-scrollbar{width:8px}.character-content[data-v-684d53c6]::-webkit-scrollbar-track,.character-detail-content[data-v-684d53c6]::-webkit-scrollbar-track{background:#2a2a2a;border-radius:4px}.character-content[data-v-684d53c6]::-webkit-scrollbar-thumb,.character-detail-content[data-v-684d53c6]::-webkit-scrollbar-thumb{background:#555;border-radius:4px}.character-content[data-v-684d53c6]::-webkit-scrollbar-thumb:hover,.character-detail-content[data-v-684d53c6]::-webkit-scrollbar-thumb:hover{background:#666}.character-section[data-v-684d53c6]{margin-bottom:24px}.character-section[data-v-684d53c6]:last-child{margin-bottom:0}.section-title[data-v-684d53c6]{font-size:18px;font-weight:600;color:#007acc;margin:0 0 12px 0;padding-bottom:8px;border-bottom:2px solid #007acc}.character-list[data-v-684d53c6]{display:flex;flex-direction:column;gap:8px}.character-item[data-v-684d53c6]{background:#252525;padding:12px 16px;border-radius:8px;border:1px solid #404040;display:flex;flex-direction:row;align-items:center;gap:16px;font-size:14px;transition:background-color .2s}.character-item.clickable[data-v-684d53c6]{cursor:pointer}.character-item.clickable[data-v-684d53c6]:hover{background:#2a2a2a;border-color:#555}.toggle-status-button[data-v-684d53c6]{background:#007acc;color:#fff;border:none;border-radius:4px;width:24px;height:24px;cursor:pointer;font-size:14px;font-weight:bold;display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:background-color .2s}.toggle-status-button[data-v-684d53c6]:hover{background:#005a99}.toggle-status-button[data-v-684d53c6]:active{background:#004080}.character-id[data-v-684d53c6]{color:#fff;font-weight:700;min-width:40px;text-align:center;padding:6px 10px;border-radius:6px;font-size:14px;display:flex;align-items:center;justify-content:center;height:24px;text-shadow:0 1px 2px rgba(0,0,0,.3)}.user-id[data-v-684d53c6]{color:#fff;font-weight:700;min-width:40px;text-align:center;padding:6px 10px;border-radius:6px;font-size:14px;display:flex;align-items:center;justify-content:center;height:24px;width:80px;text-shadow:0 1px 2px rgba(0,0,0,.3)}.character-name[data-v-684d53c6]{color:#e0e0e0;font-weight:500;text-align:center;flex:1}.user-name[data-v-684d53c6]{color:#e0e0e0;font-weight:500;flex:1}.character-info[data-v-684d53c6]{display:flex;flex-direction:column;gap:8px;flex-shrink:0;min-width:0;width:80px}.user-character-info[data-v-684d53c6]{flex-direction:row;align-items:center;-moz-column-gap:16px;column-gap:16px;height:auto;width:auto}.character-progress-bars[data-v-684d53c6]{display:flex;flex-direction:column;gap:4px;flex:1;min-width:0}.character-progress-bars[data-v-684d53c6] .progress-bar-wrapper{height:16px}.character-progress-bars[data-v-684d53c6] .progress-bar-value{font-size:12px}.no-characters-message[data-v-684d53c6]{background:#252525;padding:16px 12px;border-radius:6px;border:1px solid #404040;color:#888;text-align:center;font-size:14px;font-style:italic}.character-header[data-v-684d53c6]{text-align:center;position:relative}.character-detail-name[data-v-684d53c6]{font-size:24px;font-weight:700;color:#007acc;margin:0;text-shadow:0 2px 4px rgba(0,0,0,.3)}.header-buttons[data-v-684d53c6]{position:absolute;top:0;left:0;display:flex;gap:8px}.edit-button[data-v-684d53c6],.delete-button[data-v-684d53c6]{padding:8px 16px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:background-color .2s;background:#007acc;color:#fff}.edit-button[data-v-684d53c6]:hover,.delete-button[data-v-684d53c6]:hover{background:#005a99}.delete-button[data-v-684d53c6]{background:#f44336}.delete-button[data-v-684d53c6]:hover{background:#da190b}.back-button[data-v-684d53c6]{position:absolute;top:0;right:0;background:#007acc;color:#fff;border:none;padding:8px 12px;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;transition:background-color .2s}.back-button[data-v-684d53c6]:hover{background:#005a99}.attributes-grid[data-v-684d53c6]{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px;margin-bottom:20px}.attribute-item[data-v-684d53c6]{background:#252525;padding:12px;border-radius:8px;text-align:center;border:1px solid #404040}.attribute-item.full-width[data-v-684d53c6]{grid-column:1/-1;text-align:left;padding:16px}.attribute-item.horizontal[data-v-684d53c6]{display:flex;justify-content:space-between;align-items:center;text-align:left}.attribute-item.horizontal .attribute-label[data-v-684d53c6]{margin-bottom:0;flex-shrink:0}.attribute-item.horizontal .attribute-value[data-v-684d53c6]{margin-left:auto}.attribute-item.horizontal .attribute-input[data-v-684d53c6]{margin-left:8px}.attribute-item.birthday-fullwidth[data-v-684d53c6]{display:flex;justify-content:space-between;align-items:center;text-align:left}.attribute-item.birthday-fullwidth .attribute-label[data-v-684d53c6]{margin-bottom:0;flex-shrink:0}.attribute-item.birthday-fullwidth .attribute-value[data-v-684d53c6]{margin-left:auto}.attribute-item.birthday-fullwidth .birthday-edit-container[data-v-684d53c6]{margin-left:auto;justify-content:flex-end}.attribute-item.mood-horny-layout[data-v-684d53c6]{display:flex;justify-content:space-between;align-items:center;text-align:left}.attribute-item.mood-horny-layout .attribute-label[data-v-684d53c6]{margin-bottom:0;flex-shrink:0}.attribute-item.mood-horny-layout .attribute-value[data-v-684d53c6]{margin-left:auto}.attribute-item.mood-horny-layout .attribute-input[data-v-684d53c6]{margin-left:auto;width:auto;min-width:80px}.attribute-item .progress-edit-container[data-v-684d53c6]{display:flex;justify-content:space-between;align-items:center;gap:12px}.attribute-item .progress-edit-container .attribute-label[data-v-684d53c6]{margin-bottom:0;flex-shrink:0}.attribute-item .progress-edit-container .attribute-input[data-v-684d53c6]{width:auto;min-width:80px}.attribute-label[data-v-684d53c6]{display:block;font-size:12px;color:#888;margin-bottom:6px;text-transform:uppercase;letter-spacing:.5px;font-weight:500}.attribute-label.unit-label[data-v-684d53c6]{text-transform:none}.required-asterisk[data-v-684d53c6]{color:#f44336;font-weight:bold;margin-left:2px}.attribute-value[data-v-684d53c6]{display:block;font-size:16px;font-weight:600;color:#e0e0e0}.attribute-value.money[data-v-684d53c6]{color:#4caf50;font-weight:700}.attribute-value.no-bold[data-v-684d53c6]{font-weight:400}.relations-section[data-v-684d53c6],.inventory-section[data-v-684d53c6],.friendships-section[data-v-684d53c6],.loves-section[data-v-684d53c6]{margin-bottom:16px}.relations-section[data-v-684d53c6]:last-child,.inventory-section[data-v-684d53c6]:last-child,.friendships-section[data-v-684d53c6]:last-child,.loves-section[data-v-684d53c6]:last-child{margin-bottom:0}.list-container[data-v-684d53c6],.relations-list[data-v-684d53c6],.inventory-list[data-v-684d53c6],.friendships-list[data-v-684d53c6],.loves-list[data-v-684d53c6],.relations-edit-list[data-v-684d53c6],.inventory-edit-list[data-v-684d53c6],.friendships-edit-list[data-v-684d53c6],.loves-edit-list[data-v-684d53c6]{display:flex;flex-direction:column;gap:8px}.relation-item[data-v-684d53c6]{background:#252525;padding:10px 12px;border-radius:6px;border:1px solid #404040;font-size:14px;color:#e0e0e0;line-height:1.4}.friendship-item[data-v-684d53c6],.love-item[data-v-684d53c6]{background:#252525;padding:12px;border-radius:6px;border:1px solid #404040;display:flex;flex-direction:row;align-items:center;gap:12px}.relation-highlight[data-v-684d53c6]{color:#fff;font-weight:500}.friendship-name[data-v-684d53c6],.love-name[data-v-684d53c6]{font-size:14px;color:#e0e0e0;line-height:1.4;white-space:nowrap;flex-shrink:0}.friendship-highlight[data-v-684d53c6],.love-highlight[data-v-684d53c6]{color:#fff;font-weight:500}.connector[data-v-684d53c6]{color:#888;font-weight:400}.edit-item[data-v-684d53c6]{background:#252525;padding:10px 12px;border-radius:6px;border:1px solid #404040;display:flex;align-items:center;gap:8px;flex-wrap:wrap}.edit-connector[data-v-684d53c6]{color:#888;font-weight:400;font-size:14px;white-space:nowrap}.input-field[data-v-684d53c6]{background:#333;border:1px solid #555;border-radius:4px;color:#e0e0e0;padding:4px 8px;font-size:14px;flex:1;min-width:50px}.input-field[data-v-684d53c6]:focus{outline:none;border-color:#007acc}.relation-select[data-v-684d53c6],.inventory-select[data-v-684d53c6]{background:#333;border:1px solid #555;border-radius:4px;color:#e0e0e0;padding:4px 8px;font-size:14px;min-width:120px;flex-shrink:0}.relation-select[data-v-684d53c6]:focus,.inventory-select[data-v-684d53c6]:focus{outline:none;border-color:#007acc}.relation-select option[data-v-684d53c6],.inventory-select option[data-v-684d53c6]{background:#333;color:#e0e0e0}.relation-select option[data-v-684d53c6]:disabled,.inventory-select option[data-v-684d53c6]:disabled{color:#888;font-style:italic}.btn[data-v-684d53c6],.action-btn[data-v-684d53c6],.relation-remove-btn[data-v-684d53c6],.add-relation-btn[data-v-684d53c6],.friendship-remove-btn[data-v-684d53c6],.add-friendship-btn[data-v-684d53c6],.love-remove-btn[data-v-684d53c6],.add-love-btn[data-v-684d53c6],.add-inventory-btn[data-v-684d53c6]{background:#007acc;color:#fff;border:none;padding:8px 16px;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;margin-top:8px;transition:background-color .2s}.btn[data-v-684d53c6]:hover,.action-btn[data-v-684d53c6]:hover,.relation-remove-btn[data-v-684d53c6]:hover,.add-relation-btn[data-v-684d53c6]:hover,.friendship-remove-btn[data-v-684d53c6]:hover,.add-friendship-btn[data-v-684d53c6]:hover,.love-remove-btn[data-v-684d53c6]:hover,.add-love-btn[data-v-684d53c6]:hover,.add-inventory-btn[data-v-684d53c6]:hover{background:#005a99}.inventory-item[data-v-684d53c6]{background:#252525;padding:10px 12px;border-radius:6px;border:1px solid #404040;display:flex;flex-direction:column;gap:6px}.inventory-first-row[data-v-684d53c6]{display:flex;justify-content:space-between;align-items:center}.item-name-id[data-v-684d53c6]{font-weight:500;color:#fff;font-size:14px}.item-quantity[data-v-684d53c6]{font-weight:600;color:#e0e0e0;background:#007acc;padding:2px 8px;border-radius:12px;font-size:12px}.storage-indicator[data-v-684d53c6]{font-weight:600;color:#fff;background:#4caf50;padding:2px 8px;border-radius:12px;font-size:12px}[data-v-684d53c6] .inventory-item-tag{background:#4caf50;color:#fff;padding:2px 6px;border-radius:4px;font-size:12px;display:flex;align-items:center;gap:4px;white-space:nowrap;flex-shrink:0}[data-v-684d53c6] .storage-item-tag{background:#ff9800;color:#fff;padding:2px 6px;border-radius:4px;font-size:12px;display:flex;align-items:center;gap:4px;white-space:nowrap;flex-shrink:0}.inventory-second-row[data-v-684d53c6]{font-size:12px;color:#a0a0a0;line-height:1.4}.inventory-third-row[data-v-684d53c6]{display:flex;flex-direction:column;gap:4px}.no-inventory[data-v-684d53c6]{color:#888;font-style:italic;font-size:13px}.inventory-items[data-v-684d53c6]{display:flex;flex-wrap:wrap;gap:4px}.inventory-edit-item[data-v-684d53c6]{background:#252525;padding:10px 12px;border-radius:6px;border:1px solid #404040;display:flex;align-items:center;gap:8px;flex-wrap:wrap}.inventory-edit-connector[data-v-684d53c6]{color:#888;font-weight:400;font-size:14px;white-space:nowrap}.inventory-quantity-input[data-v-684d53c6]{background:#333;border:1px solid #555;border-radius:4px;color:#e0e0e0;padding:4px 8px;font-size:14px;width:80px;text-align:center}.inventory-quantity-input[data-v-684d53c6]:focus{outline:none;border-color:#007acc}.inventory-remove-btn[data-v-684d53c6]{background:#f44336;color:#fff;border:none;border-radius:4px;width:24px;height:24px;cursor:pointer;font-size:16px;font-weight:bold;display:flex;align-items:center;justify-content:center;flex-shrink:0;margin-left:auto}.inventory-remove-btn[data-v-684d53c6]:hover{background:#da190b}.attribute-input[data-v-684d53c6]{background:#333;border:1px solid #555;border-radius:4px;color:#e0e0e0;padding:4px 8px;font-size:14px;width:100%}.attribute-input[data-v-684d53c6]:focus{outline:none;border-color:#007acc}.birthday-inputs[data-v-684d53c6]{display:flex;align-items:center;gap:2px;width:auto;margin-left:auto}.birthday-edit-container[data-v-684d53c6]{display:flex;justify-content:flex-start;width:100%}.birthday-input-group[data-v-684d53c6]{display:flex;align-items:center;gap:4px;padding:4px 0}.birthday-month[data-v-684d53c6],.birthday-date[data-v-684d53c6]{width:50px;flex-shrink:0}.birthday-separator[data-v-684d53c6]{color:#888;font-size:14px;white-space:nowrap}.attribute-textarea[data-v-684d53c6]{background:#333;border:1px solid #555;border-radius:4px;color:#e0e0e0;padding:8px;font-size:14px;width:100%;min-height:60px;resize:vertical;font-family:inherit}.attribute-textarea[data-v-684d53c6]:focus{outline:none;border-color:#007acc}.edit-buttons[data-v-684d53c6]{display:flex;justify-content:center;gap:16px;margin-top:20px;padding-top:20px;border-top:1px solid #404040}.confirm-button[data-v-684d53c6],.cancel-button[data-v-684d53c6]{padding:8px 16px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:background-color .2s;background:#007acc;color:#fff}.confirm-button[data-v-684d53c6]:hover,.cancel-button[data-v-684d53c6]:hover{background:#005a99}.confirm-button[data-v-684d53c6]{background:#4caf50;color:#fff}.confirm-button[data-v-684d53c6]:hover:not(:disabled){background:#45a049}.confirm-button[data-v-684d53c6]:disabled{background:#666;cursor:not-allowed;opacity:.6}.cancel-button[data-v-684d53c6]{background:#f44336;color:#fff}.cancel-button[data-v-684d53c6]:hover{background:#da190b}@media (max-width:768px){.character-content[data-v-684d53c6],.character-detail-content[data-v-684d53c6]{padding:12px}.character-name[data-v-684d53c6]{font-size:24px}.attributes-grid[data-v-684d53c6]{grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:8px}.attribute-item[data-v-684d53c6]{padding:10px}.attribute-item.full-width[data-v-684d53c6]{padding:12px}.attribute-value[data-v-684d53c6]{font-size:14px}.inventory-item[data-v-684d53c6]{gap:4px}[data-v-684d53c6] .inventory-item-tag{font-size:12px;padding:2px 6px}.inventory-third-row[data-v-684d53c6] .inventory-item-tag{font-size:12px;padding:2px 6px}.character-item[data-v-684d53c6]{padding:10px 12px;gap:12px;flex-wrap:wrap}.user-character-info[data-v-684d53c6]{-moz-column-gap:16px;column-gap:16px;height:auto}.character-progress-bars[data-v-684d53c6]{gap:2px;flex:1;min-width:120px}.character-id[data-v-684d53c6]{min-width:35px;padding:3px 6px;font-size:11px;height:16px}.user-id[data-v-684d53c6]{min-width:35px;padding:3px 6px;font-size:11px;height:16px}.character-name[data-v-684d53c6]{font-size:13px;line-height:1.2}}.no-message[data-v-684d53c6]{background:#252525;padding:16px 12px;border-radius:6px;border:1px solid #404040;color:#888;text-align:center;font-size:14px;font-style:italic}','']);const i=l},1240:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(8093),o=a.n(n),r=a(3054),l=a.n(r)()(o());l.push([e.id,'.initializations-container[data-v-252c6a8b]{display:flex;flex-direction:column;width:100%;height:100%;background-color:#1a1a1a;color:#e0e0e0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif}.main-content[data-v-252c6a8b]{flex:1;display:flex;flex-direction:column;overflow:hidden}.initialization-area[data-v-252c6a8b]{display:flex;flex-direction:column;flex:1;background-color:#1a1a1a;overflow-y:auto}.tab-navigation[data-v-252c6a8b]{display:flex;background-color:#2a2a2a;border-bottom:1px solid #404040;flex-shrink:0}.tab-navigation.top[data-v-252c6a8b]{border-top:none}.tab-navigation.first-row[data-v-252c6a8b]{border-bottom:none}.tab-navigation.second-row[data-v-252c6a8b]{border-top:none}.tab-button[data-v-252c6a8b]{flex:1;padding:16px;background:none;border:none;color:#b0b0b0;font-size:16px;cursor:pointer;transition:all .2s ease}.tab-button.active[data-v-252c6a8b]{color:#007acc;background-color:#3a3a3a}.tab-button[data-v-252c6a8b]:hover{background-color:#3a3a3a}@media (max-width:768px){.tab-button[data-v-252c6a8b]{padding:14px;font-size:14px}}','']);const i=l},1282:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(8093),o=a.n(n),r=a(3054),l=a.n(r)()(o());l.push([e.id,'.user-profile-container[data-v-76149319]{padding:20px;color:#e0e0e0;max-width:1000px;margin:0 0;min-height:600px}.user-profile-container h3[data-v-76149319]{color:#007acc;margin-bottom:24px;font-size:20px}.user-profile-container h4[data-v-76149319]{color:#b0b0b0;margin-bottom:16px;font-size:16px;border-bottom:1px solid #404040;padding-bottom:8px}.section[data-v-76149319]{background-color:#2a2a2a;padding:20px;border-radius:12px;border:1px solid #404040;margin-bottom:20px}.form-grid[data-v-76149319]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px}.input-group.full-width[data-v-76149319]{grid-column:1/-1}.birthday-inputs[data-v-76149319]{display:flex;gap:8px}.birthday-inputs .birthday-input[data-v-76149319]{flex:1;padding:12px 16px;background-color:#1a1a1a;border:1px solid #404040;border-radius:8px;color:#e0e0e0;font-size:14px;outline:none;transition:border-color .2s ease}.birthday-inputs .birthday-input[data-v-76149319]:focus{border-color:#007acc}.birthday-inputs .birthday-input[data-v-76149319]::placeholder{color:#666}.text-input[data-v-76149319]{width:100%;padding:12px 16px;background-color:#1a1a1a;border:1px solid #404040;border-radius:8px;color:#e0e0e0;font-size:14px;outline:none;transition:border-color .2s ease}.text-input[data-v-76149319]:focus{border-color:#007acc}.text-input[data-v-76149319]::placeholder{color:#666}.display-text[data-v-76149319]{width:100%;padding:12px 16px;background-color:rgba(0,0,0,0);border:1px dashed #555;border-radius:8px;color:#888;font-size:14px;display:flex;align-items:center;font-style:italic}.text-area[data-v-76149319]{width:100%;padding:12px 16px;background-color:#1a1a1a;border:1px solid #404040;border-radius:8px;color:#e0e0e0;font-size:14px;font-family:inherit;outline:none;resize:vertical;min-height:80px;transition:border-color .2s ease}.text-area[data-v-76149319]:focus{border-color:#007acc}.text-area[data-v-76149319]::placeholder{color:#666}.input-group label[data-v-76149319]{display:block;margin-bottom:8px;color:#b0b0b0;font-weight:500}.generated-result[data-v-76149319]{margin-top:8px;padding:8px;background-color:#1a1a1a;border:1px solid #404040;border-radius:6px}.generated-result label[data-v-76149319]{display:block;margin-bottom:4px;color:#007acc;font-size:12px;font-weight:500}.generated-result .generated-text[data-v-76149319]{color:#e0e0e0;font-size:14px;margin-bottom:8px;word-wrap:break-word}.generated-result .replace-btn[data-v-76149319]{padding:6px 12px;background-color:#28a745;border:none;border-radius:4px;color:#fff;font-size:12px;font-weight:500;cursor:pointer;transition:background-color .2s ease}.generated-result .replace-btn[data-v-76149319]:hover{background-color:#218838}.action-section[data-v-76149319]{display:flex;justify-content:center;gap:16px;padding:20px 0}.generate-btn[data-v-76149319]{padding:14px 32px;background-color:#28a745;border:none;border-radius:8px;color:#fff;font-size:16px;font-weight:500;cursor:pointer;transition:background-color .2s ease;display:flex;align-items:center;justify-content:center;gap:8px}.generate-btn[data-v-76149319]:hover:not(:disabled){background-color:#218838}.generate-btn[data-v-76149319]:disabled{background-color:#666;cursor:not-allowed}.loading-spinner[data-v-76149319]{width:16px;height:16px;border:2px solid #fff;border-top:2px solid rgba(0,0,0,0);border-radius:50%;animation:spin-76149319 1s linear infinite}@keyframes spin-76149319{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.apply-all-btn[data-v-76149319]{padding:14px 32px;background-color:#007acc;border:none;border-radius:8px;color:#fff;font-size:16px;font-weight:500;cursor:pointer;transition:background-color .2s ease}.apply-all-btn[data-v-76149319]:hover:not(:disabled){background-color:#0056b3}.apply-all-btn[data-v-76149319]:disabled{background-color:#666;cursor:not-allowed}.relations-list[data-v-76149319]{display:flex;flex-direction:column;gap:8px}.relation-item[data-v-76149319]{display:flex;align-items:center;flex-wrap:wrap;gap:8px;padding:12px;background:linear-gradient(135deg,#1e1e1e 0%,#252525 100%);border:1px solid #555;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.2);transition:border-color .2s ease}.relation-item[data-v-76149319]:hover{border-color:#666}.relation-item .relation-target[data-v-76149319]{color:#4fc3f7;font-weight:600;font-size:14px;min-width:60px;padding:4px 8px;background-color:#2a2a2a;border-radius:4px;text-align:center;flex-shrink:0}.relation-item .relation-input[data-v-76149319]{flex:1;min-width:120px;padding:10px 14px;background-color:#1a1a1a;border:1px solid #404040;border-radius:6px;color:#e0e0e0;font-size:14px;outline:none;transition:all .2s ease}.relation-item .relation-input[data-v-76149319]:focus{border-color:#007acc;box-shadow:0 0 0 2px rgba(0,122,204,.2)}.relation-item .relation-input[data-v-76149319]::placeholder{color:#888}.relation-item .remove-relation-btn[data-v-76149319]{background:linear-gradient(135deg,#dc3545 0%,#c82333 100%);border:1px solid #dc3545;border-radius:6px;color:#fff;font-size:16px;font-weight:bold;width:24px;height:24px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 4px rgba(220,53,69,.3);flex-shrink:0}.relation-item .remove-relation-btn[data-v-76149319]:hover{background:linear-gradient(135deg,#c82333 0%,#a02622 100%);border-color:#bd2130;transform:translateY(-1px);box-shadow:0 4px 8px rgba(220,53,69,.4)}.relation-item .remove-relation-btn[data-v-76149319]:active{transform:translateY(0)}.add-relation[data-v-76149319]{display:flex;flex-wrap:wrap;gap:8px;align-items:center;padding:12px;background:linear-gradient(135deg,#252525 0%,#2a2a2a 100%);border:1px solid #555;border-radius:8px;margin-top:12px}.add-relation .relation-select[data-v-76149319]{flex:1;min-width:150px;padding:12px 16px;background-color:#1a1a1a;border:1px solid #404040;border-radius:6px;color:#e0e0e0;font-size:14px;outline:none;transition:all .2s ease}.add-relation .relation-select[data-v-76149319]:focus{border-color:#007acc;box-shadow:0 0 0 2px rgba(0,122,204,.2)}.add-relation .add-relation-btn[data-v-76149319]{padding:10px 16px;background:linear-gradient(135deg,#28a745 0%,#20c997 100%);border:1px solid #28a745;border-radius:6px;color:#fff;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 4px rgba(40,167,69,.3);flex-shrink:0}.add-relation .add-relation-btn[data-v-76149319]:hover:not(:disabled){background:linear-gradient(135deg,#218838 0%,#1aa085 100%);border-color:#218838;transform:translateY(-1px);box-shadow:0 4px 8px rgba(40,167,69,.4)}.add-relation .add-relation-btn[data-v-76149319]:disabled{background-color:#666;border-color:#666;cursor:not-allowed;box-shadow:none;transform:none}.add-relation .add-relation-btn[data-v-76149319]:active{transform:translateY(0)}.inventory-list[data-v-76149319]{display:flex;flex-direction:column;gap:8px}.inventory-item[data-v-76149319]{display:flex;align-items:center;flex-wrap:wrap;gap:8px;padding:12px;background:linear-gradient(135deg,#1e1e1e 0%,#252525 100%);border:1px solid #555;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.2);transition:border-color .2s ease}.inventory-item[data-v-76149319]:hover{border-color:#666}.inventory-item .inventory-target[data-v-76149319]{color:#4fc3f7;font-weight:600;font-size:14px;min-width:60px;padding:4px 8px;background-color:#2a2a2a;border-radius:4px;text-align:center;flex-shrink:0}.inventory-item .inventory-input[data-v-76149319]{flex:1;min-width:80px;padding:10px 14px;background-color:#1a1a1a;border:1px solid #404040;border-radius:6px;color:#e0e0e0;font-size:14px;outline:none;transition:all .2s ease}.inventory-item .inventory-input[data-v-76149319]:focus{border-color:#007acc;box-shadow:0 0 0 2px rgba(0,122,204,.2)}.inventory-item .inventory-input[data-v-76149319]::placeholder{color:#888}.inventory-item .remove-inventory-btn[data-v-76149319]{background:linear-gradient(135deg,#dc3545 0%,#c82333 100%);border:1px solid #dc3545;border-radius:6px;color:#fff;font-size:16px;font-weight:bold;width:24px;height:24px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 4px rgba(220,53,69,.3);flex-shrink:0}.inventory-item .remove-inventory-btn[data-v-76149319]:hover{background:linear-gradient(135deg,#c82333 0%,#a02622 100%);border-color:#bd2130;transform:translateY(-1px);box-shadow:0 4px 8px rgba(220,53,69,.4)}.inventory-item .remove-inventory-btn[data-v-76149319]:active{transform:translateY(0)}.add-inventory[data-v-76149319]{display:flex;flex-wrap:wrap;gap:8px;align-items:center;padding:12px;background:linear-gradient(135deg,#252525 0%,#2a2a2a 100%);border:1px solid #555;border-radius:8px;margin-top:12px}.add-inventory .inventory-select[data-v-76149319]{flex:1;min-width:150px;padding:12px 16px;background-color:#1a1a1a;border:1px solid #404040;border-radius:6px;color:#e0e0e0;font-size:14px;outline:none;transition:all .2s ease}.add-inventory .inventory-select[data-v-76149319]:focus{border-color:#007acc;box-shadow:0 0 0 2px rgba(0,122,204,.2)}.add-inventory .quantity-input[data-v-76149319]{padding:12px 16px;background-color:#1a1a1a;border:1px solid #404040;border-radius:6px;color:#e0e0e0;font-size:14px;outline:none;transition:all .2s ease;width:80px;flex:1;min-width:80px}.add-inventory .quantity-input[data-v-76149319]:focus{border-color:#007acc;box-shadow:0 0 0 2px rgba(0,122,204,.2)}.add-inventory .quantity-input[data-v-76149319]::placeholder{color:#888}.add-inventory .quantity-input[data-v-76149319]:disabled{background-color:#333;color:#666;cursor:not-allowed}.add-inventory .add-inventory-btn[data-v-76149319]{padding:10px 16px;background:linear-gradient(135deg,#28a745 0%,#20c997 100%);border:1px solid #28a745;border-radius:6px;color:#fff;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 4px rgba(40,167,69,.3);flex-shrink:0}.add-inventory .add-inventory-btn[data-v-76149319]:hover:not(:disabled){background:linear-gradient(135deg,#218838 0%,#1aa085 100%);border-color:#218838;transform:translateY(-1px);box-shadow:0 4px 8px rgba(40,167,69,.4)}.add-inventory .add-inventory-btn[data-v-76149319]:disabled{background-color:#666;border-color:#666;cursor:not-allowed;box-shadow:none;transform:none}.add-inventory .add-inventory-btn[data-v-76149319]:active{transform:translateY(0)}@media (max-width:768px){.user-profile-container[data-v-76149319]{padding:16px}.section[data-v-76149319]{padding:16px}.form-grid[data-v-76149319]{grid-template-columns:1fr}.birthday-inputs[data-v-76149319]{flex-direction:column}}','']);const i=l},1454:(e,t,a)=>{var n=a(1240);n.__esModule&&(n=n.default),'string'==typeof n&&(n=[[e.id,n,'']]),n.locals&&(e.exports=n.locals);(0,a(4424).A)('705b007b',n,!1,{ssrId:!0})},1664:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(8093),o=a.n(n),r=a(3054),l=a.n(r)()(o());l.push([e.id,'.storage-tab-container[data-v-62b84623]{width:100%;height:100%;display:flex;flex-direction:column;background-color:#1a1a1a;color:#e0e0e0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif}.storage-content[data-v-62b84623]{flex:1;padding:16px;overflow-y:auto;display:flex;flex-direction:column;min-height:var(--v4efc9d77);max-height:var(--v4efc9d77)}.storage-content[data-v-62b84623]::-webkit-scrollbar{width:8px}.storage-content[data-v-62b84623]::-webkit-scrollbar-track{background:#2a2a2a;border-radius:4px}.storage-content[data-v-62b84623]::-webkit-scrollbar-thumb{background:#555;border-radius:4px}.storage-content[data-v-62b84623]::-webkit-scrollbar-thumb:hover{background:#666}.storage-section[data-v-62b84623]:last-child{margin-bottom:0}.section-title[data-v-62b84623]{font-size:18px;font-weight:600;color:#007acc;margin:0 0 12px 0;padding-bottom:8px;border-bottom:2px solid #007acc}.add-storage-button[data-v-62b84623]{padding:8px 16px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:background-color .2s;background:#007acc;color:#fff;margin-top:12px}.add-storage-button[data-v-62b84623]:hover{background:#005a99}.storage-list[data-v-62b84623]{display:flex;flex-direction:column;gap:8px}.storage-row[data-v-62b84623]{background:#252525;padding:12px 16px;border-radius:8px;border:1px solid #404040;display:flex;flex-direction:column;gap:8px;font-size:14px;transition:background-color .2s}.storage-row[data-v-62b84623]:hover{background:#2a2a2a;border-color:#555}.new-storage-row[data-v-62b84623]{background:#2a2a2a;border-color:#007acc;border-style:dashed}.storage-first-row[data-v-62b84623]{display:flex;justify-content:space-between;align-items:center;gap:12px}.storage-money-row[data-v-62b84623]{display:flex;justify-content:space-between;align-items:center;gap:8px;margin-top:6px}.storage-money-group[data-v-62b84623]{display:flex;align-items:center;gap:8px}.storage-money-label[data-v-62b84623]{font-weight:500;color:#a0a0a0;font-size:16px;min-width:40px}.storage-edit-actions[data-v-62b84623]{display:flex;gap:8px}.storage-id-name-group[data-v-62b84623]{display:flex;gap:12px;align-items:center;flex:1}.storage-id[data-v-62b84623]{font-weight:500;color:#007acc;font-size:14px}.storage-name[data-v-62b84623]{font-weight:500;color:#fff;font-size:16px}.storage-money[data-v-62b84623]{font-weight:500;color:#4caf50;font-size:16px}.storage-money-input[data-v-62b84623]{font-weight:500;color:#fff;font-size:16px;width:80px;flex-shrink:0}.storage-money-input-edit[data-v-62b84623]{background:#333;border:1px solid #555;border-radius:4px;padding:4px 8px}.storage-money-input-edit[data-v-62b84623]:focus{outline:none;border-color:#007acc}.storage-parent-display[data-v-62b84623]{display:flex;flex-wrap:wrap;gap:4px}.storage-parent-tag[data-v-62b84623]{background:#007acc;color:#fff;padding:4px 10px;border-radius:4px;font-size:13px;display:flex;align-items:center;gap:4px}.storage-inventory-display[data-v-62b84623]{display:flex;flex-direction:column;gap:4px}.no-inventory[data-v-62b84623]{color:#888;font-style:italic;font-size:13px}.inventory-items[data-v-62b84623]{display:flex;flex-wrap:wrap;gap:4px}.inventory-item-tag[data-v-62b84623]{background:#4caf50;color:#fff;padding:2px 6px;border-radius:4px;font-size:13px;display:flex;align-items:center;gap:4px;white-space:nowrap;flex-shrink:0}.storage-item-tag[data-v-62b84623]{background:#ff9800;color:#fff;padding:2px 6px;border-radius:4px;font-size:12px;display:flex;align-items:center;gap:4px;white-space:nowrap;flex-shrink:0}.storage-description[data-v-62b84623]{color:#a0a0a0;line-height:1.4;font-size:13px}.storage-actions[data-v-62b84623]{display:flex;gap:8px}.edit-storage-button[data-v-62b84623],.delete-storage-button[data-v-62b84623]{padding:6px 12px;border:none;border-radius:4px;font-size:12px;cursor:pointer;transition:background-color .2s}.edit-storage-button[data-v-62b84623]{background:#007acc;color:#fff}.edit-storage-button[data-v-62b84623]:hover{background:#005a99}.delete-storage-button[data-v-62b84623]{background:#f44336;color:#fff}.delete-storage-button[data-v-62b84623]:hover{background:#da190b}.storage-id-input[data-v-62b84623],.storage-name-input[data-v-62b84623],.storage-money-input[data-v-62b84623],.storage-description-input[data-v-62b84623]{background:#333;border:1px solid #555;border-radius:4px;color:#e0e0e0;font-size:14px;padding:4px 8px;width:35px;-webkit-appearance:none;appearance:none}.storage-id-input[data-v-62b84623]:focus,.storage-name-input[data-v-62b84623]:focus,.storage-money-input[data-v-62b84623]:focus,.storage-description-input[data-v-62b84623]:focus{outline:none;border-color:#007acc}.storage-id-input[data-v-62b84623]::-webkit-outer-spin-button,.storage-id-input[data-v-62b84623]::-webkit-inner-spin-button,.storage-name-input[data-v-62b84623]::-webkit-outer-spin-button,.storage-name-input[data-v-62b84623]::-webkit-inner-spin-button,.storage-money-input[data-v-62b84623]::-webkit-outer-spin-button,.storage-money-input[data-v-62b84623]::-webkit-inner-spin-button,.storage-description-input[data-v-62b84623]::-webkit-outer-spin-button,.storage-description-input[data-v-62b84623]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.storage-id-input[type=number][data-v-62b84623],.storage-name-input[type=number][data-v-62b84623],.storage-money-input[type=number][data-v-62b84623],.storage-description-input[type=number][data-v-62b84623]{-webkit-appearance:textfield;appearance:textfield}.storage-id-input[data-v-62b84623]{font-weight:500;color:#007acc;font-size:14px;width:50px;flex-shrink:0;text-align:center}.storage-name-input[data-v-62b84623]{font-weight:500;color:#fff;font-size:16px;width:120px;flex-shrink:0}.storage-parent-input-group[data-v-62b84623]{display:flex;flex-direction:column;gap:6px}.storage-inventory-input-group[data-v-62b84623]{display:flex;flex-direction:column;gap:6px}.selected-inventory[data-v-62b84623]{display:flex;flex-direction:column;gap:4px}.selected-inventory-item[data-v-62b84623]{display:flex;align-items:center;gap:8px;background:#333;padding:4px 8px;border-radius:4px}.item-name[data-v-62b84623]{flex:1;color:#e0e0e0;font-size:13px}.item-quantity-input[data-v-62b84623]{width:60px;background:#444;border:1px solid #555;border-radius:3px;color:#e0e0e0;padding:2px 4px;font-size:12px;text-align:center}.item-quantity-input[data-v-62b84623]:focus{outline:none;border-color:#007acc}.item-quantity-input[data-v-62b84623]::-webkit-outer-spin-button,.item-quantity-input[data-v-62b84623]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.item-quantity-input[type=number][data-v-62b84623]{-webkit-appearance:textfield;appearance:textfield}.inventory-edit-connector[data-v-62b84623]{color:#888;font-weight:400;font-size:14px;white-space:nowrap}.storage-indicator[data-v-62b84623]{font-weight:600;color:#fff;background:#4caf50;padding:2px 8px;border-radius:12px;font-size:12px}.remove-item-btn[data-v-62b84623]{background:none;border:none;color:#f44336;cursor:pointer;font-size:16px;line-height:1;padding:0;margin-left:4px}.remove-item-btn[data-v-62b84623]:hover{color:#da190b}.parent-select[data-v-62b84623],.item-select[data-v-62b84623]{background:#333;border:1px solid #555;border-radius:4px;color:#e0e0e0;font-size:13px;padding:4px 8px}.parent-select[data-v-62b84623]:focus,.item-select[data-v-62b84623]:focus{outline:none;border-color:#007acc}.storage-description-input[data-v-62b84623]{background:#333;border:1px solid #555;border-radius:4px;color:#e0e0e0;font-size:13px;padding:6px 8px;resize:vertical;min-height:60px;line-height:1.4;width:100%}.storage-description-input[data-v-62b84623]:focus{outline:none;border-color:#007acc}.confirm-button[data-v-62b84623],.cancel-button[data-v-62b84623]{padding:6px 12px;border:none;border-radius:4px;font-size:12px;cursor:pointer;transition:background-color .2s}.confirm-button[data-v-62b84623]{background:#4caf50;color:#fff}.confirm-button[data-v-62b84623]:hover:not(:disabled){background:#45a049}.confirm-button[data-v-62b84623]:disabled{background:#666;cursor:not-allowed;opacity:.6}.cancel-button[data-v-62b84623]{background:#f44336;color:#fff}.cancel-button[data-v-62b84623]:hover{background:#da190b}.no-storages-message[data-v-62b84623]{background:#252525;padding:16px 12px;border-radius:6px;border:1px solid #404040;color:#888;text-align:center;font-size:14px;font-style:italic}@media (max-width:768px){.storage-content[data-v-62b84623]{padding:12px}.section-title[data-v-62b84623]{font-size:18px}.storage-row[data-v-62b84623]{padding:10px 12px;gap:6px}.storage-first-row[data-v-62b84623]{gap:8px}.storage-money-row[data-v-62b84623]{gap:6px;margin-top:4px}.storage-money-group[data-v-62b84623]{gap:6px}.storage-money-label[data-v-62b84623]{font-size:15px;min-width:35px}.storage-name[data-v-62b84623]{font-size:15px}.storage-money[data-v-62b84623]{font-size:15px}.storage-money-input[data-v-62b84623]{font-size:15px;width:70px}.storage-edit-actions[data-v-62b84623]{gap:6px}.storage-description[data-v-62b84623]{font-size:12px}.storage-actions[data-v-62b84623]{gap:6px}.edit-storage-button[data-v-62b84623],.delete-storage-button[data-v-62b84623]{padding:5px 10px;font-size:11px}.storage-id-input[data-v-62b84623],.storage-name-input[data-v-62b84623],.storage-money-input[data-v-62b84623]{font-size:13px;padding:3px 6px}.storage-id-input[data-v-62b84623]{width:40px}.storage-name-input[data-v-62b84623]{width:100px}.parent-select[data-v-62b84623],.item-select[data-v-62b84623]{font-size:12px;padding:3px 6px}.selected-inventory-item[data-v-62b84623]{padding:3px 6px}.item-name[data-v-62b84623]{font-size:12px}.item-quantity-input[data-v-62b84623]{width:50px;font-size:11px;padding:2px 3px}.inventory-item-tag[data-v-62b84623],.storage-parent-tag[data-v-62b84623]{font-size:12px;padding:2px 6px}.storage-description-input[data-v-62b84623]{font-size:12px;padding:4px 6px;min-height:50px}.confirm-button[data-v-62b84623],.cancel-button[data-v-62b84623]{padding:5px 10px;font-size:11px}}','']);const i=l},1789:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(8093),o=a.n(n),r=a(3054),l=a.n(r)()(o());l.push([e.id,'.promise-tab-container[data-v-25ffb8d9]{width:100%;height:100%;display:flex;flex-direction:column;background-color:#1a1a1a;color:#e0e0e0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif}.promise-content[data-v-25ffb8d9]{flex:1;padding:16px;overflow-y:auto;display:flex;flex-direction:column;min-height:var(--v592213a0);max-height:var(--v592213a0)}.promise-content[data-v-25ffb8d9]::-webkit-scrollbar{width:8px}.promise-content[data-v-25ffb8d9]::-webkit-scrollbar-track{background:#2a2a2a;border-radius:4px}.promise-content[data-v-25ffb8d9]::-webkit-scrollbar-thumb{background:#555;border-radius:4px}.promise-content[data-v-25ffb8d9]::-webkit-scrollbar-thumb:hover{background:#666}.promise-section[data-v-25ffb8d9]:last-child{margin-bottom:0}.section-title[data-v-25ffb8d9]{font-size:18px;font-weight:600;color:#007acc;margin:0 0 12px 0;padding-bottom:8px;border-bottom:2px solid #007acc}.add-promise-button[data-v-25ffb8d9]{padding:8px 16px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:background-color .2s;background:#007acc;color:#fff;margin-top:12px}.add-promise-button[data-v-25ffb8d9]:hover{background:#005a99}.promise-list[data-v-25ffb8d9]{display:flex;flex-direction:column;gap:8px}.promise-row[data-v-25ffb8d9]{background:#252525;padding:12px 16px;border-radius:8px;border:1px solid #404040;display:flex;flex-direction:column;gap:8px;font-size:14px;transition:background-color .2s}.promise-row[data-v-25ffb8d9]:hover{background:#2a2a2a;border-color:#555}.new-promise-row[data-v-25ffb8d9]{background:#2a2a2a;border-color:#007acc;border-style:dashed}.promise-first-row[data-v-25ffb8d9]{display:flex;justify-content:space-between;align-items:center;gap:12px}.promise-location-row[data-v-25ffb8d9]{display:flex;justify-content:space-between;align-items:center;gap:8px;margin-top:6px}.promise-location-group[data-v-25ffb8d9]{display:flex;align-items:center;gap:8px}.promise-location-label[data-v-25ffb8d9]{font-weight:500;color:#a0a0a0;font-size:13px;min-width:40px}.promise-edit-actions[data-v-25ffb8d9]{display:flex;gap:8px}.promise-id-name-group[data-v-25ffb8d9]{display:flex;gap:12px;align-items:center;flex:1}.promise-id[data-v-25ffb8d9]{font-weight:500;color:#007acc;font-size:14px}.promise-location[data-v-25ffb8d9]{font-weight:500;color:#fff;font-size:16px}.promise-location-input[data-v-25ffb8d9]{font-weight:500;color:#fff;font-size:16px;width:200px;flex-shrink:0}.promise-location-input-edit[data-v-25ffb8d9]{background:#333;border:1px solid #555;border-radius:4px;padding:4px 8px}.promise-location-input-edit[data-v-25ffb8d9]:focus{outline:none;border-color:#007acc}.promise-deadline[data-v-25ffb8d9]{font-weight:500;color:#4caf50;font-size:14px;flex-shrink:0}.promise-character-ids-display[data-v-25ffb8d9]{display:flex;flex-wrap:wrap;gap:4px}.promise-character-id-tag[data-v-25ffb8d9]{background:#007acc;color:#fff;padding:3px 8px;border-radius:4px;font-size:11px;display:flex;align-items:center;gap:4px}.promise-description[data-v-25ffb8d9]{color:#a0a0a0;line-height:1.4;font-size:13px}.promise-actions[data-v-25ffb8d9]{display:flex;gap:8px}.edit-promise-button[data-v-25ffb8d9],.delete-promise-button[data-v-25ffb8d9]{padding:6px 12px;border:none;border-radius:4px;font-size:12px;cursor:pointer;transition:background-color .2s}.edit-promise-button[data-v-25ffb8d9]{background:#007acc;color:#fff}.edit-promise-button[data-v-25ffb8d9]:hover{background:#005a99}.delete-promise-button[data-v-25ffb8d9]{background:#f44336;color:#fff}.delete-promise-button[data-v-25ffb8d9]:hover{background:#da190b}.promise-id-input[data-v-25ffb8d9],.promise-deadline-input[data-v-25ffb8d9],.promise-character-ids-input[data-v-25ffb8d9]{background:#333;border:1px solid #555;border-radius:4px;color:#e0e0e0;font-size:14px;padding:4px 8px;width:35px;-webkit-appearance:none;appearance:none;appearance:none}.promise-id-input[data-v-25ffb8d9]:focus,.promise-deadline-input[data-v-25ffb8d9]:focus,.promise-character-ids-input[data-v-25ffb8d9]:focus{outline:none;border-color:#007acc}.promise-id-input[data-v-25ffb8d9]::-webkit-outer-spin-button,.promise-id-input[data-v-25ffb8d9]::-webkit-inner-spin-button,.promise-deadline-input[data-v-25ffb8d9]::-webkit-outer-spin-button,.promise-deadline-input[data-v-25ffb8d9]::-webkit-inner-spin-button,.promise-character-ids-input[data-v-25ffb8d9]::-webkit-outer-spin-button,.promise-character-ids-input[data-v-25ffb8d9]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.promise-id-input[type=number][data-v-25ffb8d9],.promise-deadline-input[type=number][data-v-25ffb8d9],.promise-character-ids-input[type=number][data-v-25ffb8d9]{-webkit-appearance:textfield;appearance:textfield}.promise-id-input[data-v-25ffb8d9]{font-weight:500;color:#007acc;font-size:14px;width:50px;flex-shrink:0;text-align:center}.promise-deadline-input[data-v-25ffb8d9]{color:#4caf50;text-align:center}.promise-deadline-year-input[data-v-25ffb8d9]{width:60px}.promise-deadline-input-group[data-v-25ffb8d9]{display:flex;gap:4px;flex-shrink:0;font-weight:500;color:#4caf50;font-size:14px}.promise-deadline-year[data-v-25ffb8d9],.promise-deadline-month[data-v-25ffb8d9],.promise-deadline-day[data-v-25ffb8d9],.promise-deadline-hour[data-v-25ffb8d9],.promise-deadline-minute[data-v-25ffb8d9]{background:#333;border:1px solid #555;border-radius:4px;color:#4caf50;font-size:12px;padding:4px 6px;width:45px;text-align:center}.promise-deadline-year[data-v-25ffb8d9]:focus,.promise-deadline-month[data-v-25ffb8d9]:focus,.promise-deadline-day[data-v-25ffb8d9]:focus,.promise-deadline-hour[data-v-25ffb8d9]:focus,.promise-deadline-minute[data-v-25ffb8d9]:focus{outline:none;border-color:#007acc}.promise-location-input[data-v-25ffb8d9]{font-weight:500;color:#fff;font-size:16px;width:200px;flex-shrink:0}.promise-character-ids-input-group[data-v-25ffb8d9]{display:flex;flex-direction:column;gap:6px}.selected-characters[data-v-25ffb8d9]{display:flex;flex-wrap:wrap;gap:4px}.selected-character-tag[data-v-25ffb8d9]{background:#007acc;color:#fff;padding:3px 8px;border-radius:4px;font-size:11px;display:flex;align-items:center;gap:4px}.remove-character-btn[data-v-25ffb8d9]{background:none;border:none;color:#fff;cursor:pointer;font-size:14px;line-height:1;padding:0;margin-left:2px}.remove-character-btn[data-v-25ffb8d9]:hover{color:#ccc}.character-select[data-v-25ffb8d9]{background:#333;border:1px solid #555;border-radius:4px;color:#e0e0e0;font-size:13px;padding:4px 8px}.character-select[data-v-25ffb8d9]:focus{outline:none;border-color:#007acc}.promise-description-input[data-v-25ffb8d9]{background:#333;border:1px solid #555;border-radius:4px;color:#e0e0e0;font-size:13px;padding:6px 8px;resize:vertical;min-height:60px;line-height:1.4;width:100%}.promise-description-input[data-v-25ffb8d9]:focus{outline:none;border-color:#007acc}.confirm-button[data-v-25ffb8d9],.cancel-button[data-v-25ffb8d9]{padding:6px 12px;border:none;border-radius:4px;font-size:12px;cursor:pointer;transition:background-color .2s}.confirm-button[data-v-25ffb8d9]{background:#4caf50;color:#fff}.confirm-button[data-v-25ffb8d9]:hover{background:#45a049}.cancel-button[data-v-25ffb8d9]{background:#f44336;color:#fff}.cancel-button[data-v-25ffb8d9]:hover{background:#da190b}.no-promises-message[data-v-25ffb8d9]{background:#252525;padding:16px 12px;border-radius:6px;border:1px solid #404040;color:#888;text-align:center;font-size:14px;font-style:italic}@media (max-width:768px){.promise-content[data-v-25ffb8d9]{padding:12px}.section-title[data-v-25ffb8d9]{font-size:18px}.promise-row[data-v-25ffb8d9]{padding:10px 12px;gap:6px}.promise-first-row[data-v-25ffb8d9]{gap:8px}.promise-location-row[data-v-25ffb8d9]{gap:6px;margin-top:4px}.promise-location-group[data-v-25ffb8d9]{gap:6px}.promise-location-label[data-v-25ffb8d9]{font-size:12px;min-width:35px}.promise-location[data-v-25ffb8d9]{font-size:15px}.promise-location-input[data-v-25ffb8d9]{font-size:15px;width:200px}.promise-edit-actions[data-v-25ffb8d9]{gap:6px}.promise-description[data-v-25ffb8d9]{font-size:12px}.promise-actions[data-v-25ffb8d9]{gap:6px}.edit-promise-button[data-v-25ffb8d9],.delete-promise-button[data-v-25ffb8d9]{padding:5px 10px;font-size:11px}.promise-id-input[data-v-25ffb8d9],.promise-deadline-input[data-v-25ffb8d9],.promise-location-input[data-v-25ffb8d9]{font-size:13px;padding:3px 6px}.promise-deadline-year-input[data-v-25ffb8d9]{width:50px}.promise-deadline-year[data-v-25ffb8d9],.promise-deadline-month[data-v-25ffb8d9],.promise-deadline-day[data-v-25ffb8d9],.promise-deadline-hour[data-v-25ffb8d9],.promise-deadline-minute[data-v-25ffb8d9]{font-size:11px;padding:3px 4px;width:35px}.character-select[data-v-25ffb8d9]{font-size:12px;padding:3px 6px}.selected-character-tag[data-v-25ffb8d9],.promise-character-id-tag[data-v-25ffb8d9]{font-size:10px;padding:1px 4px}.promise-description-input[data-v-25ffb8d9]{font-size:12px;padding:4px 6px;min-height:50px}.confirm-button[data-v-25ffb8d9],.cancel-button[data-v-25ffb8d9]{padding:5px 10px;font-size:11px}}','']);const i=l},1911:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(8093),o=a.n(n),r=a(3054),l=a.n(r)()(o());l.push([e.id,'.character-tabs-container[data-v-41c909bc]{color:#e0e0e0;max-width:1000px;margin:0 auto;padding:16px}.character-tabs-container h3[data-v-41c909bc]{color:#007acc;margin-bottom:24px;font-size:20px}.character-fold-bar[data-v-41c909bc]{margin-bottom:16px}.character-fold-bar[data-v-41c909bc] .fold-bar-btn{background:linear-gradient(135deg,#2a2a2a 0%,#333333 100%);border:1px solid #555;box-shadow:0 2px 8px rgba(0,0,0,.3);padding:12px 16px;font-size:16px;font-weight:600;color:#e0e0e0;transition:all .3s ease}.character-fold-bar[data-v-41c909bc] .fold-bar-btn:hover{background:linear-gradient(135deg,#333333 0%,#404040 100%);border-color:#666;box-shadow:0 4px 12px rgba(0,0,0,.4)}.character-fold-bar[data-v-41c909bc] .fold-bar-content{background:linear-gradient(135deg,#1a1a1a 0%,#222222 100%);border:1px solid #555;border-top:none;box-shadow:0 2px 8px rgba(0,0,0,.3)}.character-fold-bar[data-v-41c909bc] .fold-bar-content-text{padding:20px}.character-fold-bar[data-v-41c909bc] .fold-bar-footer-toggle{background:linear-gradient(135deg,#2a2a2a 0%,#333333 100%);border-top:1px solid #555;color:#b0b0b0;font-size:13px;font-weight:500;padding:12px 16px;transition:all .3s ease}.character-fold-bar[data-v-41c909bc] .fold-bar-footer-toggle:hover{background:linear-gradient(135deg,#333333 0%,#404040 100%);color:#e0e0e0;border-color:#666}.character-fold-bar[data-v-41c909bc] .fold-bar-toggle-icon{color:#007acc;font-size:14px;font-weight:bold}.character-fold-bar.character-incomplete[data-v-41c909bc] .fold-bar-btn span{color:#ff6b6b !important}.remove-character-btn[data-v-41c909bc]{background:#b91c1c;border:1px solid #b91c1c;border-radius:3px;color:#fff;font-size:16px;font-weight:bold;width:20px;height:20px;display:flex;align-items:center;justify-content:center;cursor:pointer}.remove-character-btn span[data-v-41c909bc]{line-height:1;margin-top:-1px}.character-info-container .section[data-v-41c909bc]{margin-bottom:16px}.section[data-v-41c909bc]{background-color:#2a2a2a;padding:20px;border-radius:12px;border:1px solid #404040;margin-bottom:20px}.section h4[data-v-41c909bc]{color:#b0b0b0;margin-bottom:16px;font-size:16px;border-bottom:1px solid #404040;padding-bottom:8px}.form-grid[data-v-41c909bc]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px}.input-group.full-width[data-v-41c909bc]{grid-column:1/-1}.input-group label[data-v-41c909bc]{display:block;margin-bottom:8px;color:#b0b0b0;font-weight:500}.text-input[data-v-41c909bc]{width:100%;padding:12px 16px;background-color:#1a1a1a;border:1px solid #404040;border-radius:8px;color:#e0e0e0;font-size:14px;outline:none;transition:border-color .2s ease}.text-input[data-v-41c909bc]:focus{border-color:#007acc}.text-input[data-v-41c909bc]::placeholder{color:#666}.text-area[data-v-41c909bc]{width:100%;padding:12px 16px;background-color:#1a1a1a;border:1px solid #404040;border-radius:8px;color:#e0e0e0;font-size:14px;font-family:inherit;outline:none;resize:vertical;min-height:80px;transition:border-color .2s ease}.text-area[data-v-41c909bc]:focus{border-color:#007acc}.text-area[data-v-41c909bc]::placeholder{color:#666}.birthday-inputs[data-v-41c909bc]{display:flex;gap:8px}.birthday-inputs .birthday-input[data-v-41c909bc]{flex:1;padding:12px 16px;background-color:#1a1a1a;border:1px solid #404040;border-radius:8px;color:#e0e0e0;font-size:14px;outline:none;transition:border-color .2s ease}.birthday-inputs .birthday-input[data-v-41c909bc]:focus{border-color:#007acc}.birthday-inputs .birthday-input[data-v-41c909bc]::placeholder{color:#666}.relations-list[data-v-41c909bc]{display:flex;flex-direction:column;gap:8px}.relation-item[data-v-41c909bc]{display:flex;align-items:center;flex-wrap:wrap;gap:8px;padding:12px;background:linear-gradient(135deg,#1e1e1e 0%,#252525 100%);border:1px solid #555;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.2);transition:border-color .2s ease}.relation-item[data-v-41c909bc]:hover{border-color:#666}.relation-item .relation-target[data-v-41c909bc]{color:#4fc3f7;font-weight:600;font-size:13px;flex-shrink:0;min-width:60px;padding:6px 8px;background-color:#2a2a2a;border-radius:4px;text-align:center}.relation-item .relation-input[data-v-41c909bc]{flex:1;min-width:120px;padding:10px 14px;background-color:#1a1a1a;border:1px solid #404040;border-radius:6px;color:#e0e0e0;font-size:14px;outline:none;transition:all .2s ease}.relation-item .relation-input[data-v-41c909bc]:focus{border-color:#007acc;box-shadow:0 0 0 2px rgba(0,122,204,.2)}.relation-item .relation-input[data-v-41c909bc]::placeholder{color:#888}.relation-item .remove-relation-btn[data-v-41c909bc]{background:linear-gradient(135deg,#dc3545 0%,#c82333 100%);border:1px solid #dc3545;border-radius:6px;color:#fff;font-size:14px;font-weight:bold;width:24px;height:24px;flex-shrink:0;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 4px rgba(220,53,69,.3)}.relation-item .remove-relation-btn[data-v-41c909bc]:hover{background:linear-gradient(135deg,#c82333 0%,#a02622 100%);border-color:#bd2130;transform:translateY(-1px);box-shadow:0 4px 8px rgba(220,53,69,.4)}.relation-item .remove-relation-btn[data-v-41c909bc]:active{transform:translateY(0)}.add-relation[data-v-41c909bc]{display:flex;flex-wrap:wrap;gap:8px;align-items:center;padding:12px;background:linear-gradient(135deg,#252525 0%,#2a2a2a 100%);border:1px solid #555;border-radius:8px;margin-top:12px}.add-relation .relation-select[data-v-41c909bc]{flex:1;min-width:150px;padding:12px 16px;background-color:#1a1a1a;border:1px solid #404040;border-radius:6px;color:#e0e0e0;font-size:14px;outline:none;transition:all .2s ease}.add-relation .relation-select[data-v-41c909bc]:focus{border-color:#007acc;box-shadow:0 0 0 2px rgba(0,122,204,.2)}.add-relation .add-relation-btn[data-v-41c909bc]{flex-shrink:0;padding:10px 16px;background:linear-gradient(135deg,#28a745 0%,#20c997 100%);border:1px solid #28a745;border-radius:6px;color:#fff;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 4px rgba(40,167,69,.3)}.add-relation .add-relation-btn[data-v-41c909bc]:hover:not(:disabled){background:linear-gradient(135deg,#218838 0%,#1aa085 100%);border-color:#218838;transform:translateY(-1px);box-shadow:0 4px 8px rgba(40,167,69,.4)}.add-relation .add-relation-btn[data-v-41c909bc]:disabled{background-color:#666;border-color:#666;cursor:not-allowed;box-shadow:none;transform:none}.add-relation .add-relation-btn[data-v-41c909bc]:active{transform:translateY(0)}.inventory-list[data-v-41c909bc]{display:flex;flex-direction:column;gap:8px}.inventory-item[data-v-41c909bc]{display:flex;align-items:center;flex-wrap:wrap;gap:8px;padding:12px;background:linear-gradient(135deg,#1e1e1e 0%,#252525 100%);border:1px solid #555;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.2);transition:border-color .2s ease}.inventory-item[data-v-41c909bc]:hover{border-color:#666}.inventory-item .inventory-target[data-v-41c909bc]{color:#4fc3f7;font-weight:600;font-size:13px;flex-shrink:0;min-width:60px;padding:6px 8px;background-color:#2a2a2a;border-radius:4px;text-align:center}.inventory-item .inventory-input[data-v-41c909bc]{flex:1;min-width:120px;padding:10px 14px;background-color:#1a1a1a;border:1px solid #404040;border-radius:6px;color:#e0e0e0;font-size:14px;outline:none;transition:all .2s ease}.inventory-item .inventory-input[data-v-41c909bc]:focus{border-color:#007acc;box-shadow:0 0 0 2px rgba(0,122,204,.2)}.inventory-item .inventory-input[data-v-41c909bc]::placeholder{color:#888}.inventory-item .remove-inventory-btn[data-v-41c909bc]{background:linear-gradient(135deg,#dc3545 0%,#c82333 100%);border:1px solid #dc3545;border-radius:6px;color:#fff;font-size:14px;font-weight:bold;width:24px;height:24px;flex-shrink:0;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 4px rgba(220,53,69,.3)}.inventory-item .remove-inventory-btn[data-v-41c909bc]:hover{background:linear-gradient(135deg,#c82333 0%,#a02622 100%);border-color:#bd2130;transform:translateY(-1px);box-shadow:0 4px 8px rgba(220,53,69,.4)}.inventory-item .remove-inventory-btn[data-v-41c909bc]:active{transform:translateY(0)}.add-inventory[data-v-41c909bc]{display:flex;flex-wrap:wrap;gap:8px;align-items:center;padding:12px;background:linear-gradient(135deg,#252525 0%,#2a2a2a 100%);border:1px solid #555;border-radius:8px;margin-top:12px}.add-inventory .inventory-select[data-v-41c909bc]{flex:1;min-width:150px;padding:12px 16px;background-color:#1a1a1a;border:1px solid #404040;border-radius:6px;color:#e0e0e0;font-size:14px;outline:none;transition:all .2s ease}.add-inventory .inventory-select[data-v-41c909bc]:focus{border-color:#007acc;box-shadow:0 0 0 2px rgba(0,122,204,.2)}.add-inventory .quantity-input[data-v-41c909bc]{flex:1;min-width:80px;padding:12px 16px;background-color:#1a1a1a;border:1px solid #404040;border-radius:6px;color:#e0e0e0;font-size:14px;outline:none;transition:all .2s ease}.add-inventory .quantity-input[data-v-41c909bc]:focus{border-color:#007acc;box-shadow:0 0 0 2px rgba(0,122,204,.2)}.add-inventory .quantity-input[data-v-41c909bc]::placeholder{color:#888}.add-inventory .quantity-input[data-v-41c909bc]:disabled{background-color:#333;color:#666;cursor:not-allowed}.add-inventory .add-inventory-btn[data-v-41c909bc]{flex-shrink:0;padding:10px 16px;background:linear-gradient(135deg,#28a745 0%,#20c997 100%);border:1px solid #28a745;border-radius:6px;color:#fff;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 4px rgba(40,167,69,.3)}.add-inventory .add-inventory-btn[data-v-41c909bc]:hover:not(:disabled){background:linear-gradient(135deg,#218838 0%,#1aa085 100%);border-color:#218838;transform:translateY(-1px);box-shadow:0 4px 8px rgba(40,167,69,.4)}.add-inventory .add-inventory-btn[data-v-41c909bc]:disabled{background-color:#666;border-color:#666;cursor:not-allowed;box-shadow:none;transform:none}.add-inventory .add-inventory-btn[data-v-41c909bc]:active{transform:translateY(0)}.generated-result[data-v-41c909bc]{margin-top:8px;padding:8px;background-color:#1a1a1a;border:1px solid #404040;border-radius:6px}.generated-result label[data-v-41c909bc]{display:block;margin-bottom:4px;color:#007acc;font-size:12px;font-weight:500}.generated-result .generated-text[data-v-41c909bc]{color:#e0e0e0;font-size:14px;margin-bottom:8px;word-wrap:break-word}.generated-result .replace-btn[data-v-41c909bc]{padding:6px 12px;background-color:#28a745;border:none;border-radius:4px;color:#fff;font-size:12px;font-weight:500;cursor:pointer;transition:background-color .2s ease}.generated-result .replace-btn[data-v-41c909bc]:hover{background-color:#218838}.action-section[data-v-41c909bc]{display:flex;justify-content:space-between;gap:16px;padding:20px 0}.action-section .generate-btn[data-v-41c909bc],.action-section .apply-all-btn[data-v-41c909bc]{flex:1;max-width:none}.add-character-section[data-v-41c909bc]{display:flex;justify-content:center;padding:20px 0;margin-top:20px;border-top:1px solid #404040}.add-character-btn[data-v-41c909bc]{padding:12px 24px;background:linear-gradient(135deg,#28a745 0%,#20c997 100%);border:1px solid #28a745;border-radius:8px;color:#fff;font-size:16px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:8px}.add-character-btn[data-v-41c909bc]:hover:not(:disabled){background:linear-gradient(135deg,#218838 0%,#1aa085 100%);border-color:#218838;transform:translateY(-1px);box-shadow:0 4px 12px rgba(40,167,69,.3)}.add-character-btn span[data-v-41c909bc]{font-size:18px;font-weight:bold}.generate-btn[data-v-41c909bc]{padding:14px 32px;background-color:#28a745;border:none;border-radius:8px;color:#fff;font-size:16px;font-weight:500;cursor:pointer;transition:background-color .2s ease;display:flex;align-items:center;justify-content:center;gap:8px}.generate-btn[data-v-41c909bc]:hover:not(:disabled){background-color:#218838}.generate-btn[data-v-41c909bc]:disabled{background-color:#666;cursor:not-allowed}.loading-spinner[data-v-41c909bc]{width:16px;height:16px;border:2px solid #fff;border-top:2px solid rgba(0,0,0,0);border-radius:50%;animation:spin-41c909bc 1s linear infinite}@keyframes spin-41c909bc{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.apply-all-btn[data-v-41c909bc]{padding:14px 32px;background-color:#007acc;border:none;border-radius:8px;color:#fff;font-size:16px;font-weight:500;cursor:pointer;transition:background-color .2s ease}.apply-all-btn[data-v-41c909bc]:hover:not(:disabled){background-color:#0056b3}.apply-all-btn[data-v-41c909bc]:disabled{background-color:#666;cursor:not-allowed}@media (max-width:768px){.section[data-v-41c909bc]{padding:16px}.form-grid[data-v-41c909bc]{grid-template-columns:1fr}.input-group.full-width[data-v-41c909bc]{grid-column:1}.birthday-inputs[data-v-41c909bc]{flex-direction:column}.info-item[data-v-41c909bc]{flex-direction:column;align-items:flex-start;gap:4px}.info-item label[data-v-41c909bc]{min-width:unset}.character-tabs-container[data-v-41c909bc]{max-width:100%;margin:0}.action-section[data-v-41c909bc]{flex-direction:row;align-items:stretch;gap:12px}.action-section .generate-btn[data-v-41c909bc],.action-section .apply-all-btn[data-v-41c909bc]{flex:1;width:auto;max-width:none}.add-character-section[data-v-41c909bc]{padding:16px 0;margin-top:16px}.add-character-btn[data-v-41c909bc]{padding:10px 20px;font-size:14px}.add-character-btn span[data-v-41c909bc]{font-size:16px}.remove-character-btn[data-v-41c909bc]{width:20px;height:20px;font-size:14px}}','']);const i=l},2e3:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(8093),o=a.n(n),r=a(3054),l=a.n(r)()(o());l.push([e.id,'.extra-container[data-v-09fb0ec2]{color:#e0e0e0;max-width:1000px;margin:0 0;padding:16px}.extra-container h3[data-v-09fb0ec2]{color:#007acc;margin-bottom:24px;font-size:20px}.section[data-v-09fb0ec2]{background-color:#2a2a2a;padding:20px;border-radius:12px;border:1px solid #404040;margin-bottom:20px}.section h4[data-v-09fb0ec2]{color:#b0b0b0;margin-bottom:16px;font-size:16px;border-bottom:1px solid #404040;padding-bottom:8px}.sortable-container[data-v-09fb0ec2]{margin-bottom:16px}.sortable-item[data-v-09fb0ec2]{margin-bottom:8px;transition:all .2s ease;position:relative}.sortable-item.dragging[data-v-09fb0ec2]{opacity:.7;transform:scale(1.02);box-shadow:0 4px 12px rgba(0,122,204,.3);z-index:1000}.sortable-item[data-v-09fb0ec2]:not(.dragging){transform:translateY(0)}.draggable-fold-bar.incomplete[data-v-09fb0ec2] .fold-bar-btn span{color:#ef4444 !important}.drop-indicator[data-v-09fb0ec2]{height:4px;background:linear-gradient(90deg,#007acc,#005999);border-radius:2px;margin:4px 0;box-shadow:0 0 8px rgba(0,122,204,.6);animation:pulse-09fb0ec2 1.5s ease-in-out infinite;position:relative}.drop-indicator[data-v-09fb0ec2]::before{content:"";position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:8px;height:8px;background:#007acc;border-radius:50%;box-shadow:0 0 12px rgba(0,122,204,.8)}@keyframes pulse-09fb0ec2{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.7;transform:scale(1.1)}}.fold-content[data-v-09fb0ec2]{padding:12px 0}.fold-content .input-group[data-v-09fb0ec2]{margin-bottom:16px}.fold-content .input-group[data-v-09fb0ec2]:last-child{margin-bottom:0}.fold-content .input-group label[data-v-09fb0ec2]{display:block;margin-bottom:6px;color:#b0b0b0;font-weight:500;font-size:13px}.fold-content .input-group .form-input[data-v-09fb0ec2],.fold-content .input-group .form-textarea[data-v-09fb0ec2]{width:100%;padding:8px 12px;background:#2a2a2a;border:1px solid #404040;border-radius:4px;color:#e0e0e0;font-size:14px;font-family:inherit;transition:all .2s ease}.fold-content .input-group .form-input[data-v-09fb0ec2]:focus,.fold-content .input-group .form-textarea[data-v-09fb0ec2]:focus{outline:none;border-color:#007acc;box-shadow:0 0 0 2px rgba(0,122,204,.2)}.fold-content .input-group .form-input[data-v-09fb0ec2]::placeholder,.fold-content .input-group .form-textarea[data-v-09fb0ec2]::placeholder{color:#666}.fold-content .input-group .form-textarea[data-v-09fb0ec2]{resize:vertical;min-height:60px;line-height:1.4}.item-actions[data-v-09fb0ec2]{display:flex;gap:8px;margin-top:12px}.item-actions .action-btn[data-v-09fb0ec2]{flex:1;display:flex;align-items:center;justify-content:center;gap:6px;min-width:0}.generated-result[data-v-09fb0ec2]{margin-top:8px;padding:8px;background-color:#1a1a1a;border:1px solid #404040;border-radius:6px}.generated-result label[data-v-09fb0ec2]{display:block;margin-bottom:4px;color:#007acc;font-size:12px;font-weight:500}.generated-result .generated-text[data-v-09fb0ec2]{color:#e0e0e0;font-size:14px;margin-bottom:8px;word-wrap:break-word;white-space:pre-wrap}.generated-result .replace-btn[data-v-09fb0ec2]{padding:6px 12px;background-color:#28a745;border:none;border-radius:4px;color:#fff;font-size:12px;font-weight:500;cursor:pointer;transition:background-color .2s ease}.generated-result .replace-btn[data-v-09fb0ec2]:hover{background-color:#218838}.remove-btn[data-v-09fb0ec2]{background:#b91c1c;border:1px solid #b91c1c;border-radius:3px;color:#fff;font-size:16px;font-weight:bold;width:20px;height:20px;display:flex;align-items:center;justify-content:center;cursor:pointer}.remove-btn span[data-v-09fb0ec2]{line-height:1;margin-top:-1px}.action-btn[data-v-09fb0ec2]{padding:8px 16px;border:1px solid #555;background:#2a2a2a;color:#e0e0e0;border-radius:4px;cursor:pointer;font-size:13px;font-weight:500;transition:all .2s ease}.action-btn[data-v-09fb0ec2]:hover{background:#404040;border-color:#777}.action-btn.generate[data-v-09fb0ec2]{background:linear-gradient(135deg,#007acc,#005999);border-color:#007acc;color:#fff}.action-btn.generate[data-v-09fb0ec2]:hover:not(:disabled){background:linear-gradient(135deg,#005999,#004477);transform:translateY(-1px)}.action-btn.generate[data-v-09fb0ec2]:active{transform:translateY(0)}.action-btn.generate[data-v-09fb0ec2]:disabled{background-color:#666;cursor:not-allowed;transform:none}.action-btn.apply[data-v-09fb0ec2]{background:linear-gradient(135deg,#28a745,#20c997);border-color:#28a745;color:#fff}.action-btn.apply[data-v-09fb0ec2]:hover:not(:disabled){background:linear-gradient(135deg,#218838,#1aa085);transform:translateY(-1px)}.action-btn.apply[data-v-09fb0ec2]:active{transform:translateY(0)}.action-btn.apply[data-v-09fb0ec2]:disabled{background-color:#666;cursor:not-allowed;transform:none}.action-btn.delete[data-v-09fb0ec2]{background:#3a1a1a;border-color:#622}.action-btn.delete[data-v-09fb0ec2]:hover{background:#622}.add-item-section[data-v-09fb0ec2]{text-align:center;margin-top:16px}.add-btn[data-v-09fb0ec2]{padding:10px 20px;background:linear-gradient(135deg,#007acc,#005999);border:none;color:#fff;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s ease}.add-btn[data-v-09fb0ec2]:hover{background:linear-gradient(135deg,#005999,#004477);transform:translateY(-1px)}.add-btn[data-v-09fb0ec2]:active{transform:translateY(0)}@media (max-width:768px){.extra-container[data-v-09fb0ec2]{padding:16px}.section[data-v-09fb0ec2]{padding:16px}.item-actions[data-v-09fb0ec2]{gap:6px}.item-actions .action-btn[data-v-09fb0ec2]{padding:6px 12px;font-size:12px}.add-btn[data-v-09fb0ec2]{width:100%}}.loading-spinner[data-v-09fb0ec2]{display:inline-block;width:16px;height:16px;border:2px solid #fff;border-top:2px solid rgba(0,0,0,0);border-radius:50%;animation:spin-09fb0ec2 1s linear infinite;flex-shrink:0}@keyframes spin-09fb0ec2{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}','']);const i=l},2095:(e,t,a)=>{var n=a(7405);n.__esModule&&(n=n.default),'string'==typeof n&&(n=[[e.id,n,'']]),n.locals&&(e.exports=n.locals);(0,a(4424).A)('ad197eda',n,!1,{ssrId:!0})},2303:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(8093),o=a.n(n),r=a(3054),l=a.n(r)()(o());l.push([e.id,'.confirm-dialog-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.7);display:flex;align-items:center;justify-content:center;z-index:9999}.confirm-dialog{background-color:#2a2a2a;border-radius:12px;border:1px solid #404040;min-width:300px;max-width:90vw;box-shadow:0 4px 20px rgba(0,0,0,.3)}.confirm-dialog-header{padding:20px 20px 0 20px}.confirm-dialog-header h3{margin:0;color:#e0e0e0;font-size:18px;font-weight:600}.confirm-dialog-body{padding:16px 20px}.confirm-dialog-body p{margin:0;color:#b0b0b0;line-height:1.5;font-size:14px}.confirm-dialog-footer{padding:0 20px 20px 20px;display:flex;gap:12px;justify-content:flex-end}.confirm-btn{padding:8px 16px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.confirm-btn.cancel-btn{background-color:#404040;color:#b0b0b0}.confirm-btn.cancel-btn:hover{background-color:#505050}.confirm-btn.confirm-action-btn{background-color:#007acc;color:#fff}.confirm-btn.confirm-action-btn:hover{background-color:#0056b3}.confirm-btn.confirm-action-btn:active{background-color:#004085}.confirm-btn.confirm-action-btn[data-confirm-text=åˆªé™¤]{background-color:#dc3545}.confirm-btn.confirm-action-btn[data-confirm-text=åˆªé™¤]:hover{background-color:#c82333}.confirm-btn.confirm-action-btn[data-confirm-text=åˆªé™¤]:active{background-color:#bd2130}','']);const i=l},2413:(e,t,a)=>{var n=a(671);n.__esModule&&(n=n.default),'string'==typeof n&&(n=[[e.id,n,'']]),n.locals&&(e.exports=n.locals);(0,a(4424).A)('4dbf8f6e',n,!1,{ssrId:!0})},2436:(e,t,a)=>{var n=a(4246);n.__esModule&&(n=n.default),'string'==typeof n&&(n=[[e.id,n,'']]),n.locals&&(e.exports=n.locals);(0,a(4424).A)('f2b8d330',n,!1,{ssrId:!0})},2628:(e,t,a)=>{var n=a(1282);n.__esModule&&(n=n.default),'string'==typeof n&&(n=[[e.id,n,'']]),n.locals&&(e.exports=n.locals);(0,a(4424).A)('41655da4',n,!1,{ssrId:!0})},2782:(e,t,a)=>{var n=a(2e3);n.__esModule&&(n=n.default),'string'==typeof n&&(n=[[e.id,n,'']]),n.locals&&(e.exports=n.locals);(0,a(4424).A)('fc22634a',n,!1,{ssrId:!0})},2913:(e,t,a)=>{var n=a(9603);n.__esModule&&(n=n.default),'string'==typeof n&&(n=[[e.id,n,'']]),n.locals&&(e.exports=n.locals);(0,a(4424).A)('7f05e0fa',n,!1,{ssrId:!0})},3054:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var a='',n=void 0!==t[5];return t[4]&&(a+='@supports ('.concat(t[4],') {')),t[2]&&(a+='@media '.concat(t[2],' {')),n&&(a+='@layer'.concat(t[5].length>0?' '.concat(t[5]):'',' {')),a+=e(t),n&&(a+='}'),t[2]&&(a+='}'),t[4]&&(a+='}'),a}).join('')},t.i=function(e,a,n,o,r){'string'==typeof e&&(e=[[null,e,void 0]]);var l={};if(n)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(l[s]=!0)}for(var d=0;d<e.length;d++){var c=[].concat(e[d]);n&&l[c[0]]||(void 0!==r&&(void 0===c[5]||(c[1]='@layer'.concat(c[5].length>0?' '.concat(c[5]):'',' {').concat(c[1],'}')),c[5]=r),a&&(c[2]?(c[1]='@media '.concat(c[2],' {').concat(c[1],'}'),c[2]=a):c[2]=a),o&&(c[4]?(c[1]='@supports ('.concat(c[4],') {').concat(c[1],'}'),c[4]=o):c[4]=''.concat(o)),t.push(c))}},t}},3112:(e,t,a)=>{var n=a(5894);n.__esModule&&(n=n.default),'string'==typeof n&&(n=[[e.id,n,'']]),n.locals&&(e.exports=n.locals);(0,a(4424).A)('1fbe19c8',n,!1,{ssrId:!0})},3235:(e,t)=>{t.A=(e,t)=>{const a=e.__vccOpts||e;for(const[e,n]of t)a[e]=n;return a}},3788:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(8093),o=a.n(n),r=a(3054),l=a.n(r)()(o());l.push([e.id,'.item-tab-container[data-v-b32ed7ea]{width:100%;height:100%;display:flex;flex-direction:column;background-color:#1a1a1a;color:#e0e0e0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif}.item-content[data-v-b32ed7ea]{flex:1;padding:16px;overflow-y:auto;display:flex;flex-direction:column;min-height:var(--f33397ea);max-height:var(--f33397ea)}.item-content[data-v-b32ed7ea]::-webkit-scrollbar{width:8px}.item-content[data-v-b32ed7ea]::-webkit-scrollbar-track{background:#2a2a2a;border-radius:4px}.item-content[data-v-b32ed7ea]::-webkit-scrollbar-thumb{background:#555;border-radius:4px}.item-content[data-v-b32ed7ea]::-webkit-scrollbar-thumb:hover{background:#666}.item-section[data-v-b32ed7ea]:last-child{margin-bottom:0}.section-title[data-v-b32ed7ea]{font-size:18px;font-weight:600;color:#007acc;margin:0 0 12px 0;padding-bottom:8px;border-bottom:2px solid #007acc}.add-item-button[data-v-b32ed7ea]{padding:8px 16px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:background-color .2s;background:#007acc;color:#fff;margin-top:12px}.add-item-button[data-v-b32ed7ea]:hover{background:#005a99}.item-list[data-v-b32ed7ea]{display:flex;flex-direction:column;gap:8px}.item-row[data-v-b32ed7ea]{background:#252525;padding:12px 16px;border-radius:8px;border:1px solid #404040;display:flex;flex-direction:column;gap:8px;font-size:14px;transition:background-color .2s}.item-row[data-v-b32ed7ea]:hover{background:#2a2a2a;border-color:#555}.new-item-row[data-v-b32ed7ea]{background:#2a2a2a;border-color:#007acc;border-style:dashed}.item-info[data-v-b32ed7ea]{display:flex;flex-direction:column;gap:6px;flex:1}.item-id-name-row[data-v-b32ed7ea]{display:flex;gap:12px;align-items:center}.item-id[data-v-b32ed7ea]{font-weight:500;color:#007acc;font-size:14px}.item-name[data-v-b32ed7ea]{font-weight:500;color:#fff;font-size:16px}.item-description[data-v-b32ed7ea]{color:#a0a0a0;line-height:1.4;font-size:13px}.item-value-actions-row[data-v-b32ed7ea]{display:flex;justify-content:space-between;align-items:center}.item-value[data-v-b32ed7ea]{font-weight:600;color:#4caf50;font-size:14px}.item-actions[data-v-b32ed7ea]{display:flex;gap:8px}.edit-item-button[data-v-b32ed7ea],.delete-item-button[data-v-b32ed7ea]{padding:6px 12px;border:none;border-radius:4px;font-size:12px;cursor:pointer;transition:background-color .2s}.edit-item-button[data-v-b32ed7ea]{background:#007acc;color:#fff}.edit-item-button[data-v-b32ed7ea]:hover{background:#005a99}.delete-item-button[data-v-b32ed7ea]{background:#f44336;color:#fff}.delete-item-button[data-v-b32ed7ea]:hover{background:#da190b}.item-id-input[data-v-b32ed7ea],.item-name-input[data-v-b32ed7ea],.item-value-input[data-v-b32ed7ea]{background:#333;border:1px solid #555;border-radius:4px;color:#e0e0e0;font-size:14px;padding:4px 8px}.item-id-input[data-v-b32ed7ea]:focus,.item-name-input[data-v-b32ed7ea]:focus,.item-value-input[data-v-b32ed7ea]:focus{outline:none;border-color:#007acc}.item-id-input[data-v-b32ed7ea]{font-weight:500;color:#007acc;font-size:14px;width:50px;flex-shrink:0;text-align:center}.item-name-input[data-v-b32ed7ea]{font-weight:500;color:#fff;font-size:16px;flex:1}.item-value-input[data-v-b32ed7ea]{font-weight:600;color:#4caf50;font-size:14px;width:50px;text-align:left;outline:none}.item-value-input-wrapper[data-v-b32ed7ea]{display:flex;align-items:center;font-weight:600;color:#4caf50;font-size:14px}.dollar-sign[data-v-b32ed7ea]{margin-right:2px}.item-description-input[data-v-b32ed7ea]{background:#333;border:1px solid #555;border-radius:4px;color:#e0e0e0;font-size:13px;padding:6px 8px;resize:vertical;min-height:60px;line-height:1.4}.item-description-input[data-v-b32ed7ea]:focus{outline:none;border-color:#007acc}.confirm-button[data-v-b32ed7ea],.cancel-button[data-v-b32ed7ea]{padding:6px 12px;border:none;border-radius:4px;font-size:12px;cursor:pointer;transition:background-color .2s}.confirm-button[data-v-b32ed7ea]{background:#4caf50;color:#fff}.confirm-button[data-v-b32ed7ea]:hover{background:#45a049}.cancel-button[data-v-b32ed7ea]{background:#f44336;color:#fff}.cancel-button[data-v-b32ed7ea]:hover{background:#da190b}.no-items-message[data-v-b32ed7ea]{background:#252525;padding:16px 12px;border-radius:6px;border:1px solid #404040;color:#888;text-align:center;font-size:14px;font-style:italic}@media (max-width:768px){.item-content[data-v-b32ed7ea]{padding:12px}.section-title[data-v-b32ed7ea]{font-size:18px}.item-row[data-v-b32ed7ea]{padding:10px 12px;gap:6px}.item-info[data-v-b32ed7ea]{gap:4px}.item-name[data-v-b32ed7ea]{font-size:15px}.item-description[data-v-b32ed7ea]{font-size:12px}.item-actions[data-v-b32ed7ea]{gap:6px}.edit-item-button[data-v-b32ed7ea],.delete-item-button[data-v-b32ed7ea]{padding:5px 10px;font-size:11px}.item-id-input[data-v-b32ed7ea],.item-name-input[data-v-b32ed7ea],.item-value-input[data-v-b32ed7ea]{font-size:13px;padding:3px 6px}.item-description-input[data-v-b32ed7ea]{font-size:12px;padding:4px 6px;min-height:50px}.confirm-button[data-v-b32ed7ea],.cancel-button[data-v-b32ed7ea]{padding:5px 10px;font-size:11px}}','']);const i=l},4084:(e,t,a)=>{var n=a(1038);n.__esModule&&(n=n.default),'string'==typeof n&&(n=[[e.id,n,'']]),n.locals&&(e.exports=n.locals);(0,a(4424).A)('97685b24',n,!1,{ssrId:!0})},4122:(e,t,a)=>{var n=a(6280);n.__esModule&&(n=n.default),'string'==typeof n&&(n=[[e.id,n,'']]),n.locals&&(e.exports=n.locals);(0,a(4424).A)('515a3be2',n,!1,{ssrId:!0})},4246:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(8093),o=a.n(n),r=a(3054),l=a.n(r)()(o());l.push([e.id,'.progress-bar-container[data-v-be0274c0]{display:flex;flex-direction:row;align-items:center;gap:12px;width:100%}.progress-bar-label[data-v-be0274c0]{font-size:12px;color:#888;letter-spacing:.5px;font-weight:500;min-width:100px;flex-shrink:0}.progress-bar-wrapper[data-v-be0274c0]{position:relative;height:20px;background:#333;border-radius:10px;border:1px solid #555;overflow:hidden;display:flex;align-items:center;padding:0 8px;flex:1}.progress-bar-fill[data-v-be0274c0]{position:absolute;left:0;top:0;height:100%;border-radius:10px;transition:width .3s ease;z-index:1}.progress-bar-value[data-v-be0274c0]{position:relative;z-index:2;font-size:13px;font-weight:700;color:#fff;white-space:nowrap;text-shadow:0 0 2px #000,0 0 4px rgba(0,0,0,.9),0 0 8px rgba(0,0,0,.7),0 1px 2px rgba(0,0,0,.8);-webkit-text-stroke:.5px rgba(0,0,0,.5)}','']);const i=l},4359:(e,t,a)=>{var n=a(1789);n.__esModule&&(n=n.default),'string'==typeof n&&(n=[[e.id,n,'']]),n.locals&&(e.exports=n.locals);(0,a(4424).A)('09e2cd4e',n,!1,{ssrId:!0})},4424:(e,t,a)=>{function n(e,t){for(var a=[],n={},o=0;o<t.length;o++){var r=t[o],l=r[0],i={id:e+':'+o,css:r[1],media:r[2],sourceMap:r[3]};n[l]?n[l].parts.push(i):a.push(n[l]={id:l,parts:[i]})}return a}a.d(t,{A:()=>v});var o='undefined'!=typeof document;if('undefined'!=typeof DEBUG&&DEBUG&&!o)throw new Error('vue-style-loader cannot be used in a non-browser environment. Use { target: \'node\' } in your Webpack config to indicate a server-rendering environment.');var r={},l=o&&(document.head||document.getElementsByTagName('head')[0]),i=null,s=0,d=!1,c=function(){},u=null,p='data-vue-ssr-id',m='undefined'!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function v(e,t,a,o){d=a,u=o||{};var l=n(e,t);return g(l),function(t){for(var a=[],o=0;o<l.length;o++){var i=l[o];(s=r[i.id]).refs--,a.push(s)}t?g(l=n(e,t)):l=[];for(o=0;o<a.length;o++){var s;if(0===(s=a[o]).refs){for(var d=0;d<s.parts.length;d++)s.parts[d]();delete r[s.id]}}}}function g(e){for(var t=0;t<e.length;t++){var a=e[t],n=r[a.id];if(n){n.refs++;for(var o=0;o<n.parts.length;o++)n.parts[o](a.parts[o]);for(;o<a.parts.length;o++)n.parts.push(f(a.parts[o]));n.parts.length>a.parts.length&&(n.parts.length=a.parts.length)}else{var l=[];for(o=0;o<a.parts.length;o++)l.push(f(a.parts[o]));r[a.id]={id:a.id,refs:1,parts:l}}}}function b(){var e=document.createElement('style');return e.type='text/css',l.appendChild(e),e}function f(e){var t,a,n=document.querySelector('style['+p+'~="'+e.id+'"]');if(n){if(d)return c;n.parentNode.removeChild(n)}if(m){var o=s++;n=i||(i=b()),t=y.bind(null,n,o,!1),a=y.bind(null,n,o,!0)}else n=b(),t=E.bind(null,n),a=function(){n.parentNode.removeChild(n)};return t(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;t(e=n)}else a()}}var h,x=(h=[],function(e,t){return h[e]=t,h.filter(Boolean).join('\n')});function y(e,t,a,n){var o=a?'':n.css;if(e.styleSheet)e.styleSheet.cssText=x(t,o);else{var r=document.createTextNode(o),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(r,l[t]):e.appendChild(r)}}function E(e,t){var a=t.css,n=t.media,o=t.sourceMap;if(n&&e.setAttribute('media',n),u.ssrId&&e.setAttribute(p,t.id),o&&(a+='\n/*# sourceURL='+o.sources[0]+' */',a+='\n/*# sourceMappingURL=data:application/json;base64,'+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+' */'),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}},4607:(e,t,a)=>{var n=a(6229);n.__esModule&&(n=n.default),'string'==typeof n&&(n=[[e.id,n,'']]),n.locals&&(e.exports=n.locals);(0,a(4424).A)('a5ce5de4',n,!1,{ssrId:!0})},4750:(e,t,a)=>{var n=a(3788);n.__esModule&&(n=n.default),'string'==typeof n&&(n=[[e.id,n,'']]),n.locals&&(e.exports=n.locals);(0,a(4424).A)('4d2eb736',n,!1,{ssrId:!0})},4916:(e,t,a)=>{var n=a(6242);n.__esModule&&(n=n.default),'string'==typeof n&&(n=[[e.id,n,'']]),n.locals&&(e.exports=n.locals);(0,a(4424).A)('42aa58db',n,!1,{ssrId:!0})},5162:(e,t,a)=>{var n=a(6868);n.__esModule&&(n=n.default),'string'==typeof n&&(n=[[e.id,n,'']]),n.locals&&(e.exports=n.locals);(0,a(4424).A)('59976834',n,!1,{ssrId:!0})},5401:(e,t,a)=>{var n=a(2303);n.__esModule&&(n=n.default),'string'==typeof n&&(n=[[e.id,n,'']]),n.locals&&(e.exports=n.locals);(0,a(4424).A)('455e86ca',n,!1,{ssrId:!0})},5639:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(8093),o=a.n(n),r=a(3054),l=a.n(r)()(o());l.push([e.id,'.location-tabs-container[data-v-890af5d4]{color:#e0e0e0;max-width:1000px;margin:0 auto;padding:16px}.location-tabs-container h3[data-v-890af5d4]{color:#007acc;margin-bottom:24px;font-size:20px}.location-fold-bar[data-v-890af5d4]{margin-bottom:16px}.location-fold-bar[data-v-890af5d4] .fold-bar-btn{background:linear-gradient(135deg,#2a2a2a 0%,#333333 100%);border:1px solid #555;box-shadow:0 2px 8px rgba(0,0,0,.3);padding:12px 16px;font-size:16px;font-weight:600;color:#e0e0e0;transition:all .3s ease}.location-fold-bar[data-v-890af5d4] .fold-bar-btn:hover{background:linear-gradient(135deg,#333333 0%,#404040 100%);border-color:#666;box-shadow:0 4px 12px rgba(0,0,0,.4)}.location-fold-bar[data-v-890af5d4] .fold-bar-content{background:linear-gradient(135deg,#1a1a1a 0%,#222222 100%);border:1px solid #555;border-top:none;box-shadow:0 2px 8px rgba(0,0,0,.3)}.location-fold-bar[data-v-890af5d4] .fold-bar-content-text{padding:20px}.location-fold-bar[data-v-890af5d4] .fold-bar-footer-toggle{background:linear-gradient(135deg,#2a2a2a 0%,#333333 100%);border-top:1px solid #555;color:#b0b0b0;font-size:13px;font-weight:500;padding:12px 16px;transition:all .3s ease}.location-fold-bar[data-v-890af5d4] .fold-bar-footer-toggle:hover{background:linear-gradient(135deg,#333333 0%,#404040 100%);color:#e0e0e0;border-color:#666}.location-fold-bar[data-v-890af5d4] .fold-bar-toggle-icon{color:#007acc;font-size:14px;font-weight:bold}.location-fold-bar.location-incomplete[data-v-890af5d4] .fold-bar-btn span{color:#ff6b6b !important}.remove-location-btn[data-v-890af5d4]{background:#b91c1c;border:1px solid #b91c1c;border-radius:3px;color:#fff;font-size:16px;font-weight:bold;width:20px;height:20px;display:flex;align-items:center;justify-content:center;cursor:pointer}.remove-location-btn span[data-v-890af5d4]{line-height:1;margin-top:-1px}.location-info-container .section[data-v-890af5d4]{margin-bottom:16px}.section[data-v-890af5d4]{background-color:#2a2a2a;padding:20px;border-radius:12px;border:1px solid #404040;margin-bottom:20px}.section h4[data-v-890af5d4]{color:#b0b0b0;margin-bottom:16px;font-size:16px;border-bottom:1px solid #404040;padding-bottom:8px}.form-grid[data-v-890af5d4]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px}.input-group.full-width[data-v-890af5d4]{grid-column:1/-1}.input-group label[data-v-890af5d4]{display:block;margin-bottom:8px;color:#b0b0b0;font-weight:500}.text-input[data-v-890af5d4]{width:100%;padding:12px 16px;background-color:#1a1a1a;border:1px solid #404040;border-radius:8px;color:#e0e0e0;font-size:14px;outline:none;transition:border-color .2s ease}.text-input[data-v-890af5d4]:focus{border-color:#007acc}.text-input[data-v-890af5d4]::placeholder{color:#666}.text-area[data-v-890af5d4]{width:100%;padding:12px 16px;background-color:#1a1a1a;border:1px solid #404040;border-radius:8px;color:#e0e0e0;font-size:14px;font-family:inherit;outline:none;resize:vertical;min-height:80px;transition:border-color .2s ease}.text-area[data-v-890af5d4]:focus{border-color:#007acc}.text-area[data-v-890af5d4]::placeholder{color:#666}.sub-locations-container[data-v-890af5d4]{display:flex;flex-direction:column;gap:8px}.sub-location-item[data-v-890af5d4]{display:flex;align-items:center;gap:8px}.sub-location-item .text-input[data-v-890af5d4]{flex:1}.sub-location-item .remove-sub-location-btn[data-v-890af5d4]{background:#b91c1c;border:1px solid #b91c1c;border-radius:3px;color:#fff;font-size:16px;font-weight:bold;width:20px;height:20px;display:flex;align-items:center;justify-content:center;cursor:pointer}.sub-location-item .remove-sub-location-btn span[data-v-890af5d4]{line-height:1;margin-top:-1px}.add-sub-location-btn[data-v-890af5d4]{padding:8px 16px;background:linear-gradient(135deg,#28a745 0%,#20c997 100%);border:1px solid #28a745;border-radius:6px;color:#fff;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s ease;align-self:flex-start}.add-sub-location-btn[data-v-890af5d4]:hover:not(:disabled){background:linear-gradient(135deg,#218838 0%,#1aa085 100%);border-color:#218838;transform:translateY(-1px)}.add-sub-location-btn span[data-v-890af5d4]{font-size:16px;font-weight:bold}.bulk-generate-section[data-v-890af5d4]{background-color:#2a2a2a;padding:20px;border-radius:12px;border:1px solid #404040;margin-bottom:20px}.bulk-generate-section h4[data-v-890af5d4]{color:#007acc;margin-bottom:16px;font-size:16px;border-bottom:1px solid #404040;padding-bottom:8px}.count-input-row[data-v-890af5d4]{display:flex;align-items:center;gap:16px;flex-wrap:wrap}.count-input[data-v-890af5d4]{flex:0 0 auto;width:120px}.ai-count-checkbox[data-v-890af5d4]{display:flex;align-items:center;gap:8px;margin-bottom:0}.ai-count-checkbox input[type=checkbox][data-v-890af5d4]{width:16px;height:16px;accent-color:#007acc;cursor:pointer}.ai-count-checkbox label[data-v-890af5d4]{color:#b0b0b0;font-size:14px;font-weight:500;cursor:pointer;margin-bottom:0;-webkit-user-select:none;user-select:none}.ai-count-checkbox label[data-v-890af5d4]:hover{color:#e0e0e0}.bulk-generate-btn[data-v-890af5d4]{padding:14px 32px;background-color:#28a745;border:none;border-radius:8px;color:#fff;font-size:16px;font-weight:500;cursor:pointer;transition:background-color .2s ease;display:flex;align-items:center;justify-content:center;gap:8px;width:100%;margin-top:16px}.bulk-generate-btn[data-v-890af5d4]:hover:not(:disabled){background-color:#218838}.bulk-generate-btn[data-v-890af5d4]:disabled{background-color:#666;cursor:not-allowed}.add-location-section[data-v-890af5d4]{display:flex;justify-content:center;padding:20px 0;margin-top:20px;border-top:1px solid #404040}.add-location-btn[data-v-890af5d4]{padding:12px 24px;background:linear-gradient(135deg,#28a745 0%,#20c997 100%);border:1px solid #28a745;border-radius:8px;color:#fff;font-size:16px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:8px}.add-location-btn[data-v-890af5d4]:hover:not(:disabled){background:linear-gradient(135deg,#218838 0%,#1aa085 100%);border-color:#218838;transform:translateY(-1px);box-shadow:0 4px 12px rgba(40,167,69,.3)}.add-location-btn span[data-v-890af5d4]{font-size:18px;font-weight:bold}@media (max-width:768px){.section[data-v-890af5d4]{padding:16px}.form-grid[data-v-890af5d4]{grid-template-columns:1fr}.input-group.full-width[data-v-890af5d4]{grid-column:1}.location-tabs-container[data-v-890af5d4]{max-width:100%;margin:0}.add-location-section[data-v-890af5d4]{padding:16px 0;margin-top:16px}.add-location-btn[data-v-890af5d4]{padding:10px 20px;font-size:14px}.add-location-btn span[data-v-890af5d4]{font-size:16px}.count-input-row[data-v-890af5d4]{flex-direction:column;align-items:flex-start;gap:12px}.count-input[data-v-890af5d4]{width:100%}.ai-count-checkbox[data-v-890af5d4]{font-size:13px}.remove-location-btn[data-v-890af5d4]{width:20px;height:20px;font-size:14px}[data-v-890af5d4] .fold-bar-content-text{padding:16px}.action-section[data-v-890af5d4]{flex-direction:row;align-items:stretch;gap:12px}.action-section .generate-btn[data-v-890af5d4],.action-section .apply-all-btn[data-v-890af5d4]{flex:1;width:auto;max-width:none}}.generated-result[data-v-890af5d4]{margin-top:8px;padding:8px;background-color:#1a1a1a;border:1px solid #404040;border-radius:6px}.generated-result label[data-v-890af5d4]{display:block;margin-bottom:4px;color:#007acc;font-size:12px;font-weight:500}.generated-result .generated-text[data-v-890af5d4]{color:#e0e0e0;font-size:14px;margin-bottom:8px;word-wrap:break-word}.generated-result .replace-btn[data-v-890af5d4]{padding:6px 12px;background-color:#28a745;border:none;border-radius:4px;color:#fff;font-size:12px;font-weight:500;cursor:pointer;transition:background-color .2s ease}.generated-result .replace-btn[data-v-890af5d4]:hover{background-color:#218838}.action-section[data-v-890af5d4]{display:flex;justify-content:space-between;gap:16px;padding:20px 0}.action-section .generate-btn[data-v-890af5d4],.action-section .apply-all-btn[data-v-890af5d4]{flex:1;max-width:none}.generate-btn[data-v-890af5d4]{padding:14px 32px;background-color:#28a745;border:none;border-radius:8px;color:#fff;font-size:16px;font-weight:500;cursor:pointer;transition:background-color .2s ease;display:flex;align-items:center;justify-content:center;gap:8px}.generate-btn[data-v-890af5d4]:hover:not(:disabled){background-color:#218838}.generate-btn[data-v-890af5d4]:disabled{background-color:#666;cursor:not-allowed}.loading-spinner[data-v-890af5d4]{width:16px;height:16px;border:2px solid #fff;border-top:2px solid rgba(0,0,0,0);border-radius:50%;animation:spin-890af5d4 1s linear infinite}@keyframes spin-890af5d4{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.apply-all-btn[data-v-890af5d4]{padding:14px 32px;background-color:#007acc;border:none;border-radius:8px;color:#fff;font-size:16px;font-weight:500;cursor:pointer;transition:background-color .2s ease}.apply-all-btn[data-v-890af5d4]:hover:not(:disabled){background-color:#0056b3}.apply-all-btn[data-v-890af5d4]:disabled{background-color:#666;cursor:not-allowed}','']);const i=l},5894:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(8093),o=a.n(n),r=a(3054),l=a.n(r)()(o());l.push([e.id,'.location-tab-container[data-v-bd354e5e]{width:100%;height:100%;display:flex;flex-direction:column;background-color:#1a1a1a;color:#e0e0e0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif}.location-content[data-v-bd354e5e]{flex:1;padding:16px;overflow-y:auto;display:flex;flex-direction:column;min-height:var(--v77958077);max-height:var(--v77958077)}.location-content[data-v-bd354e5e]::-webkit-scrollbar{width:8px}.location-content[data-v-bd354e5e]::-webkit-scrollbar-track{background:#2a2a2a;border-radius:4px}.location-content[data-v-bd354e5e]::-webkit-scrollbar-thumb{background:#555;border-radius:4px}.location-content[data-v-bd354e5e]::-webkit-scrollbar-thumb:hover{background:#666}.location-section[data-v-bd354e5e]:last-child{margin-bottom:0}.section-title[data-v-bd354e5e]{font-size:18px;font-weight:600;color:#007acc;margin:0 0 12px 0;padding-bottom:8px;border-bottom:2px solid #007acc}.add-location-button[data-v-bd354e5e]{padding:8px 16px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:background-color .2s;background:#007acc;color:#fff;margin-top:12px}.add-location-button[data-v-bd354e5e]:hover{background:#005a99}.location-list[data-v-bd354e5e]{display:flex;flex-direction:column;gap:8px}.location-row[data-v-bd354e5e]{background:#252525;padding:12px 16px;border-radius:8px;border:1px solid #404040;display:flex;flex-direction:column;gap:8px;font-size:14px;transition:background-color .2s}.location-row[data-v-bd354e5e]:hover{background:#2a2a2a;border-color:#555}.new-location-row[data-v-bd354e5e]{background:#2a2a2a;border-color:#007acc;border-style:dashed}.location-first-row[data-v-bd354e5e]{display:flex;justify-content:space-between;align-items:center;gap:12px}.location-location-row[data-v-bd354e5e]{display:flex;justify-content:space-between;align-items:center;gap:8px;margin-top:6px}.location-location-group[data-v-bd354e5e]{display:flex;align-items:center;gap:8px}.location-location-label[data-v-bd354e5e]{font-weight:500;color:#a0a0a0;font-size:13px;min-width:40px}.location-edit-actions[data-v-bd354e5e]{display:flex;gap:8px}.location-id-name-group[data-v-bd354e5e]{display:flex;gap:12px;align-items:center;flex:1}.location-id[data-v-bd354e5e]{font-weight:500;color:#007acc;font-size:14px}.location-name[data-v-bd354e5e]{font-weight:500;color:#fff;font-size:16px}.location-location[data-v-bd354e5e]{font-weight:500;color:#fff;font-size:16px}.location-location-input[data-v-bd354e5e]{font-weight:500;color:#fff;font-size:16px;width:35px;flex-shrink:0}.location-location-input-edit[data-v-bd354e5e]{background:#333;border:1px solid #555;border-radius:4px;padding:4px 8px}.location-location-input-edit[data-v-bd354e5e]:focus{outline:none;border-color:#007acc}.location-parent-display[data-v-bd354e5e]{display:flex;flex-wrap:wrap;gap:4px}.location-parent-tag[data-v-bd354e5e]{background:#007acc;color:#fff;padding:4px 10px;border-radius:4px;font-size:13px;display:flex;align-items:center;gap:4px;cursor:pointer;transition:opacity .2s}.location-parent-tag[data-v-bd354e5e]:hover{opacity:.8}.location-children-display[data-v-bd354e5e]{display:flex;flex-wrap:wrap;gap:4px}.location-child-tag[data-v-bd354e5e]{background:#4caf50;color:#fff;padding:4px 10px;border-radius:4px;font-size:13px;display:flex;align-items:center;gap:4px;cursor:pointer;transition:opacity .2s}.location-child-tag[data-v-bd354e5e]:hover{opacity:.8}.location-storages-display[data-v-bd354e5e]{display:flex;flex-wrap:wrap;gap:4px}.location-storage-tag[data-v-bd354e5e]{background:#ff9800;color:#fff;padding:4px 10px;border-radius:4px;font-size:13px;display:flex;align-items:center;gap:4px}.location-description[data-v-bd354e5e]{color:#a0a0a0;line-height:1.4;font-size:13px}.location-actions[data-v-bd354e5e]{display:flex;gap:8px}.edit-location-button[data-v-bd354e5e],.delete-location-button[data-v-bd354e5e]{padding:6px 12px;border:none;border-radius:4px;font-size:12px;cursor:pointer;transition:background-color .2s}.edit-location-button[data-v-bd354e5e]{background:#007acc;color:#fff}.edit-location-button[data-v-bd354e5e]:hover{background:#005a99}.delete-location-button[data-v-bd354e5e]{background:#f44336;color:#fff}.delete-location-button[data-v-bd354e5e]:hover{background:#da190b}.location-id-input[data-v-bd354e5e],.location-name-input[data-v-bd354e5e],.location-location-input[data-v-bd354e5e],.location-description-input[data-v-bd354e5e]{background:#333;border:1px solid #555;border-radius:4px;color:#e0e0e0;font-size:14px;padding:4px 8px;width:35px;-webkit-appearance:none;appearance:none;appearance:none}.location-id-input[data-v-bd354e5e]:focus,.location-name-input[data-v-bd354e5e]:focus,.location-location-input[data-v-bd354e5e]:focus,.location-description-input[data-v-bd354e5e]:focus{outline:none;border-color:#007acc}.location-id-input[data-v-bd354e5e]::-webkit-outer-spin-button,.location-id-input[data-v-bd354e5e]::-webkit-inner-spin-button,.location-name-input[data-v-bd354e5e]::-webkit-outer-spin-button,.location-name-input[data-v-bd354e5e]::-webkit-inner-spin-button,.location-location-input[data-v-bd354e5e]::-webkit-outer-spin-button,.location-location-input[data-v-bd354e5e]::-webkit-inner-spin-button,.location-description-input[data-v-bd354e5e]::-webkit-outer-spin-button,.location-description-input[data-v-bd354e5e]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.location-id-input[type=number][data-v-bd354e5e],.location-name-input[type=number][data-v-bd354e5e],.location-location-input[type=number][data-v-bd354e5e],.location-description-input[type=number][data-v-bd354e5e]{-webkit-appearance:textfield;appearance:textfield}.location-id-input[data-v-bd354e5e]{font-weight:500;color:#007acc;font-size:14px;width:50px;flex-shrink:0;text-align:center}.location-name-input[data-v-bd354e5e]{font-weight:500;color:#fff;font-size:16px;width:120px;flex-shrink:0}.location-parent-input-group[data-v-bd354e5e]{display:flex;flex-direction:column;gap:6px}.location-children-input-group[data-v-bd354e5e]{display:flex;flex-direction:column;gap:6px}.selected-children[data-v-bd354e5e]{display:flex;flex-wrap:wrap;gap:4px}.selected-child-tag[data-v-bd354e5e]{background:#4caf50;color:#fff;padding:3px 8px;border-radius:4px;font-size:11px;display:flex;align-items:center;gap:4px}.remove-child-btn[data-v-bd354e5e]{background:none;border:none;color:#fff;cursor:pointer;font-size:14px;line-height:1;padding:0;margin-left:2px}.remove-child-btn[data-v-bd354e5e]:hover{color:#ccc}.location-storages-input-group[data-v-bd354e5e]{display:flex;flex-direction:column;gap:6px}.selected-storages[data-v-bd354e5e]{display:flex;flex-wrap:wrap;gap:4px}.selected-storage-tag[data-v-bd354e5e]{background:#ff9800;color:#fff;padding:3px 8px;border-radius:4px;font-size:11px;display:flex;align-items:center;gap:4px}.remove-storage-btn[data-v-bd354e5e]{background:none;border:none;color:#fff;cursor:pointer;font-size:14px;line-height:1;padding:0;margin-left:2px}.remove-storage-btn[data-v-bd354e5e]:hover{color:#ccc}.parent-location-select[data-v-bd354e5e],.child-location-select[data-v-bd354e5e],.storage-location-select[data-v-bd354e5e]{background:#333;border:1px solid #555;border-radius:4px;color:#e0e0e0;font-size:13px;padding:4px 8px}.parent-location-select[data-v-bd354e5e]:focus,.child-location-select[data-v-bd354e5e]:focus,.storage-location-select[data-v-bd354e5e]:focus{outline:none;border-color:#007acc}.location-description-input[data-v-bd354e5e]{background:#333;border:1px solid #555;border-radius:4px;color:#e0e0e0;font-size:13px;padding:6px 8px;resize:vertical;min-height:60px;line-height:1.4;width:100%}.location-description-input[data-v-bd354e5e]:focus{outline:none;border-color:#007acc}.confirm-button[data-v-bd354e5e],.cancel-button[data-v-bd354e5e]{padding:6px 12px;border:none;border-radius:4px;font-size:12px;cursor:pointer;transition:background-color .2s}.confirm-button[data-v-bd354e5e]{background:#4caf50;color:#fff}.confirm-button[data-v-bd354e5e]:hover{background:#45a049}.cancel-button[data-v-bd354e5e]{background:#f44336;color:#fff}.cancel-button[data-v-bd354e5e]:hover{background:#da190b}.no-locations-message[data-v-bd354e5e]{background:#252525;padding:16px 12px;border-radius:6px;border:1px solid #404040;color:#888;text-align:center;font-size:14px;font-style:italic}@media (max-width:768px){.location-content[data-v-bd354e5e]{padding:12px}.section-title[data-v-bd354e5e]{font-size:18px}.location-row[data-v-bd354e5e]{padding:10px 12px;gap:6px}.location-first-row[data-v-bd354e5e]{gap:8px}.location-location-row[data-v-bd354e5e]{gap:6px;margin-top:4px}.location-location-group[data-v-bd354e5e]{gap:6px}.location-location-label[data-v-bd354e5e]{font-size:12px;min-width:35px}.location-name[data-v-bd354e5e]{font-size:15px}.location-location[data-v-bd354e5e]{font-size:15px}.location-location-input[data-v-bd354e5e]{font-size:15px;width:100px}.location-edit-actions[data-v-bd354e5e]{gap:6px}.location-description[data-v-bd354e5e]{font-size:12px}.location-actions[data-v-bd354e5e]{gap:6px}.edit-location-button[data-v-bd354e5e],.delete-location-button[data-v-bd354e5e]{padding:5px 10px;font-size:11px}.location-id-input[data-v-bd354e5e],.location-name-input[data-v-bd354e5e],.location-location-input[data-v-bd354e5e]{font-size:13px;padding:3px 6px}.location-id-input[data-v-bd354e5e]{width:40px}.location-name-input[data-v-bd354e5e]{width:100px}.parent-location-select[data-v-bd354e5e],.child-location-select[data-v-bd354e5e],.storage-location-select[data-v-bd354e5e]{font-size:12px;padding:3px 6px}.selected-child-tag[data-v-bd354e5e],.location-child-tag[data-v-bd354e5e],.location-parent-tag[data-v-bd354e5e],.location-storage-tag[data-v-bd354e5e],.selected-storage-tag[data-v-bd354e5e]{font-size:12px;padding:2px 6px}.location-description-input[data-v-bd354e5e]{font-size:12px;padding:4px 6px;min-height:50px}.confirm-button[data-v-bd354e5e],.cancel-button[data-v-bd354e5e]{padding:5px 10px;font-size:11px}}','']);const i=l},6111:(e,t,a)=>{var n=a(8597);n.__esModule&&(n=n.default),'string'==typeof n&&(n=[[e.id,n,'']]),n.locals&&(e.exports=n.locals);(0,a(4424).A)('6dcbe1ca',n,!1,{ssrId:!0})},6125:(e,t,a)=>{var n=a(431);n.__esModule&&(n=n.default),'string'==typeof n&&(n=[[e.id,n,'']]),n.locals&&(e.exports=n.locals);(0,a(4424).A)('018e3665',n,!1,{ssrId:!0})},6229:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(8093),o=a.n(n),r=a(3054),l=a.n(r)()(o());l.push([e.id,'body{overflow-y:auto}','']);const i=l},6242:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(8093),o=a.n(n),r=a(3054),l=a.n(r)()(o());l.push([e.id,'.summary-tab-container[data-v-3de5c4ec]{width:100%;height:100%;display:flex;flex-direction:column;background-color:#1a1a1a;color:#e0e0e0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif}.summary-content[data-v-3de5c4ec]{flex:1;padding:16px;overflow-y:auto;display:flex;flex-direction:column;min-height:var(--v70237b32);max-height:var(--v70237b32)}.summary-content[data-v-3de5c4ec]::-webkit-scrollbar{width:8px}.summary-content[data-v-3de5c4ec]::-webkit-scrollbar-track{background:#2a2a2a;border-radius:4px}.summary-content[data-v-3de5c4ec]::-webkit-scrollbar-thumb{background:#555;border-radius:4px}.summary-content[data-v-3de5c4ec]::-webkit-scrollbar-thumb:hover{background:#666}.summary-section[data-v-3de5c4ec]{margin-bottom:16px}.summary-section[data-v-3de5c4ec]:last-child{margin-bottom:0}.section-title[data-v-3de5c4ec]{font-size:18px;font-weight:600;color:#007acc;margin:0 0 12px 0;padding-bottom:8px;border-bottom:2px solid #007acc}.add-summary-button[data-v-3de5c4ec]{padding:8px 16px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:background-color .2s;background:#007acc;color:#fff;margin-top:12px;width:100%}.add-summary-button[data-v-3de5c4ec]:hover{background:#005a99}.summary-list[data-v-3de5c4ec]{display:flex;flex-direction:column;gap:8px}.summary-row[data-v-3de5c4ec]{background:#252525;padding:12px 16px;border-radius:8px;border:1px solid #404040;display:flex;flex-direction:column;gap:8px;font-size:14px;transition:background-color .2s}.summary-row[data-v-3de5c4ec]:hover{background:#2a2a2a;border-color:#555}.new-summary-row[data-v-3de5c4ec]{background:#2a2a2a;border-color:#007acc;border-style:dashed}.summary-first-row[data-v-3de5c4ec]{display:flex;justify-content:space-between;align-items:center;gap:12px}.summary-weighting-last-message-group[data-v-3de5c4ec]{display:flex;gap:12px;align-items:center}.summary-datetime-row[data-v-3de5c4ec]{margin-bottom:4px}.summary-datetime[data-v-3de5c4ec]{font-weight:500;color:#4caf50;font-size:14px;flex-shrink:0}.summary-weighting[data-v-3de5c4ec]{font-weight:500;color:#ff9800;font-size:13px}.summary-last-message-id[data-v-3de5c4ec]{font-weight:500;color:#bb86fc;font-size:13px}.summary-status[data-v-3de5c4ec]{font-weight:500;font-size:12px;padding:2px 6px;border-radius:4px;text-align:center;min-width:50px}.summary-status.status-used[data-v-3de5c4ec]{background-color:#4caf50;color:#fff}.summary-status.status-unused[data-v-3de5c4ec]{background-color:#ff9800;color:#fff}.summary-content-display[data-v-3de5c4ec]{color:#a0a0a0;line-height:1.4;font-size:13px}.summary-actions[data-v-3de5c4ec]{display:flex;gap:8px}.edit-summary-button[data-v-3de5c4ec],.delete-summary-button[data-v-3de5c4ec]{padding:6px 12px;border:none;border-radius:4px;font-size:12px;cursor:pointer;transition:background-color .2s}.edit-summary-button[data-v-3de5c4ec]{background:#007acc;color:#fff}.edit-summary-button[data-v-3de5c4ec]:hover{background:#005a99}.delete-summary-button[data-v-3de5c4ec]{background:#f44336;color:#fff}.delete-summary-button[data-v-3de5c4ec]:hover{background:#da190b}.no-summaries-message[data-v-3de5c4ec]{background:#252525;padding:16px 12px;border-radius:6px;border:1px solid #404040;color:#888;text-align:center;font-size:14px;font-style:italic}.summary-edit-mode[data-v-3de5c4ec]{display:flex;flex-direction:column;gap:8px}.summary-edit-first-row[data-v-3de5c4ec]{display:flex;justify-content:space-between;align-items:center;gap:12px}.summary-weighting-last-message-input-group[data-v-3de5c4ec]{display:flex;gap:12px;align-items:center}.summary-weighting-input-group[data-v-3de5c4ec],.summary-last-message-id-input-group[data-v-3de5c4ec]{display:flex;gap:4px;align-items:center;font-size:13px;color:#a0a0a0}.summary-edit-actions[data-v-3de5c4ec]{display:flex;gap:8px;justify-content:flex-end}.summary-edit-datetime-row[data-v-3de5c4ec]{margin-bottom:4px}.summary-datetime-input-group[data-v-3de5c4ec]{display:flex;gap:4px;flex-shrink:0;font-weight:500;color:#4caf50;font-size:14px}.summary-datetime-input[data-v-3de5c4ec]{background:#333;border:1px solid #555;border-radius:4px;color:#4caf50;font-size:14px;padding:4px 8px;width:35px;-webkit-appearance:none;appearance:none;text-align:center}.summary-datetime-input[data-v-3de5c4ec]:focus{outline:none;border-color:#007acc}.summary-datetime-input[data-v-3de5c4ec]::-webkit-outer-spin-button,.summary-datetime-input[data-v-3de5c4ec]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.summary-datetime-input[type=number][data-v-3de5c4ec]{-webkit-appearance:textfield;appearance:textfield}.summary-datetime-year-input[data-v-3de5c4ec]{width:60px}.summary-weighting-input[data-v-3de5c4ec]{background:#333;border:1px solid #555;border-radius:4px;color:#ff9800;font-size:14px;padding:4px 8px;width:60px;-webkit-appearance:none;appearance:none;text-align:center}.summary-weighting-input[data-v-3de5c4ec]:focus{outline:none;border-color:#007acc}.summary-weighting-input[data-v-3de5c4ec]::-webkit-outer-spin-button,.summary-weighting-input[data-v-3de5c4ec]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.summary-weighting-input[type=number][data-v-3de5c4ec]{-webkit-appearance:textfield;appearance:textfield}.summary-last-message-id-input[data-v-3de5c4ec]{background:#333;border:1px solid #555;border-radius:4px;color:#9c27b0;font-size:14px;padding:4px 8px;width:40px;-webkit-appearance:none;appearance:none;text-align:center}.summary-last-message-id-input[data-v-3de5c4ec]:focus{outline:none;border-color:#007acc}.summary-last-message-id-input[data-v-3de5c4ec]::-webkit-outer-spin-button,.summary-last-message-id-input[data-v-3de5c4ec]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.summary-last-message-id-input[type=number][data-v-3de5c4ec]{-webkit-appearance:textfield;appearance:textfield}.summary-content-input[data-v-3de5c4ec]{background:#333;border:1px solid #555;border-radius:4px;color:#e0e0e0;font-size:13px;padding:6px 8px;resize:vertical;min-height:60px;line-height:1.4;width:100%}.summary-content-input[data-v-3de5c4ec]:focus{outline:none;border-color:#007acc}.confirm-button[data-v-3de5c4ec],.cancel-button[data-v-3de5c4ec]{padding:6px 12px;border:none;border-radius:4px;font-size:12px;cursor:pointer;transition:background-color .2s}.confirm-button[data-v-3de5c4ec]{background:#4caf50;color:#fff}.confirm-button[data-v-3de5c4ec]:hover:not(:disabled){background:#45a049}.confirm-button[data-v-3de5c4ec]:disabled{background:#666;color:#ccc;cursor:not-allowed}.cancel-button[data-v-3de5c4ec]{background:#f44336;color:#fff}.cancel-button[data-v-3de5c4ec]:hover{background:#da190b}@media (max-width:768px){.summary-content[data-v-3de5c4ec]{padding:12px}.section-title[data-v-3de5c4ec]{font-size:18px}.summary-row[data-v-3de5c4ec]{padding:10px 12px;gap:6px}.summary-first-row[data-v-3de5c4ec]{gap:8px}.summary-weighting-last-message-group[data-v-3de5c4ec]{gap:8px}.summary-datetime-row[data-v-3de5c4ec]{margin-bottom:3px}.summary-content-display[data-v-3de5c4ec]{font-size:12px}.summary-actions[data-v-3de5c4ec]{gap:6px}.edit-summary-button[data-v-3de5c4ec],.delete-summary-button[data-v-3de5c4ec]{padding:5px 10px;font-size:11px}.summary-edit-first-row[data-v-3de5c4ec]{gap:8px}.summary-weighting-last-message-input-group[data-v-3de5c4ec]{gap:8px}.summary-edit-actions[data-v-3de5c4ec]{gap:6px}.summary-datetime-input[data-v-3de5c4ec]{font-size:13px;padding:3px 6px}.summary-datetime-year-input[data-v-3de5c4ec]{width:50px}.summary-weighting-input[data-v-3de5c4ec]{width:50px}.summary-last-message-id-input[data-v-3de5c4ec]{width:35px}.summary-content-input[data-v-3de5c4ec]{font-size:12px;padding:4px 6px;min-height:50px}.confirm-button[data-v-3de5c4ec],.cancel-button[data-v-3de5c4ec]{padding:5px 10px;font-size:11px}}','']);const i=l},6280:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(8093),o=a.n(n),r=a(3054),l=a.n(r)()(o());l.push([e.id,'.item-tabs-container[data-v-d8256cea]{color:#e0e0e0;max-width:1000px;margin:0 auto;padding:16px}.item-tabs-container h3[data-v-d8256cea]{color:#007acc;margin-bottom:24px;font-size:20px}.item-fold-bar[data-v-d8256cea]{margin-bottom:16px}.item-fold-bar[data-v-d8256cea] .fold-bar-btn{background:linear-gradient(135deg,#2a2a2a 0%,#333333 100%);border:1px solid #555;box-shadow:0 2px 8px rgba(0,0,0,.3);padding:12px 16px;font-size:16px;font-weight:600;color:#e0e0e0;transition:all .3s ease}.item-fold-bar[data-v-d8256cea] .fold-bar-btn:hover{background:linear-gradient(135deg,#333333 0%,#404040 100%);border-color:#666;box-shadow:0 4px 12px rgba(0,0,0,.4)}.item-fold-bar[data-v-d8256cea] .fold-bar-content{background:linear-gradient(135deg,#1a1a1a 0%,#222222 100%);border:1px solid #555;border-top:none;box-shadow:0 2px 8px rgba(0,0,0,.3)}.item-fold-bar[data-v-d8256cea] .fold-bar-content-text{padding:20px}.item-fold-bar[data-v-d8256cea] .fold-bar-footer-toggle{background:linear-gradient(135deg,#2a2a2a 0%,#333333 100%);border-top:1px solid #555;color:#b0b0b0;font-size:13px;font-weight:500;padding:12px 16px;transition:all .3s ease}.item-fold-bar[data-v-d8256cea] .fold-bar-footer-toggle:hover{background:linear-gradient(135deg,#333333 0%,#404040 100%);color:#e0e0e0;border-color:#666}.item-fold-bar[data-v-d8256cea] .fold-bar-toggle-icon{color:#007acc;font-size:14px;font-weight:bold}.item-fold-bar.item-incomplete[data-v-d8256cea] .fold-bar-btn span{color:#ff6b6b !important}.remove-item-btn[data-v-d8256cea]{background:#b91c1c;border:1px solid #b91c1c;border-radius:3px;color:#fff;font-size:16px;font-weight:bold;width:20px;height:20px;display:flex;align-items:center;justify-content:center;cursor:pointer}.remove-item-btn span[data-v-d8256cea]{line-height:1;margin-top:-1px}.item-info-container .section[data-v-d8256cea]{margin-bottom:16px}.section[data-v-d8256cea]{background-color:#2a2a2a;padding:20px;border-radius:12px;border:1px solid #404040;margin-bottom:20px}.section h4[data-v-d8256cea]{color:#b0b0b0;margin-bottom:16px;font-size:16px;border-bottom:1px solid #404040;padding-bottom:8px}.form-grid[data-v-d8256cea]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px}.input-group.full-width[data-v-d8256cea]{grid-column:1/-1}.input-group label[data-v-d8256cea]{display:block;margin-bottom:8px;color:#b0b0b0;font-weight:500}.text-input[data-v-d8256cea]{width:100%;padding:12px 16px;background-color:#1a1a1a;border:1px solid #404040;border-radius:8px;color:#e0e0e0;font-size:14px;outline:none;transition:border-color .2s ease}.text-input[data-v-d8256cea]:focus{border-color:#007acc}.text-input[data-v-d8256cea]::placeholder{color:#666}.text-area[data-v-d8256cea]{width:100%;padding:12px 16px;background-color:#1a1a1a;border:1px solid #404040;border-radius:8px;color:#e0e0e0;font-size:14px;font-family:inherit;outline:none;resize:vertical;min-height:80px;transition:border-color .2s ease}.text-area[data-v-d8256cea]:focus{border-color:#007acc}.text-area[data-v-d8256cea]::placeholder{color:#666}.add-item-section[data-v-d8256cea]{display:flex;justify-content:center;padding:20px 0;margin-top:20px;border-top:1px solid #404040}.add-item-btn[data-v-d8256cea]{padding:12px 24px;background:linear-gradient(135deg,#28a745 0%,#20c997 100%);border:1px solid #28a745;border-radius:8px;color:#fff;font-size:16px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:8px}.add-item-btn[data-v-d8256cea]:hover:not(:disabled){background:linear-gradient(135deg,#218838 0%,#1aa085 100%);border-color:#218838;transform:translateY(-1px);box-shadow:0 4px 12px rgba(40,167,69,.3)}.add-item-btn span[data-v-d8256cea]{font-size:18px;font-weight:bold}@media (max-width:768px){.section[data-v-d8256cea]{padding:16px}.form-grid[data-v-d8256cea]{grid-template-columns:1fr}.input-group.full-width[data-v-d8256cea]{grid-column:1}.item-tabs-container[data-v-d8256cea]{max-width:100%;margin:0}.add-item-section[data-v-d8256cea]{padding:16px 0;margin-top:16px}.add-item-btn[data-v-d8256cea]{padding:10px 20px;font-size:14px}.add-item-btn span[data-v-d8256cea]{font-size:16px}.remove-item-btn[data-v-d8256cea]{width:20px;height:20px;font-size:14px}[data-v-d8256cea] .fold-bar-content-text{padding:16px}.action-section[data-v-d8256cea]{flex-direction:row;align-items:stretch;gap:12px}.action-section .generate-btn[data-v-d8256cea],.action-section .apply-all-btn[data-v-d8256cea]{flex:1;width:auto;max-width:none}}.generated-result[data-v-d8256cea]{margin-top:8px;padding:8px;background-color:#1a1a1a;border:1px solid #404040;border-radius:6px}.generated-result label[data-v-d8256cea]{display:block;margin-bottom:4px;color:#007acc;font-size:12px;font-weight:500}.generated-result .generated-text[data-v-d8256cea]{color:#e0e0e0;font-size:14px;margin-bottom:8px;word-wrap:break-word}.generated-result .replace-btn[data-v-d8256cea]{padding:6px 12px;background-color:#28a745;border:none;border-radius:4px;color:#fff;font-size:12px;font-weight:500;cursor:pointer;transition:background-color .2s ease}.generated-result .replace-btn[data-v-d8256cea]:hover{background-color:#218838}.action-section[data-v-d8256cea]{display:flex;justify-content:space-between;gap:16px;padding:20px 0}.action-section .generate-btn[data-v-d8256cea],.action-section .apply-all-btn[data-v-d8256cea]{flex:1;max-width:none}.generate-btn[data-v-d8256cea]{padding:14px 32px;background-color:#28a745;border:none;border-radius:8px;color:#fff;font-size:16px;font-weight:500;cursor:pointer;transition:background-color .2s ease;display:flex;align-items:center;justify-content:center;gap:8px}.generate-btn[data-v-d8256cea]:hover:not(:disabled){background-color:#218838}.generate-btn[data-v-d8256cea]:disabled{background-color:#666;cursor:not-allowed}.loading-spinner[data-v-d8256cea]{width:16px;height:16px;border:2px solid #fff;border-top:2px solid rgba(0,0,0,0);border-radius:50%;animation:spin-d8256cea 1s linear infinite}@keyframes spin-d8256cea{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.apply-all-btn[data-v-d8256cea]{padding:14px 32px;background-color:#007acc;border:none;border-radius:8px;color:#fff;font-size:16px;font-weight:500;cursor:pointer;transition:background-color .2s ease}.apply-all-btn[data-v-d8256cea]:hover:not(:disabled){background-color:#0056b3}.apply-all-btn[data-v-d8256cea]:disabled{background-color:#666;cursor:not-allowed}','']);const i=l},6479:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(8093),o=a.n(n),r=a(3054),l=a.n(r)()(o());l.push([e.id,'.settings-container[data-v-d8917884]{display:flex;flex-direction:column;background-color:#1a1a1a;color:#e0e0e0;overflow:hidden;min-height:var(--v50c01ddd);max-height:var(--v50c01ddd)}.settings-header[data-v-d8917884]{padding:20px 16px 16px 16px;border-bottom:1px solid #404040}.settings-header h2[data-v-d8917884]{margin:0;font-size:24px;font-weight:600;color:#e0e0e0}.settings-list[data-v-d8917884]{flex:1;overflow-y:auto;padding:8px 0}.setting-item[data-v-d8917884]{display:flex;align-items:center;justify-content:space-between;padding:16px;border-bottom:1px solid #2a2a2a;transition:background-color .2s ease}.setting-item[data-v-d8917884]:hover{background-color:hsla(0,0%,100%,.02)}.setting-item[data-v-d8917884]:last-child{border-bottom:none}.setting-item.version-item[data-v-d8917884]{border-bottom:1px solid #2a2a2a}.setting-item.xml-rules-item[data-v-d8917884]{border-bottom:none;padding-bottom:8px}.setting-label[data-v-d8917884]{flex:1;display:flex;flex-direction:column;gap:4px}.setting-title[data-v-d8917884]{font-size:16px;font-weight:500;color:#e0e0e0}.setting-description[data-v-d8917884]{font-size:14px;color:#888;line-height:1.4}.setting-control[data-v-d8917884]{display:flex;align-items:center;margin-left:16px}.switch[data-v-d8917884]{position:relative;display:inline-block;width:50px;height:24px}.switch input[data-v-d8917884]{opacity:0;width:0;height:0}.slider[data-v-d8917884]{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#404040;transition:.3s;border-radius:24px}.slider[data-v-d8917884]:before{position:absolute;content:"";height:18px;width:18px;left:3px;bottom:3px;background-color:#fff;transition:.3s;border-radius:50%}input:checked+.slider[data-v-d8917884]{background-color:#007acc}input:checked+.slider[data-v-d8917884]:before{transform:translateX(26px)}.number-input[data-v-d8917884]{width:80px;padding:8px 12px;background-color:#2a2a2a;border:1px solid #404040;border-radius:8px;color:#e0e0e0;font-size:14px;text-align:center;outline:none;transition:border-color .2s ease}.number-input[data-v-d8917884]:focus{border-color:#007acc}.number-input[data-v-d8917884]::placeholder{color:#888}.number-input[data-v-d8917884]::-webkit-outer-spin-button,.number-input[data-v-d8917884]::-webkit-inner-spin-button{-webkit-appearance:none;appearance:none;margin:0}.number-input[type=number][data-v-d8917884]{-webkit-appearance:textfield;appearance:textfield}.setting-section-header[data-v-d8917884]{padding:16px 16px 8px 16px;display:flex;align-items:center;gap:12px}.setting-section-header h3[data-v-d8917884]{margin:0;font-size:18px;font-weight:600;color:#e0e0e0}.setting-section-header .section-description[data-v-d8917884]{font-size:14px;color:#888;line-height:1.4}.folding-rules-fullwidth[data-v-d8917884]{margin-top:8px;padding:0 16px}.folding-rules-container[data-v-d8917884]{width:100%;border:1px solid #404040;border-radius:8px;overflow:hidden}.rules-header[data-v-d8917884]{display:grid;grid-template-columns:1fr 1fr 1fr 1fr 1fr auto;gap:12px;padding:12px 16px;background-color:#2a2a2a;border-bottom:1px solid #404040;font-size:12px;font-weight:500;color:#b0b0b0;text-transform:uppercase;letter-spacing:.5px}.header-cell[data-v-d8917884]{text-align:center;padding:4px 0}.folding-rule-row[data-v-d8917884]{display:grid;grid-template-columns:1fr 1fr 1fr 1fr 1fr auto;gap:12px;padding:12px 16px;background-color:#1a1a1a;border-bottom:1px solid #2a2a2a;align-items:center}.folding-rule-row[data-v-d8917884]:last-child{border-bottom:none}.folding-rule-row[data-v-d8917884]:hover{background-color:#202020}.rule-cell[data-v-d8917884]{display:flex;align-items:center;justify-content:center;min-height:32px}.field-label[data-v-d8917884]{font-size:12px;font-weight:500;color:#b0b0b0;text-transform:uppercase;letter-spacing:.5px}.text-input[data-v-d8917884]{padding:6px 8px;background-color:#2a2a2a;border:1px solid #404040;border-radius:4px;color:#e0e0e0;font-size:13px;outline:none;transition:border-color .2s ease;width:100%;min-width:80px}.text-input[data-v-d8917884]:focus{border-color:#007acc}.text-input[data-v-d8917884]::placeholder{color:#666}.text-input.compact[data-v-d8917884]{padding:4px 6px;font-size:12px;min-width:60px}.select-input[data-v-d8917884]{padding:6px 8px;background-color:#2a2a2a;border:1px solid #404040;border-radius:4px;color:#e0e0e0;font-size:13px;outline:none;cursor:pointer;transition:border-color .2s ease;width:100%;min-width:80px}.select-input[data-v-d8917884]:focus{border-color:#007acc}.select-input.compact[data-v-d8917884]{padding:4px 6px;font-size:12px;min-width:60px}.radio-group[data-v-d8917884]{display:flex;flex-direction:column;gap:4px;width:100%}.radio-group.compact[data-v-d8917884]{gap:2px}.radio-option[data-v-d8917884]{display:flex;align-items:center;gap:4px;cursor:pointer;padding:2px 4px;border-radius:3px;transition:background-color .2s ease;justify-content:center}.radio-option[data-v-d8917884]:hover{background-color:hsla(0,0%,100%,.05)}.radio-option.compact[data-v-d8917884]{padding:1px 2px;gap:2px}.radio-option input[type=radio][data-v-d8917884]{margin:0;width:14px;height:14px;accent-color:#007acc;cursor:pointer}.radio-option .radio-label[data-v-d8917884]{font-size:11px;color:#b0b0b0;-webkit-user-select:none;user-select:none;white-space:nowrap}.delete-rule-btn[data-v-d8917884]{padding:6px 10px;background-color:#dc3545;border:none;border-radius:4px;color:#fff;font-size:11px;font-weight:500;cursor:pointer;transition:background-color .2s ease;white-space:nowrap;min-width:50px}.delete-rule-btn[data-v-d8917884]:hover{background-color:#c82333}.delete-rule-btn.compact[data-v-d8917884]{padding:4px 8px;font-size:10px;min-width:40px}.add-rule-row[data-v-d8917884]{display:flex;justify-content:center;padding:12px 0}.add-rule-btn[data-v-d8917884]{padding:10px 20px;background-color:#007acc;border:none;border-radius:8px;color:#fff;font-size:14px;font-weight:500;cursor:pointer;transition:background-color .2s ease}.add-rule-btn[data-v-d8917884]:hover{background-color:#0056b3}@media (max-width:768px){.settings-header[data-v-d8917884]{padding:16px 12px 12px 12px}.settings-header h2[data-v-d8917884]{font-size:20px}.setting-item[data-v-d8917884]{padding:12px}.setting-title[data-v-d8917884]{font-size:15px}.setting-description[data-v-d8917884]{font-size:13px}.number-input[data-v-d8917884]{width:70px;padding:6px 10px;font-size:13px}.rules-header[data-v-d8917884]{font-size:10px;padding:8px 12px}.folding-rule-row[data-v-d8917884]{padding:8px 12px;gap:6px}.rule-cell[data-v-d8917884]{min-height:28px}.text-input.compact[data-v-d8917884],.select-input.compact[data-v-d8917884]{font-size:11px;padding:3px 4px;min-width:45px}.radio-option.compact .radio-label[data-v-d8917884]{font-size:10px}.delete-rule-btn.compact[data-v-d8917884]{padding:3px 6px;font-size:9px;min-width:35px}}.version-number[data-v-d8917884]{font-size:16px;font-weight:600;color:#007acc;padding:6px 12px;min-width:80px;text-align:center;-webkit-user-select:text;user-select:text}','']);const i=l},6850:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(8093),o=a.n(n),r=a(3054),l=a.n(r)()(o());l.push([e.id,'.world-background-container[data-v-6467ee74]{padding:20px;color:#e0e0e0;max-width:800px;margin:0 0;min-height:600px}.world-background-container h3[data-v-6467ee74]{color:#007acc;margin-bottom:24px;font-size:20px}.input-group[data-v-6467ee74]{margin-bottom:20px}.input-group label[data-v-6467ee74]{display:block;margin-bottom:8px;color:#b0b0b0;font-weight:500}.text-input[data-v-6467ee74]{width:100%;padding:12px 16px;background-color:#1a1a1a;border:1px solid #404040;border-radius:8px;color:#e0e0e0;font-size:14px;outline:none;transition:border-color .2s ease}.text-input[data-v-6467ee74]:focus{border-color:#007acc}.text-input[data-v-6467ee74]::placeholder{color:#666}.text-area[data-v-6467ee74]{width:100%;padding:12px 16px;background-color:#1a1a1a;border:1px solid #404040;border-radius:8px;color:#e0e0e0;font-size:14px;font-family:inherit;outline:none;resize:vertical;min-height:80px;transition:border-color .2s ease}.text-area[data-v-6467ee74]:focus{border-color:#007acc}.text-area[data-v-6467ee74]::placeholder{color:#666}.generate-btn[data-v-6467ee74]{width:100%;padding:14px;background-color:#007acc;border:none;border-radius:8px;color:#fff;font-size:16px;font-weight:500;cursor:pointer;transition:background-color .2s ease;margin-bottom:24px;display:flex;align-items:center;justify-content:center;gap:8px}.generate-btn[data-v-6467ee74]:hover:not(:disabled){background-color:#0056b3}.generate-btn[data-v-6467ee74]:disabled{background-color:#666;cursor:not-allowed}.loading-spinner[data-v-6467ee74]{width:16px;height:16px;border:2px solid #fff;border-top:2px solid rgba(0,0,0,0);border-radius:50%;animation:spin-6467ee74 1s linear infinite}@keyframes spin-6467ee74{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.info-section[data-v-6467ee74]{background-color:#2a2a2a;padding:24px;border-radius:12px;border:1px solid #404040}.replace-btn[data-v-6467ee74]{width:100%;padding:14px;background-color:#28a745;border:none;border-radius:8px;color:#fff;font-size:16px;font-weight:500;cursor:pointer;transition:background-color .2s ease}.replace-btn[data-v-6467ee74]:hover:not(:disabled){background-color:#218838}.replace-btn[data-v-6467ee74]:disabled{background-color:#666;cursor:not-allowed}@media (max-width:768px){.world-background-container[data-v-6467ee74]{padding:16px}.info-section[data-v-6467ee74]{padding:20px}.text-input[data-v-6467ee74],.text-area[data-v-6467ee74]{font-size:16px}}','']);const i=l},6868:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(8093),o=a.n(n),r=a(3054),l=a.n(r)()(o());l.push([e.id,'.main-interface-container[data-v-9fb68f82]{display:flex;flex-direction:column;width:100%;height:100%;background-color:#1a1a1a;color:#e0e0e0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif}.main-content[data-v-9fb68f82]{flex:1;display:flex;flex-direction:column}.conversation-area[data-v-9fb68f82]{display:flex;flex-direction:column;flex:1;background-color:#1a1a1a}.user-area[data-v-9fb68f82]{display:flex;flex-direction:column;flex:1;background-color:#1a1a1a}.character-area[data-v-9fb68f82]{display:flex;flex-direction:column;flex:1;background-color:#1a1a1a}.item-area[data-v-9fb68f82]{display:flex;flex-direction:column;flex:1;background-color:#1a1a1a}.storage-area[data-v-9fb68f82]{display:flex;flex-direction:column;flex:1;background-color:#1a1a1a}.location-area[data-v-9fb68f82]{display:flex;flex-direction:column;flex:1;background-color:#1a1a1a}.promise-area[data-v-9fb68f82]{display:flex;flex-direction:column;flex:1;background-color:#1a1a1a}.summary-area[data-v-9fb68f82]{display:flex;flex-direction:column;flex:1;background-color:#1a1a1a}.world-info-area[data-v-9fb68f82]{display:flex;flex-direction:column;flex:1;background-color:#1a1a1a}.settings-area[data-v-9fb68f82]{display:flex;flex-direction:column;flex:1;background-color:#1a1a1a}.tab-navigation[data-v-9fb68f82]{display:flex;flex-direction:column;background-color:#2a2a2a;border-bottom:1px solid #404040;flex-shrink:0}.tab-navigation.top[data-v-9fb68f82]{border-top:none}.time-row[data-v-9fb68f82]{display:flex;padding:4px 12px;background-color:rgba(0,0,0,.3);border-bottom:1px solid #404040;align-items:center}.current-time[data-v-9fb68f82]{font-size:14px;font-weight:600;color:#fff;font-family:"Courier New",monospace}.tab-row[data-v-9fb68f82]{display:flex;border-bottom:1px solid #404040}.tab-row[data-v-9fb68f82]:last-child{border-bottom:none}.tab-button[data-v-9fb68f82]{flex:1;padding:10px;background:none;border:none;border-right:1px solid #404040;color:#b0b0b0;font-size:16px;cursor:pointer;transition:all .2s ease}.tab-button.active[data-v-9fb68f82]{color:#007acc;background-color:#3a3a3a}.tab-button[data-v-9fb68f82]:hover{background-color:#3a3a3a}.tab-button[data-v-9fb68f82]:last-child{border-right:none}@media (max-width:768px){.tab-button[data-v-9fb68f82]{padding:8px;font-size:14px}}.slide-right-enter-active[data-v-9fb68f82],.slide-right-leave-active[data-v-9fb68f82]{transition:all .2s cubic-bezier(0.25,0.46,0.45,0.94)}.slide-right-enter-from[data-v-9fb68f82]{opacity:0;transform:translateX(-50px)}.slide-right-leave-to[data-v-9fb68f82]{opacity:0;transform:translateX(50px)}.slide-left-enter-active[data-v-9fb68f82],.slide-left-leave-active[data-v-9fb68f82]{transition:all .2s cubic-bezier(0.25,0.46,0.45,0.94)}.slide-left-enter-from[data-v-9fb68f82]{opacity:0;transform:translateX(50px)}.slide-left-leave-to[data-v-9fb68f82]{opacity:0;transform:translateX(-50px)}.no-transition-enter-active[data-v-9fb68f82],.no-transition-leave-active[data-v-9fb68f82]{transition:none}.no-transition-enter-from[data-v-9fb68f82],.no-transition-leave-to[data-v-9fb68f82]{opacity:1;transform:none}','']);const i=l},7405:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(8093),o=a.n(n),r=a(3054),l=a.n(r)()(o());l.push([e.id,'.user-tab-container[data-v-ada46c14]{width:100%;height:100%;display:flex;flex-direction:column;background-color:#1a1a1a;color:#e0e0e0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif}.user-content[data-v-ada46c14]{flex:1;padding:16px;overflow-y:auto;gap:20px;display:flex;flex-direction:column;min-height:var(--v68dcf940);max-height:var(--v68dcf940)}.user-content[data-v-ada46c14]::-webkit-scrollbar{width:8px}.user-content[data-v-ada46c14]::-webkit-scrollbar-track{background:#2a2a2a;border-radius:4px}.user-content[data-v-ada46c14]::-webkit-scrollbar-thumb{background:#555;border-radius:4px}.user-content[data-v-ada46c14]::-webkit-scrollbar-thumb:hover{background:#666}.user-header[data-v-ada46c14]{text-align:center;position:relative}.user-name[data-v-ada46c14]{font-size:28px;font-weight:700;color:#007acc;margin:0;text-shadow:0 2px 4px rgba(0,0,0,.3)}.attributes-grid[data-v-ada46c14]{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px;margin-bottom:20px}.attribute-item[data-v-ada46c14]{background:#252525;padding:12px;border-radius:8px;text-align:center;border:1px solid #404040}.attribute-item.full-width[data-v-ada46c14]{grid-column:1/-1;text-align:left;padding:16px}.attribute-item.horizontal[data-v-ada46c14]{display:flex;justify-content:space-between;align-items:center;text-align:left}.attribute-item.horizontal .attribute-label[data-v-ada46c14]{margin-bottom:0;flex-shrink:0}.attribute-item.horizontal .attribute-value[data-v-ada46c14]{margin-left:auto}.attribute-item.horizontal .attribute-input[data-v-ada46c14]{margin-left:8px}.attribute-item.birthday-fullwidth[data-v-ada46c14]{display:flex;justify-content:space-between;align-items:center;text-align:left}.attribute-item.birthday-fullwidth .attribute-label[data-v-ada46c14]{margin-bottom:0;flex-shrink:0}.attribute-item.birthday-fullwidth .attribute-value[data-v-ada46c14]{margin-left:auto}.attribute-item.birthday-fullwidth .birthday-edit-container[data-v-ada46c14]{margin-left:auto;justify-content:flex-end}.attribute-label[data-v-ada46c14]{display:block;font-size:12px;color:#888;margin-bottom:6px;text-transform:uppercase;letter-spacing:.5px;font-weight:500}.attribute-label.unit-label[data-v-ada46c14]{text-transform:none}.attribute-value[data-v-ada46c14]{display:block;font-size:16px;font-weight:600;color:#e0e0e0}.attribute-value.money[data-v-ada46c14]{color:#4caf50;font-weight:700}.attribute-value.no-bold[data-v-ada46c14]{font-weight:400}.section-title[data-v-ada46c14]{font-size:18px;font-weight:600;color:#007acc;margin:20px 0 12px 0;padding-bottom:8px;border-bottom:2px solid #007acc}.relations-section[data-v-ada46c14],.inventory-section[data-v-ada46c14]{margin-bottom:16px}.relations-section[data-v-ada46c14]:last-child,.inventory-section[data-v-ada46c14]:last-child{margin-bottom:0}.relations-list[data-v-ada46c14],.inventory-list[data-v-ada46c14],.relations-edit-list[data-v-ada46c14],.inventory-edit-list[data-v-ada46c14]{display:flex;flex-direction:column;gap:8px}.relation-item[data-v-ada46c14]{background:#252525;padding:10px 12px;border-radius:6px;border:1px solid #404040;font-size:14px;color:#e0e0e0;line-height:1.4}.relation-highlight[data-v-ada46c14]{color:#fff;font-weight:500}.relation-connector[data-v-ada46c14]{color:#888;font-weight:400}.relation-edit-item[data-v-ada46c14]{background:#252525;padding:10px 12px;border-radius:6px;border:1px solid #404040;display:flex;align-items:center;gap:8px;flex-wrap:wrap}.relation-edit-connector[data-v-ada46c14]{color:#888;font-weight:400;font-size:14px;white-space:nowrap}.relation-input[data-v-ada46c14]{background:#333;border:1px solid #555;border-radius:4px;color:#e0e0e0;padding:4px 8px;font-size:14px;flex:1;min-width:50px}.relation-input[data-v-ada46c14]:focus{outline:none;border-color:#007acc}.relation-select[data-v-ada46c14],.inventory-select[data-v-ada46c14]{background:#333;border:1px solid #555;border-radius:4px;color:#e0e0e0;padding:4px 8px;font-size:14px;min-width:120px;flex-shrink:0}.relation-select[data-v-ada46c14]:focus,.inventory-select[data-v-ada46c14]:focus{outline:none;border-color:#007acc}.relation-select option[data-v-ada46c14],.inventory-select option[data-v-ada46c14]{background:#333;color:#e0e0e0}.relation-select option[data-v-ada46c14]:disabled,.inventory-select option[data-v-ada46c14]:disabled{color:#888;font-style:italic}.relation-remove-btn[data-v-ada46c14],.add-relation-btn[data-v-ada46c14],.add-inventory-btn[data-v-ada46c14]{background:#007acc;color:#fff;border:none;padding:8px 16px;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;margin-top:8px;transition:background-color .2s}.relation-remove-btn[data-v-ada46c14]:hover,.add-relation-btn[data-v-ada46c14]:hover,.add-inventory-btn[data-v-ada46c14]:hover{background:#005a99}.inventory-item[data-v-ada46c14]{background:#252525;padding:10px 12px;border-radius:6px;border:1px solid #404040;display:flex;flex-direction:column;gap:6px}.inventory-first-row[data-v-ada46c14]{display:flex;justify-content:space-between;align-items:center}.item-name-id[data-v-ada46c14]{font-weight:500;color:#fff;font-size:14px}.item-quantity[data-v-ada46c14]{font-weight:600;color:#e0e0e0;background:#007acc;padding:2px 8px;border-radius:12px;font-size:12px}.storage-indicator[data-v-ada46c14]{font-weight:600;color:#fff;background:#4caf50;padding:2px 8px;border-radius:12px;font-size:12px}[data-v-ada46c14] .inventory-item-tag{background:#4caf50;color:#fff;padding:2px 6px;border-radius:4px;font-size:12px;display:flex;align-items:center;gap:4px;white-space:nowrap;flex-shrink:0}[data-v-ada46c14] .storage-item-tag{background:#ff9800;color:#fff;padding:2px 6px;border-radius:4px;font-size:12px;display:flex;align-items:center;gap:4px;white-space:nowrap;flex-shrink:0}.inventory-second-row[data-v-ada46c14]{font-size:12px;color:#a0a0a0;line-height:1.6}.inventory-tags-container[data-v-ada46c14]{display:flex;flex-wrap:wrap;gap:4px;align-items:flex-start;row-gap:6px;margin-top:4px}.inventory-third-row[data-v-ada46c14]{display:flex;flex-direction:column;gap:4px}.no-inventory[data-v-ada46c14]{color:#888;font-style:italic;font-size:13px}.inventory-items[data-v-ada46c14]{display:flex;flex-wrap:wrap;gap:4px}.inventory-edit-item[data-v-ada46c14]{background:#252525;padding:10px 12px;border-radius:6px;border:1px solid #404040;display:flex;align-items:center;gap:8px;flex-wrap:wrap}.inventory-edit-connector[data-v-ada46c14]{color:#888;font-weight:400;font-size:14px;white-space:nowrap}.inventory-quantity-input[data-v-ada46c14]{background:#333;border:1px solid #555;border-radius:4px;color:#e0e0e0;padding:4px 8px;font-size:14px;width:80px;text-align:center}.inventory-quantity-input[data-v-ada46c14]:focus{outline:none;border-color:#007acc}.inventory-remove-btn[data-v-ada46c14]{background:#f44336;color:#fff;border:none;border-radius:4px;width:24px;height:24px;cursor:pointer;font-size:16px;font-weight:bold;display:flex;align-items:center;justify-content:center;flex-shrink:0;margin-left:auto}.inventory-remove-btn[data-v-ada46c14]:hover{background:#da190b}.attribute-input[data-v-ada46c14]{background:#333;border:1px solid #555;border-radius:4px;color:#e0e0e0;padding:4px 8px;font-size:14px;width:100%}.attribute-input[data-v-ada46c14]:focus{outline:none;border-color:#007acc}.birthday-inputs[data-v-ada46c14]{display:flex;align-items:center;gap:2px;width:auto;margin-left:auto}.birthday-edit-container[data-v-ada46c14]{display:flex;justify-content:flex-start;width:100%}.birthday-input-group[data-v-ada46c14]{display:flex;align-items:center;gap:4px;padding:4px 0}.birthday-month[data-v-ada46c14],.birthday-date[data-v-ada46c14]{width:50px;flex-shrink:0}.birthday-separator[data-v-ada46c14]{color:#888;font-size:14px;white-space:nowrap}.attribute-textarea[data-v-ada46c14]{background:#333;border:1px solid #555;border-radius:4px;color:#e0e0e0;padding:8px;font-size:14px;width:100%;min-height:60px;resize:vertical;font-family:inherit}.attribute-textarea[data-v-ada46c14]:focus{outline:none;border-color:#007acc}.edit-buttons[data-v-ada46c14]{display:flex;justify-content:center;gap:16px;margin-top:20px;padding-top:20px;border-top:1px solid #404040}.edit-button[data-v-ada46c14]{position:absolute;top:0;left:0;padding:8px 16px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:background-color .2s;background:#007acc;color:#fff}.edit-button[data-v-ada46c14]:hover{background:#005a99}.confirm-button[data-v-ada46c14],.cancel-button[data-v-ada46c14]{padding:8px 16px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:background-color .2s}.confirm-button[data-v-ada46c14]{background:#4caf50;color:#fff}.confirm-button[data-v-ada46c14]:hover{background:#45a049}.cancel-button[data-v-ada46c14]{background:#f44336;color:#fff}.cancel-button[data-v-ada46c14]:hover{background:#da190b}@media (max-width:768px){.user-content[data-v-ada46c14]{padding:12px;gap:16px}.user-name[data-v-ada46c14]{font-size:24px}.attributes-grid[data-v-ada46c14]{grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:8px}.attribute-item[data-v-ada46c14]{padding:10px}.attribute-item.full-width[data-v-ada46c14]{padding:12px}.attribute-value[data-v-ada46c14]{font-size:14px}.inventory-item[data-v-ada46c14]{gap:4px}[data-v-ada46c14] .inventory-item-tag{font-size:12px;padding:2px 6px}.inventory-third-row[data-v-ada46c14] .inventory-item-tag{font-size:12px;padding:2px 6px}}.no-relations-message[data-v-ada46c14],.no-inventory-message[data-v-ada46c14]{background:#252525;padding:16px 12px;border-radius:6px;border:1px solid #404040;color:#888;text-align:center;font-size:14px;font-style:italic}','']);const i=l},7549:(e,t,a)=>{var n=a(6479);n.__esModule&&(n=n.default),'string'==typeof n&&(n=[[e.id,n,'']]),n.locals&&(e.exports=n.locals);(0,a(4424).A)('acf05bd8',n,!1,{ssrId:!0})},7611:(e,t,a)=>{var n=a(933);n.__esModule&&(n=n.default),'string'==typeof n&&(n=[[e.id,n,'']]),n.locals&&(e.exports=n.locals);(0,a(4424).A)('5d13d824',n,!1,{ssrId:!0})},8093:e=>{e.exports=function(e){return e[1]}},8597:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(8093),o=a.n(n),r=a(3054),l=a.n(r)()(o());l.push([e.id,'.world-info-container[data-v-ee3aed0a]{width:100%;height:100%;display:flex;flex-direction:column;background-color:#1a1a1a;color:#e0e0e0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif}.world-info-content[data-v-ee3aed0a]{flex:1;padding:12px;gap:16px;overflow-y:auto;display:flex;flex-direction:column;min-height:var(--ae590e90);max-height:var(--ae590e90)}.world-info-content[data-v-ee3aed0a]::-webkit-scrollbar{width:8px}.world-info-content[data-v-ee3aed0a]::-webkit-scrollbar-track{background:#2a2a2a;border-radius:4px}.world-info-content[data-v-ee3aed0a]::-webkit-scrollbar-thumb{background:#555;border-radius:4px}.world-info-content[data-v-ee3aed0a]::-webkit-scrollbar-thumb:hover{background:#666}.section[data-v-ee3aed0a]{background-color:#2a2a2a;padding:20px;border-radius:12px;border:1px solid #404040;margin-bottom:20px}.section h4[data-v-ee3aed0a]{color:#b0b0b0;margin-bottom:16px;font-size:16px;border-bottom:1px solid #404040;padding-bottom:8px}.sortable-container[data-v-ee3aed0a]{margin-bottom:16px}.sortable-item[data-v-ee3aed0a]{margin-bottom:8px;transition:all .2s ease;position:relative}.sortable-item.dragging[data-v-ee3aed0a]{opacity:.7;transform:scale(1.02);box-shadow:0 4px 12px rgba(0,122,204,.3);z-index:1000}.sortable-item[data-v-ee3aed0a]:not(.dragging){transform:translateY(0)}.draggable-fold-bar.incomplete[data-v-ee3aed0a] .fold-bar-btn span{color:#ef4444 !important}.drop-indicator[data-v-ee3aed0a]{height:4px;background:linear-gradient(90deg,#007acc,#005999);border-radius:2px;margin:4px 0;box-shadow:0 0 8px rgba(0,122,204,.6);animation:pulse-ee3aed0a 1.5s ease-in-out infinite;position:relative}.drop-indicator[data-v-ee3aed0a]::before{content:"";position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:8px;height:8px;background:#007acc;border-radius:50%;box-shadow:0 0 12px rgba(0,122,204,.8)}@keyframes pulse-ee3aed0a{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.7;transform:scale(1.1)}}.fold-content[data-v-ee3aed0a]{padding:12px 0}.fold-content .input-group[data-v-ee3aed0a]{margin-bottom:16px}.fold-content .input-group[data-v-ee3aed0a]:last-child{margin-bottom:0}.fold-content .input-group label[data-v-ee3aed0a]{display:block;margin-bottom:6px;color:#b0b0b0;font-weight:500;font-size:13px}.fold-content .input-group .form-input[data-v-ee3aed0a],.fold-content .input-group .form-textarea[data-v-ee3aed0a]{width:100%;padding:8px 12px;background:#2a2a2a;border:1px solid #404040;border-radius:4px;color:#e0e0e0;font-size:14px;font-family:inherit;transition:all .2s ease}.fold-content .input-group .form-input[data-v-ee3aed0a]:focus,.fold-content .input-group .form-textarea[data-v-ee3aed0a]:focus{outline:none;border-color:#007acc;box-shadow:0 0 0 2px rgba(0,122,204,.2)}.fold-content .input-group .form-input[data-v-ee3aed0a]::placeholder,.fold-content .input-group .form-textarea[data-v-ee3aed0a]::placeholder{color:#666}.fold-content .input-group .form-textarea[data-v-ee3aed0a]{resize:vertical;min-height:60px;line-height:1.4}.item-actions[data-v-ee3aed0a]{display:flex;gap:8px;margin-top:12px}.item-actions .action-btn[data-v-ee3aed0a]{flex:1;display:flex;align-items:center;justify-content:center;gap:6px;min-width:0}.generated-result[data-v-ee3aed0a]{margin-top:8px;padding:8px;background-color:#1a1a1a;border:1px solid #404040;border-radius:6px}.generated-result label[data-v-ee3aed0a]{display:block;margin-bottom:4px;color:#007acc;font-size:12px;font-weight:500}.generated-result .generated-text[data-v-ee3aed0a]{color:#e0e0e0;font-size:14px;margin-bottom:8px;word-wrap:break-word;white-space:pre-wrap}.generated-result .replace-btn[data-v-ee3aed0a]{padding:6px 12px;background-color:#28a745;border:none;border-radius:4px;color:#fff;font-size:12px;font-weight:500;cursor:pointer;transition:background-color .2s ease}.generated-result .replace-btn[data-v-ee3aed0a]:hover{background-color:#218838}.remove-btn[data-v-ee3aed0a]{background:#b91c1c;border:1px solid #b91c1c;border-radius:3px;color:#fff;font-size:16px;font-weight:bold;width:20px;height:20px;display:flex;align-items:center;justify-content:center;cursor:pointer}.remove-btn span[data-v-ee3aed0a]{line-height:1;margin-top:-1px}.action-btn[data-v-ee3aed0a]{padding:8px 16px;border:1px solid #555;background:#2a2a2a;color:#e0e0e0;border-radius:4px;cursor:pointer;font-size:13px;font-weight:500;transition:all .2s ease}.action-btn[data-v-ee3aed0a]:hover{background:#404040;border-color:#777}.action-btn.generate[data-v-ee3aed0a]{background:linear-gradient(135deg,#007acc,#005999);border-color:#007acc;color:#fff}.action-btn.generate[data-v-ee3aed0a]:hover:not(:disabled){background:linear-gradient(135deg,#005999,#004477);transform:translateY(-1px)}.action-btn.generate[data-v-ee3aed0a]:active{transform:translateY(0)}.action-btn.generate[data-v-ee3aed0a]:disabled{background-color:#666;cursor:not-allowed;transform:none}.action-btn.apply[data-v-ee3aed0a]{background:linear-gradient(135deg,#28a745,#20c997);border-color:#28a745;color:#fff}.action-btn.apply[data-v-ee3aed0a]:hover:not(:disabled){background:linear-gradient(135deg,#218838,#1aa085);transform:translateY(-1px)}.action-btn.apply[data-v-ee3aed0a]:active{transform:translateY(0)}.action-btn.apply[data-v-ee3aed0a]:disabled{background-color:#666;cursor:not-allowed;transform:none}.action-btn.delete[data-v-ee3aed0a]{background:#3a1a1a;border-color:#622}.action-btn.delete[data-v-ee3aed0a]:hover{background:#622}.add-item-section[data-v-ee3aed0a]{text-align:center;margin-top:16px}.add-btn[data-v-ee3aed0a]{padding:10px 20px;background:linear-gradient(135deg,#007acc,#005999);border:none;color:#fff;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s ease}.add-btn[data-v-ee3aed0a]:hover{background:linear-gradient(135deg,#005999,#004477);transform:translateY(-1px)}.add-btn[data-v-ee3aed0a]:active{transform:translateY(0)}@media (max-width:768px){.world-info-content[data-v-ee3aed0a]{padding:12px}.section[data-v-ee3aed0a]{padding:16px}.item-actions[data-v-ee3aed0a]{gap:6px}.item-actions .action-btn[data-v-ee3aed0a]{padding:6px 12px;font-size:12px}.add-btn[data-v-ee3aed0a]{width:100%}}.loading-spinner[data-v-ee3aed0a]{display:inline-block;width:16px;height:16px;border:2px solid #fff;border-top:2px solid rgba(0,0,0,0);border-radius:50%;animation:spin-ee3aed0a 1s linear infinite;flex-shrink:0}@keyframes spin-ee3aed0a{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}','']);const i=l},9177:(e,t,a)=>{var n=a(5639);n.__esModule&&(n=n.default),'string'==typeof n&&(n=[[e.id,n,'']]),n.locals&&(e.exports=n.locals);(0,a(4424).A)('95bb49d6',n,!1,{ssrId:!0})},9603:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(8093),o=a.n(n),r=a(3054),l=a.n(r)()(o());l.push([e.id,'.app-container[data-v-e8f6a8aa]{display:flex;flex-direction:column;width:100%;height:100%;background-color:#1a1a1a;color:#e0e0e0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif}.initialization-wrapper[data-v-e8f6a8aa]{height:100%;width:100%;display:flex;flex-direction:column}','']);const i=l},9974:(e,t,a)=>{a.d(t,{_:()=>n});class n{registry=new Map;register(e){return t=>(e||(e=t.name),this.registry.set(e,t),t)}get(e){return this.registry.get(e)}getAll(){return this.registry}has(e){return this.registry.has(e)}}}},a={};function n(e){var o=a[e];if(void 0!==o)return o.exports;var r=a[e]={id:e,exports:{}};return t[e](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})},(()=>{var e=n(9974);var t,a,o,r,l,i,s,d=function(e,t,a,n){var o,r=arguments.length,l=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)l=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(r<3?o(l):r>3?o(t,a,l):o(t,a))||l);return r>3&&l&&Object.defineProperty(t,a,l),l},c=function(e,t){if('object'==typeof Reflect&&'function'==typeof Reflect.metadata)return Reflect.metadata(e,t)};class u{static registry=new e._;constructor(...e){}static fromObject(e){return this.prototype.fromObject(e)}}let p=t=class extends u{low;high;num;constructor(e,t,a){super(),this.low=e,this.high=t,this.num=a}fromObject(e){const a=e.low,n=e.high,o=e.num;return new t(a,n,o)}get TYPE(){return'num'}getValue(){return{low:this.low,high:this.high,num:this.num}}getLow(){return this.low}getHigh(){return this.high}getNum(){return this.num}deltaLow(e){null===e?this.low=null:null===this.low?this.low=e:this.low+=e,this.applyConstrain()}deltaHigh(e){null===e?this.high=null:null===this.high?this.high=e:this.high+=e,this.applyConstrain()}deltaNum(e){this.num+=e,this.applyConstrain()}applyConstrain(){null!==this.low&&this.num<this.low&&(this.num=this.low),null!==this.high&&this.num>this.high&&(this.num=this.high)}};p=t=d([u.registry.register(p.prototype.TYPE),c('design:paramtypes',[Object,Object,Number])],p);let m=a=class extends u{str;constructor(e){super(),this.str=e}fromObject(e){const t=e.str;return new a(t)}get TYPE(){return'str'}getValue(){return{str:this.str}}getStr(){return this.str}setStr(e){this.str=e}};m=a=d([u.registry.register(m.prototype.TYPE),c('design:paramtypes',[String])],m);let v=o=class extends u{datetime;constructor(e){super(),this.datetime=new Date(e)}fromObject(e){const t=e.datetime;return new o(t)}get TYPE(){return'datetime'}getValue(){return{datetime:this.datetime}}getYear(){return this.datetime.getFullYear()}getMonth(){return this.datetime.getMonth()}getDate(){return this.datetime.getDate()}getHours(){return this.datetime.getHours()}getMinutes(){return this.datetime.getMinutes()}getSeconds(){return this.datetime.getSeconds()}getDay(){return this.datetime.getDay()}getDateTime(){return this.datetime}deltaDatetime(e,t,a,n,o,r){this.datetime.setFullYear(this.datetime.getFullYear()+e),this.datetime.setMonth(this.datetime.getMonth()+t),this.datetime.setDate(this.datetime.getDate()+a),this.datetime.setHours(this.datetime.getHours()+n),this.datetime.setMinutes(this.datetime.getMinutes()+o),this.datetime.setSeconds(this.datetime.getSeconds()+r)}};v=o=d([u.registry.register(v.prototype.TYPE),c('design:paramtypes',['function'==typeof(i='undefined'!=typeof Date&&Date)?i:Object])],v);let g=r=class extends u{outcome;random_events;constructor(e,t){super(),this.outcome=e,this.random_events=t}fromObject(e){const t=e?.outcome,a=e.random_events;return new r(t,a)}get TYPE(){return'random'}getValue(){return{outcome:this.outcome,random_events:this.random_events}}roll(){this.outcome=function(e){let t=0;for(const a of e)t+=a.weighting;let a=Math.random()*t;for(const t of e)if(a-=t.weighting,a<=0)return t.event;return e[-1].event}(this.random_events)}};g=r=d([u.registry.register(g.prototype.TYPE),c('design:paramtypes',[Object,Array])],g);let b=l=class extends u{map;constructor(e){if(super(),this.map=new Map,e)for(const[t,a]of Object.entries(e)){const e=u.registry.get(a.type)?.fromObject(a.values);e&&this.map.set(t,e)}}get TYPE(){return'map'}fromObject(e){return new l(e)}getValue(){const e={};for(const[t,a]of this.map.entries())e[t]={type:a.TYPE,values:a.getValue()};return e}getVariable(e){return this.map.get(e)}setVariable(e,t){this.map.set(e,t)}deleteVariable(e){this.map.delete(e)}get size(){return this.map.size}keys(){return this.map.keys()}};b=l=d([u.registry.register(b.prototype.TYPE),c('design:paramtypes',['function'==typeof(s='undefined'!=typeof Record&&Record)?s:Object])],b);var f,h,x,y,E,k,V,N,w,S,B,C,I,D,T,M,Y=function(e,t,a,n){var o,r=arguments.length,l=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)l=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(r<3?o(l):r>3?o(t,a,l):o(t,a))||l);return r>3&&l&&Object.defineProperty(t,a,l),l},O=function(e,t){if('object'==typeof Reflect&&'function'==typeof Reflect.metadata)return Reflect.metadata(e,t)};class A{static registry=new e._;constructor(...e){}static parseString(e){if(void 0===e)return[];return[...e.matchAll(this.prototype.REGEX)].map(e=>({command:this.prototype.create(e.slice(1).map(e=>e.trim())),index:e.index})).filter(({command:e})=>e.isValid())}}class R extends A{}let K=f=class extends A{key;low;high;num;constructor(e,t,a,n){super(),this.key=e,this.low=t,this.high=a,this.num=n}get REGEX(){return/init_num\s*\(\s*([^(),:]+?)\s*,\s*([^(),:]+?)\s*,\s*([^(),:]+?)\s*,\s*([^)]+?)\s*\)/g}create(e){const t=e[0],a='null'===e[1]?null:Number(e[1]),n='null'===e[2]?null:Number(e[2]),o=Number(e[3]);return new f(t,a,n,o)}isValid(){return(null===this.low||!isNaN(this.low))&&((null===this.high||!isNaN(this.high))&&(!isNaN(this.num)&&!(null!==this.low&&null!==this.high&&this.low>this.high)))}execute(e){const t=new p(this.low,this.high,this.num);return e.setVariable(this.key,t),e}};K=f=Y([A.registry.register(),O('design:paramtypes',[String,Object,Object,Number])],K);let U=h=class extends A{key;delta;constructor(e,t){super(),this.key=e,this.delta=t}get REGEX(){return/delta_num\s*\(\s*([^(),:]+?)\s*,\s*([^)]+?)\s*\)/g}create(e){const t=e[0],a=Number(e[1]);return new h(t,a)}isValid(){return!isNaN(this.delta)}execute(e){const t=e.getVariable(this.key);return null===t||t instanceof p==!1||(t.deltaNum(this.delta),e.setVariable(this.key,t)),e}};U=h=Y([A.registry.register(),O('design:paramtypes',[String,Number])],U);let L=x=class extends A{key;delta;constructor(e,t){super(),this.key=e,this.delta=t}get REGEX(){return/delta_low\s*\(\s*([^(),:]+?)\s*,\s*([^)]+?)\s*\)/g}create(e){const t=e[0],a='null'===e[1]?null:Number(e[1]);return new x(t,a)}isValid(){return null===this.delta||!isNaN(this.delta)}execute(e){const t=e.getVariable(this.key);return null===t||t instanceof p==!1||(t.deltaLow(this.delta),e.setVariable(this.key,t)),e}};L=x=Y([A.registry.register(),O('design:paramtypes',[String,Object])],L);let F=y=class extends A{key;delta;constructor(e,t){super(),this.key=e,this.delta=t}get REGEX(){return/delta_high\s*\(\s*([^(),:]+?)\s*,\s*([^)]+?)\s*\)/g}create(e){const t=e[0],a='null'===e[1]?null:Number(e[1]);return new y(t,a)}isValid(){return null===this.delta||!isNaN(this.delta)}execute(e){const t=e.getVariable(this.key);return null===t||t instanceof p==!1||(t.deltaHigh(this.delta),e.setVariable(this.key,t)),e}};F=y=Y([A.registry.register(),O('design:paramtypes',[String,Object])],F);let j=E=class extends A{key;str;constructor(e,t){super(),this.key=e,this.str=t}get REGEX(){return/init_str\s*\(\s*([^(),:]+?)\s*,\s*([^)]+?)\s*\)/g}create(e){const t=e[0],a=e[1];return new E(t,a)}isValid(){return!0}execute(e){const t=new m(this.str);return e.setVariable(this.key,t),e}};j=E=Y([A.registry.register(),O('design:paramtypes',[String,String])],j);let H=k=class extends A{key;str;constructor(e,t){super(),this.key=e,this.str=t}get REGEX(){return/set_str\s*\(\s*([^(),:]+?)\s*,\s*([^)]+?)\s*\)/g}create(e){const t=e[0],a=e[1];return new k(t,a)}isValid(){return!0}execute(e){const t=e.getVariable(this.key);return null===t||t instanceof m==!1||(t.setStr(this.str),e.setVariable(this.key,t)),e}};H=k=Y([A.registry.register(),O('design:paramtypes',[String,String])],H);let P=V=class extends A{key;datetime_string;constructor(e,t){super(),this.key=e,this.datetime_string=t}get REGEX(){return/init_datetime\(([^,:]+),\s*([^)]+)\)/g}create(e){const t=e[0],a=e[1];return new V(t,a)}isValid(){const e=new Date(this.datetime_string);return!isNaN(e.getTime())}execute(e){const t=new Date(this.datetime_string),a=new v(t);return e.setVariable(this.key,a),e}};P=V=Y([A.registry.register(),O('design:paramtypes',[String,String])],P);let G=N=class extends A{key;delta_year;delta_month;delta_date;delta_hour;delta_minute;delta_second;constructor(e,t,a,n,o,r,l){super(),this.key=e,this.delta_year=t,this.delta_month=a,this.delta_date=n,this.delta_hour=o,this.delta_minute=r,this.delta_second=l}get REGEX(){return/delta_datetime\(([^,]+),\s*([^)]+),\s*([^)]+),\s*([^)]+),\s*([^)]+),\s*([^)]+),\s*([^)]+)\)/g}create(e){const t=e[0],a=Number(e[1]),n=Number(e[2]),o=Number(e[3]),r=Number(e[4]),l=Number(e[5]),i=Number(e[6]);return new N(t,a,n,o,r,l,i)}isValid(){return!isNaN(this.delta_year)&&(!isNaN(this.delta_month)&&(!isNaN(this.delta_date)&&(!isNaN(this.delta_hour)&&(!isNaN(this.delta_minute)&&!isNaN(this.delta_second)))))}execute(e){const t=e.getVariable(this.key);return null===t||t instanceof v==!1||(t.deltaDatetime(this.delta_year,this.delta_month,this.delta_date,this.delta_hour,this.delta_minute,this.delta_second),e.setVariable(this.key,t)),e}};G=N=Y([A.registry.register(),O('design:paramtypes',[String,Number,Number,Number,Number,Number,Number])],G);let q=w=class extends A{command_name;key;delta;constructor(e,t,a){super(),this.command_name=e,this.key=t,this.delta=a}get REGEX(){return/(delta_year|delta_month|delta_date|delta_hour|delta_minute|delta_second)\(([^,]+),\s*([^)]+)\)/g}create(e){const t=e[0],a=e[1],n=Number(e[2]);return new w(t,a,n)}isValid(){return!isNaN(this.delta)}execute(e){const t=e.getVariable(this.key);if(null===t||t instanceof v==!1)return e;const a='delta_year'===this.command_name?this.delta:0,n='delta_month'===this.command_name?this.delta:0,o='delta_date'===this.command_name?this.delta:0,r='delta_hour'===this.command_name?this.delta:0,l='delta_minute'===this.command_name?this.delta:0,i='delta_second'===this.command_name?this.delta:0;return t.deltaDatetime(a,n,o,r,l,i),e.setVariable(this.key,t),e}};q=w=Y([A.registry.register(),O('design:paramtypes',[String,String,Number])],q);let X=S=class extends A{key;random_events;constructor(e,t){super(),this.key=e,this.random_events=t}get REGEX(){return/init_random\(\s*([^,]+)\s*,\s*(.+)\s*\)/g}create(e){const t=e[0],a=e[1],n=[];for(const e of a.split(',')){const[t,a]=e.split(':');n.push({event:t,weighting:Number(a)})}return new S(t,n)}isValid(){for(const e of this.random_events)if(Number.isNaN(e.weighting))return!1;return!0}execute(e){const t=new g(null,this.random_events);return e.setVariable(this.key,t),e}};X=S=Y([A.registry.register(),O('design:paramtypes',[String,Array])],X);let W=B=class extends R{key;constructor(e){super(),this.key=e}get REGEX(){return/roll\(\s*([^,()]+)\s*\)/g}create(e){const t=e[0];return new B(t)}isValid(){return!0}execute(e){const t=e.getVariable(this.key);return null===t||t instanceof g==!1||(t.roll(),e.setVariable(this.key,t)),e}getRestoreKeys(e){return[this.key]}};W=B=Y([A.registry.register(),O('design:paramtypes',[String])],W);let J=C=class extends A{key;constructor(e){super(),this.key=e}get REGEX(){return/delete\(([^,()]+)\s*\)/g}create(e){const t=e[0];return new C(t)}isValid(){return!0}execute(e){return e.deleteVariable(this.key),e}};J=C=Y([A.registry.register(),O('design:paramtypes',[String])],J);let Z=I=class extends A{key;constructor(e){super(),this.key=e}get REGEX(){return/init_map\(\s*([^,]+)\s*\)/g}create(e){const t=e[0];return new I(t)}isValid(){return!0}execute(e){const t=new b;return e.setVariable(this.key,t),e}};Z=I=Y([A.registry.register(),O('design:paramtypes',[String])],Z);let Q=D=class extends A{map_key;variable_key;constructor(e,t){super(),this.map_key=e,this.variable_key=t}get REGEX(){return/add_map\(\s*([^,]+)\s*,\s*(.+)\s*\)/g}create(e){const t=e[0],a=e[1];return new D(t,a)}isValid(){return!0}execute(e){const t=e.getVariable(this.map_key);if(null===t||t instanceof b==!1)return e;const a=e.getVariable(this.variable_key);return null===a||(t.setVariable(this.variable_key,a),e.deleteVariable(this.variable_key),e.setVariable(this.map_key,t)),e}};Q=D=Y([A.registry.register(),O('design:paramtypes',[String,String])],Q);let ee=T=class extends A{map_key;variable_key;constructor(e,t){super(),this.map_key=e,this.variable_key=t}get REGEX(){return/pop_map\(\s*([^,]+)\s*,\s*(.+)\s*\)/g}create(e){const t=e[0],a=e[1];return new T(t,a)}isValid(){return!0}execute(e){const t=e.getVariable(this.map_key);if(null===t||t instanceof b==!1)return e;const a=t.getVariable(this.variable_key);return void 0===a||(t.deleteVariable(this.variable_key),e.setVariable(this.variable_key,a),e.setVariable(this.map_key,t)),e}};ee=T=Y([A.registry.register(),O('design:paramtypes',[String,String])],ee);let te=M=class extends A{map_key;variable_key;constructor(e,t){super(),this.map_key=e,this.variable_key=t}get REGEX(){return/delete_map\(\s*([^,]+)\s*,\s*(.+)\s*\)/g}create(e){const t=e[0],a=e[1];return new M(t,a)}isValid(){return!0}execute(e){const t=e.getVariable(this.map_key);return null===t||t instanceof b==!1||(t.deleteVariable(this.variable_key),e.setVariable(this.map_key,t)),e}};te=M=Y([A.registry.register(),O('design:paramtypes',[String,String])],te);class ae{commands=[];constructor(e){this.commands=e??[]}pushCommand(e){this.commands.push(e)}static fromString(e,t='normal'){let a=e.split('<UserPerspective>');if(!e.includes('<VTC>'))return new ae;a=a[a.length-1].split('<VTC>');const n=a[a.length-1].split('</VTC>')[0];let o=[];for(const e of A.registry.getAll().values())'normal'===t&&e.prototype instanceof R||('post'!==t||e.prototype instanceof R)&&(o=o.concat(e.parseString(n)));o.sort((e,t)=>e.index-t.index);const r=o.map(e=>e.command);return console.log('[VariableTracker] commands:',r),new ae(r)}execute(e){for(const t of this.commands)t.execute(e);return e}*[Symbol.iterator](){for(const e of this.commands)yield e}}const ne=_;var oe=n.n(ne);class re{state;constructor(e){this.state=e?e.state:new Map}static fromVariables(e){const t=new re;if(null===e)return t;for(const[a,n]of Object.entries(e)){const e=u.registry.get(n.type)?.fromObject(n.values);e&&t.setVariable(a,e)}return t}toVariables(){const e={};for(const[t,a]of this.state)e[t]={type:a.TYPE,values:a.getValue()};return e}getVariable(e){return this.state.get(e)??null}setVariable(e,t){this.state.set(e,t)}deleteVariable(e){this.state.delete(e)}}const le={type:'chat'};function ie(e){return e<0&&(e=getLastMessageId()+e+1),e}function se(){const e=getVariables(le).current??null;return re.fromVariables(e)}function de(e){const t=getVariables(le);t.current=e.toVariables(),replaceVariables(t,le)}function ce(){const e=getVariables(le);e.current={},replaceVariables(e,le)}function ue(e){if(0===e)ce();else{const t=e-1;de(pe(t,ge(t)))}}function pe(e,t){e=ie(e);const a=getVariables(le);return re.fromVariables(a.history[e][t])}function me(e,t=-1,a){t=ie(t);const n=getVariables(le);n.history=n.history??[],n.history[t]=n.history[t]??[],n.history[t][a]=e.toVariables(),replaceVariables(n,le)}function ve(e){const t=getVariables(le);t.history&&(t.history.splice(e),replaceVariables(t,le))}function ge(e){return getChatMessages(e,{include_swipes:!0})[0].swipe_id}function be(e){return getChatMessages(e,{include_swipes:!0})[0].swipes.length}function fe(e,t){let a;console.log('[VariableTracker] executeCommand strat'),a=void 0===t?getChatMessages(e)[0].message:getChatMessages(e,{include_swipes:!0})[0].swipes[t];const n=ae.fromString(a);console.log('[VariableTracker] commands:',n);const o=se();n.execute(o),console.log('[VariableTracker] state:',o),de(o),console.log('[VariableTracker] executeCommand end')}function he(e,t){let a;console.log('[VariableTracker] executePostCommand strat'),a=void 0===t?getChatMessages(e)[0].message:getChatMessages(e,{include_swipes:!0})[0].swipes[t];const n=ae.fromString(a,'post');console.log('[VariableTracker] post commands:',n);const o=se();n.execute(o),console.log('[VariableTracker] state:',o),de(o),console.log('[VariableTracker] executePostCommand end')}function xe(e,t){t||(t=ge(e));const a=getChatMessages(e,{include_swipes:!0})[0].swipes[t],n=ae.fromString(a,'post'),o=pe(e,t),r=e+1,l=pe(r,ge(r));for(const e of n){const t=e;for(const e of t.getRestoreKeys(o)){const t=l.getVariable(e);t&&o.setVariable(e,t)}}me(o,e,t)}function ye(e){ue(e);for(let t=e;t<=getLastMessageId();t++){console.log('[DEBUG] message_id:',t);for(let e=0;e<be(t);e++)fe(t,e),me(se(),t,e),ue(t);de(pe(t,ge(t)))}}eventOn(tavern_events.MESSAGE_SENT,async e=>{console.log('[VariableTracker] MESSAGE_SENT strat'),fe(e),he(e);const t=ge(e);me(se(),e,t),console.log('[VariableTracker] MESSAGE_SENT end')}),eventOn(tavern_events.MESSAGE_UPDATED,async e=>{await new Promise(e=>setTimeout(e,100)),console.log('[VariableTracker] MESSAGE_UPDATED strat');const t=be(e=Number(e)),a=function(e){return e=ie(e),getVariables(le).history[e].length}(e);if(t<a){!function(e,t){const a=getVariables(le);a.history&&(a.history[e].splice(t,1),replaceVariables(a,le))}(e,ge(e))}ue(e),ye(e),0!==e&&xe(e-1),console.log('[VariableTracker] MESSAGE_UPDATED end')}),eventOn(tavern_events.MESSAGE_RECEIVED,async e=>{console.log('[VariableTracker] MESSAGE_RECEIVED strat'),fe(e),he(e);const t=ge(e);me(se(),e,t),console.log('[VariableTracker] MESSAGE_RECEIVED end')}),eventOn(tavern_events.MESSAGE_SWIPED,async e=>{console.log('[VariableTracker] MESSAGE_SWIPED strat');const t=ge(e),a=0===e?null:e-1;if(function(e,t){return t<getChatMessages(e,{include_swipes:!0})[0].swipes.length}(e,t))de(pe(e,t)),null!==a&&xe(a);else if(null!==a){ue(a),0!==a&&(fe(a-1),he(a-1));const e=ge(a);he(a),me(se(),a,e)}else ce();console.log('[VariableTracker] MESSAGE_SWIPED end')}),eventOn(tavern_events.MESSAGE_DELETED,async e=>{console.log('[VariableTracker] MESSAGE_DELETED strat');const t=getChatMessages('0-{{lastMessageId}}',{include_swipes:!0});let a,n;a=getCharData('current')?.first_mes?'assistant':'user';for(const e of t){if(e.role!==a){n=e.message_id;break}a='assistant'===a?'user':'assistant'}n||(n=t.length),ue(n),ve(n),deleteChatMessages(oe().range(n,getLastMessageId()+1)),console.log('[VariableTracker] MESSAGE_DELETED end')}),eventOn(getButtonEvent('æ¸…é™¤æ‰€æœ‰è®Šæ•¸'),function(){toastr.info('é–‹å§‹æ¸…é™¤æ‰€æœ‰è®Šæ•¸...','VariableTracker Debug');const e=getVariables(le);e.current={},e.history=[],replaceVariables(e,le),toastr.success('æ‰€æœ‰è®Šæ•¸å·²æ¸…é™¤ï¼','VariableTracker Debug')}),eventOn(getButtonEvent('é‡æ–°è®€å–æ‰€æœ‰è®Šæ•¸'),async function(){toastr.info('é–‹å§‹é‡æ–°è®€å–æ‰€æœ‰è®Šæ•¸...','VariableTracker Debug');try{ve(0),ye(0)}catch(e){return console.error('[VariableTracker] é‡æ–°è®€å–è®Šæ•¸æ™‚ç™¼ç”ŸéŒ¯èª¤:',e),void toastr.error('é‡æ–°è®€å–è®Šæ•¸å¤±æ•—ï¼Œè«‹æª¢æŸ¥æŽ§åˆ¶å°æ—¥èªŒ','VariableTracker Debug')}toastr.success('æ‰€æœ‰è®Šæ•¸å·²é‡æ–°è®€å–å®Œæˆï¼','VariableTracker Debug')})})(),(()=>{const t=Vue,a={class:'fold-bar'},o={class:'fold-bar-header'},r={class:'fold-bar-title-actions'},l={class:'fold-bar-header-actions'},i={class:'fold-bar-content-text'},s=(0,t.defineComponent)({__name:'fold_bar',props:{title:{},isOpen:{type:Boolean}},emits:['toggle'],setup(e,{emit:n}){const s=e,d=n,c=(0,t.ref)(s.isOpen),u=(0,t.ref)(),p=()=>{u.value&&(c.value?(c.value=!1,u.value.style.maxHeight='0'):(c.value=!0,setTimeout(()=>{if(u.value){const e=u.value.scrollHeight,t=.8*window.innerHeight,a=Math.min(e,t);u.value.style.maxHeight=a+'px'}},0)),d('toggle',c.value))};return(0,t.watch)(()=>s.isOpen,e=>{e!==c.value&&(u.value&&(e?setTimeout(()=>{if(u.value){const e=u.value.scrollHeight,t=.8*window.innerHeight,a=Math.min(e,t);u.value.style.maxHeight=a+'px'}},0):u.value.style.maxHeight='0'),c.value=e)}),(n,s)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',a,[(0,t.createElementVNode)('div',o,[(0,t.createElementVNode)('button',{class:'fold-bar-btn',onClick:p},[(0,t.createElementVNode)('span',null,(0,t.toDisplayString)(e.title),1),(0,t.createElementVNode)('div',r,[(0,t.renderSlot)(n.$slots,'title-actions')]),(0,t.createElementVNode)('div',{class:(0,t.normalizeClass)(['fold-bar-toggle-icon',{open:(0,t.unref)(c)}])},null,2)]),(0,t.createElementVNode)('div',l,[(0,t.renderSlot)(n.$slots,'header-actions')])]),(0,t.createElementVNode)('div',{ref_key:'contentRef',ref:u,class:(0,t.normalizeClass)(['fold-bar-content',{open:(0,t.unref)(c)}])},[(0,t.createElementVNode)('div',i,[(0,t.renderSlot)(n.$slots,'default')]),(0,t.createElementVNode)('div',{class:'fold-bar-footer-toggle',onClick:p},'â–² æ”¶èµ· â–²')],2)]))}});n(2413);var d=n(3235);const c=(0,d.A)(s,[['__scopeId','data-v-112e8be8']]),u={class:'character-tabs-container'},p=['onClick'],m={class:'character-info-container'},v={class:'section'},g={class:'form-grid'},b={class:'input-group'},f=['onUpdate:modelValue'],h={key:0,class:'generated-result'},x={class:'generated-text'},y=['onClick'],E={class:'input-group'},k=['onUpdate:modelValue'],V={key:0,class:'generated-result'},N={class:'generated-text'},w=['onClick'],S={class:'input-group'},B=['value','onInput'],C={key:0,class:'generated-result'},I={class:'generated-text'},D=['onClick'],T={class:'input-group'},M=['onUpdate:modelValue'],Y={key:0,class:'generated-result'},O={class:'generated-text'},A=['onClick'],R={class:'input-group'},K=['onUpdate:modelValue'],U={key:0,class:'generated-result'},L={class:'generated-text'},F=['onClick'],j={class:'input-group'},H=['value','onInput'],P={key:0,class:'generated-result'},G={class:'generated-text'},q=['onClick'],X={class:'input-group'},W=['value','onInput'],J={key:0,class:'generated-result'},Z={class:'generated-text'},Q=['onClick'],ee={class:'input-group'},te=['value','onInput'],ae={key:0,class:'generated-result'},ne={class:'generated-text'},oe=['onClick'],re={class:'input-group'},le=['onUpdate:modelValue'],ie={key:0,class:'generated-result'},se={class:'generated-text'},de=['onClick'],ce={class:'input-group'},ue=['value','onInput'],pe={key:0,class:'generated-result'},me={class:'generated-text'},ve=['onClick'],ge={class:'input-group'},be=['value','onInput'],fe={key:0,class:'generated-result'},he={class:'generated-text'},xe=['onClick'],ye={class:'input-group full-width'},_e=['onUpdate:modelValue'],Ee={key:0,class:'generated-result'},ke={class:'generated-text'},Ve=['onClick'],Ne={class:'input-group full-width'},we={class:'birthday-inputs'},Se=['value','onInput'],Be=['value','onInput'],Ce={key:0,class:'generated-result'},$e={class:'generated-text'},Ie=['onClick'],ze={class:'section'},De={class:'form-grid'},Te={class:'input-group full-width'},Me=['onUpdate:modelValue'],Ye={key:0,class:'generated-result'},Oe={class:'generated-text'},Ae=['onClick'],Re={class:'input-group full-width'},Ke=['onUpdate:modelValue'],Ue={key:0,class:'generated-result'},Le={class:'generated-text'},Fe=['onClick'],je={class:'section'},He={class:'form-grid'},Pe={class:'input-group full-width'},Ge=['onUpdate:modelValue'],qe={key:0,class:'generated-result'},Xe={class:'generated-text'},We=['onClick'],Je={class:'input-group full-width'},Ze=['onUpdate:modelValue'],Qe={key:0,class:'generated-result'},et={class:'generated-text'},tt=['onClick'],at={class:'input-group full-width'},nt=['onUpdate:modelValue'],ot={key:0,class:'generated-result'},rt={class:'generated-text'},lt=['onClick'],it={class:'section'},st={class:'form-grid'},dt={class:'input-group'},ct=['value','onInput'],ut={key:0,class:'generated-result'},pt={class:'generated-text'},mt=['onClick'],vt={class:'input-group'},gt=['value','onInput'],bt={key:0,class:'generated-result'},ft={class:'generated-text'},ht=['onClick'],xt={class:'input-group'},yt=['value','onInput'],_t={key:0,class:'generated-result'},Et={class:'generated-text'},kt=['onClick'],Vt={class:'input-group full-width'},Nt=['onUpdate:modelValue'],wt={key:0,class:'generated-result'},St={class:'generated-text'},Bt=['onClick'],Ct={class:'input-group full-width'},$t={class:'relations-list'},It={class:'relation-target'},zt=['value','onInput'],Dt=['onClick'],Tt={class:'add-relation'},Mt=['onUpdate:modelValue'],Yt=['value'],Ot=['disabled','onClick'],At={key:0,class:'generated-result'},Rt={class:'generated-text'},Kt=['onClick'],Ut={class:'input-group full-width'},Lt={class:'relations-list'},Ft={class:'relation-target'},jt=['value','onInput'],Ht=['onClick'],Pt={class:'add-relation'},Gt=['onUpdate:modelValue'],qt=['value'],Xt=['disabled','onClick'],Wt={key:0,class:'generated-result'},Jt={class:'generated-text'},Zt=['onClick'],Qt={class:'input-group full-width'},ea={class:'relations-list'},ta={class:'relation-target'},aa=['value','onInput'],na=['onClick'],oa={class:'add-relation'},ra=['onUpdate:modelValue'],la=['value'],ia=['disabled','onClick'],sa={key:0,class:'generated-result'},da={class:'generated-text'},ca=['onClick'],ua={class:'input-group full-width'},pa={class:'inventory-list'},ma={class:'inventory-target'},va=['value','onInput'],ga=['onClick'],ba={class:'add-inventory'},fa=['onUpdate:modelValue'],ha=['value'],xa=['onUpdate:modelValue','disabled'],ya=['disabled','onClick'],_a={key:0,class:'generated-result'},Ea={class:'generated-text'},ka=['onClick'],Va={class:'section'},Na={class:'form-grid'},wa={class:'input-group full-width'},Sa=['onUpdate:modelValue'],Ba={class:'action-section'},Ca=['disabled','onClick'],$a={key:0,class:'loading-spinner'},Ia=['disabled','onClick'],za=(0,t.defineComponent)({__name:'character_tab',setup(e){const a=(e,t)=>{const a=e[t];return a?.toString()||''},n=(e,t,a)=>{if(''===a||''===a.trim())e[t]=null;else{const n=parseInt(a);e[t]=isNaN(n)?null:n}},o=(e,t,a)=>{const n=d.value.get(e);if(!n)return;const o={å§“æ°:{field:'å§“æ°'},åå­—:{field:'åå­—'},å¹´é½¡:{field:'å¹´é½¡',parser:e=>parseInt(e)||null},æ€§åˆ¥:{field:'æ€§åˆ¥'},èº«ä»½:{field:'èº«ä»½'},èº«é«˜:{field:'èº«é«˜',parser:e=>parseInt(e)||null},é«”é‡:{field:'é«”é‡',parser:e=>parseInt(e)||null},èƒ¸åœ:{field:'èƒ¸åœ',parser:e=>parseInt(e)||null},ç½©æ¯:{field:'ç½©æ¯'},è…°åœ:{field:'è…°åœ',parser:e=>parseInt(e)||null},è‡€åœ:{field:'è‡€åœ',parser:e=>parseInt(e)||null},é«®åž‹:{field:'é«®åž‹'},æ¨£è²Œ:{field:'æ¨£è²Œ'},è¡£è‘—:{field:'è¡£è‘—'},ç°¡ä»‹:{field:'ç°¡ä»‹'},æ€§æ ¼:{field:'æ€§æ ¼'},æ„›å¥½:{field:'æ„›å¥½'},é‡‘éŒ¢:{field:'é‡‘éŒ¢',parser:e=>parseInt(e)||null},å¿ƒæƒ…:{field:'å¿ƒæƒ…',parser:e=>parseInt(e)||null},æ€§æ…¾:{field:'æ€§æ…¾',parser:e=>parseInt(e)||null},ç”Ÿæ—¥æœˆä»½:{field:'ç”Ÿæ—¥æœˆä»½',parser:e=>parseInt(e)||null},ç”Ÿæ—¥æ—¥æœŸ:{field:'ç”Ÿæ—¥æ—¥æœŸ',parser:e=>parseInt(e)||null},å…¶ä»–é‡è¦è³‡è¨Š:{field:'å…¶ä»–é‡è¦è³‡è¨Š'}}[t];if(o){const e=o.parser?o.parser(a):a;n[o.field]=e,n[`generated_${t}`]=''}else if('ç”Ÿæ—¥'===t){const e=a.split('-');2===e.length&&(n.ç”Ÿæ—¥æœˆä»½=parseInt(e[0])||null,n.ç”Ÿæ—¥æ—¥æœŸ=parseInt(e[1])||null,n.generated_birthday_month='',n.generated_birthday_day='')}else'é—œä¿‚'===t?r(n,a):'å‹å¥½åº¦'===t?l(n,a):'æ„›æƒ…åº¦'===t?i(n,a):'æ‰€æŒç‰©'===t&&s(n,a);d.value.set(e,{...n}),Ha(e)},r=(e,t)=>{e.é—œä¿‚||(e.é—œä¿‚=new Map);const a=t.replace(/^["']|["']$/g,'');if(a.startsWith('[')&&a.endsWith(']')){const t=a.slice(1,-1).split(',').map(e=>e.trim());for(const a of t){const t=a.indexOf(':');if(t>0){const n=a.substring(0,t).replace(/^["']|["']$/g,'').trim(),o=a.substring(t+1).replace(/^["']|["']$/g,'').trim();n&&o&&e.é—œä¿‚.set(n,o)}}}else e.selected_relation_target&&e.é—œä¿‚.set(e.selected_relation_target,t);e.generated_relationship=''},l=(e,t)=>{e.å‹å¥½åº¦||(e.å‹å¥½åº¦=new Map);const a=t.replace(/^["']|["']$/g,'');if(a.startsWith('[')&&a.endsWith(']')){const t=a.slice(1,-1).split(',').map(e=>e.trim());for(const a of t){const t=a.indexOf(':');if(t>0){const n=a.substring(0,t).replace(/^["']|["']$/g,'').trim(),o=parseInt(a.substring(t+1).replace(/^["']|["']$/g,'').trim());n&&!isNaN(o)&&e.å‹å¥½åº¦.set(n,o)}}}e.generated_friendship=''},i=(e,t)=>{e.æ„›æƒ…åº¦||(e.æ„›æƒ…åº¦=new Map);const a=t.replace(/^["']|["']$/g,'');if(a.startsWith('[')&&a.endsWith(']')){const t=a.slice(1,-1).split(',').map(e=>e.trim());for(const a of t){const t=a.indexOf(':');if(t>0){const n=a.substring(0,t).replace(/^["']|["']$/g,'').trim(),o=parseInt(a.substring(t+1).replace(/^["']|["']$/g,'').trim());n&&!isNaN(o)&&e.æ„›æƒ…åº¦.set(n,o)}}}e.generated_love=''},s=(e,t)=>{e.æ‰€æŒç‰©||(e.æ‰€æŒç‰©=new Map);const a=t.replace(/^["']|["']$/g,'');if(a.startsWith('[')&&a.endsWith(']')){const t=a.slice(1,-1).split(',').map(e=>e.trim());for(const a of t){const t=a.indexOf(':');if(t>0){const n=a.substring(0,t).replace(/^["']|["']$/g,'').trim(),o=parseInt(a.substring(t+1).replace(/^["']|["']$/g,'').trim());n&&!isNaN(o)&&o>0&&e.æ‰€æŒç‰©.set(n,o)}}}e.generated_inventory=''},d=(0,t.ref)(new Map),za=(0,t.ref)(new Map),Da=(0,t.computed)(()=>{const e=new Map;for(const[t,a]of d.value)'c1'!==t&&e.set(t,a);return e}),Ta=(0,t.computed)(()=>Array.from(Da.value.entries())),Ma=e=>{const a=new Map(d.value),n=getVariables({type:'chat'}),o=n.characters?.c1;return o&&!a.has('c1')&&a.set('c1',(0,t.reactive)(o)),Array.from(a.entries()).filter(([t])=>t!==e)},Ya=()=>{const e=new Map,a=getVariables({type:'chat'});if(a?.items)for(const[n,o]of Object.entries(a.items))e.set(n,(0,t.reactive)(o));return Array.from(e.entries())},Oa=e=>{const t=getVariables({type:'chat'}),a=t.items?.[e];return a&&a.name||'æœªçŸ¥ç‰©å“'},Aa=e=>`${e?.å§“æ°||''}${e?.åå­—||''}`.trim()||'æœªçŸ¥è§’è‰²',Ra=e=>{const t=getVariables({type:'chat'}),a=t.characters?.[e];if(a){return`${a.å§“æ°||''}${a.åå­—||''}`.trim()||'æœªçŸ¥è§’è‰²'}return'æœªçŸ¥è§’è‰²'},Ka=e=>!!(e?.generated_surname||e?.generated_name||e?.generated_age||e?.generated_gender||e?.generated_identity||e?.generated_height||e?.generated_weight||e?.generated_chest_size||e?.generated_cup_size||e?.generated_waist_size||e?.generated_hips_size||e?.generated_hairstyle||e?.generated_appearance||e?.generated_clothes||e?.generated_introduction||e?.generated_personality||e?.generated_favourite||e?.generated_money||e?.generated_mood||e?.generated_sexuality||e?.generated_birthday_month||e?.generated_birthday_day||e?.generated_extra_information||e?.generated_relationship||e?.generated_friendship||e?.generated_love||e?.generated_inventory),Ua=e=>{const t=(()=>{if(!(e?.é—œä¿‚ instanceof Map))return!1;if(0===e.é—œä¿‚.size)return!0;for(const[t,a]of e.é—œä¿‚)if(!a||!a.trim())return!1;return!0})();return!!(e?.å§“æ°?.trim()&&e?.åå­—?.trim()&&null!==e?.å¹´é½¡&&e?.æ€§åˆ¥?.trim()&&e?.èº«ä»½?.trim()&&null!==e?.èº«é«˜&&null!==e?.é«”é‡&&null!==e?.èƒ¸åœ&&e?.ç½©æ¯?.trim()&&null!==e?.è…°åœ&&null!==e?.è‡€åœ&&e?.é«®åž‹?.trim()&&e?.æ¨£è²Œ?.trim()&&e?.è¡£è‘—?.trim()&&e?.ç°¡ä»‹?.trim()&&e?.æ€§æ ¼?.trim()&&e?.æ„›å¥½?.trim()&&null!==e?.é‡‘éŒ¢&&null!==e?.å¿ƒæƒ…&&null!==e?.æ€§æ…¾&&null!==e?.ç”Ÿæ—¥æœˆä»½&&null!==e?.ç”Ÿæ—¥æ—¥æœŸ&&e?.å…¶ä»–é‡è¦è³‡è¨Š?.trim()&&t)},La=(0,t.computed)(()=>{try{const e=getVariables({type:'chat'});return!!e?.world_info?.trim()}catch{return!1}}),Fa=e=>{['generated_surname','generated_name','generated_age','generated_gender','generated_identity','generated_height','generated_weight','generated_chest_size','generated_cup_size','generated_waist_size','generated_hips_size','generated_hairstyle','generated_appearance','generated_clothes','generated_introduction','generated_personality','generated_favourite','generated_money','generated_mood','generated_sexuality','generated_birthday_month','generated_birthday_day','generated_extra_information','generated_relationship','generated_selected_relation_target','generated_friendship','generated_love','generated_inventory'].forEach(t=>{e[t]||(e[t]='')}),e.generation_requirement||(e.generation_requirement='')},ja=e=>{!e.é—œä¿‚||'object'!=typeof e.é—œä¿‚||e.é—œä¿‚ instanceof Map?e.é—œä¿‚||(e.é—œä¿‚=new Map):e.é—œä¿‚=new Map(Object.entries(e.é—œä¿‚)),!e.å‹å¥½åº¦||'object'!=typeof e.å‹å¥½åº¦||e.å‹å¥½åº¦ instanceof Map?e.å‹å¥½åº¦||(e.å‹å¥½åº¦=new Map):e.å‹å¥½åº¦=new Map(Object.entries(e.å‹å¥½åº¦)),!e.æ„›æƒ…åº¦||'object'!=typeof e.æ„›æƒ…åº¦||e.æ„›æƒ…åº¦ instanceof Map?e.æ„›æƒ…åº¦||(e.æ„›æƒ…åº¦=new Map):e.æ„›æƒ…åº¦=new Map(Object.entries(e.æ„›æƒ…åº¦)),!e.æ‰€æŒç‰©||'object'!=typeof e.æ‰€æŒç‰©||e.æ‰€æŒç‰© instanceof Map?e.æ‰€æŒç‰©||(e.æ‰€æŒç‰©=new Map):e.æ‰€æŒç‰©=new Map(Object.entries(e.æ‰€æŒç‰©)),e.selected_relation_target||(e.selected_relation_target=''),e.selected_friendship_target||(e.selected_friendship_target=''),e.selected_love_target||(e.selected_love_target=''),e.selected_inventory_item||(e.selected_inventory_item=''),void 0!==e.selected_inventory_quantity&&null!==e.selected_inventory_quantity||(e.selected_inventory_quantity=1)},Ha=e=>{try{const t=getVariables({type:'chat'}),a={...t.characters||{}},n=d.value.get(e);if(!n)return;const o={å§“æ°:n.å§“æ°||'',åå­—:n.åå­—||'',å¹´é½¡:n.å¹´é½¡,æ€§åˆ¥:n.æ€§åˆ¥||'',èº«ä»½:n.èº«ä»½||'',èº«é«˜:n.èº«é«˜,é«”é‡:n.é«”é‡,èƒ¸åœ:n.èƒ¸åœ,ç½©æ¯:n.ç½©æ¯||'',è…°åœ:n.è…°åœ,è‡€åœ:n.è‡€åœ,é«®åž‹:n.é«®åž‹||'',æ¨£è²Œ:n.æ¨£è²Œ||'',è¡£è‘—:n.è¡£è‘—||'',ç°¡ä»‹:n.ç°¡ä»‹||'',æ€§æ ¼:n.æ€§æ ¼||'',æ„›å¥½:n.æ„›å¥½||'',é‡‘éŒ¢:n.é‡‘éŒ¢,å¿ƒæƒ…:n.å¿ƒæƒ…,æ€§æ…¾:n.æ€§æ…¾,ç”Ÿæ—¥æœˆä»½:n.ç”Ÿæ—¥æœˆä»½,ç”Ÿæ—¥æ—¥æœŸ:n.ç”Ÿæ—¥æ—¥æœŸ,å…¶ä»–é‡è¦è³‡è¨Š:n.å…¶ä»–é‡è¦è³‡è¨Š||'',é—œä¿‚:Object.fromEntries(n.é—œä¿‚||new Map),å‹å¥½åº¦:Object.fromEntries(n.å‹å¥½åº¦||new Map),æ„›æƒ…åº¦:Object.fromEntries(n.æ„›æƒ…åº¦||new Map),æ‰€æŒç‰©:Object.fromEntries(n.æ‰€æŒç‰©||new Map)};a[e]=o,t.characters=a,replaceVariables(t,{type:'chat'})}catch(t){console.error(`ä¿å­˜è§’è‰² ${e} è³‡æ–™å¤±æ•—:`,t)}},Pa=e=>'['+Object.entries(e).map(([e,t])=>'string'==typeof t?`'${e}':'${t}'`:`'${e}':${t}`).join(', ')+']',Ga=(e,t)=>{let a='\n</ä¸–ç•ŒèƒŒæ™¯>\n';return a+='\n',a+=`${(()=>{const e=getVariables({type:'chat'}).characters.c1,t=`${e.å§“æ°}${e.åå­—}`;let a=`<${t}Status>\n`;return a+='idï¼šc1\n',a+=`  å§“æ°ï¼š${e.å§“æ°||''}\n`,a+=`  åå­—ï¼š${e.åå­—||''}\n`,a+=`  å¹´é½¡ï¼š${e.å¹´é½¡||''}\n`,a+=`  æ€§åˆ¥ï¼š${e.æ€§åˆ¥||''}\n`,a+=`  èº«ä»½ï¼š${e.èº«ä»½||''}\n`,a+=`  èº«é«˜ï¼š${e.èº«é«˜||''}\n`,a+=`  é«”é‡ï¼š${e.é«”é‡||''}\n`,a+=`  èƒ¸åœï¼š${e.èƒ¸åœ||''}\n`,a+=`  ç½©æ¯ï¼š${e.ç½©æ¯||''}\n`,a+=`  è…°åœï¼š${e.è…°åœ||''}\n`,a+=`  è‡€åœï¼š${e.è‡€åœ||''}\n`,a+=`  é«®åž‹ï¼š${e.é«®åž‹||''}\n`,a+=`  æ¨£è²Œï¼š${e.æ¨£è²Œ||''}\n`,a+=`  è¡£è‘—ï¼š${e.è¡£è‘—||''}\n`,a+=`  ç°¡ä»‹ï¼š${e.ç°¡ä»‹||''}\n`,a+=`  æ€§æ ¼ï¼š${e.æ€§æ ¼||''}\n`,a+=`  æ„›å¥½ï¼š${e.æ„›å¥½||''}\n`,a+=`  é‡‘éŒ¢ï¼š${e.é‡‘éŒ¢||''}\n`,a+=`  ç”Ÿæ—¥æœˆä»½ï¼š${e.ç”Ÿæ—¥æœˆä»½||''}\n`,a+=`  ç”Ÿæ—¥æ—¥æœŸï¼š${e.ç”Ÿæ—¥æ—¥æœŸ||''}\n`,a+=`  å…¶ä»–é‡è¦è³‡è¨Šï¼š${e.å…¶ä»–é‡è¦è³‡è¨Š||''}\n`,a+=`  é—œä¿‚ï¼š${Pa(e.é—œä¿‚)}\n`,a+=`  å‹å¥½åº¦ï¼š${Pa(e.å‹å¥½åº¦)}\n`,a+=`  æ„›æƒ…åº¦ï¼š${Pa(e.æ„›æƒ…åº¦)}\n`,a+=`</${t}Status>`,a})()}\n`,a+='\n',a+=`${(e=>{const t=getVariables({type:'chat'}).characters;if(void 0===t)return'';let a='<CharacterStatus>\n';for(const[n,o]of Object.entries(t))'c1'!==n&&n!==e&&(a+=`idï¼š${n}\n`,a+=`  å§“æ°ï¼š${o.å§“æ°||''}\n`,a+=`  åå­—ï¼š${o.åå­—||''}\n`,a+=`  å¹´é½¡ï¼š${o.å¹´é½¡||''}\n`,a+=`  æ€§åˆ¥ï¼š${o.æ€§åˆ¥||''}\n`,a+=`  èº«ä»½ï¼š${o.èº«ä»½||''}\n`,a+=`  èº«é«˜ï¼š${o.èº«é«˜||''}\n`,a+=`  é«”é‡ï¼š${o.é«”é‡||''}\n`,a+=`  èƒ¸åœï¼š${o.èƒ¸åœ||''}\n`,a+=`  ç½©æ¯ï¼š${o.ç½©æ¯||''}\n`,a+=`  è…°åœï¼š${o.è…°åœ||''}\n`,a+=`  è‡€åœï¼š${o.è‡€åœ||''}\n`,a+=`  é«®åž‹ï¼š${o.é«®åž‹||''}\n`,a+=`  æ¨£è²Œï¼š${o.æ¨£è²Œ||''}\n`,a+=`  è¡£è‘—ï¼š${o.è¡£è‘—||''}\n`,a+=`  ç°¡ä»‹ï¼š${o.ç°¡ä»‹||''}\n`,a+=`  æ€§æ ¼ï¼š${o.æ€§æ ¼||''}\n`,a+=`  æ„›å¥½ï¼š${o.æ„›å¥½||''}\n`,a+=`  é‡‘éŒ¢ï¼š${o.é‡‘éŒ¢||''}\n`,a+=`  å¿ƒæƒ…ï¼š${o.å¿ƒæƒ…||''}\n`,a+=`  æ€§æ…¾ï¼š${o.æ€§æ…¾||''}\n`,a+=`  ç”Ÿæ—¥æœˆä»½ï¼š${o.ç”Ÿæ—¥æœˆä»½||''}\n`,a+=`  ç”Ÿæ—¥æ—¥æœŸï¼š${o.ç”Ÿæ—¥æ—¥æœŸ||''}\n`,a+=`  å…¶ä»–é‡è¦è³‡è¨Šï¼š${o.å…¶ä»–é‡è¦è³‡è¨Š||''}\n`,a+=`  é—œä¿‚ï¼š${Pa(o.é—œä¿‚)}\n`,a+=`  å‹å¥½åº¦ï¼š${Pa(o.å‹å¥½åº¦)}\n`,a+=`  æ„›æƒ…åº¦ï¼š${Pa(o.æ„›æƒ…åº¦)}\n\n`);return a+='</CharacterStatus>',a})(e)}\n`,a+='\n',a+=`${(()=>{let e='<ItemTable>\n';e+='|id|åç¨±|æè¿°|åƒ¹å€¼|\n',e+='|---|---|---|---|\n';const t=getVariables({type:'chat'}).items;if(void 0===t)return'';for(const[a,n]of Object.entries(t))e+=`|${a}|${n.name}|${n.description}|${n.value}|\n`;return e+='</ItemTable>',e})()}\n`,a+='\n',a+=`${(()=>{let e='<LocationTable>\n';e+='|id|åœ°é»ž|ä½ç½®|æè¿°|å­åœ°é»ž|\n',e+='|---|---|---|---|---|\n';const t=getVariables({type:'chat'}).locations;if(void 0===t)return'';for(const[a,n]of Object.entries(t)){const t=n.sub_location?n.sub_location.join(', '):'';e+=`|${a}|${n.name}|${n.location||''}|${n.description}|${t}|\n`}return e+='</LocationTable>',e})()}\n`,a+='\n',a+=`${(()=>{let e='';const t=getVariables({type:'chat'}).extra_world_info;if(void 0===t)return'';for(const a of Array.from(t))''!==a.name&&''!==a.content&&(e+=`<${a.name}>\n`,e+=`${a.content}\n`,e+=`</${a.name}>\n`,e+='\n');return e})()}\n`,a+='\n',a+='<ç”Ÿæˆè¦æ±‚>\n',a+=`${t.generation_requirement||'ç„¡ç‰¹æ®Šè¦æ±‚'}\n`,a+='</ç”Ÿæˆè¦æ±‚>\n',a+='\n',a+='<example>\n',a+='# The following is an example of user input and expected output. Please strictly follow the style and format to generate the output. Output anything other than this format is prohibited.\n',a+='å§“æ°ï¼šstring\n',a+='åå­—ï¼šstring\n',a+='å¹´é½¡ï¼šnumber\n',a+='æ€§åˆ¥ï¼š\'ç”·\' | \'å¥³\' | \'ä¸æ˜Ž\'\n',a+='èº«ä»½ï¼š\'ä»¥ç¬¬ä¸‰äººç¨±å®¢è§€åœ°æè¿°\'\n',a+='èº«é«˜ï¼šnumber\n',a+='é«”é‡ï¼šnumber\n',a+='èƒ¸åœï¼šnumber\n',a+='ç½©æ¯ï¼š\'Capital Letter\' | \'ä¸é©ç”¨\'\n',a+='è…°åœï¼šnumber\n',a+='è‡€åœï¼šnumber\n',a+='é«®åž‹ï¼š\'ä»¥ç¬¬ä¸‰äººç¨±å®¢è§€åœ°æè¿°\'\n',a+='æ¨£è²Œï¼š\'ä»¥ç¬¬ä¸‰äººç¨±å®¢è§€åœ°æè¿°\'\n',a+='è¡£è‘—ï¼š\'ä»¥ç¬¬ä¸‰äººç¨±å®¢è§€åœ°æè¿°ç•¶å‰èº«ä¸Šæœè£\'\n',a+='ç°¡ä»‹ï¼š\'ä»¥ç¬¬ä¸‰äººç¨±å®¢è§€åœ°æè¿°\'\n',a+='æ€§æ ¼ï¼š\'ä»¥ç¬¬ä¸‰äººç¨±å®¢è§€åœ°æè¿°\'\n',a+='æ„›å¥½ï¼š\'ä»¥ç¬¬ä¸‰äººç¨±å®¢è§€åœ°æè¿°\'\n',a+='é‡‘éŒ¢ï¼šnumber\n',a+='å¿ƒæƒ…ï¼šnumber[-100~100]\n',a+='æ€§æ…¾ï¼šnumber[0~100]\n',a+='ç”Ÿæ—¥æœˆä»½ï¼šnumber\n',a+='ç”Ÿæ—¥æ—¥æœŸï¼šnumber\n',a+='å…¶ä»–é‡è¦è³‡è¨Šï¼š\'ä»¥ç¬¬ä¸‰äººç¨±å®¢è§€åœ°æè¿°\'\n',a+='é—œä¿‚ï¼š[\'id\':\'å°æ­¤è§’è‰²çš„é—œä¿‚\', ...]\n',a+='å‹å¥½åº¦ï¼š\'[\'id\':number[-1000~1000], ...]\'\n',a+='æ„›æƒ…åº¦ï¼š\'[\'id\':number[1~1000], ...]\'\n',a+='æ‰€æŒç‰©ï¼š[\'item_id\':quantity, ...]\n',a+='</example>\n',a},qa=async e=>{const t=d.value.get(e);if(!t)return;const a=new Map(za.value);a.set(e,!0),za.value=a;try{const a=(e=>{let t='è«‹æ ¹æ“šä¸–ç•ŒèƒŒæ™¯è³‡è¨Šã€ç”Ÿæˆè¦æ±‚åŠå·²æœ‰è§’è‰²è³‡æ–™ï¼Œç‚ºä»¥ä¸‹è§’è‰²å®Œå–„è§’è‰²è³‡æ–™è¨­å®šï¼š\n\n';return t+=`å§“æ°ï¼š${e.å§“æ°||''}\n`,t+=`åå­—ï¼š${e.åå­—||''}\n`,t+=`å¹´é½¡ï¼š${e.å¹´é½¡||''}\n`,t+=`æ€§åˆ¥ï¼š${e.æ€§åˆ¥||''}\n`,t+=`èº«ä»½ï¼š${e.èº«ä»½||''}\n`,t+=`èº«é«˜ï¼š${e.èº«é«˜||''}\n`,t+=`é«”é‡ï¼š${e.é«”é‡||''}\n`,t+=`èƒ¸åœï¼š${e.èƒ¸åœ||''}\n`,t+=`ç½©æ¯ï¼š${e.ç½©æ¯||''}\n`,t+=`è…°åœï¼š${e.è…°åœ||''}\n`,t+=`è‡€åœï¼š${e.è‡€åœ||''}\n`,t+=`é«®åž‹ï¼š${e.é«®åž‹||''}\n`,t+=`æ¨£è²Œï¼š${e.æ¨£è²Œ||''}\n`,t+=`è¡£è‘—ï¼š${e.è¡£è‘—||''}\n`,t+=`ç°¡ä»‹ï¼š${e.ç°¡ä»‹||''}\n`,t+=`æ€§æ ¼ï¼š${e.æ€§æ ¼||''}\n`,t+=`æ„›å¥½ï¼š${e.æ„›å¥½||''}\n`,t+=`é‡‘éŒ¢ï¼š${e.é‡‘éŒ¢||''}\n`,t+=`å¿ƒæƒ…ï¼š${e.å¿ƒæƒ…||''}\n`,t+=`æ€§æ…¾ï¼š${e.æ€§æ…¾||''}\n`,t+=`ç”Ÿæ—¥æœˆä»½ï¼š${e.ç”Ÿæ—¥æœˆä»½||''}\n`,t+=`ç”Ÿæ—¥æ—¥æœŸï¼š${e.ç”Ÿæ—¥æ—¥æœŸ||''}\n`,t+=`å…¶ä»–é‡è¦è³‡è¨Šï¼š${e.å…¶ä»–é‡è¦è³‡è¨Š||''}\n`,t+=`é—œä¿‚ï¼š${Pa(Object.fromEntries(e.é—œä¿‚||new Map))}\n`,t+=`å‹å¥½åº¦ï¼š${Pa(Object.fromEntries(e.å‹å¥½åº¦||new Map))}\n`,t+=`æ„›æƒ…åº¦ï¼š${Pa(Object.fromEntries(e.æ„›æƒ…åº¦||new Map))}\n`,t+=`æ‰€æŒç‰©ï¼š${Pa(Object.fromEntries(e.æ‰€æŒç‰©||new Map))}\n`,t})(t),n=(()=>{const e=getVariables({type:'chat'}).world_info;let t=getCharData('current').description;t=t.replace('{{getvar::world_info}}',e);let a='ä½ æ˜¯ä¸€å€‹å°ˆæ¥­çš„è§’è‰²è¨­è¨ˆåŠ©æ‰‹ï¼Œæ“…é•·å‰µé€ è±å¯Œå¤šå½©çš„è§’è‰²è¨­å®šã€‚è«‹æ ¹æ“šæä¾›çš„ä¸–ç•ŒèƒŒæ™¯åŠç”Ÿæˆè¦æ±‚ï¼Œç‚ºè§’è‰²å®Œå–„è³‡æ–™ã€‚\n';return a+='\n',a+='<ä¸–ç•ŒèƒŒæ™¯>\n','ä½ æ˜¯ä¸€å€‹å°ˆæ¥­çš„è§’è‰²è¨­è¨ˆåŠ©æ‰‹ï¼Œæ“…é•·å‰µé€ è±å¯Œå¤šå½©çš„è§’è‰²è¨­å®šã€‚è«‹æ ¹æ“šæä¾›çš„ä¸–ç•ŒèƒŒæ™¯åŠç”Ÿæˆè¦æ±‚ï¼Œç‚ºè§’è‰²å®Œå–„è³‡æ–™ã€‚\n\n<ä¸–ç•ŒèƒŒæ™¯>\n'})(),o=Ga(e,t);((e,t)=>{const a=e.split('\n');for(const e of a){const a=e.indexOf('ï¼š');if(a>0){const n=e.substring(0,a).trim(),o=e.substring(a+1).trim();switch(n){case'å§“æ°':t.generated_surname=o.replace(/^["']|["']$/g,'');break;case'åå­—':t.generated_name=o.replace(/^["']|["']$/g,'');break;case'å¹´é½¡':t.generated_age=o.replace(/[^\d]/g,'');break;case'æ€§åˆ¥':t.generated_gender=o.replace(/^["']|["']$/g,'');break;case'èº«ä»½':t.generated_identity=o.replace(/^["']|["']$/g,'');break;case'èº«é«˜':t.generated_height=o.replace(/[^\d]/g,'');break;case'é«”é‡':t.generated_weight=o.replace(/[^\d]/g,'');break;case'èƒ¸åœ':t.generated_chest_size=o.replace(/[^\d]/g,'');break;case'ç½©æ¯':t.generated_cup_size=o.replace(/^["']|["']$/g,'');break;case'è…°åœ':t.generated_waist_size=o.replace(/[^\d]/g,'');break;case'è‡€åœ':t.generated_hips_size=o.replace(/[^\d]/g,'');break;case'é«®åž‹':t.generated_hairstyle=o.replace(/^["']|["']$/g,'');break;case'æ¨£è²Œ':t.generated_appearance=o.replace(/^["']|["']$/g,'');break;case'è¡£è‘—':t.generated_clothes=o.replace(/^["']|["']$/g,'');break;case'ç°¡ä»‹':t.generated_introduction=o.replace(/^["']|["']$/g,'');break;case'æ€§æ ¼':t.generated_personality=o.replace(/^["']|["']$/g,'');break;case'æ„›å¥½':t.generated_favourite=o.replace(/^["']|["']$/g,'');break;case'é‡‘éŒ¢':t.generated_money=o.replace(/[^\d]/g,'');break;case'å¿ƒæƒ…':t.generated_mood=o.replace(/[^\d]/g,'');break;case'æ€§æ…¾':t.generated_sexuality=o.replace(/[^\d]/g,'');break;case'ç”Ÿæ—¥æœˆä»½':t.generated_birthday_month=o.replace(/[^\d]/g,'');break;case'ç”Ÿæ—¥æ—¥æœŸ':t.generated_birthday_day=o.replace(/[^\d]/g,'');break;case'å…¶ä»–é‡è¦è³‡è¨Š':t.generated_extra_information=o.replace(/^["']|["']$/g,'');break;case'é—œä¿‚':t.generated_relationship=o.replace(/^["']|["']$/g,'');break;case'å‹å¥½åº¦':t.generated_friendship=o.replace(/^["']|["']$/g,'');break;case'æ„›æƒ…åº¦':t.generated_love=o.replace(/^["']|["']$/g,'');break;case'æ‰€æŒç‰©':t.generated_inventory=o.replace(/^["']|["']$/g,'')}}}})(await generateRaw({user_input:a,ordered_prompts:[{role:'system',content:n},'char_description',{role:'system',content:o},'user_input']}),t);try{localStorage.setItem(`character_profile_generated_${e}`,JSON.stringify({generation_requirement:t.generation_requirement,generated_surname:t.generated_surname,generated_name:t.generated_name,generated_age:t.generated_age,generated_gender:t.generated_gender,generated_identity:t.generated_identity,generated_height:t.generated_height,generated_weight:t.generated_weight,generated_chest_size:t.generated_chest_size,generated_cup_size:t.generated_cup_size,generated_waist_size:t.generated_waist_size,generated_hips_size:t.generated_hips_size,generated_hairstyle:t.generated_hairstyle,generated_appearance:t.generated_appearance,generated_clothes:t.generated_clothes,generated_introduction:t.generated_introduction,generated_personality:t.generated_personality,generated_favourite:t.generated_favourite,generated_money:t.generated_money,generated_mood:t.generated_mood,generated_sexuality:t.generated_sexuality,generated_birthday_month:t.generated_birthday_month,generated_birthday_day:t.generated_birthday_day,generated_extra_information:t.generated_extra_information,generated_relationship:t.generated_relationship,generated_friendship:t.generated_friendship,generated_love:t.generated_love,generated_inventory:t.generated_inventory}))}catch(t){console.error(`Failed to save generated character profile for ${e} to localStorage:`,t)}d.value.set(e,{...t})}catch(a){console.error(`ç”Ÿæˆè§’è‰² ${e} è³‡æ–™å¤±æ•—:`,a),t.generated_age='ç”Ÿæˆå¤±æ•—ï¼Œè«‹é‡è©¦ã€‚'}finally{const t=new Map(za.value);t.set(e,!1),za.value=t}};(0,t.watch)(()=>getVariables({type:'chat'}),e=>{if(e?.characters){const a=new Map;for(const[n,o]of Object.entries(e.characters)){const e=(0,t.reactive)(o);Fa(e),ja(e),a.set(n,e)}d.value=a}},{deep:!0}),(0,t.watch)(d,()=>{for(const[e]of d.value.entries())Ha(e)},{deep:!0}),(0,t.watch)(()=>d.value,e=>{for(const[a,n]of e.entries())(0,t.watch)(()=>n.generation_requirement,e=>{try{const t=localStorage.getItem(`character_profile_generated_${a}`),n=t?JSON.parse(t):{};n.generation_requirement=e,localStorage.setItem(`character_profile_generated_${a}`,JSON.stringify(n))}catch(e){console.error(`Failed to save generation_requirement for ${a} to localStorage:`,e)}},{immediate:!1})},{deep:!0,immediate:!0}),(0,t.onMounted)(()=>{(()=>{try{const e=getVariables({type:'chat'});if(e?.characters){const a=new Map;for(const[n,o]of Object.entries(e.characters)){const e=(0,t.reactive)(o);Fa(e),ja(e),a.set(n,e)}d.value=a}else d.value=new Map}catch(e){console.error('è¼‰å…¥è§’è‰²è³‡æ–™å¤±æ•—:',e),d.value=new Map}try{for(const[e,t]of d.value){const a=localStorage.getItem(`character_profile_generated_${e}`);a&&Object.assign(t,JSON.parse(a))}}catch(e){console.error('Failed to load generated character profiles from localStorage:',e)}})()});const Xa=()=>{const e=(()=>{const e=Array.from(d.value.keys());let t=2;for(;e.includes(`c${t}`);)t++;return`c${t}`})(),a={å§“æ°:'',åå­—:'',å¹´é½¡:null,æ€§åˆ¥:'',èº«ä»½:'',èº«é«˜:null,é«”é‡:null,èƒ¸åœ:null,ç½©æ¯:'',è…°åœ:null,è‡€åœ:null,é«®åž‹:'',æ¨£è²Œ:'',è¡£è‘—:'',ç°¡ä»‹:'',æ€§æ ¼:'',æ„›å¥½:'',é‡‘éŒ¢:null,å¿ƒæƒ…:50,æ€§æ…¾:0,ç”Ÿæ—¥æœˆä»½:null,ç”Ÿæ—¥æ—¥æœŸ:null,å…¶ä»–é‡è¦è³‡è¨Š:'',é—œä¿‚:new Map,selected_relation_target:'',å‹å¥½åº¦:new Map,æ„›æƒ…åº¦:new Map,selected_friendship_target:'',selected_love_target:'',æ‰€æŒç‰©:new Map,selected_inventory_item:'',selected_inventory_quantity:1,generation_requirement:'',generated_surname:'',generated_name:'',generated_age:'',generated_gender:'',generated_identity:'',generated_height:'',generated_weight:'',generated_chest_size:'',generated_cup_size:'',generated_waist_size:'',generated_hips_size:'',generated_hairstyle:'',generated_appearance:'',generated_clothes:'',generated_introduction:'',generated_personality:'',generated_favourite:'',generated_money:'',generated_mood:'',generated_sexuality:'',generated_birthday_month:'',generated_birthday_day:'',generated_extra_information:''},n=(0,t.reactive)(a);d.value.set(e,n);try{const t=getVariables({type:'chat'}).characters||{};t[e]={å§“æ°:'',åå­—:'',å¹´é½¡:null,æ€§åˆ¥:'',èº«ä»½:'',èº«é«˜:null,é«”é‡:null,èƒ¸åœ:null,ç½©æ¯:'',è…°åœ:null,è‡€åœ:null,é«®åž‹:'',æ¨£è²Œ:'',è¡£è‘—:'',ç°¡ä»‹:'',æ€§æ ¼:'',æ„›å¥½:'',é‡‘éŒ¢:null,å¿ƒæƒ…:50,æ€§æ…¾:0,ç”Ÿæ—¥æœˆä»½:null,ç”Ÿæ—¥æ—¥æœŸ:null,å…¶ä»–é‡è¦è³‡è¨Š:'',é—œä¿‚:{},å‹å¥½åº¦:{},æ„›æƒ…åº¦:{}},insertOrAssignVariables({characters:t},{type:'chat'})}catch(e){console.error('Failed to add new character to chat variables:',e)}},Wa=(e,t,a,n,o)=>{const r=d.value.get(e);if(!r)return;const l=r[t];l||(r[t]=new Map);const i=new Map(l),s=o?o(n):n;i.set(a,s),r[t]=i,d.value.set(e,{...r}),Ha(e)},Ja=(e,t,a,n)=>{const o=d.value.get(e);if(!o)return;const r=o[a];if(!r)return;o[t]||(o[t]=new Map),o[t].set(r,n),o[a]='',d.value.set(e,{...o}),Ha(e)},Za=(e,t,a)=>{const n=d.value.get(e);if(!n)return;const o=n[t];if(!o)return;const r=new Map(o);r.delete(a),n[t]=r,d.value.set(e,{...n}),Ha(e)};return(e,Da)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',u,[Da[68]||(Da[68]=(0,t.createElementVNode)('h3',null,'è§’è‰²è³‡æ–™è¨­å®š',-1)),(0,t.createCommentVNode)(' å…¶ä»–è§’è‰²å‹•æ…‹æ‘ºç–Šæ¬„ '),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(Ta.value,([e,u])=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:e,class:(0,t.normalizeClass)(['character-fold-bar',{'character-incomplete':!Ua(u)}])},[(0,t.createVNode)(c,{title:`${e}: ${Aa(u)}`,'is-open':!1},{'title-actions':(0,t.withCtx)(()=>[(0,t.createElementVNode)('button',{class:'remove-character-btn',title:'ç§»é™¤è§’è‰²',onClick:t=>(e=>{d.value.delete(e);try{const t=getVariables({type:'chat'});delete t.characters[e],replaceVariables(t,{type:'chat'})}catch(t){console.error(`Failed to remove character ${e} from chat variables:`,t)}})(e)},[...Da[0]||(Da[0]=[(0,t.createElementVNode)('span',null,'Ã—',-1)])],8,p)]),default:(0,t.withCtx)(()=>[(0,t.createElementVNode)('div',m,[(0,t.createElementVNode)('div',v,[Da[27]||(Da[27]=(0,t.createElementVNode)('h4',null,'åŸºæœ¬è³‡è¨Š',-1)),(0,t.createElementVNode)('div',g,[(0,t.createElementVNode)('div',b,[Da[2]||(Da[2]=(0,t.createElementVNode)('label',null,'å§“æ°',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':e=>u.å§“æ°=e,type:'text',placeholder:'ä¾‹å¦‚ï¼šå¼µ',class:'text-input'},null,8,f),[[t.vModelText,u.å§“æ°]]),u.generated_surname?((0,t.openBlock)(),(0,t.createElementBlock)('div',h,[Da[1]||(Da[1]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',x,(0,t.toDisplayString)(u.generated_surname),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>o(e,'å§“æ°',u.generated_surname)},' ä½¿ç”¨ ',8,y)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',E,[Da[4]||(Da[4]=(0,t.createElementVNode)('label',null,'åå­—',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':e=>u.åå­—=e,type:'text',placeholder:'ä¾‹å¦‚ï¼šå°æ˜Ž',class:'text-input'},null,8,k),[[t.vModelText,u.åå­—]]),u.generated_name?((0,t.openBlock)(),(0,t.createElementBlock)('div',V,[Da[3]||(Da[3]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',N,(0,t.toDisplayString)(u.generated_name),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>o(e,'åå­—',u.generated_name)},' ä½¿ç”¨ ',8,w)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',S,[Da[6]||(Da[6]=(0,t.createElementVNode)('label',null,'å¹´é½¡',-1)),(0,t.createElementVNode)('input',{value:a(u,'å¹´é½¡'),type:'number',placeholder:'ä¾‹å¦‚ï¼š18',class:'text-input',min:'0',max:'200',onInput:e=>n(u,'å¹´é½¡',e.target.value)},null,40,B),u.generated_age?((0,t.openBlock)(),(0,t.createElementBlock)('div',C,[Da[5]||(Da[5]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',I,(0,t.toDisplayString)(u.generated_age),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>o(e,'å¹´é½¡',u.generated_age)},' ä½¿ç”¨ ',8,D)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',T,[Da[8]||(Da[8]=(0,t.createElementVNode)('label',null,'æ€§åˆ¥',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':e=>u.æ€§åˆ¥=e,type:'text',placeholder:'ä¾‹å¦‚ï¼šå¥³',class:'text-input'},null,8,M),[[t.vModelText,u.æ€§åˆ¥]]),u.generated_gender?((0,t.openBlock)(),(0,t.createElementBlock)('div',Y,[Da[7]||(Da[7]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',O,(0,t.toDisplayString)(u.generated_gender),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>o(e,'æ€§åˆ¥',u.generated_gender)},' ä½¿ç”¨ ',8,A)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',R,[Da[10]||(Da[10]=(0,t.createElementVNode)('label',null,'èº«ä»½',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':e=>u.èº«ä»½=e,type:'text',placeholder:'ä¾‹å¦‚ï¼šé«˜ä¸­ç”Ÿ',class:'text-input'},null,8,K),[[t.vModelText,u.èº«ä»½]]),u.generated_identity?((0,t.openBlock)(),(0,t.createElementBlock)('div',U,[Da[9]||(Da[9]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',L,(0,t.toDisplayString)(u.generated_identity),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>o(e,'èº«ä»½',u.generated_identity)},' ä½¿ç”¨ ',8,F)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',j,[Da[12]||(Da[12]=(0,t.createElementVNode)('label',null,'èº«é«˜ (cm)',-1)),(0,t.createElementVNode)('input',{value:a(u,'èº«é«˜'),type:'number',placeholder:'ä¾‹å¦‚ï¼š165',class:'text-input',min:'0',max:'300',onInput:e=>n(u,'èº«é«˜',e.target.value)},null,40,H),u.generated_height?((0,t.openBlock)(),(0,t.createElementBlock)('div',P,[Da[11]||(Da[11]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',G,(0,t.toDisplayString)(u.generated_height),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>o(e,'èº«é«˜',u.generated_height)},' ä½¿ç”¨ ',8,q)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',X,[Da[14]||(Da[14]=(0,t.createElementVNode)('label',null,'é«”é‡ (kg)',-1)),(0,t.createElementVNode)('input',{value:a(u,'é«”é‡'),type:'number',placeholder:'ä¾‹å¦‚ï¼š50',class:'text-input',min:'0',max:'500',onInput:e=>n(u,'é«”é‡',e.target.value)},null,40,W),u.generated_weight?((0,t.openBlock)(),(0,t.createElementBlock)('div',J,[Da[13]||(Da[13]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',Z,(0,t.toDisplayString)(u.generated_weight),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>o(e,'é«”é‡',u.generated_weight)},' ä½¿ç”¨ ',8,Q)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',ee,[Da[16]||(Da[16]=(0,t.createElementVNode)('label',null,'èƒ¸åœ (cm)',-1)),(0,t.createElementVNode)('input',{value:a(u,'èƒ¸åœ'),type:'number',placeholder:'ä¾‹å¦‚ï¼š85',class:'text-input',min:'0',max:'200',onInput:e=>n(u,'èƒ¸åœ',e.target.value)},null,40,te),u.generated_chest_size?((0,t.openBlock)(),(0,t.createElementBlock)('div',ae,[Da[15]||(Da[15]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',ne,(0,t.toDisplayString)(u.generated_chest_size),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>o(e,'èƒ¸åœ',u.generated_chest_size)},' ä½¿ç”¨ ',8,oe)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',re,[Da[18]||(Da[18]=(0,t.createElementVNode)('label',null,'ç½©æ¯',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':e=>u.ç½©æ¯=e,type:'text',placeholder:'ä¾‹å¦‚ï¼šC',class:'text-input'},null,8,le),[[t.vModelText,u.ç½©æ¯]]),u.generated_cup_size?((0,t.openBlock)(),(0,t.createElementBlock)('div',ie,[Da[17]||(Da[17]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',se,(0,t.toDisplayString)(u.generated_cup_size),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>o(e,'ç½©æ¯',u.generated_cup_size)},' ä½¿ç”¨ ',8,de)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',ce,[Da[20]||(Da[20]=(0,t.createElementVNode)('label',null,'è…°åœ (cm)',-1)),(0,t.createElementVNode)('input',{value:a(u,'è…°åœ'),type:'number',placeholder:'ä¾‹å¦‚ï¼š60',class:'text-input',min:'0',max:'200',onInput:e=>n(u,'è…°åœ',e.target.value)},null,40,ue),u.generated_waist_size?((0,t.openBlock)(),(0,t.createElementBlock)('div',pe,[Da[19]||(Da[19]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',me,(0,t.toDisplayString)(u.generated_waist_size),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>o(e,'è…°åœ',u.generated_waist_size)},' ä½¿ç”¨ ',8,ve)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',ge,[Da[22]||(Da[22]=(0,t.createElementVNode)('label',null,'è‡€åœ (cm)',-1)),(0,t.createElementVNode)('input',{value:a(u,'è‡€åœ'),type:'number',placeholder:'ä¾‹å¦‚ï¼š88',class:'text-input',min:'0',max:'200',onInput:e=>n(u,'è‡€åœ',e.target.value)},null,40,be),u.generated_hips_size?((0,t.openBlock)(),(0,t.createElementBlock)('div',fe,[Da[21]||(Da[21]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',he,(0,t.toDisplayString)(u.generated_hips_size),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>o(e,'è‡€åœ',u.generated_hips_size)},' ä½¿ç”¨ ',8,xe)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',ye,[Da[24]||(Da[24]=(0,t.createElementVNode)('label',null,'é«®åž‹',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':e=>u.é«®åž‹=e,type:'text',placeholder:'ä¾‹å¦‚ï¼šé»‘è‰²é•·ç›´é«®',class:'text-input'},null,8,_e),[[t.vModelText,u.é«®åž‹]]),u.generated_hairstyle?((0,t.openBlock)(),(0,t.createElementBlock)('div',Ee,[Da[23]||(Da[23]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',ke,(0,t.toDisplayString)(u.generated_hairstyle),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>o(e,'é«®åž‹',u.generated_hairstyle)},' ä½¿ç”¨ ',8,Ve)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',Ne,[Da[26]||(Da[26]=(0,t.createElementVNode)('label',null,'ç”Ÿæ—¥',-1)),(0,t.createElementVNode)('div',we,[(0,t.createElementVNode)('input',{value:a(u,'ç”Ÿæ—¥æœˆä»½'),type:'number',placeholder:'æœˆ',class:'birthday-input',min:'1',max:'12',onInput:e=>n(u,'ç”Ÿæ—¥æœˆä»½',e.target.value)},null,40,Se),(0,t.createElementVNode)('input',{value:a(u,'ç”Ÿæ—¥æ—¥æœŸ'),type:'number',placeholder:'æ—¥',class:'birthday-input',min:'1',max:'31',onInput:e=>n(u,'ç”Ÿæ—¥æ—¥æœŸ',e.target.value)},null,40,Be)]),u.generated_birthday_month||u.generated_birthday_day?((0,t.openBlock)(),(0,t.createElementBlock)('div',Ce,[Da[25]||(Da[25]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',$e,(0,t.toDisplayString)(u.generated_birthday_month)+'æœˆ '+(0,t.toDisplayString)(u.generated_birthday_day)+'æ—¥ ',1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>o(e,'ç”Ÿæ—¥',`${u.generated_birthday_month}-${u.generated_birthday_day}`)},' ä½¿ç”¨ ',8,Ie)])):(0,t.createCommentVNode)('v-if',!0)])])]),(0,t.createElementVNode)('div',ze,[Da[32]||(Da[32]=(0,t.createElementVNode)('h4',null,'å¤–è²Œæè¿°',-1)),(0,t.createElementVNode)('div',De,[(0,t.createElementVNode)('div',Te,[Da[29]||(Da[29]=(0,t.createElementVNode)('label',null,'å¤–è²Œ',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{'onUpdate:modelValue':e=>u.æ¨£è²Œ=e,placeholder:'æè¿°å¤–è²Œç‰¹å¾µ...',class:'text-area',rows:'3'},null,8,Me),[[t.vModelText,u.æ¨£è²Œ]]),u.generated_appearance?((0,t.openBlock)(),(0,t.createElementBlock)('div',Ye,[Da[28]||(Da[28]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',Oe,(0,t.toDisplayString)(u.generated_appearance),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>o(e,'æ¨£è²Œ',u.generated_appearance)},' ä½¿ç”¨ ',8,Ae)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',Re,[Da[31]||(Da[31]=(0,t.createElementVNode)('label',null,'æœè£',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{'onUpdate:modelValue':e=>u.è¡£è‘—=e,placeholder:'æè¿°å¸¸ç©¿çš„æœè£...',class:'text-area',rows:'3'},null,8,Ke),[[t.vModelText,u.è¡£è‘—]]),u.generated_clothes?((0,t.openBlock)(),(0,t.createElementBlock)('div',Ue,[Da[30]||(Da[30]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',Le,(0,t.toDisplayString)(u.generated_clothes),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>o(e,'è¡£è‘—',u.generated_clothes)},' ä½¿ç”¨ ',8,Fe)])):(0,t.createCommentVNode)('v-if',!0)])])]),(0,t.createElementVNode)('div',je,[Da[39]||(Da[39]=(0,t.createElementVNode)('h4',null,'æ€§æ ¼èˆ‡å–œå¥½',-1)),(0,t.createElementVNode)('div',He,[(0,t.createElementVNode)('div',Pe,[Da[34]||(Da[34]=(0,t.createElementVNode)('label',null,'ç°¡ä»‹',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{'onUpdate:modelValue':e=>u.ç°¡ä»‹=e,placeholder:'ç°¡å–®ä»‹ç´¹è§’è‰²...',class:'text-area',rows:'3'},null,8,Ge),[[t.vModelText,u.ç°¡ä»‹]]),u.generated_introduction?((0,t.openBlock)(),(0,t.createElementBlock)('div',qe,[Da[33]||(Da[33]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',Xe,(0,t.toDisplayString)(u.generated_introduction),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>o(e,'ç°¡ä»‹',u.generated_introduction)},' ä½¿ç”¨ ',8,We)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',Je,[Da[36]||(Da[36]=(0,t.createElementVNode)('label',null,'æ€§æ ¼',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{'onUpdate:modelValue':e=>u.æ€§æ ¼=e,placeholder:'æè¿°æ€§æ ¼ç‰¹é»ž...',class:'text-area',rows:'3'},null,8,Ze),[[t.vModelText,u.æ€§æ ¼]]),u.generated_personality?((0,t.openBlock)(),(0,t.createElementBlock)('div',Qe,[Da[35]||(Da[35]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',et,(0,t.toDisplayString)(u.generated_personality),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>o(e,'æ€§æ ¼',u.generated_personality)},' ä½¿ç”¨ ',8,tt)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',at,[Da[38]||(Da[38]=(0,t.createElementVNode)('label',null,'æ„›å¥½',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{'onUpdate:modelValue':e=>u.æ„›å¥½=e,placeholder:'æè¿°å–œæ­¡çš„äº‹ç‰©...',class:'text-area',rows:'3'},null,8,nt),[[t.vModelText,u.æ„›å¥½]]),u.generated_favourite?((0,t.openBlock)(),(0,t.createElementBlock)('div',ot,[Da[37]||(Da[37]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',rt,(0,t.toDisplayString)(u.generated_favourite),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>o(e,'æ„›å¥½',u.generated_favourite)},' ä½¿ç”¨ ',8,lt)])):(0,t.createCommentVNode)('v-if',!0)])])]),(0,t.createElementVNode)('div',it,[Da[64]||(Da[64]=(0,t.createElementVNode)('h4',null,'å…¶ä»–è³‡è¨Š',-1)),(0,t.createElementVNode)('div',st,[(0,t.createElementVNode)('div',dt,[Da[41]||(Da[41]=(0,t.createElementVNode)('label',null,'é‡‘éŒ¢',-1)),(0,t.createElementVNode)('input',{value:a(u,'é‡‘éŒ¢'),type:'number',placeholder:'ä¾‹å¦‚ï¼š10000',class:'text-input',min:'0',onInput:e=>n(u,'é‡‘éŒ¢',e.target.value)},null,40,ct),u.generated_money?((0,t.openBlock)(),(0,t.createElementBlock)('div',ut,[Da[40]||(Da[40]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',pt,(0,t.toDisplayString)(u.generated_money),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>o(e,'é‡‘éŒ¢',u.generated_money)},' ä½¿ç”¨ ',8,mt)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',vt,[Da[43]||(Da[43]=(0,t.createElementVNode)('label',null,'å¿ƒæƒ… (-100~100)',-1)),(0,t.createElementVNode)('input',{value:a(u,'å¿ƒæƒ…'),type:'number',placeholder:'ä¾‹å¦‚ï¼š50',class:'text-input',min:'0',max:'100',onInput:e=>n(u,'å¿ƒæƒ…',e.target.value)},null,40,gt),u.generated_mood?((0,t.openBlock)(),(0,t.createElementBlock)('div',bt,[Da[42]||(Da[42]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',ft,(0,t.toDisplayString)(u.generated_mood),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>o(e,'å¿ƒæƒ…',u.generated_mood)},' ä½¿ç”¨ ',8,ht)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',xt,[Da[45]||(Da[45]=(0,t.createElementVNode)('label',null,'æ€§æ…¾ (0~100)',-1)),(0,t.createElementVNode)('input',{value:a(u,'æ€§æ…¾'),type:'number',placeholder:'ä¾‹å¦‚ï¼š0',class:'text-input',min:'0',max:'100',onInput:e=>n(u,'æ€§æ…¾',e.target.value)},null,40,yt),u.generated_sexuality?((0,t.openBlock)(),(0,t.createElementBlock)('div',_t,[Da[44]||(Da[44]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',Et,(0,t.toDisplayString)(u.generated_sexuality),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>o(e,'æ€§æ…¾',u.generated_sexuality)},' ä½¿ç”¨ ',8,kt)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',Vt,[Da[47]||(Da[47]=(0,t.createElementVNode)('label',null,'å…¶ä»–é‡è¦è³‡è¨Š',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{'onUpdate:modelValue':e=>u.å…¶ä»–é‡è¦è³‡è¨Š=e,placeholder:'å…¶ä»–éœ€è¦æè¿°çš„è³‡è¨Š...',class:'text-area',rows:'3'},null,8,Nt),[[t.vModelText,u.å…¶ä»–é‡è¦è³‡è¨Š]]),u.generated_extra_information?((0,t.openBlock)(),(0,t.createElementBlock)('div',wt,[Da[46]||(Da[46]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',St,(0,t.toDisplayString)(u.generated_extra_information),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>o(e,'å…¶ä»–é‡è¦è³‡è¨Š',u.generated_extra_information)},' ä½¿ç”¨ ',8,Bt)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',Ct,[Da[51]||(Da[51]=(0,t.createElementVNode)('label',null,'é—œä¿‚',-1)),(0,t.createElementVNode)('div',$t,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(Array.from(u.é—œä¿‚||new Map),([a,n])=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:a,class:'relation-item'},[(0,t.createElementVNode)('span',It,'['+(0,t.toDisplayString)(a)+'] '+(0,t.toDisplayString)(Ra(a)),1),Da[48]||(Da[48]=(0,t.createTextVNode)(' æ˜¯æ­¤è§’è‰²çš„ ',-1)),(0,t.createElementVNode)('input',{value:n,type:'text',placeholder:'è¼¸å…¥é—œä¿‚æè¿°',class:'relation-input',onInput:t=>((e,t,a)=>Wa(e,'é—œä¿‚',t,a))(e,a,t.target.value)},null,40,zt),(0,t.createElementVNode)('button',{class:'remove-relation-btn',onClick:t=>((e,t)=>Za(e,'é—œä¿‚',t))(e,a)},'Ã—',8,Dt)]))),128)),(0,t.createElementVNode)('div',Tt,[(0,t.withDirectives)((0,t.createElementVNode)('select',{'onUpdate:modelValue':e=>u.selected_relation_target=e,class:'relation-select'},[Da[49]||(Da[49]=(0,t.createElementVNode)('option',{value:''},'é¸æ“‡ç›®æ¨™è§’è‰²',-1)),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(Ma(e),([e,a])=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:e,value:e},(0,t.toDisplayString)(`${e}: ${a.å§“æ°||''}${a.åå­—||''}`),9,Yt))),128))],8,Mt),[[t.vModelSelect,u.selected_relation_target]]),(0,t.createElementVNode)('button',{class:'add-relation-btn',disabled:!u.selected_relation_target,onClick:t=>(e=>Ja(e,'é—œä¿‚','selected_relation_target',''))(e)},' æ·»åŠ é—œä¿‚ ',8,Ot)])]),u.generated_relationship?((0,t.openBlock)(),(0,t.createElementBlock)('div',At,[Da[50]||(Da[50]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',Rt,(0,t.toDisplayString)(u.generated_relationship),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>o(e,'é—œä¿‚',u.generated_relationship)},' ä½¿ç”¨ ',8,Kt)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',Ut,[Da[55]||(Da[55]=(0,t.createElementVNode)('label',null,'å‹å¥½åº¦ (-1000~1000)',-1)),(0,t.createElementVNode)('div',Lt,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(Array.from(u.å‹å¥½åº¦||new Map),([a,n])=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:a,class:'relation-item'},[(0,t.createElementVNode)('span',Ft,'['+(0,t.toDisplayString)(a)+'] '+(0,t.toDisplayString)(Ra(a)),1),Da[52]||(Da[52]=(0,t.createTextVNode)(' : ',-1)),(0,t.createElementVNode)('input',{value:n,type:'number',placeholder:'è¼¸å…¥å‹å¥½åº¦æ•¸å€¼',class:'relation-input',min:'0',max:'100',onInput:t=>((e,t,a)=>Wa(e,'å‹å¥½åº¦',t,a,e=>parseInt(e)||0))(e,a,t.target.value)},null,40,jt),(0,t.createElementVNode)('button',{class:'remove-relation-btn',onClick:t=>((e,t)=>Za(e,'å‹å¥½åº¦',t))(e,a)},'Ã—',8,Ht)]))),128)),(0,t.createElementVNode)('div',Pt,[(0,t.withDirectives)((0,t.createElementVNode)('select',{'onUpdate:modelValue':e=>u.selected_friendship_target=e,class:'relation-select'},[Da[53]||(Da[53]=(0,t.createElementVNode)('option',{value:''},'é¸æ“‡ç›®æ¨™è§’è‰²',-1)),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(Ma(e),([e,a])=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:e,value:e},(0,t.toDisplayString)(`${e}: ${a.å§“æ°||''}${a.åå­—||''}`),9,qt))),128))],8,Gt),[[t.vModelSelect,u.selected_friendship_target]]),(0,t.createElementVNode)('button',{class:'add-relation-btn',disabled:!u.selected_friendship_target,onClick:t=>(e=>Ja(e,'å‹å¥½åº¦','selected_friendship_target',0))(e)},' æ·»åŠ å‹å¥½åº¦ ',8,Xt)])]),u.generated_friendship?((0,t.openBlock)(),(0,t.createElementBlock)('div',Wt,[Da[54]||(Da[54]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',Jt,(0,t.toDisplayString)(u.generated_friendship),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>o(e,'å‹å¥½åº¦',u.generated_friendship)},' ä½¿ç”¨ ',8,Zt)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',Qt,[Da[59]||(Da[59]=(0,t.createElementVNode)('label',null,'æ„›æƒ…åº¦ (0~1000)',-1)),(0,t.createElementVNode)('div',ea,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(Array.from(u.æ„›æƒ…åº¦||new Map),([a,n])=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:a,class:'relation-item'},[(0,t.createElementVNode)('span',ta,'['+(0,t.toDisplayString)(a)+'] '+(0,t.toDisplayString)(Ra(a)),1),Da[56]||(Da[56]=(0,t.createTextVNode)(' : ',-1)),(0,t.createElementVNode)('input',{value:n,type:'number',placeholder:'è¼¸å…¥æ„›æƒ…åº¦æ•¸å€¼',class:'relation-input',min:'0',max:'100',onInput:t=>((e,t,a)=>Wa(e,'æ„›æƒ…åº¦',t,a,e=>parseInt(e)||0))(e,a,t.target.value)},null,40,aa),(0,t.createElementVNode)('button',{class:'remove-relation-btn',onClick:t=>((e,t)=>Za(e,'æ„›æƒ…åº¦',t))(e,a)},'Ã—',8,na)]))),128)),(0,t.createElementVNode)('div',oa,[(0,t.withDirectives)((0,t.createElementVNode)('select',{'onUpdate:modelValue':e=>u.selected_love_target=e,class:'relation-select'},[Da[57]||(Da[57]=(0,t.createElementVNode)('option',{value:''},'é¸æ“‡ç›®æ¨™è§’è‰²',-1)),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(Ma(e),([e,a])=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:e,value:e},(0,t.toDisplayString)(`${e}: ${a.å§“æ°||''}${a.åå­—||''}`),9,la))),128))],8,ra),[[t.vModelSelect,u.selected_love_target]]),(0,t.createElementVNode)('button',{class:'add-relation-btn',disabled:!u.selected_love_target,onClick:t=>(e=>Ja(e,'æ„›æƒ…åº¦','selected_love_target',0))(e)},' æ·»åŠ æ„›æƒ…åº¦ ',8,ia)])]),u.generated_love?((0,t.openBlock)(),(0,t.createElementBlock)('div',sa,[Da[58]||(Da[58]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',da,(0,t.toDisplayString)(u.generated_love),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>o(e,'æ„›æƒ…åº¦',u.generated_love)},' ä½¿ç”¨ ',8,ca)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',ua,[Da[63]||(Da[63]=(0,t.createElementVNode)('label',null,'æ‰€æŒç‰©',-1)),(0,t.createElementVNode)('div',pa,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(Array.from(u.æ‰€æŒç‰©||new Map),([a,n])=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:a,class:'inventory-item'},[(0,t.createElementVNode)('span',ma,'['+(0,t.toDisplayString)(a)+'] '+(0,t.toDisplayString)(Oa(a)),1),Da[60]||(Da[60]=(0,t.createTextVNode)(' : ',-1)),(0,t.createElementVNode)('input',{value:n,type:'number',placeholder:'æ•¸é‡',class:'inventory-input',min:'1',onInput:t=>((e,t,a)=>{const n=d.value.get(e);if(!n)return;n.æ‰€æŒç‰©||(n.æ‰€æŒç‰©=new Map);const o=new Map(n.æ‰€æŒç‰©);a>0?o.set(t,a):o.delete(t),n.æ‰€æŒç‰©=o,Ha(e)})(e,a,parseInt(t.target.value)||1)},null,40,va),(0,t.createElementVNode)('button',{class:'remove-inventory-btn',onClick:t=>((e,t)=>{const a=d.value.get(e);if(!a||!a.æ‰€æŒç‰©)return;const n=new Map(a.æ‰€æŒç‰©);n.delete(t),a.æ‰€æŒç‰©=n,Ha(e)})(e,a)},'Ã—',8,ga)]))),128)),(0,t.createElementVNode)('div',ba,[(0,t.withDirectives)((0,t.createElementVNode)('select',{'onUpdate:modelValue':e=>u.selected_inventory_item=e,class:'inventory-select'},[Da[61]||(Da[61]=(0,t.createElementVNode)('option',{value:''},'é¸æ“‡ç‰©å“',-1)),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(Ya(),([e,a])=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:e,value:e},(0,t.toDisplayString)(`${e}: ${a.name||'æœªçŸ¥ç‰©å“'}`),9,ha))),128))],8,fa),[[t.vModelSelect,u.selected_inventory_item]]),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':e=>u.selected_inventory_quantity=e,type:'number',placeholder:'æ•¸é‡',class:'quantity-input',min:'1',disabled:!u.selected_inventory_item},null,8,xa),[[t.vModelText,u.selected_inventory_quantity,void 0,{number:!0}]]),(0,t.createElementVNode)('button',{class:'add-inventory-btn',disabled:!u.selected_inventory_item||!u.selected_inventory_quantity,onClick:t=>(e=>{const t=d.value.get(e);if(!t||!t.selected_inventory_item||!t.selected_inventory_quantity)return;t.æ‰€æŒç‰©||(t.æ‰€æŒç‰©=new Map);const a=t.æ‰€æŒç‰©.get(t.selected_inventory_item)||0;t.æ‰€æŒç‰©.set(t.selected_inventory_item,a+t.selected_inventory_quantity),t.selected_inventory_item='',t.selected_inventory_quantity=1,Ha(e)})(e)},' æ·»åŠ ç‰©å“ ',8,ya)])]),u.generated_inventory?((0,t.openBlock)(),(0,t.createElementBlock)('div',_a,[Da[62]||(Da[62]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',Ea,(0,t.toDisplayString)(u.generated_inventory),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>o(e,'æ‰€æŒç‰©',u.generated_inventory)},' ä½¿ç”¨ ',8,ka)])):(0,t.createCommentVNode)('v-if',!0)])])]),(0,t.createCommentVNode)(' ç”Ÿæˆè¦æ±‚å€åŸŸ '),(0,t.createElementVNode)('div',Va,[Da[66]||(Da[66]=(0,t.createElementVNode)('h4',null,'ç”Ÿæˆè¦æ±‚',-1)),(0,t.createElementVNode)('div',Na,[(0,t.createElementVNode)('div',wa,[Da[65]||(Da[65]=(0,t.createElementVNode)('label',null,'å°AIç”Ÿæˆçš„è¦æ±‚',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{'onUpdate:modelValue':e=>u.generation_requirement=e,placeholder:'å°AIç”Ÿæˆçš„è¦æ±‚...',class:'text-area',rows:'3'},null,8,Sa),[[t.vModelText,u.generation_requirement]])])])]),(0,t.createCommentVNode)(' ç”ŸæˆæŒ‰éˆ•å€åŸŸ '),(0,t.createElementVNode)('div',Ba,[(0,t.createElementVNode)('button',{class:'generate-btn',disabled:!La.value||za.value.get(e),onClick:t=>qa(e)},[za.value.get(e)?((0,t.openBlock)(),(0,t.createElementBlock)('span',$a)):(0,t.createCommentVNode)('v-if',!0),(0,t.createTextVNode)(' '+(0,t.toDisplayString)(za.value.get(e)?'ç”Ÿæˆä¸­...':La.value?'ç”Ÿæˆæœªå¡«å¯«çš„å­—æ®µ':'è«‹å…ˆå®Œæˆä¸–ç•ŒèƒŒæ™¯è¨­å®š'),1)],8,Ca),(0,t.createElementVNode)('button',{class:'apply-all-btn',disabled:!Ka(u),onClick:t=>(e=>{const t=d.value.get(e);if(!t)return;[{generated:'generated_surname',field:'å§“æ°',parser:e=>e},{generated:'generated_name',field:'åå­—',parser:e=>e},{generated:'generated_age',field:'å¹´é½¡',parser:e=>parseInt(e)||null},{generated:'generated_gender',field:'æ€§åˆ¥',parser:e=>e},{generated:'generated_identity',field:'èº«ä»½',parser:e=>e},{generated:'generated_height',field:'èº«é«˜',parser:e=>parseInt(e)||null},{generated:'generated_weight',field:'é«”é‡',parser:e=>parseInt(e)||null},{generated:'generated_chest_size',field:'èƒ¸åœ',parser:e=>parseInt(e)||null},{generated:'generated_cup_size',field:'ç½©æ¯',parser:e=>e},{generated:'generated_waist_size',field:'è…°åœ',parser:e=>parseInt(e)||null},{generated:'generated_hips_size',field:'è‡€åœ',parser:e=>parseInt(e)||null},{generated:'generated_hairstyle',field:'é«®åž‹',parser:e=>e},{generated:'generated_appearance',field:'æ¨£è²Œ',parser:e=>e},{generated:'generated_clothes',field:'è¡£è‘—',parser:e=>e},{generated:'generated_introduction',field:'ç°¡ä»‹',parser:e=>e},{generated:'generated_personality',field:'æ€§æ ¼',parser:e=>e},{generated:'generated_favourite',field:'æ„›å¥½',parser:e=>e},{generated:'generated_money',field:'é‡‘éŒ¢',parser:e=>parseInt(e)||null},{generated:'generated_mood',field:'å¿ƒæƒ…',parser:e=>parseInt(e)||null},{generated:'generated_sexuality',field:'æ€§æ…¾',parser:e=>parseInt(e)||null},{generated:'generated_birthday_month',field:'ç”Ÿæ—¥æœˆä»½',parser:e=>parseInt(e)||null},{generated:'generated_birthday_day',field:'ç”Ÿæ—¥æ—¥æœŸ',parser:e=>parseInt(e)||null},{generated:'generated_extra_information',field:'å…¶ä»–é‡è¦è³‡è¨Š',parser:e=>e}].forEach(({generated:e,field:a,parser:n})=>{const o=t[e];o&&(t[a]=n(o),t[e]='')}),t.generated_relationship&&r(t,t.generated_relationship),t.generated_friendship&&l(t,t.generated_friendship),t.generated_love&&i(t,t.generated_love),t.generated_inventory&&s(t,t.generated_inventory),d.value.set(e,{...t}),Ha(e);try{localStorage.removeItem(`character_profile_generated_${e}`)}catch(t){console.error(`Failed to remove generated character profile for ${e} from localStorage:`,t)}})(e)},' æ‡‰ç”¨å…¨éƒ¨ ',8,Ia)])])]),_:2},1032,['title'])],2))),128)),(0,t.createCommentVNode)(' æ·»åŠ è§’è‰²æŒ‰éˆ• '),(0,t.createElementVNode)('div',{class:'add-character-section'},[(0,t.createElementVNode)('button',{class:'add-character-btn',onClick:Xa},[...Da[67]||(Da[67]=[(0,t.createElementVNode)('span',null,'+ æ·»åŠ è§’è‰²',-1)])])])]))}});n(869);const Da=(0,d.A)(za,[['__scopeId','data-v-41c909bc']]),Ta={class:'extra-container'},Ma={class:'section'},Ya={class:'sortable-container'},Oa={key:0,class:'drop-indicator'},Aa=['data-id','onDragstart','onDragover','onDrop'],Ra=['onClick'],Ka={class:'fold-content'},Ua={class:'input-group'},La=['onUpdate:modelValue'],Fa={class:'input-group'},ja=['onUpdate:modelValue'],Ha={class:'input-group'},Pa=['onUpdate:modelValue'],Ga={key:0,class:'generated-result'},qa={class:'generated-text'},Xa=['onClick'],Wa={class:'item-actions'},Ja=['disabled','onClick'],Za={key:0,class:'loading-spinner'},Qa=['disabled','onClick'],en={key:0,class:'drop-indicator'},tn=(0,t.defineComponent)({__name:'extra_tab',setup(e){const a=(0,t.ref)([]),n=(0,t.ref)(new Map),o=(0,t.computed)(()=>{try{const e=getVariables({type:'chat'});return!!e?.world_info?.trim()}catch{return!1}}),r=(0,t.ref)(null),l=(0,t.ref)(null),i=e=>{const t=a.value[e];if(t&&t.generated_content){t.content=t.generated_content,t.generated_content='',a.value[e]={...t};try{t.name&&t.name.trim()&&localStorage.removeItem(`extra_item_generated_${t.name.trim()}`)}catch(e){console.error(`Failed to remove generated extra item for ${t.name} from localStorage:`,e)}}},s=()=>{const e={id:Date.now().toString(),name:'',content:'',generation_requirement:'',is_open:!1,generated_content:''};a.value.push(e)},d=()=>{try{const e=getVariables({type:'chat'}),t=a.value.map(e=>({name:e.name,content:e.content}));e.extra_world_info=t,replaceVariables(e,{type:'chat'}),(()=>{const e=getVariables({type:'chat'});let t='';for(const a of Array.from(e.extra_world_info))''!==a.name.trim()&&''!==a.content.trim()&&(t+=`<${a.name}>\n`,t+=`${a.content}\n`,t+=`</${a.name}>\n`,t+='\n');e.extra_world_info_prompt=t,replaceVariables(e,{type:'chat'})})()}catch(e){console.error('ä¿å­˜ extra_world_info å¤±æ•—:',e)}},u=()=>{try{const e=getVariables({type:'chat'});if(e?.extra_world_info&&Array.isArray(e.extra_world_info)){const t=e.extra_world_info.map((e,t)=>({id:`loaded_${t}_${Date.now()}`,name:e.name||'æœªå‘½åé …ç›®',content:e.content||'',generation_requirement:'',is_open:!1,generated_content:''}));a.value=t}}catch(e){console.error('åŠ è¼‰ extra_world_info å¤±æ•—:',e)}},p=()=>{l.value=null},m=()=>{r.value=null,l.value=null};(0,t.onMounted)(()=>{u(),v()});const v=()=>{try{const e=localStorage.getItem('extra_tab_generation_requirements');if(e){const t=JSON.parse(e);a.value.forEach(e=>{e.name&&e.name.trim()&&t[e.name.trim()]&&(e.generation_requirement=t[e.name.trim()])})}a.value.forEach(e=>{if(e.name&&e.name.trim()){const t=localStorage.getItem(`extra_item_generated_${e.name.trim()}`);if(t)try{const a=JSON.parse(t);a[e.name.trim()]&&(e.generated_content=a[e.name.trim()])}catch(t){console.error(`Failed to parse generated content for ${e.name}:`,t)}}})}catch(e){console.error('å¾ž localStorage åŠ è¼‰ç”Ÿæˆè¦æ±‚å¤±æ•—:',e)}};(0,t.watch)(a,()=>{d(),(()=>{try{const e={};a.value.forEach(t=>{t.name&&t.name.trim()&&(e[t.name.trim()]=t.generation_requirement)}),localStorage.setItem('extra_tab_generation_requirements',JSON.stringify(e))}catch(e){console.error('ä¿å­˜ç”Ÿæˆè¦æ±‚åˆ° localStorage å¤±æ•—:',e)}})()},{deep:!0}),(0,t.watch)(()=>getVariables({type:'chat'}),e=>{e?.extra_world_info&&u()},{deep:!0});const g=e=>{let t='è«‹æ ¹æ“šä¸–ç•ŒèƒŒæ™¯è³‡è¨Šã€ç”Ÿæˆè¦æ±‚åŠå·²æœ‰é …ç›®è³‡æ–™ï¼Œç‚ºä»¥ä¸‹é …ç›®å®Œå–„å…§å®¹è¨­å®šï¼š\n\n';return t+=`åç¨±ï¼š${e.name||''}\n`,t+=`å…§å®¹ï¼š${e.content||''}\n`,t},b=()=>{const e=getVariables({type:'chat'}).world_info;let t=getCharData('current').description;t=t.replace('{{getvar::world_info}}',e);let a='ä½ æ˜¯ä¸€å€‹å°ˆæ¥­çš„é …ç›®å…§å®¹è¨­è¨ˆåŠ©æ‰‹ï¼Œæ“…é•·å‰µé€ è±å¯Œå¤šå½©çš„é …ç›®è¨­å®šã€‚è«‹æ ¹æ“šæä¾›çš„ä¸–ç•ŒèƒŒæ™¯åŠç”Ÿæˆè¦æ±‚ï¼Œç‚ºé …ç›®å®Œå–„å…§å®¹ã€‚\n';return a+='\n',a+='<ä¸–ç•ŒèƒŒæ™¯>\n','ä½ æ˜¯ä¸€å€‹å°ˆæ¥­çš„é …ç›®å…§å®¹è¨­è¨ˆåŠ©æ‰‹ï¼Œæ“…é•·å‰µé€ è±å¯Œå¤šå½©çš„é …ç›®è¨­å®šã€‚è«‹æ ¹æ“šæä¾›çš„ä¸–ç•ŒèƒŒæ™¯åŠç”Ÿæˆè¦æ±‚ï¼Œç‚ºé …ç›®å®Œå–„å…§å®¹ã€‚\n\n<ä¸–ç•ŒèƒŒæ™¯>\n'},f=e=>{let t='\n</ä¸–ç•ŒèƒŒæ™¯>\n';return t+='\n',t+=`${(()=>{const e=getVariables({type:'chat'}).characters.c1,t=`${e.å§“æ°}${e.åå­—}`;let a=`<${t}Status>\n`;return a+='idï¼šc1\n',a+=`  å§“æ°ï¼š${e.å§“æ°||''}\n`,a+=`  åå­—ï¼š${e.åå­—||''}\n`,a+=`  å¹´é½¡ï¼š${e.å¹´é½¡||''}\n`,a+=`  æ€§åˆ¥ï¼š${e.æ€§åˆ¥||''}\n`,a+=`  èº«ä»½ï¼š${e.èº«ä»½||''}\n`,a+=`  èº«é«˜ï¼š${e.èº«é«˜||''}\n`,a+=`  é«”é‡ï¼š${e.é«”é‡||''}\n`,a+=`  èƒ¸åœï¼š${e.èƒ¸åœ||''}\n`,a+=`  ç½©æ¯ï¼š${e.ç½©æ¯||''}\n`,a+=`  è…°åœï¼š${e.è…°åœ||''}\n`,a+=`  è‡€åœï¼š${e.è‡€åœ||''}\n`,a+=`  é«®åž‹ï¼š${e.é«®åž‹||''}\n`,a+=`  æ¨£è²Œï¼š${e.æ¨£è²Œ||''}\n`,a+=`  è¡£è‘—ï¼š${e.è¡£è‘—||''}\n`,a+=`  ç°¡ä»‹ï¼š${e.ç°¡ä»‹||''}\n`,a+=`  æ€§æ ¼ï¼š${e.æ€§æ ¼||''}\n`,a+=`  æ„›å¥½ï¼š${e.æ„›å¥½||''}\n`,a+=`  é‡‘éŒ¢ï¼š${e.é‡‘éŒ¢||''}\n`,a+=`  ç”Ÿæ—¥æœˆä»½ï¼š${e.ç”Ÿæ—¥æœˆä»½||''}\n`,a+=`  ç”Ÿæ—¥æ—¥æœŸï¼š${e.ç”Ÿæ—¥æ—¥æœŸ||''}\n`,a+=`  å…¶ä»–é‡è¦è³‡è¨Šï¼š${e.å…¶ä»–é‡è¦è³‡è¨Š||''}\n`,a+=`  é—œä¿‚ï¼š${h(e.é—œä¿‚)}\n`,a+=`  å‹å¥½åº¦ï¼š${h(e.å‹å¥½åº¦)}\n`,a+=`  æ„›æƒ…åº¦ï¼š${h(e.æ„›æƒ…åº¦)}\n`,a+=`</${t}Status>`,a})()}\n`,t+='\n',t+=`${(()=>{const e=getVariables({type:'chat'}).characters;if(void 0===e)return'';let t='<CharacterStatus>\n';for(const[a,n]of Object.entries(e))'c1'!==a&&(t+=`idï¼š${a}\n`,t+=`  å§“æ°ï¼š${n.å§“æ°||''}\n`,t+=`  åå­—ï¼š${n.åå­—||''}\n`,t+=`  å¹´é½¡ï¼š${n.å¹´é½¡||''}\n`,t+=`  æ€§åˆ¥ï¼š${n.æ€§åˆ¥||''}\n`,t+=`  èº«ä»½ï¼š${n.èº«ä»½||''}\n`,t+=`  èº«é«˜ï¼š${n.èº«é«˜||''}\n`,t+=`  é«”é‡ï¼š${n.é«”é‡||''}\n`,t+=`  èƒ¸åœï¼š${n.èƒ¸åœ||''}\n`,t+=`  ç½©æ¯ï¼š${n.ç½©æ¯||''}\n`,t+=`  è…°åœï¼š${n.è…°åœ||''}\n`,t+=`  è‡€åœï¼š${n.è‡€åœ||''}\n`,t+=`  é«®åž‹ï¼š${n.é«®åž‹||''}\n`,t+=`  æ¨£è²Œï¼š${n.æ¨£è²Œ||''}\n`,t+=`  è¡£è‘—ï¼š${n.è¡£è‘—||''}\n`,t+=`  ç°¡ä»‹ï¼š${n.ç°¡ä»‹||''}\n`,t+=`  æ€§æ ¼ï¼š${n.æ€§æ ¼||''}\n`,t+=`  æ„›å¥½ï¼š${n.æ„›å¥½||''}\n`,t+=`  é‡‘éŒ¢ï¼š${n.é‡‘éŒ¢||''}\n`,t+=`  å¿ƒæƒ…ï¼š${n.å¿ƒæƒ…||''}\n`,t+=`  æ€§æ…¾ï¼š${n.æ€§æ…¾||''}\n`,t+=`  ç”Ÿæ—¥æœˆä»½ï¼š${n.ç”Ÿæ—¥æœˆä»½||''}\n`,t+=`  ç”Ÿæ—¥æ—¥æœŸï¼š${n.ç”Ÿæ—¥æ—¥æœŸ||''}\n`,t+=`  å…¶ä»–é‡è¦è³‡è¨Šï¼š${n.å…¶ä»–é‡è¦è³‡è¨Š||''}\n`,t+=`  é—œä¿‚ï¼š${h(n.é—œä¿‚)}\n`,t+=`  å‹å¥½åº¦ï¼š${h(n.å‹å¥½åº¦)}\n`,t+=`  æ„›æƒ…åº¦ï¼š${h(n.æ„›æƒ…åº¦)}\n\n`);return t+='</CharacterStatus>',t})()}\n`,t+='\n',t+=`${(()=>{let e='<ItemTable>\n';e+='|id|åç¨±|æè¿°|åƒ¹å€¼|\n',e+='|---|---|---|---|\n';const t=getVariables({type:'chat'}).items;if(void 0===t)return'';for(const[a,n]of Object.entries(t))e+=`|${a}|${n.name}|${n.description}|${n.value}|\n`;return e+='</ItemTable>',e})()}\n`,t+='\n',t+=`${(()=>{let e='<LocationTable>\n';e+='|id|åœ°é»ž|ä½ç½®|æè¿°|å­åœ°é»ž|\n',e+='|---|---|---|---|---|\n';const t=getVariables({type:'chat'}).locations;if(void 0===t)return'';for(const[a,n]of Object.entries(t)){const t=n.sub_location?n.sub_location.join(', '):'';e+=`|${a}|${n.name}|${n.location||''}|${n.description}|${t}|\n`}return e+='</LocationTable>',e})()}\n`,t+='\n',t+=`${(()=>{let e='';const t=getVariables({type:'chat'}).extra_world_info;if(void 0===t)return'';for(const a of Array.from(t))''!==a.name&&''!==a.content&&(e+=`<${a.name}>\n`,e+=`${a.content}\n`,e+=`</${a.name}>\n`,e+='\n');return e})()}\n`,t+='\n',t+='<ç”Ÿæˆè¦æ±‚>\n',t+=`${e.generation_requirement||'ç„¡ç‰¹æ®Šè¦æ±‚'}\n`,t+='</ç”Ÿæˆè¦æ±‚>\n',t},h=e=>'['+Object.entries(e).map(([e,t])=>'string'==typeof t?`'${e}':'${t}'`:`'${e}':${t}`).join(', ')+']',x=(e,t)=>{t.generated_content=e};return(e,d)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',Ta,[d[5]||(d[5]=(0,t.createElementVNode)('h3',null,'å…¶ä»–è¨­å®š',-1)),(0,t.createElementVNode)('div',Ma,[(0,t.createElementVNode)('div',Ya,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(a.value,(e,s)=>((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,{key:e.id},[l.value===s&&null!==r.value&&r.value!==s?((0,t.openBlock)(),(0,t.createElementBlock)('div',Oa)):(0,t.createCommentVNode)('v-if',!0),(0,t.createElementVNode)('div',{class:(0,t.normalizeClass)(['sortable-item',{dragging:r.value===s}]),'data-id':e.id,draggable:'true',onDragstart:e=>((e,t)=>{r.value=t,e.dataTransfer&&(e.dataTransfer.effectAllowed='move')})(e,s),onDragover:(0,t.withModifiers)(e=>((e,t)=>{e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect='move');const a=e.target.getBoundingClientRect(),n=e.clientY-a.top,o=a.height;l.value=n<o/2?t:t+1})(e,s),['prevent']),onDrop:e=>((e,t)=>{e.preventDefault();const n=r.value;if(null!==n&&n!==t){const e=[...a.value],[o]=e.splice(n,1);e.splice(t,0,o),a.value=e}r.value=null})(e,s),onDragend:m,onDragleave:p},[(0,t.createVNode)(c,{title:e.name||'æœªè¨­å®š','is-open':e.is_open,class:(0,t.normalizeClass)(['draggable-fold-bar',{incomplete:!e.name||!e.content}]),onToggle:e=>(e=>{a.value[e].is_open=!a.value[e].is_open})(s)},{'title-actions':(0,t.withCtx)(()=>[(0,t.createElementVNode)('button',{class:'remove-btn',title:'ç§»é™¤æ­¤é …ç›®',onClick:(0,t.withModifiers)(e=>(e=>{a.value.splice(e,1)})(s),['stop'])},[...d[0]||(d[0]=[(0,t.createElementVNode)('span',null,'Ã—',-1)])],8,Ra)]),default:(0,t.withCtx)(()=>[(0,t.createElementVNode)('div',Ka,[(0,t.createElementVNode)('div',Ua,[d[1]||(d[1]=(0,t.createElementVNode)('label',null,'åç¨±',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':t=>e.name=t,type:'text',class:'form-input',placeholder:'è¼¸å…¥é …ç›®åç¨±'},null,8,La),[[t.vModelText,e.name]])]),(0,t.createElementVNode)('div',Fa,[d[2]||(d[2]=(0,t.createElementVNode)('label',null,'å…§å®¹',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{'onUpdate:modelValue':t=>e.content=t,class:'form-textarea',placeholder:'è¼¸å…¥é …ç›®å…§å®¹',rows:'3'},null,8,ja),[[t.vModelText,e.content]])]),(0,t.createElementVNode)('div',Ha,[d[3]||(d[3]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆè¦æ±‚',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{'onUpdate:modelValue':t=>e.generation_requirement=t,class:'form-textarea',placeholder:'è¼¸å…¥ç”Ÿæˆæ­¤é …ç›®çš„è¦æ±‚',rows:'2'},null,8,Pa),[[t.vModelText,e.generation_requirement]])]),e.generated_content?((0,t.openBlock)(),(0,t.createElementBlock)('div',Ga,[d[4]||(d[4]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',qa,(0,t.toDisplayString)(e.generated_content),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:e=>i(s)},'ä½¿ç”¨',8,Xa)])):(0,t.createCommentVNode)('v-if',!0),(0,t.createElementVNode)('div',Wa,[(0,t.createElementVNode)('button',{class:'action-btn generate',disabled:!(0,t.unref)(o)||n.value.get(e.id),onClick:e=>(async e=>{const t=a.value[e];if(t){n.value.set(t.id,!0);try{const n=g(t),o=b(),r=f(t),l=await generateRaw({user_input:n,ordered_prompts:[{role:'system',content:o},'char_description',{role:'system',content:r},'user_input']});x(l,t);try{if(t.name&&t.name.trim()){const e={};e[t.name.trim()]=t.generated_content||'',localStorage.setItem(`extra_item_generated_${t.name.trim()}`,JSON.stringify(e))}}catch(e){console.error(`Failed to save generated extra item for ${t.name} to localStorage:`,e)}a.value[e]={...t}}catch(e){console.error(`ç”Ÿæˆé …ç›® ${t.name} å…§å®¹å¤±æ•—:`,e)}finally{n.value.set(t.id,!1)}}})(s)},[n.value.get(e.id)?((0,t.openBlock)(),(0,t.createElementBlock)('span',Za)):(0,t.createCommentVNode)('v-if',!0),(0,t.createTextVNode)(' '+(0,t.toDisplayString)(n.value.get(e.id)?'ç”Ÿæˆä¸­...':(0,t.unref)(o)?'ç”Ÿæˆå…§å®¹':'è«‹å…ˆå®Œæˆä¸–ç•ŒèƒŒæ™¯è¨­å®š'),1)],8,Ja),(0,t.createElementVNode)('button',{class:'action-btn apply',disabled:!e.generated_content,onClick:e=>i(s)},' æ‡‰ç”¨çµæžœ ',8,Qa)])])]),_:2},1032,['title','is-open','class','onToggle'])],42,Aa)],64))),128)),l.value===a.value.length&&null!==r.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',en)):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',{class:'add-item-section'},[(0,t.createElementVNode)('button',{class:'add-btn',onClick:s},'+ æ·»åŠ æ–°é …ç›®')])])]))}});n(2782);const an=(0,d.A)(tn,[['__scopeId','data-v-09fb0ec2']]),nn={class:'item-tabs-container'},on=['onClick'],rn={class:'item-info-container'},ln={class:'section'},sn={class:'form-grid'},dn={class:'input-group'},cn=['onUpdate:modelValue'],un={key:0,class:'generated-result'},pn={class:'generated-text'},mn=['onClick'],vn={class:'input-group'},gn=['value','onInput'],bn={key:0,class:'generated-result'},fn={class:'generated-text'},hn=['onClick'],xn={class:'input-group full-width'},yn=['onUpdate:modelValue'],_n={key:0,class:'generated-result'},En={class:'generated-text'},kn=['onClick'],Vn={class:'section'},Nn={class:'form-grid'},wn={class:'input-group full-width'},Sn=['onUpdate:modelValue'],Bn={class:'action-section'},Cn=['disabled','onClick'],$n={key:0,class:'loading-spinner'},In=['disabled','onClick'],zn=(0,t.defineComponent)({__name:'item_tab',setup(e){const a=(e,t)=>{const a=e[t];return a?.toString()||''},n=(0,t.ref)(new Map),o=(0,t.ref)(new Map),r=(0,t.computed)(()=>{try{const e=getVariables({type:'chat'});return!!e?.world_info?.trim()}catch{return!1}}),l=(0,t.computed)(()=>{const e=new Map;for(const[t,a]of n.value)e.set(t,a);return e}),i=(0,t.computed)(()=>Array.from(l.value.entries())),s=e=>e?.name||'æœªçŸ¥ç‰©å“',d=e=>!!(e?.generated_name||e?.generated_description||e?.generated_value),u=e=>!(!e?.name?.trim()||!e?.description?.trim()||null===e?.value),p=e=>{['generated_name','generated_description','generated_value'].forEach(t=>{e[t]||(e[t]='')}),e.generation_requirement||(e.generation_requirement='')},m=e=>{try{const t=getVariables({type:'chat'}),a={...t.items||{}},o=n.value.get(e);if(!o)return;a[e]={name:o.name||'',description:o.description||'',value:o.value},t.items=a,replaceVariables(t,{type:'chat'})}catch(t){console.error(`ä¿å­˜ç‰©å“ ${e} è³‡æ–™å¤±æ•—:`,t)}};(0,t.watch)(()=>getVariables({type:'chat'}),e=>{if(e?.items){const a=new Map;for(const[n,o]of Object.entries(e.items)){const e=(0,t.reactive)(o);p(e),a.set(n,e)}n.value=a}},{deep:!0}),(0,t.watch)(n,()=>{for(const[e]of n.value.entries())m(e)},{deep:!0}),(0,t.watch)(()=>n.value,e=>{for(const[a,n]of e.entries())(0,t.watch)(()=>n.generation_requirement,e=>{try{const t=localStorage.getItem(`item_profile_generated_${a}`),n=t?JSON.parse(t):{};n.generation_requirement=e,localStorage.setItem(`item_profile_generated_${a}`,JSON.stringify(n))}catch(e){console.error(`Failed to save generation_requirement for ${a} to localStorage:`,e)}},{immediate:!1})},{deep:!0,immediate:!0}),(0,t.onMounted)(()=>{(()=>{try{const e=getVariables({type:'chat'});if(e?.items){const a=new Map;for(const[n,o]of Object.entries(e.items)){const e=(0,t.reactive)(o);p(e),a.set(n,e)}n.value=a}else n.value=new Map}catch(e){console.error('è¼‰å…¥ç‰©å“è³‡æ–™å¤±æ•—:',e),n.value=new Map}try{for(const[e,t]of n.value){const a=localStorage.getItem(`item_profile_generated_${e}`);a&&Object.assign(t,JSON.parse(a))}}catch(e){console.error('Failed to load generated item profiles from localStorage:',e)}})()});const v=(e,t,a)=>{const o=n.value.get(e);if(!o)return;const r={name:{field:'name'},description:{field:'description'},value:{field:'value',parser:e=>parseInt(e)||null}}[t];if(r){const e=r.parser?r.parser(a):a;o[r.field]=e,o[`generated_${t}`]=''}n.value.set(e,{...o}),m(e)},g=e=>'['+Object.entries(e).map(([e,t])=>'string'==typeof t?`'${e}':'${t}'`:`'${e}':${t}`).join(', ')+']',b=()=>{const e=(()=>{const e=Array.from(n.value.keys());let t=1;for(;e.includes(`i${t}`);)t++;return`i${t}`})(),a=(0,t.reactive)({name:'',description:'',value:null,generation_requirement:'',generated_name:'',generated_description:'',generated_value:''});n.value.set(e,a);try{const t=getVariables({type:'chat'}).items||{};t[e]={name:'',description:'',value:null},insertOrAssignVariables({items:t},{type:'chat'})}catch(e){console.error('Failed to add new item to chat variables:',e)}},f=e=>{let t='\n</ä¸–ç•ŒèƒŒæ™¯>\n';return t+='\n',t+=`${(()=>{const e=getVariables({type:'chat'}).characters.c1,t=`${e.å§“æ°}${e.åå­—}`;let a=`<${t}Status>\n`;return a+='idï¼šc1\n',a+=`  å§“æ°ï¼š${e.å§“æ°||''}\n`,a+=`  åå­—ï¼š${e.åå­—||''}\n`,a+=`  å¹´é½¡ï¼š${e.å¹´é½¡||''}\n`,a+=`  æ€§åˆ¥ï¼š${e.æ€§åˆ¥||''}\n`,a+=`  èº«ä»½ï¼š${e.èº«ä»½||''}\n`,a+=`  èº«é«˜ï¼š${e.èº«é«˜||''}\n`,a+=`  é«”é‡ï¼š${e.é«”é‡||''}\n`,a+=`  èƒ¸åœï¼š${e.èƒ¸åœ||''}\n`,a+=`  ç½©æ¯ï¼š${e.ç½©æ¯||''}\n`,a+=`  è…°åœï¼š${e.è…°åœ||''}\n`,a+=`  è‡€åœï¼š${e.è‡€åœ||''}\n`,a+=`  é«®åž‹ï¼š${e.é«®åž‹||''}\n`,a+=`  æ¨£è²Œï¼š${e.æ¨£è²Œ||''}\n`,a+=`  è¡£è‘—ï¼š${e.è¡£è‘—||''}\n`,a+=`  ç°¡ä»‹ï¼š${e.ç°¡ä»‹||''}\n`,a+=`  æ€§æ ¼ï¼š${e.æ€§æ ¼||''}\n`,a+=`  æ„›å¥½ï¼š${e.æ„›å¥½||''}\n`,a+=`  é‡‘éŒ¢ï¼š${e.é‡‘éŒ¢||''}\n`,a+=`  ç”Ÿæ—¥æœˆä»½ï¼š${e.ç”Ÿæ—¥æœˆä»½||''}\n`,a+=`  ç”Ÿæ—¥æ—¥æœŸï¼š${e.ç”Ÿæ—¥æ—¥æœŸ||''}\n`,a+=`  å…¶ä»–é‡è¦è³‡è¨Šï¼š${e.å…¶ä»–é‡è¦è³‡è¨Š||''}\n`,a+=`  é—œä¿‚ï¼š${g(e.é—œä¿‚)}\n`,a+=`  å‹å¥½åº¦ï¼š${g(e.å‹å¥½åº¦)}\n`,a+=`  æ„›æƒ…åº¦ï¼š${g(e.æ„›æƒ…åº¦)}\n`,a+=`</${t}Status>`,a})()}\n`,t+='\n',t+=`${(()=>{const e=getVariables({type:'chat'}).characters;if(void 0===e)return'';let t='<CharacterStatus>\n';for(const[a,n]of Object.entries(e))'c1'!==a&&(t+=`idï¼š${a}\n`,t+=`  å§“æ°ï¼š${n.å§“æ°||''}\n`,t+=`  åå­—ï¼š${n.åå­—||''}\n`,t+=`  å¹´é½¡ï¼š${n.å¹´é½¡||''}\n`,t+=`  æ€§åˆ¥ï¼š${n.æ€§åˆ¥||''}\n`,t+=`  èº«ä»½ï¼š${n.èº«ä»½||''}\n`,t+=`  èº«é«˜ï¼š${n.èº«é«˜||''}\n`,t+=`  é«”é‡ï¼š${n.é«”é‡||''}\n`,t+=`  èƒ¸åœï¼š${n.èƒ¸åœ||''}\n`,t+=`  ç½©æ¯ï¼š${n.ç½©æ¯||''}\n`,t+=`  è…°åœï¼š${n.è…°åœ||''}\n`,t+=`  è‡€åœï¼š${n.è‡€åœ||''}\n`,t+=`  é«®åž‹ï¼š${n.é«®åž‹||''}\n`,t+=`  æ¨£è²Œï¼š${n.æ¨£è²Œ||''}\n`,t+=`  è¡£è‘—ï¼š${n.è¡£è‘—||''}\n`,t+=`  ç°¡ä»‹ï¼š${n.ç°¡ä»‹||''}\n`,t+=`  æ€§æ ¼ï¼š${n.æ€§æ ¼||''}\n`,t+=`  æ„›å¥½ï¼š${n.æ„›å¥½||''}\n`,t+=`  é‡‘éŒ¢ï¼š${n.é‡‘éŒ¢||''}\n`,t+=`  å¿ƒæƒ…ï¼š${n.å¿ƒæƒ…||''}\n`,t+=`  æ€§æ…¾ï¼š${n.æ€§æ…¾||''}\n`,t+=`  ç”Ÿæ—¥æœˆä»½ï¼š${n.ç”Ÿæ—¥æœˆä»½||''}\n`,t+=`  ç”Ÿæ—¥æ—¥æœŸï¼š${n.ç”Ÿæ—¥æ—¥æœŸ||''}\n`,t+=`  å…¶ä»–é‡è¦è³‡è¨Šï¼š${n.å…¶ä»–é‡è¦è³‡è¨Š||''}\n`,t+=`  é—œä¿‚ï¼š${g(n.é—œä¿‚)}\n`,t+=`  å‹å¥½åº¦ï¼š${g(n.å‹å¥½åº¦)}\n`,t+=`  æ„›æƒ…åº¦ï¼š${g(n.æ„›æƒ…åº¦)}\n\n`);return t+='</CharacterStatus>',t})()}\n`,t+='\n',t+=`${(()=>{let e='<ItemTable>\n';e+='|id|åç¨±|æè¿°|åƒ¹å€¼|\n',e+='|---|---|---|---|\n';const t=getVariables({type:'chat'}).items;if(void 0===t)return'';for(const[a,n]of Object.entries(t))e+=`|${a}|${n.name}|${n.description}|${n.value}|\n`;return e+='</ItemTable>',e})()}\n`,t+='\n',t+=`${(()=>{let e='<LocationTable>\n';e+='|id|åœ°é»ž|ä½ç½®|æè¿°|å­åœ°é»ž|\n',e+='|---|---|---|---|---|\n';const t=getVariables({type:'chat'}).locations;if(void 0===t)return'';for(const[a,n]of Object.entries(t)){const t=n.sub_location?n.sub_location.join(', '):'';e+=`|${a}|${n.name}|${n.location||''}|${n.description}|${t}|\n`}return e+='</LocationTable>',e})()}\n`,t+='\n',t+=`${(()=>{let e='';const t=getVariables({type:'chat'}).extra_world_info;if(void 0===t)return'';for(const a of Array.from(t))''!==a.name&&''!==a.content&&(e+=`<${a.name}>\n`,e+=`${a.content}\n`,e+=`</${a.name}>\n`,e+='\n');return e})()}\n`,t+='\n',t+='<ç”Ÿæˆè¦æ±‚>\n',t+=`${e.generation_requirement||'ç„¡ç‰¹æ®Šè¦æ±‚'}\n`,t+='</ç”Ÿæˆè¦æ±‚>\n',t+='\n',t+='<example>\n',t+='# The following is an example of user input and expected output. Please strictly follow the style and format to generate the output. Output anything other than this format is prohibited.\n',t+='åç¨±ï¼šstring\n',t+='æè¿°ï¼š\'ä»¥ç¬¬ä¸‰äººç¨±å®¢è§€åœ°æè¿°\'\n',t+='åƒ¹å€¼ï¼šnumber\n',t+='</example>\n',t},h=async e=>{const t=n.value.get(e);if(!t)return;const a=new Map(o.value);a.set(e,!0),o.value=a;try{const a=(e=>{let t='è«‹æ ¹æ“šä¸–ç•ŒèƒŒæ™¯è³‡è¨Šã€ç”Ÿæˆè¦æ±‚åŠå·²æœ‰ç‰©å“è³‡æ–™ï¼Œç‚ºä»¥ä¸‹ç‰©å“å®Œå–„ç‰©å“è³‡æ–™è¨­å®šï¼š\n\n';return t+=`åç¨±ï¼š${e.name||''}\n`,t+=`æè¿°ï¼š${e.description||''}\n`,t+=`åƒ¹å€¼ï¼š${e.value||''}\n`,t})(t),o=(()=>{const e=getVariables({type:'chat'}).world_info;let t=getCharData('current').description;t=t.replace('{{getvar::world_info}}',e);let a='ä½ æ˜¯ä¸€å€‹å°ˆæ¥­çš„ç‰©å“è¨­è¨ˆåŠ©æ‰‹ï¼Œæ“…é•·å‰µé€ è±å¯Œå¤šå½©çš„ç‰©å“è¨­å®šã€‚è«‹æ ¹æ“šæä¾›çš„ä¸–ç•ŒèƒŒæ™¯åŠç”Ÿæˆè¦æ±‚ï¼Œç‚ºç‰©å“å®Œå–„è³‡æ–™ã€‚\n';return a+='\n',a+='<ä¸–ç•ŒèƒŒæ™¯>\n','ä½ æ˜¯ä¸€å€‹å°ˆæ¥­çš„ç‰©å“è¨­è¨ˆåŠ©æ‰‹ï¼Œæ“…é•·å‰µé€ è±å¯Œå¤šå½©çš„ç‰©å“è¨­å®šã€‚è«‹æ ¹æ“šæä¾›çš„ä¸–ç•ŒèƒŒæ™¯åŠç”Ÿæˆè¦æ±‚ï¼Œç‚ºç‰©å“å®Œå–„è³‡æ–™ã€‚\n\n<ä¸–ç•ŒèƒŒæ™¯>\n'})(),r=f(t);((e,t)=>{const a=e.split('\n');for(const e of a){const a=e.indexOf('ï¼š');if(a>0){const n=e.substring(0,a).trim(),o=e.substring(a+1).trim();switch(n){case'åç¨±':t.generated_name=o.replace(/^["']|["']$/g,'');break;case'æè¿°':t.generated_description=o.replace(/^["']|["']$/g,'');break;case'åƒ¹å€¼':t.generated_value=o.replace(/[^\d]/g,'')}}}})(await generateRaw({user_input:a,ordered_prompts:[{role:'system',content:o},'char_description',{role:'system',content:r},'user_input']}),t);try{localStorage.setItem(`item_profile_generated_${e}`,JSON.stringify({generation_requirement:t.generation_requirement,generated_name:t.generated_name,generated_description:t.generated_description,generated_value:t.generated_value}))}catch(t){console.error(`Failed to save generated item profile for ${e} to localStorage:`,t)}n.value.set(e,{...t})}catch(a){console.error(`ç”Ÿæˆç‰©å“ ${e} è³‡æ–™å¤±æ•—:`,a),t.generated_name='ç”Ÿæˆå¤±æ•—ï¼Œè«‹é‡è©¦ã€‚'}finally{const t=new Map(o.value);t.set(e,!1),o.value=t}};return(e,l)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',nn,[l[11]||(l[11]=(0,t.createElementVNode)('h3',null,'ç‰©å“è³‡æ–™è¨­å®š',-1)),(0,t.createCommentVNode)(' å…¶ä»–ç‰©å“å‹•æ…‹æ‘ºç–Šæ¬„ '),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(i.value,([e,i])=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:e,class:(0,t.normalizeClass)(['item-fold-bar',{'item-incomplete':!u(i)}])},[(0,t.createVNode)(c,{title:`${e}: ${s(i)}`,'is-open':!1},{'title-actions':(0,t.withCtx)(()=>[(0,t.createElementVNode)('button',{class:'remove-item-btn',title:'ç§»é™¤ç‰©å“',onClick:t=>(e=>{n.value.delete(e);try{const t=getVariables({type:'chat'});delete t.items[e],replaceVariables(t,{type:'chat'})}catch(t){console.error(`Failed to remove item ${e} from chat variables:`,t)}})(e)},[...l[0]||(l[0]=[(0,t.createElementVNode)('span',null,'Ã—',-1)])],8,on)]),default:(0,t.withCtx)(()=>[(0,t.createElementVNode)('div',rn,[(0,t.createElementVNode)('div',ln,[l[7]||(l[7]=(0,t.createElementVNode)('h4',null,'åŸºæœ¬è³‡è¨Š',-1)),(0,t.createElementVNode)('div',sn,[(0,t.createElementVNode)('div',dn,[l[2]||(l[2]=(0,t.createElementVNode)('label',null,'åç¨±',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':e=>i.name=e,type:'text',placeholder:'ä¾‹å¦‚ï¼šé­”æ³•æ›¸',class:'text-input'},null,8,cn),[[t.vModelText,i.name]]),i.generated_name?((0,t.openBlock)(),(0,t.createElementBlock)('div',un,[l[1]||(l[1]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',pn,(0,t.toDisplayString)(i.generated_name),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>v(e,'name',i.generated_name)},' ä½¿ç”¨ ',8,mn)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',vn,[l[4]||(l[4]=(0,t.createElementVNode)('label',null,'åƒ¹å€¼',-1)),(0,t.createElementVNode)('input',{value:a(i,'value'),type:'number',placeholder:'ä¾‹å¦‚ï¼š100',class:'text-input',min:'0',onInput:e=>((e,t,a)=>{if(''===a||''===a.trim())e[t]=null;else{const n=parseInt(a);e[t]=isNaN(n)?null:n}})(i,'value',e.target.value)},null,40,gn),i.generated_value?((0,t.openBlock)(),(0,t.createElementBlock)('div',bn,[l[3]||(l[3]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',fn,(0,t.toDisplayString)(i.generated_value),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>v(e,'value',i.generated_value)},' ä½¿ç”¨ ',8,hn)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',xn,[l[6]||(l[6]=(0,t.createElementVNode)('label',null,'æè¿°',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{'onUpdate:modelValue':e=>i.description=e,placeholder:'æè¿°ç‰©å“çš„ç‰¹é»ž...',class:'text-area',rows:'3'},null,8,yn),[[t.vModelText,i.description]]),i.generated_description?((0,t.openBlock)(),(0,t.createElementBlock)('div',_n,[l[5]||(l[5]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',En,(0,t.toDisplayString)(i.generated_description),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>v(e,'description',i.generated_description)},' ä½¿ç”¨ ',8,kn)])):(0,t.createCommentVNode)('v-if',!0)])])]),(0,t.createCommentVNode)(' ç”Ÿæˆè¦æ±‚å€åŸŸ '),(0,t.createElementVNode)('div',Vn,[l[9]||(l[9]=(0,t.createElementVNode)('h4',null,'ç”Ÿæˆè¦æ±‚',-1)),(0,t.createElementVNode)('div',Nn,[(0,t.createElementVNode)('div',wn,[l[8]||(l[8]=(0,t.createElementVNode)('label',null,'å°AIç”Ÿæˆçš„è¦æ±‚',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{'onUpdate:modelValue':e=>i.generation_requirement=e,placeholder:'å°AIç”Ÿæˆçš„è¦æ±‚...',class:'text-area',rows:'3'},null,8,Sn),[[t.vModelText,i.generation_requirement]])])])]),(0,t.createCommentVNode)(' ç”ŸæˆæŒ‰éˆ•å€åŸŸ '),(0,t.createElementVNode)('div',Bn,[(0,t.createElementVNode)('button',{class:'generate-btn',disabled:!r.value||o.value.get(e),onClick:t=>h(e)},[o.value.get(e)?((0,t.openBlock)(),(0,t.createElementBlock)('span',$n)):(0,t.createCommentVNode)('v-if',!0),(0,t.createTextVNode)(' '+(0,t.toDisplayString)(o.value.get(e)?'ç”Ÿæˆä¸­...':r.value?'ç”Ÿæˆæœªå¡«å¯«çš„å­—æ®µ':'è«‹å…ˆå®Œæˆä¸–ç•ŒèƒŒæ™¯è¨­å®š'),1)],8,Cn),(0,t.createElementVNode)('button',{class:'apply-all-btn',disabled:!d(i),onClick:t=>(e=>{const t=n.value.get(e);if(!t)return;[{generated:'generated_name',field:'name',parser:e=>e},{generated:'generated_description',field:'description',parser:e=>e},{generated:'generated_value',field:'value',parser:e=>parseInt(e)||null}].forEach(({generated:e,field:a,parser:n})=>{const o=t[e];o&&(t[a]=n(o),t[e]='')}),n.value.set(e,{...t}),m(e);try{localStorage.removeItem(`item_profile_generated_${e}`)}catch(t){console.error(`Failed to remove generated item profile for ${e} from localStorage:`,t)}})(e)},' æ‡‰ç”¨å…¨éƒ¨ ',8,In)])])]),_:2},1032,['title'])],2))),128)),(0,t.createCommentVNode)(' æ·»åŠ ç‰©å“æŒ‰éˆ• '),(0,t.createElementVNode)('div',{class:'add-item-section'},[(0,t.createElementVNode)('button',{class:'add-item-btn',onClick:b},[...l[10]||(l[10]=[(0,t.createElementVNode)('span',null,'+ æ·»åŠ ç‰©å“',-1)])])])]))}});n(4122);const Dn=(0,d.A)(zn,[['__scopeId','data-v-d8256cea']]),Tn={class:'location-tabs-container'},Mn=['onClick'],Yn={class:'location-info-container'},On={class:'section'},An={class:'form-grid'},Rn={class:'input-group'},Kn=['onUpdate:modelValue'],Un={key:0,class:'generated-result'},Ln={class:'generated-text'},Fn=['onClick'],jn={class:'input-group'},Hn=['onUpdate:modelValue'],Pn={key:0,class:'generated-result'},Gn={class:'generated-text'},qn=['onClick'],Xn={class:'input-group full-width'},Wn=['onUpdate:modelValue'],Jn={key:0,class:'generated-result'},Zn={class:'generated-text'},Qn=['onClick'],eo={class:'input-group full-width'},to={key:0,class:'generated-result'},ao={class:'generated-text'},no=['onClick'],oo={class:'input-group full-width'},ro={class:'sub-locations-container'},lo=['value','onChange'],io=['value','disabled'],so=['onClick'],co=['onClick'],uo={class:'section'},po={class:'form-grid'},mo={class:'input-group full-width'},vo=['onUpdate:modelValue'],go={class:'action-section'},bo=['disabled','onClick'],fo={key:0,class:'loading-spinner'},ho=['disabled','onClick'],xo={class:'bulk-generate-section'},yo={class:'form-grid'},_o={class:'input-group'},Eo={class:'count-input-row'},ko=['disabled'],Vo={class:'ai-count-checkbox'},No={class:'input-group full-width'},wo=['disabled'],So={key:0,class:'loading-spinner'},Bo=(0,t.defineComponent)({__name:'location_tab',setup(e){const a=(0,t.ref)(new Map),n=(0,t.ref)(new Map),o=(0,t.ref)(!1),r=(0,t.ref)(3),l=(0,t.ref)(''),i=(0,t.ref)(!1),s=['generated_name','generated_location','generated_description'],d=['generated_name','generated_location','generated_description','generated_sub_location'],u=(0,t.computed)(()=>{try{const e=getVariables({type:'chat'});return!!e?.world_info?.trim()}catch{return!1}}),p=(0,t.computed)(()=>Array.from(a.value.entries())),m=e=>e?.name||'æœªçŸ¥åœ°é»ž',v=e=>!!(e?.generated_name||e?.generated_location||e?.generated_description||e?.generated_sub_location),g=e=>!!(e?.name?.trim()&&e?.location?.trim()&&e?.description?.trim()),b=e=>{s.forEach(t=>{e[t]||(e[t]='')}),e.generated_sub_location||(e.generated_sub_location=[]),e.sub_location||(e.sub_location=[]),e.location||(e.location=''),e.generated_location||(e.generated_location=''),e.generation_requirement||(e.generation_requirement='')},f=e=>{try{const t=getVariables({type:'chat'}),n={...t.locations||{}},o=a.value.get(e);if(!o)return;n[e]={name:o.name||'',location:o.location||'',description:o.description||'',sub_location:o.sub_location||[]},t.locations=n,replaceVariables(t,{type:'chat'})}catch(t){console.error(`ä¿å­˜åœ°é»ž ${e} è³‡æ–™å¤±æ•—:`,t)}};(0,t.watch)(()=>getVariables({type:'chat'}),e=>{if(e?.locations){const n=new Map;for(const[a,o]of Object.entries(e.locations)){const e=(0,t.reactive)(o);b(e),n.set(a,e)}a.value=n}},{deep:!0}),(0,t.watch)(a,()=>{for(const[e]of a.value.entries())f(e)},{deep:!0}),(0,t.watch)(()=>a.value,e=>{for(const[a,n]of e.entries())(0,t.watch)(()=>n.generation_requirement,e=>{try{const t=localStorage.getItem(`location_profile_generated_${a}`),n=t?JSON.parse(t):{};n.generation_requirement=e,localStorage.setItem(`location_profile_generated_${a}`,JSON.stringify(n))}catch(e){console.error(`Failed to save generation_requirement for ${a} to localStorage:`,e)}},{immediate:!1})},{deep:!0,immediate:!0}),(0,t.onMounted)(()=>{(()=>{try{const e=getVariables({type:'chat'});if(e?.locations){const n=new Map;for(const[a,o]of Object.entries(e.locations)){const e=(0,t.reactive)(o);b(e),n.set(a,e)}a.value=n}else a.value=new Map}catch(e){console.error('è¼‰å…¥åœ°é»žè³‡æ–™å¤±æ•—:',e),a.value=new Map}try{for(const[e,t]of a.value){const a=localStorage.getItem(`location_profile_generated_${e}`);a&&Object.assign(t,JSON.parse(a))}}catch(e){console.error('Failed to load generated location profiles from localStorage:',e)}try{const e=localStorage.getItem('bulk_location_generation_requirement');e&&(l.value=e);const t=localStorage.getItem('bulk_location_allow_ai_count');t&&(i.value='true'===t)}catch(e){console.error('Failed to load bulk generation settings from localStorage:',e)}})()});const h=()=>{const e=Array.from(a.value.keys());let t=1;for(;e.includes(`l${t}`);)t++;return`l${t}`},x=(e,t,n)=>{const o=a.value.get(e);if(!o)return;const r={name:{field:'name'},location:{field:'location'},description:{field:'description'},sub_location:{field:'sub_location',parser:e=>e}}[t];if(r){const e=r.parser?r.parser(n):n;o[r.field]=e,o[`generated_${t}`]=''}a.value.set(e,{...o}),f(e)},y=()=>{const e=h(),n=(0,t.reactive)({name:'',location:'',description:'',sub_location:[],generation_requirement:'',generated_name:'',generated_location:'',generated_description:'',generated_sub_location:[]});a.value.set(e,n);try{const t=getVariables({type:'chat'}).locations||{};t[e]={name:'',location:'',description:'',sub_location:[]},insertOrAssignVariables({locations:t},{type:'chat'})}catch(e){console.error('Failed to add new location to chat variables:',e)}},E=()=>{const e=getVariables({type:'chat'}).world_info;let t=getCharData('current').description;t=t.replace('{{getvar::world_info}}',e);let a='ä½ æ˜¯ä¸€å€‹å°ˆæ¥­çš„åœ°é»žè¨­è¨ˆåŠ©æ‰‹ï¼Œæ“…é•·å‰µé€ è±å¯Œå¤šå½©çš„åœ°é»žè¨­å®šã€‚è«‹æ ¹æ“šæä¾›çš„ä¸–ç•ŒèƒŒæ™¯åŠç”Ÿæˆè¦æ±‚ï¼Œç‚ºåœ°é»žå®Œå–„è³‡æ–™ã€‚\n';return a+='\n',a+='<ä¸–ç•ŒèƒŒæ™¯>\n','ä½ æ˜¯ä¸€å€‹å°ˆæ¥­çš„åœ°é»žè¨­è¨ˆåŠ©æ‰‹ï¼Œæ“…é•·å‰µé€ è±å¯Œå¤šå½©çš„åœ°é»žè¨­å®šã€‚è«‹æ ¹æ“šæä¾›çš„ä¸–ç•ŒèƒŒæ™¯åŠç”Ÿæˆè¦æ±‚ï¼Œç‚ºåœ°é»žå®Œå–„è³‡æ–™ã€‚\n\n<ä¸–ç•ŒèƒŒæ™¯>\n'},k=['å§“æ°','åå­—','å¹´é½¡','æ€§åˆ¥','èº«ä»½','èº«é«˜','é«”é‡','èƒ¸åœ','ç½©æ¯','è…°åœ','è‡€åœ','é«®åž‹','æ¨£è²Œ','è¡£è‘—','ç°¡ä»‹','æ€§æ ¼','æ„›å¥½','é‡‘éŒ¢','ç”Ÿæ—¥æœˆä»½','ç”Ÿæ—¥æ—¥æœŸ','å…¶ä»–é‡è¦è³‡è¨Š'],V=['é—œä¿‚','å‹å¥½åº¦','æ„›æƒ…åº¦'],N=(e,t,a=!1)=>{let n=`idï¼š${t}\n`;return k.forEach(t=>{n+=`  ${t}ï¼š${e[t]||''}\n`}),a&&(n+=`  å¿ƒæƒ…ï¼š${e.å¿ƒæƒ…||''}\n`,n+=`  æ€§æ…¾ï¼š${e.æ€§æ…¾||''}\n`),V.forEach(t=>{var a;n+=`  ${t}ï¼š${a=e[t],'['+Object.entries(a).map(([e,t])=>'string'==typeof t?`'${e}':'${t}'`:`'${e}':${t}`).join(', ')+']'}\n`}),n},w=()=>{const e=getVariables({type:'chat'}).characters.c1,t=`${e.å§“æ°}${e.åå­—}`;let a=`<${t}Status>\n`;return a+=N(e,'c1'),a+=`</${t}Status>`,a},S=()=>{const e=getVariables({type:'chat'}).characters;if(void 0===e)return'';let t='<CharacterStatus>\n';for(const[a,n]of Object.entries(e))'c1'!==a&&(t+=N(n,a,!0)+'\n');return t+='</CharacterStatus>',t},B=()=>{let e='<LocationTable>\n';e+='|id|åœ°é»ž|ä½ç½®|æè¿°|å­åœ°é»ž|\n',e+='|---|---|---|---|---|\n';const t=getVariables({type:'chat'}).locations;if(void 0===t)return'';for(const[a,n]of Object.entries(t)){const t=n.sub_location?n.sub_location.join(', '):'';e+=`|${a}|${n.name}|${n.location||''}|${n.description}|${t}|\n`}return e+='</LocationTable>',e},C=()=>{let e='';const t=getVariables({type:'chat'}).extra_world_info;if(void 0===t)return'';for(const a of Array.from(t))''!==a.name&&''!==a.content&&(e+=`<${a.name}>\n`,e+=`${a.content}\n`,e+=`</${a.name}>\n`,e+='\n');return e},I={id:{field:'id',parser:e=>e.replace(/^["']|["']$/g,'')},åœ°é»ž:{field:'name',parser:e=>e.replace(/^["']|["']$/g,'')},ä½ç½®:{field:'location',parser:e=>e.replace(/^["']|["']$/g,'')},æè¿°:{field:'description',parser:e=>e.replace(/^["']|["']$/g,'')},å­åœ°é»ž:{field:'sub_location',parser:e=>{try{let t=e;t.startsWith('\'')&&t.endsWith('\'')&&(t=t.slice(1,-1)),t=t.replace(/'/g,'"');const a=JSON.parse(t);return Array.isArray(a)?a:[]}catch(t){return console.warn('Failed to parse sub_location:',e,t),[]}}}},D=(e,t,a=!1)=>{const n=e.indexOf('ï¼š');if(n<=0)return;const o=e.substring(0,n).trim(),r=e.substring(n+1).trim(),l=I[o];if(l){t[a?`generated_${l.field}`:l.field]=l.parser(r)}},T=async e=>{const t=a.value.get(e);if(!t)return;const o=new Map(n.value);o.set(e,!0),n.value=o;try{const n=(e=>{let t='è«‹æ ¹æ“šä¸–ç•ŒèƒŒæ™¯è³‡è¨Šã€ç”Ÿæˆè¦æ±‚åŠå·²æœ‰åœ°é»žè³‡æ–™ï¼Œç‚ºä»¥ä¸‹åœ°é»žå®Œå–„åœ°é»žè³‡æ–™è¨­å®šï¼š\n\n';return t+=`idï¼š${e.id||''}\n`,t+=`åœ°é»žï¼š${e.name||''}\n`,t+=`ä½ç½®ï¼š${e.location||''}\n`,t+=`æè¿°ï¼š${e.description||''}\n`,t+=`å­åœ°é»žï¼š${e.sub_location&&e.sub_location.length>0?JSON.stringify(e.sub_location):'[]'}\n`,t+='\nè«‹ç”Ÿæˆä¸€å€‹å”¯ä¸€çš„åœ°é»žIDï¼Œæ ¼å¼å¿…é ˆæ˜¯ "l1", "l2", "l3", ... ä¸”ä¸èƒ½èˆ‡ç¾æœ‰åœ°é»žIDé‡è¤‡ã€‚\n',t})(t),o=E(),r=(e=>{let t='\n</ä¸–ç•ŒèƒŒæ™¯>\n';return t+='\n',t+=`${w()}\n`,t+='\n',t+=`${S()}\n`,t+='\n',t+=`${B()}\n`,t+='\n',t+=`${C()}\n`,t+='\n',t+='<ç”Ÿæˆè¦æ±‚>\n',t+=`${e.generation_requirement||'ç„¡ç‰¹æ®Šè¦æ±‚'}\n`,t+='</ç”Ÿæˆè¦æ±‚>\n',t+='\n',t+='<å­åœ°é»žèªªæ˜Ž>\n',t+='å­åœ°é»žè¡¨ç¤ºç›´æŽ¥åŒ…å«åœ¨ç•¶å‰åœ°é»žå…§çš„å­å€åŸŸã€‚ä¾‹å¦‚ï¼š\n',t+='- å¦‚æžœåœ°é»ž l2 ä½æ–¼åœ°é»ž l1 å…§ï¼Œå‰‡ l2 æ˜¯ l1 çš„å­åœ°é»ž\n',t+='- å¦‚æžœåœ°é»ž l3 æ˜¯ l2 çš„å­åœ°é»žï¼Œå‰‡ l3 ä¸æ˜¯ l1 çš„å­åœ°é»žï¼ˆå› ç‚º l3 é–“æŽ¥ä½æ–¼ l1 å…§ï¼‰\n',t+='- å­åœ°é»židå¿…é ˆæ˜¯ç¾æœ‰çš„åœ°é»židï¼Œä¸èƒ½ä½¿ç”¨ä¸å­˜åœ¨çš„id\n',t+='</å­åœ°é»žèªªæ˜Ž>\n',t+='\n',t+='<example>\n',t+='# The following is an example of user input and expected output. Please strictly follow the style and format to generate the output. Output anything other than this format is prohibited.\n',t+='idï¼šl1\n',t+='åœ°é»žï¼š\'åœ°é»žåç¨±\'\n',t+='ä½ç½®ï¼š\'åœ°é»žçš„åœ°ç†ä½ç½®\'\n',t+='æè¿°ï¼š\'ä»¥ç¬¬ä¸‰äººç¨±å®¢è§€åœ°æè¿°\'\n',t+='å­åœ°é»žï¼š[\'l2\', \'l4\']\n',t+='</example>\n',t})(t);((e,t)=>{e.split('\n').forEach(e=>D(e,t,!0))})(await generateRaw({user_input:n,ordered_prompts:[{role:'system',content:o},'char_description',{role:'system',content:r},'user_input']}),t);try{localStorage.setItem(`location_profile_generated_${e}`,JSON.stringify({generation_requirement:t.generation_requirement,generated_name:t.generated_name,generated_location:t.generated_location,generated_description:t.generated_description,generated_sub_location:t.generated_sub_location}))}catch(t){console.error(`Failed to save generated location profile for ${e} to localStorage:`,t)}a.value.set(e,{...t})}catch(a){console.error(`ç”Ÿæˆåœ°é»ž ${e} è³‡æ–™å¤±æ•—:`,a),t.generated_name='ç”Ÿæˆå¤±æ•—ï¼Œè«‹é‡è©¦ã€‚'}finally{const t=new Map(n.value);t.set(e,!1),n.value=t}},M=async()=>{if(i.value||!(r.value<1||r.value>10)){o.value=!0;try{try{localStorage.setItem('bulk_location_generation_requirement',l.value),localStorage.setItem('bulk_location_allow_ai_count',i.value.toString())}catch(e){console.error('Failed to save bulk generation settings to localStorage:',e)}const e=`è«‹æ ¹æ“šä¸–ç•ŒèƒŒæ™¯è³‡è¨Šå’Œæ‰¹é‡ç”Ÿæˆè¦æ±‚ï¼Œ${i.value?'è«‹æ ¹æ“šä¸–ç•ŒèƒŒæ™¯å’Œç”Ÿæˆè¦æ±‚è‡ªè¡Œæ±ºå®šç”Ÿæˆé©ç•¶æ•¸é‡çš„åœ°é»ž':`è«‹ä¸€æ¬¡æ€§ç”Ÿæˆ ${r.value} å€‹åœ°é»ž`}ã€‚æ¯å€‹åœ°é»žæ‡‰åŒ…å«åœ°é»žåç¨±ã€ä½ç½®ã€æè¿°å’Œå­åœ°é»žæ•¸çµ„ã€‚\n\næ‰¹é‡ç”Ÿæˆè¦æ±‚ï¼š${l.value||'ç„¡ç‰¹æ®Šè¦æ±‚'}\n\nè«‹ä»¥ä»¥ä¸‹æ ¼å¼è¼¸å‡ºï¼Œæ¯å€‹åœ°é»žå ä¸€è¡Œï¼š\nidï¼šl1\nåœ°é»žï¼šåœ°é»žåç¨±\nä½ç½®ï¼šåœ°é»žçš„åœ°ç†ä½ç½®\næè¿°ï¼šåœ°é»žæè¿°\nå­åœ°é»žï¼š['å­åœ°é»žid1', 'å­åœ°é»žid2', ...]\n\n---\n\nè«‹æ³¨æ„ï¼š\n- idæ ¼å¼å¿…é ˆæ˜¯ "l1", "l2", "l3", ... ä¸”ä¸èƒ½èˆ‡ç¾æœ‰åœ°é»židé‡è¤‡\n- å­åœ°é»žIDå¿…é ˆæ˜¯ç¾æœ‰çš„åœ°é»židï¼Œä¸èƒ½ä½¿ç”¨ä¸å­˜åœ¨çš„id\n`,n=E(),o=(()=>{let e='\n</ä¸–ç•ŒèƒŒæ™¯>\n';return e+='\n',e+=`${w()}\n`,e+='\n',e+=`${S()}\n`,e+='\n',e+=`${B()}\n`,e+='\n',e+=`${C()}\n`,e+='\n',e+='<å­åœ°é»žèªªæ˜Ž>\n',e+='å­åœ°é»žè¡¨ç¤ºç›´æŽ¥åŒ…å«åœ¨ç•¶å‰åœ°é»žå…§çš„å­å€åŸŸã€‚ä¾‹å¦‚ï¼š\n',e+='- å¦‚æžœåœ°é»ž l2 ä½æ–¼åœ°é»ž l1 å…§ï¼Œå‰‡ l2 æ˜¯ l1 çš„å­åœ°é»ž\n',e+='- å¦‚æžœåœ°é»ž l3 æ˜¯ l2 çš„å­åœ°é»žï¼Œå‰‡ l3 ä¸æ˜¯ l1 çš„å­åœ°é»žï¼ˆå› ç‚º l3 é–“æŽ¥ä½æ–¼ l1 å…§ï¼‰\n',e+='- å­åœ°é»židå¿…é ˆæ˜¯ç¾æœ‰çš„åœ°é»židï¼Œä¸èƒ½ä½¿ç”¨ä¸å­˜åœ¨çš„id\n',e+='</å­åœ°é»žèªªæ˜Ž>\n',e+='\n',i.value&&(e+='<ç”Ÿæˆæ•¸é‡èªªæ˜Ž>\n',e+='è«‹æ ¹æ“šä¸–ç•ŒèƒŒæ™¯å’Œç”Ÿæˆè¦æ±‚æ±ºå®šç”Ÿæˆé©ç•¶æ•¸é‡çš„åœ°é»žã€‚\n',e+='è«‹æ ¹æ“šä¸–ç•ŒèƒŒæ™¯çš„è¤‡é›œåº¦å’Œç”Ÿæˆè¦æ±‚çš„å…·é«”æ€§ä¾†æ±ºå®šæ•¸é‡ã€‚\n',e+='</ç”Ÿæˆæ•¸é‡èªªæ˜Ž>\n',e+='\n'),e+='<example>\n',e+='# The following is an example of user input and expected output. Please strictly follow the style and format to generate the output. Output anything other than this format is prohibited.\n',e+='idï¼šl1\n',e+='åœ°é»žï¼š\'åœ°é»žåç¨±\'\n',e+='ä½ç½®ï¼š\'åœ°é»žçš„åœ°ç†ä½ç½®\'\n',e+='æè¿°ï¼š\'ä»¥ç¬¬ä¸‰äººç¨±å®¢è§€åœ°æè¿°\'\n',e+='å­åœ°é»žï¼š[\'id\', ...]\n',e+='\n---\n',e+='idï¼šl2\n',e+='åœ°é»žï¼š\'åœ°é»žåç¨±\'\n',e+='ä½ç½®ï¼š\'åœ°é»žçš„åœ°ç†ä½ç½®\'\n',e+='æè¿°ï¼š\'ä»¥ç¬¬ä¸‰äººç¨±å®¢è§€åœ°æè¿°\'\n',e+='å­åœ°é»žï¼š[\'id\', ...]\n',e+='</example>\n',e})(),s=(e=>{const t=[],a=e.split('---').map(e=>e.trim()).filter(e=>e);for(const e of a){const a=e.split('\n'),n={id:'',name:'',location:'',description:'',sub_location:[]};a.forEach(e=>D(e,n)),n.name&&n.name.trim()&&t.push(n)}return t})(await generateRaw({user_input:e,ordered_prompts:[{role:'system',content:n},'char_description',{role:'system',content:o},'user_input']}));for(const e of s){const n=e.id||h(),o={id:n,name:e.name||'',location:e.location||'',description:e.description||'',sub_location:e.sub_location||[],generation_requirement:l.value,generated_name:'',generated_location:'',generated_description:'',generated_sub_location:[]},r=(0,t.reactive)(o);a.value.set(n,r);try{const e=getVariables({type:'chat'}).locations||{};e[n]={name:o.name,location:o.location,description:o.description,sub_location:o.sub_location},insertOrAssignVariables({locations:e},{type:'chat'})}catch(e){console.error('Failed to add bulk generated location to chat variables:',e)}}toastr.success(`æˆåŠŸç”Ÿæˆ ${s.length} å€‹åœ°é»žï¼`)}catch(e){console.error('æ‰¹é‡ç”Ÿæˆåœ°é»žå¤±æ•—:',e),toastr.error('æ‰¹é‡ç”Ÿæˆå¤±æ•—ï¼Œè«‹é‡è©¦ã€‚')}finally{o.value=!1}}};return(e,s)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',Tn,[s[24]||(s[24]=(0,t.createElementVNode)('h3',null,'åœ°é»žè³‡æ–™è¨­å®š',-1)),(0,t.createCommentVNode)(' å…¶ä»–åœ°é»žå‹•æ…‹æ‘ºç–Šæ¬„ '),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(p.value,([e,o])=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:e,class:(0,t.normalizeClass)(['location-fold-bar',{'location-incomplete':!g(o)}])},[(0,t.createVNode)(c,{title:`${e}: ${m(o)}`,'is-open':!1},{'title-actions':(0,t.withCtx)(()=>[(0,t.createElementVNode)('button',{class:'remove-location-btn',title:'ç§»é™¤åœ°é»ž',onClick:t=>(e=>{a.value.delete(e);try{const t=getVariables({type:'chat'});delete t.locations[e],replaceVariables(t,{type:'chat'})}catch(t){console.error(`Failed to remove location ${e} from chat variables:`,t)}})(e)},[...s[3]||(s[3]=[(0,t.createElementVNode)('span',null,'Ã—',-1)])],8,Mn)]),default:(0,t.withCtx)(()=>[(0,t.createElementVNode)('div',Yn,[(0,t.createElementVNode)('div',On,[s[16]||(s[16]=(0,t.createElementVNode)('h4',null,'åŸºæœ¬è³‡è¨Š',-1)),(0,t.createElementVNode)('div',An,[(0,t.createElementVNode)('div',Rn,[s[5]||(s[5]=(0,t.createElementVNode)('label',null,'åœ°é»ž',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':e=>o.name=e,type:'text',placeholder:'ä¾‹å¦‚ï¼šé­”æ³•æ£®æž—',class:'text-input'},null,8,Kn),[[t.vModelText,o.name]]),o.generated_name?((0,t.openBlock)(),(0,t.createElementBlock)('div',Un,[s[4]||(s[4]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',Ln,(0,t.toDisplayString)(o.generated_name),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>x(e,'name',o.generated_name)},' ä½¿ç”¨ ',8,Fn)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',jn,[s[7]||(s[7]=(0,t.createElementVNode)('label',null,'ä½ç½®',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':e=>o.location=e,type:'text',placeholder:'ä¾‹å¦‚ï¼šæ£®æž—æ·±è™•',class:'text-input'},null,8,Hn),[[t.vModelText,o.location]]),o.generated_location?((0,t.openBlock)(),(0,t.createElementBlock)('div',Pn,[s[6]||(s[6]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',Gn,(0,t.toDisplayString)(o.generated_location),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>x(e,'location',o.generated_location)},' ä½¿ç”¨ ',8,qn)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',Xn,[s[9]||(s[9]=(0,t.createElementVNode)('label',null,'æè¿°',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{'onUpdate:modelValue':e=>o.description=e,placeholder:'æè¿°åœ°é»žçš„ç‰¹é»ž...',class:'text-area',rows:'3'},null,8,Wn),[[t.vModelText,o.description]]),o.generated_description?((0,t.openBlock)(),(0,t.createElementBlock)('div',Jn,[s[8]||(s[8]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',Zn,(0,t.toDisplayString)(o.generated_description),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>x(e,'description',o.generated_description)},' ä½¿ç”¨ ',8,Qn)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',eo,[s[11]||(s[11]=(0,t.createElementVNode)('label',null,'å­åœ°é»žç”Ÿæˆçµæžœ',-1)),o.generated_sub_location&&o.generated_sub_location.length>0?((0,t.openBlock)(),(0,t.createElementBlock)('div',to,[s[10]||(s[10]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',ao,(0,t.toDisplayString)(o.generated_sub_location.join(', ')),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:t=>x(e,'sub_location',o.generated_sub_location)},' ä½¿ç”¨ ',8,no)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',oo,[s[15]||(s[15]=(0,t.createElementVNode)('label',null,'å­åœ°é»ž',-1)),(0,t.createElementVNode)('div',ro,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(o.sub_location||[],(n,o)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:o,class:'sub-location-item'},[(0,t.createElementVNode)('select',{value:n,class:'text-input',onChange:t=>((e,t,n)=>{const o=a.value.get(e);o&&o.sub_location&&(o.sub_location[t]=n,a.value.set(e,{...o}),f(e))})(e,o,t.target.value)},[s[12]||(s[12]=(0,t.createElementVNode)('option',{value:''},'é¸æ“‡å­åœ°é»ž...',-1)),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(a.value,([a,n])=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:a,value:a,disabled:a===e},(0,t.toDisplayString)(a)+': '+(0,t.toDisplayString)(m(n)),9,io))),128))],40,lo),(0,t.createElementVNode)('button',{class:'remove-sub-location-btn',onClick:t=>((e,t)=>{const n=a.value.get(e);n&&n.sub_location&&(n.sub_location.splice(t,1),a.value.set(e,{...n}),f(e))})(e,o)},[...s[13]||(s[13]=[(0,t.createElementVNode)('span',null,'Ã—',-1)])],8,so)]))),128)),(0,t.createElementVNode)('button',{class:'add-sub-location-btn',onClick:t=>(e=>{const t=a.value.get(e);t&&(t.sub_location||(t.sub_location=[]),t.sub_location.push(''),a.value.set(e,{...t}),f(e))})(e)},[...s[14]||(s[14]=[(0,t.createElementVNode)('span',null,'+ æ·»åŠ å­åœ°é»ž',-1)])],8,co)])])])]),(0,t.createCommentVNode)(' ç”Ÿæˆè¦æ±‚å€åŸŸ '),(0,t.createElementVNode)('div',uo,[s[18]||(s[18]=(0,t.createElementVNode)('h4',null,'ç”Ÿæˆè¦æ±‚',-1)),(0,t.createElementVNode)('div',po,[(0,t.createElementVNode)('div',mo,[s[17]||(s[17]=(0,t.createElementVNode)('label',null,'å°AIç”Ÿæˆçš„è¦æ±‚',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{'onUpdate:modelValue':e=>o.generation_requirement=e,placeholder:'å°AIç”Ÿæˆçš„è¦æ±‚...',class:'text-area',rows:'3'},null,8,vo),[[t.vModelText,o.generation_requirement]])])])]),(0,t.createCommentVNode)(' ç”ŸæˆæŒ‰éˆ•å€åŸŸ '),(0,t.createElementVNode)('div',go,[(0,t.createElementVNode)('button',{class:'generate-btn',disabled:!u.value||n.value.get(e),onClick:t=>T(e)},[n.value.get(e)?((0,t.openBlock)(),(0,t.createElementBlock)('span',fo)):(0,t.createCommentVNode)('v-if',!0),(0,t.createTextVNode)(' '+(0,t.toDisplayString)(n.value.get(e)?'ç”Ÿæˆä¸­...':u.value?'ç”Ÿæˆæœªå¡«å¯«çš„å­—æ®µ':'è«‹å…ˆå®Œæˆä¸–ç•ŒèƒŒæ™¯è¨­å®š'),1)],8,bo),(0,t.createElementVNode)('button',{class:'apply-all-btn',disabled:!v(o),onClick:t=>(e=>{const t=a.value.get(e);if(t){d.forEach(e=>{const a=e,n=e.replace('generated_',''),o=t[a];o&&(t[n]=o,t[a]='generated_sub_location'===e?[]:'')}),a.value.set(e,{...t}),f(e);try{localStorage.removeItem(`location_profile_generated_${e}`)}catch(t){console.error(`Failed to remove generated location profile for ${e} from localStorage:`,t)}}})(e)},' æ‡‰ç”¨å…¨éƒ¨ ',8,ho)])])]),_:2},1032,['title'])],2))),128)),(0,t.createCommentVNode)(' æ‰¹é‡ç”Ÿæˆåœ°é»žå€åŸŸ '),(0,t.createElementVNode)('div',xo,[s[22]||(s[22]=(0,t.createElementVNode)('h4',null,'æ‰¹é‡ç”Ÿæˆåœ°é»ž',-1)),(0,t.createElementVNode)('div',yo,[(0,t.createElementVNode)('div',_o,[s[20]||(s[20]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆæ•¸é‡',-1)),(0,t.createElementVNode)('div',Eo,[(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':s[0]||(s[0]=e=>r.value=e),type:'number',min:'1',max:'10',class:'text-input count-input',placeholder:'1-10',disabled:i.value},null,8,ko),[[t.vModelText,r.value,void 0,{number:!0}]]),(0,t.createElementVNode)('div',Vo,[(0,t.withDirectives)((0,t.createElementVNode)('input',{id:'allow_ai_count','onUpdate:modelValue':s[1]||(s[1]=e=>i.value=e),type:'checkbox'},null,512),[[t.vModelCheckbox,i.value]]),s[19]||(s[19]=(0,t.createElementVNode)('label',{for:'allow_ai_count'},'è®“AIæ±ºå®šç”Ÿæˆæ•¸é‡',-1))])])]),(0,t.createElementVNode)('div',No,[s[21]||(s[21]=(0,t.createElementVNode)('label',null,'æ‰¹é‡ç”Ÿæˆè¦æ±‚',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{'onUpdate:modelValue':s[2]||(s[2]=e=>l.value=e),placeholder:'æè¿°è¦ç”Ÿæˆçš„åœ°é»žé¡žåž‹ã€ä¸»é¡Œç­‰...',class:'text-area',rows:'3'},null,512),[[t.vModelText,l.value]])])]),(0,t.createElementVNode)('button',{class:'bulk-generate-btn',disabled:!u.value||o.value||!i.value&&(r.value<1||r.value>10),onClick:M},[o.value?((0,t.openBlock)(),(0,t.createElementBlock)('span',So)):(0,t.createCommentVNode)('v-if',!0),(0,t.createTextVNode)(' '+(0,t.toDisplayString)(o.value?'æ‰¹é‡ç”Ÿæˆä¸­...':u.value?i.value?'è®“AIæ±ºå®šç”Ÿæˆæ•¸é‡':`ç”Ÿæˆ ${r.value} å€‹åœ°é»ž`:'è«‹å…ˆå®Œæˆä¸–ç•ŒèƒŒæ™¯è¨­å®š'),1)],8,wo)]),(0,t.createCommentVNode)(' æ·»åŠ åœ°é»žæŒ‰éˆ• '),(0,t.createElementVNode)('div',{class:'add-location-section'},[(0,t.createElementVNode)('button',{class:'add-location-btn',onClick:y},[...s[23]||(s[23]=[(0,t.createElementVNode)('span',null,'+ æ·»åŠ åœ°é»ž',-1)])])])]))}});n(9177);const Co=(0,d.A)(Bo,[['__scopeId','data-v-890af5d4']]);class $o{_date;constructor(e){this._date=e}static fromString(e){return new $o(new Date(e))}toString(){return this._date.toString()}get year(){return this._date.getFullYear()}get month(){return this._date.getMonth()+1}get date(){return this._date.getDate()}get hours(){return this._date.getHours()}get minutes(){return this._date.getMinutes()}get seconds(){return this._date.getSeconds()}toDate(){return this._date}deltaMinutes(e){this._date.setMinutes(this._date.getMinutes()+e)}clone(){return new $o(new Date(this._date))}}class Io{name;static NAME_KEY='åç¨±';age;static AGE_KEY='å¹´é½¡';gender;static GENDER_KEY='æ€§åˆ¥';identity;static IDENTITY_KEY='èº«ä»½';introduction;static INTRODUCTION_KEY='ç°¡ä»‹';personality;static PERSONALITY_KEY='æ€§æ ¼';height;static HEIGHT_KEY='èº«é«˜';weight;static WEIGHT_KEY='é«”é‡';chest_size;static CHEST_SIZE_KEY='èƒ¸åœ';cup_size;static CUP_SIZE_KEY='ç½©æ¯';waist_size;static WAIST_SIZE_KEY='è…°åœ';hips_size;static HIPS_SIZE_KEY='è‡€åœ';hairstyle;static HAIRSTYLE_KEY='é«®åž‹';appearance;static APPEARANCE_KEY='æ¨£è²Œ';clothes;static CLOTHES_KEY='è¡£è‘—';birthday;static BIRTHDAY_KEY='ç”Ÿæ—¥';favourite;static FAVOURITE_KEY='æ„›å¥½';extra_information;static EXTRA_INFORMATION_KEY='å…¶ä»–é‡è¦è³‡è¨Š';money;static MONEY_KEY='é‡‘éŒ¢';mood;static MOOD_KEY='å¿ƒæƒ…';horny;static HORNY_KEY='æ€§æ…¾';relations;static RELATIONS_KEY='é—œä¿‚';friendships;static FRIENDSHIPS_KEY='å‹å¥½åº¦';loves;static LOVES_KEY='æ„›æƒ…åº¦';inventory;static INVENTORY_KEY='æ‰€æŒç‰©';static MOOD_LOW=-100;static MOOD_HIGH=100;static HORNY_LOW=0;static HORNY_HIGH=100;static FRIENDSHIP_LOW=-1e3;static FRIENDSHIP_HIGH=1e3;static LOVE_LOW=0;static LOVE_HIGH=1e3;constructor(e,t,a,n,o,r,l,i,s,d,c,u,p,m,v,g,b,f,h,x,y,E,k,V,N){this.name=e,this.age=t,this.gender=a,this.identity=n,this.introduction=o,this.personality=r,this.height=l,this.weight=i,this.chest_size=s,this.cup_size=d,this.waist_size=c,this.hips_size=u,this.hairstyle=p,this.appearance=m,this.clothes=v,this.birthday=g,this.favourite=b,this.extra_information=f,this.money=h,this.mood=x,this.horny=y,this.relations=E,this.friendships=k,this.loves=V,this.inventory=N}static instantiate(){return new Io('ç´«æœˆ',17,'ç”·','é«˜ä¸­äºŒå¹´ç´šå­¸ç”Ÿ','ä¸€æ®µä»‹ç´¹','å¹³æ·¡ï¼Œè†½å°',172,52,70,null,50,55,'é»‘è‰²çŸ­é«®','æ™®é€šï¼Œå¹³å¹³ç„¡å¥‡','å±…å®¶æœ',new $o(new Date(1998,8,22,0,0,0)),'å¦¹å¦¹','æ²’æœ‰é¡å¤–è³‡è¨Š',1e4,20,0,new Map([['c2','å“¥å“¥']]),new Map([['c2',100],['c5',70],['c6',-40]]),new Map([['c2',50]]),new Map([['i2',2]]))}static fromRecord(e){return new Io(e[Io.NAME_KEY],e[Io.AGE_KEY],e[Io.GENDER_KEY],e[Io.IDENTITY_KEY],e[Io.INTRODUCTION_KEY],e[Io.PERSONALITY_KEY],e[Io.HEIGHT_KEY],e[Io.WEIGHT_KEY],e[Io.CHEST_SIZE_KEY],e[Io.CUP_SIZE_KEY]??null,e[Io.WAIST_SIZE_KEY],e[Io.HIPS_SIZE_KEY],e[Io.HAIRSTYLE_KEY],e[Io.APPEARANCE_KEY],e[Io.CLOTHES_KEY],$o.fromString(e[Io.BIRTHDAY_KEY]),e[Io.FAVOURITE_KEY],e[Io.EXTRA_INFORMATION_KEY],e[Io.MONEY_KEY],e[Io.MOOD_KEY],e[Io.HORNY_KEY],new Map(Object.entries(e[Io.RELATIONS_KEY])),new Map(Object.entries(e[Io.FRIENDSHIPS_KEY])),new Map(Object.entries(e[Io.LOVES_KEY])),new Map(Object.entries(e[Io.INVENTORY_KEY])))}toRecord(){return{[Io.NAME_KEY]:this.name,[Io.AGE_KEY]:this.age,[Io.GENDER_KEY]:this.gender,[Io.IDENTITY_KEY]:this.identity,[Io.INTRODUCTION_KEY]:this.introduction,[Io.PERSONALITY_KEY]:this.personality,[Io.HEIGHT_KEY]:this.height,[Io.WEIGHT_KEY]:this.weight,[Io.CHEST_SIZE_KEY]:this.chest_size,[Io.CUP_SIZE_KEY]:this.cup_size,[Io.WAIST_SIZE_KEY]:this.waist_size,[Io.HIPS_SIZE_KEY]:this.hips_size,[Io.HAIRSTYLE_KEY]:this.hairstyle,[Io.APPEARANCE_KEY]:this.appearance,[Io.CLOTHES_KEY]:this.clothes,[Io.BIRTHDAY_KEY]:this.birthday.toString(),[Io.FAVOURITE_KEY]:this.favourite,[Io.EXTRA_INFORMATION_KEY]:this.extra_information,[Io.MONEY_KEY]:this.money,[Io.MOOD_KEY]:this.mood,[Io.HORNY_KEY]:this.horny,[Io.RELATIONS_KEY]:Object.fromEntries(this.relations),[Io.FRIENDSHIPS_KEY]:Object.fromEntries(this.friendships),[Io.LOVES_KEY]:Object.fromEntries(this.loves),[Io.INVENTORY_KEY]:Object.fromEntries(this.inventory)}}deltaFriendship(e,t){let a=this.friendships.get(e)||0;a+=t,a<Io.FRIENDSHIP_LOW&&(a=Io.FRIENDSHIP_LOW),a>Io.FRIENDSHIP_HIGH&&(a=Io.FRIENDSHIP_HIGH),this.friendships.set(e,a)}deltaLove(e,t){let a=this.loves.get(e)||0;a+=t,a<Io.LOVE_LOW&&(a=Io.LOVE_LOW),a>Io.LOVE_HIGH&&(a=Io.LOVE_HIGH),0===a?this.loves.delete(e):this.loves.set(e,a)}deltaMood(e){this.mood+=e,this.mood<Io.MOOD_LOW&&(this.mood=Io.MOOD_LOW),this.mood>Io.MOOD_HIGH&&(this.mood=Io.MOOD_HIGH)}deltaHorny(e){this.horny+=e,this.horny<Io.HORNY_LOW&&(this.horny=Io.HORNY_LOW),this.horny>Io.HORNY_HIGH&&(this.horny=Io.HORNY_HIGH)}}class zo{name;static NAME_KEY='åç¨±';description;static DESCRIPTION_KEY='æè¿°';value;static VALUE_KEY='åƒ¹å€¼';constructor(e,t,a){this.name=e,this.description=t,this.value=a}static fromRecord(e){return new zo(e[zo.NAME_KEY],e[zo.DESCRIPTION_KEY],e[zo.VALUE_KEY])}toRecord(){return{[zo.NAME_KEY]:this.name,[zo.DESCRIPTION_KEY]:this.description,[zo.VALUE_KEY]:this.value}}}class Do{id;static ID_KEY='id';name;static NAME_KEY='åœ°é»ž';location;static LOCATION_KEY='ä½ç½®';description;static DESCRIPTION_KEY='æè¿°';parent_location_id;static PARENT_LOCATION_ID_KEY='çˆ¶åœ°é»žid';sub_location_ids;static SUB_LOCATION_IDS_KEY='å­åœ°é»žids';storage_ids;static STORAGE_IDS_KEY='è²¯å­˜é»žids';constructor(e,t,a,n,o,r,l){this.id=e,this.name=t,this.location=a,this.description=n,this.parent_location_id=o,this.sub_location_ids=r,this.storage_ids=l}static fromRecord(e){return new Do(e[Do.ID_KEY],e[Do.NAME_KEY],e[Do.LOCATION_KEY],e[Do.DESCRIPTION_KEY],e[Do.PARENT_LOCATION_ID_KEY],e[Do.SUB_LOCATION_IDS_KEY]||[],e[Do.STORAGE_IDS_KEY]||[])}toRecord(){return{[Do.ID_KEY]:this.id,[Do.NAME_KEY]:this.name,[Do.LOCATION_KEY]:this.location,[Do.DESCRIPTION_KEY]:this.description,[Do.PARENT_LOCATION_ID_KEY]:this.parent_location_id,[Do.SUB_LOCATION_IDS_KEY]:this.sub_location_ids,[Do.STORAGE_IDS_KEY]:this.storage_ids}}}class To{deadline;static DEADLINE_KEY='æœŸé™';character_ids;static CHARACTER_IDS_KEY='è§’è‰²';location_id;static LOCATION_ID_KEY='åœ°é»ž';description;static DESCRIPTION_KEY='å…§å®¹';constructor(e,t,a,n){this.deadline=e,this.character_ids=t,this.location_id=a,this.description=n}static fromRecord(e){return new To($o.fromString(e[To.DEADLINE_KEY]),e[To.CHARACTER_IDS_KEY],e[To.LOCATION_ID_KEY],e[To.DESCRIPTION_KEY])}toRecord(){return{[To.DEADLINE_KEY]:this.deadline.toString(),[To.CHARACTER_IDS_KEY]:this.character_ids,[To.LOCATION_ID_KEY]:this.location_id,[To.DESCRIPTION_KEY]:this.description}}}class Mo{name;static NAME_KEY='åç¨±';description;static DESCRIPTION_KEY='æè¿°';parent_id;static PARENT_ID_KEY='çˆ¶id';money;static MONEY_KEY='é‡‘éŒ¢';inventory;static INVENTORY_KEY='è²¯å­˜ç‰©';constructor(e,t,a,n,o){this.name=e,this.description=t,this.parent_id=a,this.money=n,this.inventory=o}static fromRecord(e){const t=new Map,a=e[Mo.INVENTORY_KEY]||{};for(const[e,n]of Object.entries(a))t.set(e,n);return new Mo(e[Mo.NAME_KEY],e[Mo.DESCRIPTION_KEY],e[Mo.PARENT_ID_KEY],e[Mo.MONEY_KEY],t)}toRecord(){const e={};for(const[t,a]of Array.from(this.inventory))e[t]=a;return{[Mo.NAME_KEY]:this.name,[Mo.DESCRIPTION_KEY]:this.description,[Mo.PARENT_ID_KEY]:this.parent_id,[Mo.MONEY_KEY]:this.money,[Mo.INVENTORY_KEY]:e}}}class Yo{datetime;static DATETIME_KEY='æ™‚é–“';summary;static SUMMARY_KEY='ç¸½çµ';weighting;static WEIGHTING_KEY='æ¬Šé‡';last_message_id;static LAST_MESSAGE_ID_KEY='æœ€å¾Œæ¨“å±¤';constructor(e,t,a,n){this.datetime=e,this.summary=t,this.weighting=a,this.last_message_id=n}static fromRecord(e){return new Yo($o.fromString(e[Yo.DATETIME_KEY]),e[Yo.SUMMARY_KEY],e[Yo.WEIGHTING_KEY],e[Yo.LAST_MESSAGE_ID_KEY])}toRecord(){return{[Yo.DATETIME_KEY]:this.datetime.toString(),[Yo.SUMMARY_KEY]:this.summary,[Yo.WEIGHTING_KEY]:this.weighting,[Yo.LAST_MESSAGE_ID_KEY]:this.last_message_id}}}class Oo{datetime;static DATETIME_KEY='ç•¶å‰æ™‚é–“';current_location_id;static CURRENT_LOCATION_ID_KEY='ç•¶å‰åœ°é»ž';weather;static WEATHER_KEY='å¤©æ°£';current_event;static CURRENT_EVENT_KEY='ç•¶å‰äº‹ä»¶';static CURRENT_EVENT_NULL_VALUE='ç„¡';active_characters;static ACTIVE_CHARACTERS_KEY='ç•¶å‰è§’è‰²';deactive_characters;static DEACTIVE_CHARACTERS_KEY='èƒŒæ™¯è§’è‰²';items;static ITEMS_KEY='ç‰©å“';storages;static STORAGES_KEY='è²¯å­˜é»ž';locations;static LOCATIONS_KEY='åœ°é»ž';promises;static PROMISES_KEY='ç´„å®š';summaries;static SUMMARIES_KEY='ç¸½çµ';constructor(e,t,a,n,o,r,l,i,s,d,c){this.datetime=e,this.current_location_id=t,this.weather=a,this.current_event=n,this.active_characters=o,this.deactive_characters=r,this.items=l,this.storages=i,this.locations=s,this.promises=d,this.summaries=c}static loadFromVariable(e){let t;t=e<0?getVariables({type:'chat'}).state:getVariables({type:'message',message_id:e});const a=new Map,n=t[Oo.ACTIVE_CHARACTERS_KEY];for(const[e,t]of Object.entries(n))a.set(e,Io.fromRecord(t));const o=new Map,r=t[Oo.DEACTIVE_CHARACTERS_KEY];for(const[e,t]of Object.entries(r))o.set(e,Io.fromRecord(t));const l=new Map,i=t[Oo.ITEMS_KEY];for(const[e,t]of Object.entries(i))l.set(e,zo.fromRecord(t));const s=new Map;if(t[Oo.STORAGES_KEY]){const e=t[Oo.STORAGES_KEY];for(const[t,a]of Object.entries(e))s.set(t,Mo.fromRecord(a))}const d=new Map,c=t[Oo.LOCATIONS_KEY];for(const[e,t]of Object.entries(c))d.set(e,Do.fromRecord(t));const u=new Map,p=t[Oo.PROMISES_KEY];for(const[e,t]of Object.entries(p))u.set(e,To.fromRecord(t));const m=new Array,v=t[Oo.SUMMARIES_KEY];for(const e of v)m.push(Yo.fromRecord(e));return new Oo($o.fromString(t[Oo.DATETIME_KEY]),t[Oo.CURRENT_LOCATION_ID_KEY],t[Oo.WEATHER_KEY],t[Oo.CURRENT_EVENT_KEY],a,o,l,s,d,u,m)}saveAsVariable(e){const t={};for(const[e,a]of this.active_characters)t[e]=a.toRecord();const a={};for(const[e,t]of this.deactive_characters)a[e]=t.toRecord();const n={};for(const[e,t]of this.items)n[e]=t.toRecord();const o={};for(const[e,t]of this.storages)o[e]=t.toRecord();const r={};for(const[e,t]of this.locations)r[e]=t.toRecord();const l={};for(const[e,t]of this.promises)l[e]=t.toRecord();const i=[],s=[...this.summaries].sort((e,t)=>e.last_message_id-t.last_message_id);for(const e of s)i.push(e.toRecord());const d={[Oo.DATETIME_KEY]:this.datetime.toString(),[Oo.CURRENT_LOCATION_ID_KEY]:this.current_location_id,[Oo.WEATHER_KEY]:this.weather,[Oo.CURRENT_EVENT_KEY]:this.current_event,[Oo.ACTIVE_CHARACTERS_KEY]:t,[Oo.DEACTIVE_CHARACTERS_KEY]:a,[Oo.ITEMS_KEY]:n,[Oo.STORAGES_KEY]:o,[Oo.LOCATIONS_KEY]:r,[Oo.PROMISES_KEY]:l,[Oo.SUMMARIES_KEY]:i};if(e<0){const e=getVariables({type:'chat'});e.state=d,replaceVariables(e,{type:'chat'})}else replaceVariables(d,{type:'message',message_id:e})}getCharacter(e){return this.active_characters.get(e)||this.deactive_characters.get(e)}hasCharacter(e){return this.active_characters.has(e)||this.deactive_characters.has(e)}getCurrentLocations(){const e=new Set,t=[];let a=this.locations.get(this.current_location_id);for(;a&&!e.has(a.id);)t.push(a),e.add(a.id),a=this.locations.get(a.parent_location_id||'');return t.reverse()}addStorage(e,t,a,n){if(this.storages.has(e))return;if(!(this.hasCharacter(n)||this.storages.has(n)||this.locations.has(n)))return;const o=new Mo(t,a,n,0,new Map);if(this.storages.set(e,o),this.hasCharacter(n)){const t=this.getCharacter(n);t&&t.inventory.set(e,1)}else if(this.storages.has(n)){const t=this.storages.get(n);t&&t.inventory.set(e,1)}else if(this.locations.has(n)){const t=this.locations.get(n);t&&t.storage_ids.push(e)}}removeStorage(e){const t=this.storages.get(e);if(!t)return;this.storages.delete(e);const a=t.parent_id;if(this.hasCharacter(a)){const t=this.getCharacter(a);t&&t.inventory.delete(e)}else if(this.storages.has(a)){const t=this.storages.get(a);t&&t.inventory.delete(e)}else if(this.locations.has(a)){const t=this.locations.get(a);if(t){const a=t.storage_ids.indexOf(e);-1!==a&&t.storage_ids.splice(a,1)}}}setStorageParent(e,t){const a=this.storages.get(e);if(!a)return;if(!(this.hasCharacter(t)||this.storages.has(t)&&t!==e||this.locations.has(t)))return;const n=a.parent_id;if(this.hasCharacter(n)){const t=this.getCharacter(n);t&&t.inventory.delete(e)}else if(this.storages.has(n)){const t=this.storages.get(n);t&&t.inventory.delete(e)}else if(this.locations.has(n)){const t=this.locations.get(n);if(t){const a=t.storage_ids.indexOf(e);-1!==a&&t.storage_ids.splice(a,1)}}if(a.parent_id=t,this.hasCharacter(t)){const a=this.getCharacter(t);a&&a.inventory.set(e,1)}else if(this.storages.has(t)){const a=this.storages.get(t);a&&a.inventory.set(e,1)}else if(this.locations.has(t)){const a=this.locations.get(t);a&&a.storage_ids.push(e)}}addPromise(e,t,a,n){const o=Array.from(this.promises.keys()).map(e=>parseInt(e.substring(1))).filter(e=>!isNaN(e)),r=`p${Math.max(...o,0)+1}`,l=new To(e,t,a,n);this.promises.set(r,l)}addSummary(e,t,a){const n=this.datetime.clone();this.summaries.push(new Yo(n,e,t,a))}getLatestSummaryLastMessageId(){const e=getVariables({type:'chat'}),t=e.settings?.exclude_latest_summaries||0;if(t>=this.summaries.length)return-1;const a=this.summaries.slice(0,this.summaries.length-t);return 0===a.length?-1:a[a.length-1].last_message_id}getGeneralStatusPrompt(){const e=this.datetime.year,t=this.datetime.month,a=this.datetime.date,n=this.datetime.hours,o=this.datetime.minutes,r=`${e}å¹´${t}æœˆ${a}æ—¥ (æ˜ŸæœŸ${['æ—¥','ä¸€','äºŒ','ä¸‰','å››','äº”','å…­'][this.datetime.toDate().getDay()]}) ${n.toString().padStart(2,'0')}:${o.toString().padStart(2,'0')}`,l=this.getCurrentLocations().map(e=>`${e.name}(${e.id})`).join('-');let i='<GeneralStatus>\n';return i+=`  ${Oo.DATETIME_KEY}:${r}\n`,i+=`  ${Oo.CURRENT_LOCATION_ID_KEY}:${l}\n`,i+=`  ${Oo.WEATHER_KEY}:${this.weather}\n`,i+=`  ${Oo.CURRENT_EVENT_KEY}:${this.current_event}\n`,i+='</GeneralStatus>\n',i}getUserPrompt(){const e=this.active_characters.get('c1');let t=`<${e.name}Status>\n`;t+='id: c1\n',t+=`  ${Io.NAME_KEY}:${e.name}\n`,t+=`  ${Io.AGE_KEY}:${e.age}\n`,t+=`  ${Io.GENDER_KEY}:${e.gender}\n`,t+=`  ${Io.IDENTITY_KEY}:${e.identity}\n`,t+=`  ${Io.INTRODUCTION_KEY}:${e.introduction}\n`,t+=`  ${Io.PERSONALITY_KEY}:${e.personality}\n`,t+=`  ${Io.HEIGHT_KEY}:${e.height}\n`,t+=`  ${Io.WEIGHT_KEY}:${e.weight}\n`,t+=`  ${Io.CHEST_SIZE_KEY}:${e.chest_size}\n`,e.cup_size&&(t+=`  ${Io.CUP_SIZE_KEY}:${e.cup_size}\n`),t+=`  ${Io.WAIST_SIZE_KEY}:${e.waist_size}\n`,t+=`  ${Io.HIPS_SIZE_KEY}:${e.hips_size}\n`,t+=`  ${Io.HAIRSTYLE_KEY}:${e.hairstyle}\n`,t+=`  ${Io.CLOTHES_KEY}:${e.clothes}\n`,t+=`  ${Io.BIRTHDAY_KEY}:${e.birthday.month}æœˆ${e.birthday.date}æ—¥\n`,t+=`  ${Io.FAVOURITE_KEY}:${e.favourite}\n`,t+=`  ${Io.EXTRA_INFORMATION_KEY}:${e.extra_information}\n`,t+=`  ${Io.MONEY_KEY}:${e.money}\n`,t+=`  ${Io.RELATIONS_KEY}:\n`;for(const[a,n]of e.relations)t+=`    ${a}:${n}\n`;t+=`  ${Io.INVENTORY_KEY}:\n`;for(const[a,n]of e.inventory)t+=`    ${a}:${n}\n`;return t+=`</${e.name}Status>\n`,t}getActiveCharacterPrompt(){let e='<ActiveCharacterStatus>\n';for(const[t,a]of this.active_characters)if('c1'!==t){e+=`id: ${t}\n`,e+=`  ${Io.NAME_KEY}:${a.name}\n`,e+=`  ${Io.AGE_KEY}:${a.age}\n`,e+=`  ${Io.GENDER_KEY}:${a.gender}\n`,e+=`  ${Io.IDENTITY_KEY}:${a.identity}\n`,e+=`  ${Io.INTRODUCTION_KEY}:${a.introduction}\n`,e+=`  ${Io.PERSONALITY_KEY}:${a.personality}\n`,e+=`  ${Io.HEIGHT_KEY}:${a.height}\n`,e+=`  ${Io.WEIGHT_KEY}:${a.weight}\n`,e+=`  ${Io.CHEST_SIZE_KEY}:${a.chest_size}\n`,a.cup_size&&(e+=`  ${Io.CUP_SIZE_KEY}:${a.cup_size}\n`),e+=`  ${Io.WAIST_SIZE_KEY}:${a.waist_size}\n`,e+=`  ${Io.HIPS_SIZE_KEY}:${a.hips_size}\n`,e+=`  ${Io.HAIRSTYLE_KEY}:${a.hairstyle}\n`,e+=`  ${Io.CLOTHES_KEY}:${a.clothes}\n`,e+=`  ${Io.BIRTHDAY_KEY}:${a.birthday.month}æœˆ${a.birthday.date}æ—¥\n`,e+=`  ${Io.FAVOURITE_KEY}:${a.favourite}\n`,e+=`  ${Io.EXTRA_INFORMATION_KEY}:${a.extra_information}\n`,e+=`  ${Io.MONEY_KEY}:${a.money}\n`,e+=`  ${Io.MOOD_KEY}:${a.mood}\n`,e+=`  ${Io.HORNY_KEY}:${a.horny}\n`,e+=`  ${Io.RELATIONS_KEY}:\n`;for(const[t,n]of a.relations)e+=`    ${t}:${n}\n`;e+=`  ${Io.FRIENDSHIPS_KEY}:\n`;for(const[t,n]of a.friendships)e+=`    ${t}:${n}\n`;e+=`  ${Io.LOVES_KEY}:\n`;for(const[t,n]of a.loves)e+=`    ${t}:${n}\n`;e+=`  ${Io.INVENTORY_KEY}:\n`;for(const[t,n]of a.inventory)e+=`    ${t}:${n}\n`;e+='\n'}return e+='</ActiveCharacterStatus>\n',e}getDeactiveCharacterPrompt(){let e='<DeactiveCharacterStatus>\n';for(const[t,a]of this.deactive_characters){e+=`id: ${t}\n`,e+=`  ${Io.NAME_KEY}:${a.name}\n`,e+=`  ${Io.AGE_KEY}:${a.age}\n`,e+=`  ${Io.GENDER_KEY}:${a.gender}\n`,e+=`  ${Io.IDENTITY_KEY}:${a.identity}\n`,e+=`  ${Io.INTRODUCTION_KEY}:${a.introduction}\n`,e+=`  ${Io.PERSONALITY_KEY}:${a.personality}\n`,e+=`  ${Io.FAVOURITE_KEY}:${a.favourite}\n`,e+=`  ${Io.EXTRA_INFORMATION_KEY}:${a.extra_information}\n`,e+=`  ${Io.RELATIONS_KEY}:\n`;for(const[t,n]of a.relations)e+=`    ${t}:${n}\n`;e+=`  ${Io.FRIENDSHIPS_KEY}:\n`;for(const[t,n]of a.friendships)e+=`    ${t}:${n}\n`;e+=`  ${Io.LOVES_KEY}:\n`;for(const[t,n]of a.loves)e+=`    ${t}:${n}\n`;e+='\n'}return e+='</DeactiveCharacterStatus>\n',e}getItemPrompt(){let e='<ItemTable>\n';e+=`|id|${zo.NAME_KEY}|${zo.DESCRIPTION_KEY}|${zo.VALUE_KEY}|\n`,e+='|---|---|---|---|\n';for(const[t,a]of this.items)e+=`|${t}|${a.name}|${a.description}|${a.value}|\n`;return e+='</ItemTable>\n',e}getLocationPrompt(){let e='<LocationTable>\n';e+=`|id|${Do.NAME_KEY}|${Do.LOCATION_KEY}|${Do.DESCRIPTION_KEY}|${Do.SUB_LOCATION_IDS_KEY}|${Do.STORAGE_IDS_KEY}|\n`,e+='|---|---|---|---|---|\n';for(const[t,a]of this.locations)e+=`|${t}|${a.name}|${a.location}|${a.description}|${a.sub_location_ids.join(',')}|${a.storage_ids.join(',')}|\n`;return e+='</LocationTable>\n',e}getStoragePrompt(){let e='<StorageTable>\n';e+=`|id|${Mo.NAME_KEY}|${Mo.DESCRIPTION_KEY}|${Mo.MONEY_KEY}|${Mo.INVENTORY_KEY}|\n`,e+='|---|---|---|---|---|\n';for(const[t,a]of this.storages){const n=Array.from(a.inventory.entries()).map(([e,t])=>`${e}:${t}`).join(', ');e+=`|${t}|${a.name}|${a.description}|${a.money}|${n}|\n`}return e+='</StorageTable>\n',e}getPromisePrompt(){let e='<PromiseTable>\n';e+=`|id|${To.DEADLINE_KEY}|${To.CHARACTER_IDS_KEY}|${To.LOCATION_ID_KEY}|${To.DESCRIPTION_KEY}|\n`,e+='|---|---|---|---|---|\n';for(const[t,a]of this.promises){e+=`|${t}|${`${a.deadline.year}å¹´${a.deadline.month}æœˆ${a.deadline.date}æ—¥ ${a.deadline.hours.toString().padStart(2,'0')}:${a.deadline.minutes.toString().padStart(2,'0')}`}|${a.character_ids.join(',')}|${a.location_id}|${a.description}|\n`}return e+='</PromiseTable>\n',e}getSummaryPrompt(){const e=getVariables({type:'chat'}),t=e.settings?.exclude_latest_summaries||0,a=this.summaries.slice(0,this.summaries.length-t);let n='<HistorySummary>\n';n+=`|${Yo.DATETIME_KEY}|${Yo.SUMMARY_KEY}|${Yo.WEIGHTING_KEY}|\n`,n+='|---|---|---|\n';for(const e of a){n+=`|${`${e.datetime.year}å¹´${e.datetime.month}æœˆ${e.datetime.date}æ—¥ ${e.datetime.hours.toString().padStart(2,'0')}:${e.datetime.minutes.toString().padStart(2,'0')}`}|${e.summary}|${e.weighting.toFixed(2)}|\n`}return n+='</HistorySummary>\n',n}getStartingBackground(){let e='<StartingBackground>\n';return e+=`${getVariables({type:'chat'}).start_settings.information}\n`,e+='</StartingBackground>\n',e}injectPrompt(e){let t='';e&&(t+=`${this.getStartingBackground()}\n`),t+=`${this.getSummaryPrompt()}`;let a=`${this.getGeneralStatusPrompt()}\n`;a+=`${this.getUserPrompt()}\n`,a+=`${this.getActiveCharacterPrompt()}\n`,a+=`${this.getDeactiveCharacterPrompt()}\n`,a+=`${this.getItemPrompt()}\n`,a+=`${this.getStoragePrompt()}\n`,a+=`${this.getLocationPrompt()}\n`,a+=`${this.getPromisePrompt()}`,injectPrompts([{id:'pre-chat_prompt',position:'in_chat',depth:9999,role:'system',content:t,should_scan:!0}]),injectPrompts([{id:'post-chat_prompt',position:'in_chat',depth:0,role:'system',content:a,should_scan:!0}])}}const Ao={class:'start-container'},Ro={class:'section'},Ko={class:'datetime-group'},Uo={class:'datetime-inputs'},Lo={class:'datetime-input'},Fo={class:'datetime-input'},jo={class:'datetime-input'},Ho={class:'datetime-input'},Po={class:'datetime-input'},Go={key:0,class:'generated-result'},qo={class:'generated-text'},Xo={class:'input-group'},Wo=['value'],Jo={key:0,class:'generated-result'},Zo={class:'generated-text'},Qo={class:'input-group'},er={key:0,class:'generated-result'},tr={class:'generated-text'},ar={class:'input-group'},nr={key:0,class:'generated-result'},or={class:'generated-text'},rr={class:'input-group'},lr={class:'item-actions'},ir=['disabled'],sr={key:0,class:'loading-spinner'},dr=['disabled'],cr={class:'completion-status'},ur={class:'status-value'},pr={class:'status-value'},mr={class:'status-value'},vr={class:'status-value'},gr={class:'status-value'},br={class:'status-value'},fr={class:'status-value'},hr={class:'settings-actions'},xr={class:'action-btn import'},yr={class:'start-action'},_r=['disabled'],Er=(0,t.defineComponent)({__name:'start_tab',setup(e){const a=(0,t.ref)(''),n=(0,t.ref)(''),o=(0,t.ref)(''),r=(0,t.ref)(''),l=(0,t.ref)(''),i=(0,t.ref)(''),s=(0,t.ref)(''),d=(0,t.ref)(''),c=(0,t.ref)(''),u=(0,t.ref)(!1),p=(0,t.ref)(''),m=(0,t.ref)(''),v=(0,t.ref)(''),g=(0,t.ref)(''),b=(0,t.ref)(''),f=(0,t.ref)(''),h=(0,t.ref)(''),x=(0,t.ref)(''),y=(0,t.computed)(()=>{try{const e=getVariables({type:'chat'});return!!e?.world_info?.trim()}catch{return!1}}),E=(0,t.computed)(()=>{try{const e=getVariables({type:'chat'}),t=e?.locations||{},a=new Map;for(const[e,n]of Object.entries(t))a.set(e,n);return a}catch{return new Map}}),k=(0,t.computed)(()=>p.value||m.value||v.value||g.value||b.value||f.value||h.value||x.value),V=(0,t.computed)(()=>''!==String(a.value).trim()&&''!==String(n.value).trim()&&''!==String(o.value).trim()&&''!==String(r.value).trim()&&''!==String(l.value).trim()&&''!==String(i.value).trim()&&''!==String(s.value).trim()&&''!==String(d.value).trim()),N=(0,t.computed)(()=>K()&&U()&&L()&&F()&&j()&&H()&&V.value),w=async()=>{u.value=!0;try{const e=I(),t=D(),c=T(),u=await generateRaw({user_input:e,ordered_prompts:[{role:'system',content:t},'char_description',{role:'system',content:c},'user_input']});Y(u);try{const e={start_year:a.value,start_month:n.value,start_date:o.value,start_hour:r.value,start_minute:l.value,selected_location:i.value,weather:s.value,information:d.value,generated_start_year:p.value,generated_start_month:m.value,generated_start_date:v.value,generated_start_hour:g.value,generated_start_minute:b.value,generated_location:f.value,generated_weather:h.value,generated_information:x.value};localStorage.setItem('start_tab_generated',JSON.stringify(e))}catch(e){console.error('ä¿å­˜ç”Ÿæˆå…§å®¹åˆ° localStorage å¤±æ•—:',e)}}catch(e){console.error('ç”Ÿæˆé–‹å§‹è¨­å®šå…§å®¹å¤±æ•—:',e)}finally{u.value=!1}},S=()=>{try{const e=getVariables({type:'chat'});e.start_settings={start_year:a.value,start_month:n.value,start_date:o.value,start_hour:r.value,start_minute:l.value,selected_location:i.value,weather:s.value,information:d.value},replaceVariables(e,{type:'chat'})}catch(e){console.error('ä¿å­˜é–‹å§‹è¨­å®šå¤±æ•—:',e)}},B=()=>{try{const e=getVariables({type:'chat'});e?.start_settings&&(a.value=String(e.start_settings.start_year||''),n.value=String(e.start_settings.start_month||''),o.value=String(e.start_settings.start_date||''),r.value=String(e.start_settings.start_hour||''),l.value=String(e.start_settings.start_minute||''),i.value=String(e.start_settings.selected_location||''),s.value=String(e.start_settings.weather||''),d.value=String(e.start_settings.information||''));const t=localStorage.getItem('start_tab_generated');if(t)try{const e=JSON.parse(t);a.value||(a.value=e.start_year||''),n.value||(n.value=e.start_month||''),o.value||(o.value=e.start_date||''),r.value||(r.value=e.start_hour||''),l.value||(l.value=e.start_minute||''),i.value||(i.value=e.selected_location||''),s.value||(s.value=e.weather||''),d.value||(d.value=e.information||''),p.value=e.generated_start_year||'',m.value=e.generated_start_month||'',v.value=e.generated_start_date||'',g.value=e.generated_start_hour||'',b.value=e.generated_start_minute||'',f.value=e.generated_location||'',h.value=e.generated_weather||'',x.value=e.generated_information||''}catch(e){console.error('è§£æžç”Ÿæˆå…§å®¹å¤±æ•—:',e)}const u=localStorage.getItem('start_tab_generation_requirement');u&&(c.value=u)}catch(e){console.error('åŠ è¼‰é–‹å§‹è¨­å®šå¤±æ•—:',e)}};(0,t.onMounted)(()=>{B()}),(0,t.watch)([a,n,o,r,l,i,s,d,c],()=>{S(),C()},{deep:!0}),(0,t.watch)(()=>getVariables({type:'chat'}),e=>{e?.start_settings&&B()},{deep:!0});const C=()=>{try{localStorage.setItem('start_tab_generation_requirement',c.value)}catch(e){console.error('ä¿å­˜ç”Ÿæˆè¦æ±‚åˆ° localStorage å¤±æ•—:',e)}},I=()=>{let e='è«‹æ ¹æ“šä¸–ç•ŒèƒŒæ™¯è³‡è¨Šã€ç”Ÿæˆè¦æ±‚åŠå·²æœ‰è³‡æ–™ï¼Œç‚ºéŠæˆ²é–‹å§‹è¨­å®šå®Œå–„ä»¥ä¸‹å…§å®¹ï¼š\n\n';return e+=`èµ·å§‹æ™‚é–“(å¹´)ï¼š${a.value||'æœªè¨­å®š'}\n`,e+=`èµ·å§‹æ™‚é–“(æœˆ)ï¼š${n.value||'æœªè¨­å®š'}\n`,e+=`èµ·å§‹æ™‚é–“(æ—¥)ï¼š${o.value||'æœªè¨­å®š'}\n`,e+=`èµ·å§‹æ™‚é–“(æ™‚)ï¼š${r.value||'æœªè¨­å®š'}\n`,e+=`èµ·å§‹æ™‚é–“(åˆ†)ï¼š${l.value||'æœªè¨­å®š'}\n`,e+=`èµ·å§‹åœ°é»žï¼š${i.value||'æœªè¨­å®š'}\n`,e+=`å¤©æ°£ï¼š${s.value||'æœªè¨­å®š'}\n`,e+=`èµ·å§‹è³‡è¨Šï¼š${d.value||'æœªè¨­å®š'}\n`,e},D=()=>{const e=getVariables({type:'chat'}).world_info;let t=getCharData('current').description;t=t.replace('{{getvar::world_info}}',e);let a='ä½ æ˜¯ä¸€å€‹å°ˆæ¥­çš„éŠæˆ²é–‹å§‹è¨­å®šè¨­è¨ˆåŠ©æ‰‹ï¼Œæ“…é•·å‰µé€ å¼•äººå…¥å‹çš„é–‹å ´å ´æ™¯ã€‚è«‹æ ¹æ“šæä¾›çš„ä¸–ç•ŒèƒŒæ™¯åŠç”Ÿæˆè¦æ±‚ï¼Œç‚ºéŠæˆ²é–‹å§‹è¨­å®šå®Œå–„å…§å®¹ã€‚\n';return a+='\n',a+='<ä¸–ç•ŒèƒŒæ™¯>\n','ä½ æ˜¯ä¸€å€‹å°ˆæ¥­çš„éŠæˆ²é–‹å§‹è¨­å®šè¨­è¨ˆåŠ©æ‰‹ï¼Œæ“…é•·å‰µé€ å¼•äººå…¥å‹çš„é–‹å ´å ´æ™¯ã€‚è«‹æ ¹æ“šæä¾›çš„ä¸–ç•ŒèƒŒæ™¯åŠç”Ÿæˆè¦æ±‚ï¼Œç‚ºéŠæˆ²é–‹å§‹è¨­å®šå®Œå–„å…§å®¹ã€‚\n\n<ä¸–ç•ŒèƒŒæ™¯>\n'},T=()=>{let e='\n</ä¸–ç•ŒèƒŒæ™¯>\n';return e+='\n',e+=`${(()=>{const e=getVariables({type:'chat'}).characters.c1,t=`${e.å§“æ°}${e.åå­—}`;let a=`<${t}Status>\n`;return a+='idï¼šc1\n',a+=`  å§“æ°ï¼š${e.å§“æ°||''}\n`,a+=`  åå­—ï¼š${e.åå­—||''}\n`,a+=`  å¹´é½¡ï¼š${e.å¹´é½¡||''}\n`,a+=`  æ€§åˆ¥ï¼š${e.æ€§åˆ¥||''}\n`,a+=`  èº«ä»½ï¼š${e.èº«ä»½||''}\n`,a+=`  èº«é«˜ï¼š${e.èº«é«˜||''}\n`,a+=`  é«”é‡ï¼š${e.é«”é‡||''}\n`,a+=`  èƒ¸åœï¼š${e.èƒ¸åœ||''}\n`,a+=`  ç½©æ¯ï¼š${e.ç½©æ¯||''}\n`,a+=`  è…°åœï¼š${e.è…°åœ||''}\n`,a+=`  è‡€åœï¼š${e.è‡€åœ||''}\n`,a+=`  é«®åž‹ï¼š${e.é«®åž‹||''}\n`,a+=`  æ¨£è²Œï¼š${e.æ¨£è²Œ||''}\n`,a+=`  è¡£è‘—ï¼š${e.è¡£è‘—||''}\n`,a+=`  ç°¡ä»‹ï¼š${e.ç°¡ä»‹||''}\n`,a+=`  æ€§æ ¼ï¼š${e.æ€§æ ¼||''}\n`,a+=`  æ„›å¥½ï¼š${e.æ„›å¥½||''}\n`,a+=`  é‡‘éŒ¢ï¼š${e.é‡‘éŒ¢||''}\n`,a+=`  ç”Ÿæ—¥æœˆä»½ï¼š${e.ç”Ÿæ—¥æœˆä»½||''}\n`,a+=`  ç”Ÿæ—¥æ—¥æœŸï¼š${e.ç”Ÿæ—¥æ—¥æœŸ||''}\n`,a+=`  å…¶ä»–é‡è¦è³‡è¨Šï¼š${e.å…¶ä»–é‡è¦è³‡è¨Š||''}\n`,a+=`  é—œä¿‚ï¼š${M(e.é—œä¿‚)}\n`,a+=`  å‹å¥½åº¦ï¼š${M(e.å‹å¥½åº¦)}\n`,a+=`  æ„›æƒ…åº¦ï¼š${M(e.æ„›æƒ…åº¦)}\n`,a+=`</${t}Status>`,a})()}\n`,e+='\n',e+=`${(()=>{const e=getVariables({type:'chat'}).characters;if(void 0===e)return'';let t='<CharacterStatus>\n';for(const[a,n]of Object.entries(e))'c1'!==a&&(t+=`idï¼š${a}\n`,t+=`  å§“æ°ï¼š${n.å§“æ°||''}\n`,t+=`  åå­—ï¼š${n.åå­—||''}\n`,t+=`  å¹´é½¡ï¼š${n.å¹´é½¡||''}\n`,t+=`  æ€§åˆ¥ï¼š${n.æ€§åˆ¥||''}\n`,t+=`  èº«ä»½ï¼š${n.èº«ä»½||''}\n`,t+=`  èº«é«˜ï¼š${n.èº«é«˜||''}\n`,t+=`  é«”é‡ï¼š${n.é«”é‡||''}\n`,t+=`  èƒ¸åœï¼š${n.èƒ¸åœ||''}\n`,t+=`  ç½©æ¯ï¼š${n.ç½©æ¯||''}\n`,t+=`  è…°åœï¼š${n.è…°åœ||''}\n`,t+=`  è‡€åœï¼š${n.è‡€åœ||''}\n`,t+=`  é«®åž‹ï¼š${n.é«®åž‹||''}\n`,t+=`  æ¨£è²Œï¼š${n.æ¨£è²Œ||''}\n`,t+=`  è¡£è‘—ï¼š${n.è¡£è‘—||''}\n`,t+=`  ç°¡ä»‹ï¼š${n.ç°¡ä»‹||''}\n`,t+=`  æ€§æ ¼ï¼š${n.æ€§æ ¼||''}\n`,t+=`  æ„›å¥½ï¼š${n.æ„›å¥½||''}\n`,t+=`  é‡‘éŒ¢ï¼š${n.é‡‘éŒ¢||''}\n`,t+=`  å¿ƒæƒ…ï¼š${n.å¿ƒæƒ…||''}\n`,t+=`  æ€§æ…¾ï¼š${n.æ€§æ…¾||''}\n`,t+=`  ç”Ÿæ—¥æœˆä»½ï¼š${n.ç”Ÿæ—¥æœˆä»½||''}\n`,t+=`  ç”Ÿæ—¥æ—¥æœŸï¼š${n.ç”Ÿæ—¥æ—¥æœŸ||''}\n`,t+=`  å…¶ä»–é‡è¦è³‡è¨Šï¼š${n.å…¶ä»–é‡è¦è³‡è¨Š||''}\n`,t+=`  é—œä¿‚ï¼š${M(n.é—œä¿‚)}\n`,t+=`  å‹å¥½åº¦ï¼š${M(n.å‹å¥½åº¦)}\n`,t+=`  æ„›æƒ…åº¦ï¼š${M(n.æ„›æƒ…åº¦)}\n\n`);return t+='</CharacterStatus>',t})()}\n`,e+='\n',e+=`${(()=>{let e='<ItemTable>\n';e+='|id|åç¨±|æè¿°|åƒ¹å€¼|\n',e+='|---|---|---|---|\n';const t=getVariables({type:'chat'}).items;if(void 0===t)return'';for(const[a,n]of Object.entries(t))e+=`|${a}|${n.name}|${n.description}|${n.value}|\n`;return e+='</ItemTable>',e})()}\n`,e+='\n',e+=`${(()=>{let e='<LocationTable>\n';e+='|id|åç¨±|æè¿°|å­åœ°é»ž|\n',e+='|---|---|---|---|\n';const t=getVariables({type:'chat'}).locations;if(void 0===t)return'';for(const[a,n]of Object.entries(t)){const t=n.sub_location?n.sub_location.join(', '):'';e+=`|${a}|${n.name}|${n.description}|${t}|\n`}return e+='</LocationTable>',e})()}\n`,e+='\n',e+=`${(()=>{let e='';const t=getVariables({type:'chat'}).extra_world_info;if(void 0===t)return'';for(const a of Array.from(t))''!==a.name&&''!==a.content&&(e+=`<${a.name}>\n`,e+=`${a.content}\n`,e+=`</${a.name}>\n`,e+='\n');return e})()}\n`,e+='\n',e+='<ç”Ÿæˆè¦æ±‚>\n',e+=`${c.value||'ç„¡ç‰¹æ®Šè¦æ±‚'}\n`,e+='</ç”Ÿæˆè¦æ±‚>\n',e+='\n',e+='<example>\n',e+='# The following is an example of user input and expected output. Please strictly follow the style and format to generate the output. Output anything other than this format is prohibited.\n',e+='èµ·å§‹æ™‚é–“(å¹´)ï¼šnumber\n',e+='èµ·å§‹æ™‚é–“(æœˆ)ï¼šnumber[1~12]\n',e+='èµ·å§‹æ™‚é–“(æ—¥)ï¼šnumber[1~31]\n',e+='èµ·å§‹æ™‚é–“(æ™‚)ï¼šnumber[0~23]\n',e+='èµ·å§‹æ™‚é–“(åˆ†)ï¼šnumber[0~59]\n',e+='èµ·å§‹åœ°é»žï¼šlocation id\n',e+='å¤©æ°£ï¼š\'å¤©æ°£æè¿°ï¼Œå¦‚ï¼šæ™´æœ—ï¼Œé›¨å¤©\'\n',e+='èµ·å§‹è³‡è¨Šï¼š\'éŠæˆ²é–‹å§‹æ™‚çš„å ´æ™¯æè¿°æˆ–é‡è¦è³‡è¨Š\'\n',e+='</example>\n',e},M=e=>'['+Object.entries(e).map(([e,t])=>'string'==typeof t?`'${e}':'${t}'`:`'${e}':${t}`).join(', ')+']',Y=e=>{const t=e.split('\n'),a={};for(const e of t){const t=e.trim();if(t.includes('ï¼š')){const[e,n]=t.split('ï¼š',2),o=n?.trim().replace(/^["']|["']$/g,'')||'';switch(e.trim()){case'èµ·å§‹æ™‚é–“(å¹´)':a.generated_start_year=o;break;case'èµ·å§‹æ™‚é–“(æœˆ)':a.generated_start_month=o;break;case'èµ·å§‹æ™‚é–“(æ—¥)':a.generated_start_date=o;break;case'èµ·å§‹æ™‚é–“(æ™‚)':a.generated_start_hour=o;break;case'èµ·å§‹æ™‚é–“(åˆ†)':a.generated_start_minute=o;break;case'èµ·å§‹åœ°é»ž':a.generated_location=o;break;case'å¤©æ°£':a.generated_weather=o;break;case'èµ·å§‹è³‡è¨Š':a.generated_information=o}}}Object.assign(p,{value:a.generated_start_year||''}),Object.assign(m,{value:a.generated_start_month||''}),Object.assign(v,{value:a.generated_start_date||''}),Object.assign(g,{value:a.generated_start_hour||''}),Object.assign(b,{value:a.generated_start_minute||''}),Object.assign(f,{value:a.generated_location||''}),Object.assign(h,{value:a.generated_weather||''}),Object.assign(x,{value:a.generated_information||''})},O=()=>{p.value&&(a.value=p.value),m.value&&(n.value=m.value),v.value&&(o.value=v.value),g.value&&(r.value=g.value),b.value&&(l.value=b.value),p.value='',m.value='',v.value='',g.value='',b.value=''},A=()=>{O(),f.value&&(i.value=f.value),h.value&&(s.value=h.value),x.value&&(d.value=x.value),f.value='',h.value='',x.value='',S();try{localStorage.removeItem('start_tab_generated')}catch(e){console.error('å¾ž localStorage ç§»é™¤ç”Ÿæˆå…§å®¹å¤±æ•—:',e)}},R=e=>''===e||(null===e||void 0===e),K=()=>''!==(getVariables({type:'chat'}).world_info||'').trim(),U=()=>{const e=getVariables({type:'chat'}),t=e?.characters?.c1;if(!t)return!1;for(const e of Object.values(t))if(R(e))return!1;return!0},L=()=>{const e=getVariables({type:'chat'}),t=e?.characters;if(!t)return!1;for(const[e,a]of Object.entries(t))if('c1'!==e)for(const e of Object.values(a))if(R(e))return!1;return!0},F=()=>{const e=getVariables({type:'chat'}),t=e?.items;if(!t)return!1;for(const e of Object.values(t))for(const t of Object.values(e))if(R(t))return!1;return!0},j=()=>{const e=getVariables({type:'chat'}),t=e?.extra_world_info;if(!t)return!1;for(const e of Object.values(t))for(const t of Object.values(e))if(R(t))return!1;return!0},H=()=>{const e=getVariables({type:'chat'}),t=e?.locations;if(!t)return!1;const a=Object.keys(t);if(0===a.length)return!1;for(const e of a){const a=t[e];if(!a?.name?.trim()||!a?.location?.trim()||!a?.description?.trim())return!1}return!0},P=()=>{const e=parseInt(a.value),t=parseInt(n.value),d=parseInt(o.value),c=parseInt(r.value),u=parseInt(l.value),p=getVariables({type:'chat'}),m=p?.locations||{},v=i.value,g=s.value;let b=getVariables({type:'chat'});const f=b.characters,h=new Map,x=new Map;for(const[a,n]of Object.entries(f)){const o=`${n.å§“æ°}${n.åå­—}`,r=parseInt(n.å¹´é½¡),l=parseInt(n.ç”Ÿæ—¥æ—¥æœŸ),i=parseInt(n.ç”Ÿæ—¥æœˆä»½);let s=e-r;(t<i||t===i&&d<l)&&(s-=1);const c=new $o(new Date(s,i-1,l));let u=n.ç½©æ¯;/^[a-zA-Z]$/.test(n.ç½©æ¯)||(u=null);const p=new Io(o,r,n.æ€§åˆ¥,n.èº«ä»½,n.ç°¡ä»‹,n.æ€§æ ¼,n.èº«é«˜,n.é«”é‡,n.èƒ¸åœ,u,n.è…°åœ,n.è‡€åœ,n.é«®åž‹,n.æ¨£è²Œ,n.è¡£è‘—,c,n.æ„›å¥½,n.å…¶ä»–é‡è¦è³‡è¨Š,n.é‡‘éŒ¢,n.å¿ƒæƒ…,n.æ€§æ…¾,new Map(Object.entries(n.é—œä¿‚)),new Map(Object.entries(n.å‹å¥½åº¦)),new Map(Object.entries(n.æ„›æƒ…åº¦)),new Map(Object.entries(n.æ‰€æŒç‰©)));'c1'===a?h.set(a,p):x.set(a,p)}const y=b.items,E=new Map;for(const[e,t]of Object.entries(y)){const a=new zo(t.name,t.description,t.value);E.set(e,a)}const k=new Map;for(const[e,t]of Object.entries(m)){const a=new Do(e,t.name,t.location,t.description,null,t.sub_location,t.storage_ids||[]);k.set(e,a)}for(const[e,t]of k.entries())for(const a of t.sub_location_ids)k.has(a)&&(k.get(a).parent_location_id=e);const V=new Oo(new $o(new Date(e,t-1,d,c,u)),v,g,Oo.CURRENT_EVENT_NULL_VALUE,h,x,E,new Map,k,new Map,[]);V.saveAsVariable(-1),V.saveAsVariable(0),b=getVariables({type:'chat'}),b.is_initialized=!0,replaceVariables(b,{type:'chat'}),eventEmit('initialization_completed')},G=()=>{try{const e=getVariables({type:'chat'}),t={world_info:e.world_info||'',characters:e.characters||{},items:e.items||{},storages:e.storages||{},locations:e.locations||{},extra_world_info:e.extra_world_info||[],extra_world_info_prompt:e.extra_world_info_prompt||'',start_settings:e.start_settings||{}},a=JSON.stringify(t,null,2),n=new Blob([a],{type:'application/json'}),o=URL.createObjectURL(n),r=document.createElement('a');r.href=o,r.download=`initialization_settings_${(new Date).toISOString().split('T')[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(o),toastr.success('åˆå§‹åŒ–è¨­å®šå·²åŒ¯å‡º')}catch(e){console.error('åŒ¯å‡ºåˆå§‹åŒ–è¨­å®šå¤±æ•—:',e),toastr.error('åŒ¯å‡ºå¤±æ•—')}},q=e=>{const t=e.target.files?.[0];if(!t)return;const a=new FileReader;a.onload=e=>{try{const t=e.target?.result,a=JSON.parse(t),n=['world_info','characters','items','storages','locations','extra_world_info','extra_world_info_prompt','start_settings'];for(const e of n)if(!(e in a))throw new Error(`ç¼ºå°‘å¿…è¦çš„éµ: ${e}`);const o=getVariables({type:'chat'});o.world_info=a.world_info,o.characters=a.characters,o.items=a.items,o.storages=a.storages,o.locations=a.locations,o.extra_world_info=a.extra_world_info,o.extra_world_info_prompt=a.extra_world_info_prompt,o.start_settings=a.start_settings,replaceVariables(o,{type:'chat'}),B(),toastr.success('åˆå§‹åŒ–è¨­å®šå·²åŒ¯å…¥')}catch(e){console.error('åŒ¯å…¥åˆå§‹åŒ–è¨­å®šå¤±æ•—:',e),toastr.error('åŒ¯å…¥å¤±æ•—ï¼šæª”æ¡ˆæ ¼å¼éŒ¯èª¤')}},a.readAsText(t)};return(e,S)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',Ao,[S[35]||(S[35]=(0,t.createElementVNode)('h3',null,'é–‹å§‹è¨­å®š',-1)),(0,t.createElementVNode)('div',Ro,[(0,t.createElementVNode)('div',Ko,[S[18]||(S[18]=(0,t.createElementVNode)('label',null,'èµ·å§‹æ™‚é–“',-1)),(0,t.createElementVNode)('div',Uo,[(0,t.createElementVNode)('div',Lo,[(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':S[0]||(S[0]=e=>a.value=e),type:'number',class:'form-input',placeholder:'å¹´',min:'1900',max:'2100'},null,512),[[t.vModelText,a.value]]),S[12]||(S[12]=(0,t.createElementVNode)('span',{class:'unit'},'å¹´',-1))]),(0,t.createElementVNode)('div',Fo,[(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':S[1]||(S[1]=e=>n.value=e),type:'number',class:'form-input',placeholder:'æœˆ',min:'1',max:'12'},null,512),[[t.vModelText,n.value]]),S[13]||(S[13]=(0,t.createElementVNode)('span',{class:'unit'},'æœˆ',-1))]),(0,t.createElementVNode)('div',jo,[(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':S[2]||(S[2]=e=>o.value=e),type:'number',class:'form-input',placeholder:'æ—¥',min:'1',max:'31'},null,512),[[t.vModelText,o.value]]),S[14]||(S[14]=(0,t.createElementVNode)('span',{class:'unit'},'æ—¥',-1))]),(0,t.createElementVNode)('div',Ho,[(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':S[3]||(S[3]=e=>r.value=e),type:'number',class:'form-input',placeholder:'æ™‚',min:'0',max:'23'},null,512),[[t.vModelText,r.value]]),S[15]||(S[15]=(0,t.createElementVNode)('span',{class:'unit'},'æ™‚',-1))]),(0,t.createElementVNode)('div',Po,[(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':S[4]||(S[4]=e=>l.value=e),type:'number',class:'form-input',placeholder:'åˆ†',min:'0',max:'59'},null,512),[[t.vModelText,l.value]]),S[16]||(S[16]=(0,t.createElementVNode)('span',{class:'unit'},'åˆ†',-1))])]),p.value||m.value||v.value||g.value||b.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',Go,[S[17]||(S[17]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',qo,(0,t.toDisplayString)(p.value?`å¹´ï¼š${p.value}\n`:'')+(0,t.toDisplayString)(m.value?`æœˆï¼š${m.value}\n`:'')+(0,t.toDisplayString)(v.value?`æ—¥ï¼š${v.value}\n`:'')+(0,t.toDisplayString)(g.value?`æ™‚ï¼š${g.value}\n`:'')+(0,t.toDisplayString)(b.value?`åˆ†ï¼š${b.value}`:''),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:O},'ä½¿ç”¨')])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',Xo,[S[21]||(S[21]=(0,t.createElementVNode)('label',null,'èµ·å§‹åœ°é»ž',-1)),(0,t.withDirectives)((0,t.createElementVNode)('select',{'onUpdate:modelValue':S[5]||(S[5]=e=>i.value=e),class:'form-input'},[S[19]||(S[19]=(0,t.createElementVNode)('option',{value:''},'è«‹é¸æ“‡èµ·å§‹åœ°é»ž',-1)),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)((0,t.unref)(E),([e,a])=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:e,value:e},(0,t.toDisplayString)(a.name)+' ('+(0,t.toDisplayString)(e)+') ',9,Wo))),128))],512),[[t.vModelSelect,i.value]]),f.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',Jo,[S[20]||(S[20]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',Zo,(0,t.toDisplayString)(f.value),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:S[6]||(S[6]=e=>{i.value=f.value,f.value=''})},' ä½¿ç”¨ ')])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',Qo,[S[23]||(S[23]=(0,t.createElementVNode)('label',null,'å¤©æ°£',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':S[7]||(S[7]=e=>s.value=e),type:'text',class:'form-input',placeholder:'è¼¸å…¥å¤©æ°£'},null,512),[[t.vModelText,s.value]]),h.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',er,[S[22]||(S[22]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',tr,(0,t.toDisplayString)(h.value),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:S[8]||(S[8]=e=>{s.value=h.value,h.value=''})},' ä½¿ç”¨ ')])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',ar,[S[25]||(S[25]=(0,t.createElementVNode)('label',null,'èµ·å§‹è³‡è¨Š',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{'onUpdate:modelValue':S[9]||(S[9]=e=>d.value=e),class:'form-textarea',placeholder:'è¼¸å…¥èµ·å§‹è³‡è¨Š',rows:'3'},null,512),[[t.vModelText,d.value]]),x.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',nr,[S[24]||(S[24]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',or,(0,t.toDisplayString)(x.value),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:S[10]||(S[10]=e=>{d.value=x.value,x.value=''})},' ä½¿ç”¨ ')])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',rr,[S[26]||(S[26]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆè¦æ±‚',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{'onUpdate:modelValue':S[11]||(S[11]=e=>c.value=e),class:'form-textarea',placeholder:'è¼¸å…¥ç”Ÿæˆé€™äº›é …ç›®çš„è¦æ±‚',rows:'3'},null,512),[[t.vModelText,c.value]])]),(0,t.createElementVNode)('div',lr,[(0,t.createElementVNode)('button',{class:'action-btn generate',disabled:!(0,t.unref)(y)||u.value,onClick:w},[u.value?((0,t.openBlock)(),(0,t.createElementBlock)('span',sr)):(0,t.createCommentVNode)('v-if',!0),(0,t.createTextVNode)(' '+(0,t.toDisplayString)(u.value?'ç”Ÿæˆä¸­...':(0,t.unref)(y)?'ç”Ÿæˆå…§å®¹':'è«‹å…ˆå®Œæˆä¸–ç•ŒèƒŒæ™¯è¨­å®š'),1)],8,ir),(0,t.createElementVNode)('button',{class:'action-btn apply-all',disabled:!(0,t.unref)(k),onClick:A},' æ‡‰ç”¨å…¨éƒ¨ ',8,dr)])]),(0,t.createCommentVNode)(' æ¨™ç±¤é å®Œæˆç‹€æ…‹æŒ‡ç¤ºå™¨ '),(0,t.createElementVNode)('div',cr,[(0,t.createElementVNode)('div',{class:(0,t.normalizeClass)(['status-item',{completed:K()}])},[S[27]||(S[27]=(0,t.createElementVNode)('span',{class:'status-label'},'ä¸–ç•Œè³‡è¨Šï¼š',-1)),(0,t.createElementVNode)('span',ur,(0,t.toDisplayString)(K()?'å·²å®Œæˆ':'æœªå®Œæˆ'),1)],2),(0,t.createElementVNode)('div',{class:(0,t.normalizeClass)(['status-item',{completed:U()}])},[S[28]||(S[28]=(0,t.createElementVNode)('span',{class:'status-label'},'ç”¨æˆ¶è¨­å®šï¼š',-1)),(0,t.createElementVNode)('span',pr,(0,t.toDisplayString)(U()?'å·²å®Œæˆ':'æœªå®Œæˆ'),1)],2),(0,t.createElementVNode)('div',{class:(0,t.normalizeClass)(['status-item',{completed:L()}])},[S[29]||(S[29]=(0,t.createElementVNode)('span',{class:'status-label'},'è§’è‰²è¨­å®šï¼š',-1)),(0,t.createElementVNode)('span',mr,(0,t.toDisplayString)(L()?'å·²å®Œæˆ':'æœªå®Œæˆ'),1)],2),(0,t.createElementVNode)('div',{class:(0,t.normalizeClass)(['status-item',{completed:F()}])},[S[30]||(S[30]=(0,t.createElementVNode)('span',{class:'status-label'},'ç‰©å“è¨­å®šï¼š',-1)),(0,t.createElementVNode)('span',vr,(0,t.toDisplayString)(F()?'å·²å®Œæˆ':'æœªå®Œæˆ'),1)],2),(0,t.createElementVNode)('div',{class:(0,t.normalizeClass)(['status-item',{completed:j()}])},[S[31]||(S[31]=(0,t.createElementVNode)('span',{class:'status-label'},'é¡å¤–è¨­å®šï¼š',-1)),(0,t.createElementVNode)('span',gr,(0,t.toDisplayString)(j()?'å·²å®Œæˆ':'æœªå®Œæˆ'),1)],2),(0,t.createElementVNode)('div',{class:(0,t.normalizeClass)(['status-item',{completed:H()}])},[S[32]||(S[32]=(0,t.createElementVNode)('span',{class:'status-label'},'åœ°é»žè¨­å®šï¼š',-1)),(0,t.createElementVNode)('span',br,(0,t.toDisplayString)(H()?'å·²å®Œæˆ':'æœªå®Œæˆ'),1)],2),(0,t.createElementVNode)('div',{class:(0,t.normalizeClass)(['status-item',{completed:(0,t.unref)(V)}])},[S[33]||(S[33]=(0,t.createElementVNode)('span',{class:'status-label'},'é–‹å§‹è¨­å®šï¼š',-1)),(0,t.createElementVNode)('span',fr,(0,t.toDisplayString)((0,t.unref)(V)?'å·²å®Œæˆ':'æœªå®Œæˆ'),1)],2)]),(0,t.createCommentVNode)(' è¨­å®šåŒ¯å‡º/åŒ¯å…¥æŒ‰éˆ• '),(0,t.createElementVNode)('div',hr,[(0,t.createElementVNode)('button',{class:'action-btn export',onClick:G},'åŒ¯å‡ºåˆå§‹åŒ–è¨­å®š'),(0,t.createElementVNode)('label',xr,[S[34]||(S[34]=(0,t.createTextVNode)(' åŒ¯å…¥åˆå§‹åŒ–è¨­å®š ',-1)),(0,t.createElementVNode)('input',{type:'file',accept:'.json',style:{display:'none'},onChange:q},null,32)])]),(0,t.createCommentVNode)(' é–‹å§‹æŒ‰éˆ• '),(0,t.createElementVNode)('div',yr,[(0,t.createElementVNode)('button',{class:'action-btn start',disabled:!(0,t.unref)(N),onClick:P},'é–‹å§‹',8,_r)])]))}});n(7611);const kr=(0,d.A)(Er,[['__scopeId','data-v-ef5b3c42']]),Vr={class:'user-profile-container'},Nr={class:'section'},wr={class:'form-grid'},Sr={class:'input-group'},Br={key:0,class:'generated-result'},Cr={class:'generated-text'},$r={class:'input-group'},Ir={key:0,class:'generated-result'},zr={class:'generated-text'},Dr={class:'input-group'},Tr={key:0,class:'generated-result'},Mr={class:'generated-text'},Yr={class:'input-group'},Or={key:0,class:'generated-result'},Ar={class:'generated-text'},Rr={class:'input-group'},Kr={key:0,class:'generated-result'},Ur={class:'generated-text'},Lr={class:'input-group'},Fr={class:'birthday-inputs'},jr={key:0,class:'generated-result'},Hr={class:'generated-text'},Pr={class:'section'},Gr={class:'form-grid'},qr={class:'input-group'},Xr={key:0,class:'generated-result'},Wr={class:'generated-text'},Jr={class:'input-group'},Zr={key:0,class:'generated-result'},Qr={class:'generated-text'},el={class:'input-group'},tl={key:0,class:'generated-result'},al={class:'generated-text'},nl={class:'input-group'},ol={key:0,class:'generated-result'},rl={class:'generated-text'},ll={class:'input-group'},il={key:0,class:'generated-result'},sl={class:'generated-text'},dl={class:'input-group'},cl={key:0,class:'generated-result'},ul={class:'generated-text'},pl={class:'section'},ml={class:'form-grid'},vl={class:'input-group full-width'},gl={key:0,class:'generated-result'},bl={class:'generated-text'},fl={class:'input-group full-width'},hl={key:0,class:'generated-result'},xl={class:'generated-text'},yl={class:'input-group full-width'},_l={key:0,class:'generated-result'},El={class:'generated-text'},kl={class:'section'},Vl={class:'form-grid'},Nl={class:'input-group full-width'},wl={key:0,class:'generated-result'},Sl={class:'generated-text'},Bl={class:'input-group full-width'},Cl={key:0,class:'generated-result'},$l={class:'generated-text'},Il={class:'input-group full-width'},zl={key:0,class:'generated-result'},Dl={class:'generated-text'},Tl={class:'section'},Ml={class:'form-grid'},Yl={class:'input-group'},Ol={key:0,class:'generated-result'},Al={class:'generated-text'},Rl={class:'input-group full-width'},Kl={key:0,class:'generated-result'},Ul={class:'generated-text'},Ll={class:'input-group full-width'},Fl={class:'relations-list'},jl={class:'relation-target'},Hl=['value','onInput'],Pl=['onClick'],Gl={class:'add-relation'},ql=['value'],Xl=['disabled'],Wl={key:0,class:'generated-result'},Jl={class:'generated-text'},Zl={class:'input-group full-width'},Ql={class:'inventory-list'},ei={class:'inventory-target'},ti=['value','onInput'],ai=['onClick'],ni={class:'add-inventory'},oi=['value'],ri=['disabled'],li=['disabled'],ii={key:0,class:'generated-result'},si={class:'generated-text'},di={class:'section'},ci={class:'form-grid'},ui={class:'input-group full-width'},pi={class:'action-section'},mi=['disabled'],vi={key:0,class:'loading-spinner'},gi=['disabled'],bi=(0,t.defineComponent)({__name:'user_tab',setup(e){const a=(0,t.ref)({surname:'',name:'',age:null,gender:'',identity:'',introduction:'',personality:'',height:null,weight:null,chest_size:null,cup_size:'',waist_size:null,hips_size:null,hairstyle:'',appearance:'',clothes:'',birthday_month:null,birthday_day:null,favourite:'',extra_information:'',money:null,generation_requirement:'',é—œä¿‚:new Map,selected_relation_target:'',æ‰€æŒç‰©:new Map,selected_inventory_item:'',selected_inventory_quantity:1,generated_surname:'',generated_name:'',generated_age:'',generated_gender:'',generated_identity:'',generated_introduction:'',generated_personality:'',generated_height:'',generated_weight:'',generated_chest_size:'',generated_cup_size:'',generated_waist_size:'',generated_hips_size:'',generated_hairstyle:'',generated_appearance:'',generated_clothes:'',generated_birthday_month:'',generated_birthday_day:'',generated_favourite:'',generated_extra_information:'',generated_money:'',generated_relationship:'',generated_inventory:''}),n=(0,t.ref)(!1),o=()=>{const e=new Map,a=getVariables({type:'chat'});if(a?.items)for(const[n,o]of Object.entries(a.items))e.set(n,(0,t.reactive)(o));return Array.from(e.entries())},r=e=>{if('c1'===e){const e=getVariables({type:'chat'}),t=e.characters?.c1;if(t){return`${t.å§“æ°||''}${t.åå­—||''}`.trim()||'æœªçŸ¥ç”¨æˆ¶'}return'æœªçŸ¥ç”¨æˆ¶'}{const t=getVariables({type:'chat'}),a=t.characters?.[e];if(a){return`${a.å§“æ°||''}${a.åå­—||''}`.trim()||'æœªçŸ¥è§’è‰²'}return'æœªçŸ¥è§’è‰²'}},l=e=>{const t=getVariables({type:'chat'}),a=t.items?.[e];return a&&a.name||'æœªçŸ¥ç‰©å“'},i=(0,t.computed)(()=>a.value.generated_surname||a.value.generated_name||a.value.generated_age||a.value.generated_gender||a.value.generated_identity||a.value.generated_introduction||a.value.generated_personality||a.value.generated_height||a.value.generated_weight||a.value.generated_chest_size||a.value.generated_cup_size||a.value.generated_waist_size||a.value.generated_hips_size||a.value.generated_hairstyle||a.value.generated_appearance||a.value.generated_clothes||a.value.generated_birthday_month||a.value.generated_birthday_day||a.value.generated_favourite||a.value.generated_extra_information||a.value.generated_money||a.value.generated_relationship||a.value.generated_inventory),s=()=>{const e=new Map,a=getVariables({type:'chat'});if(a?.characters)for(const[n,o]of Object.entries(a.characters))'c1'!==n&&e.set(n,(0,t.reactive)(o));return Array.from(e.entries())},d=(0,t.computed)(()=>{try{const e=getVariables({type:'chat'});return e?.world_info?.trim()}catch{return!1}}),c=()=>{try{const e=getVariables({type:'chat'}),t=e.characters||{},n={å§“æ°:a.value.surname,åå­—:a.value.name,å¹´é½¡:a.value.age,æ€§åˆ¥:a.value.gender,èº«ä»½:a.value.identity,ç°¡ä»‹:a.value.introduction,æ€§æ ¼:a.value.personality,èº«é«˜:a.value.height,é«”é‡:a.value.weight,èƒ¸åœ:a.value.chest_size,ç½©æ¯:a.value.cup_size,è…°åœ:a.value.waist_size,è‡€åœ:a.value.hips_size,é«®åž‹:a.value.hairstyle,æ¨£è²Œ:a.value.appearance,è¡£è‘—:a.value.clothes,ç”Ÿæ—¥æœˆä»½:a.value.birthday_month,ç”Ÿæ—¥æ—¥æœŸ:a.value.birthday_day,æ„›å¥½:a.value.favourite,å…¶ä»–é‡è¦è³‡è¨Š:a.value.extra_information,é‡‘éŒ¢:a.value.money,å¿ƒæƒ…:50,æ€§æ…¾:0,é—œä¿‚:Object.fromEntries(a.value.é—œä¿‚||new Map),å‹å¥½åº¦:{},æ„›æƒ…åº¦:{},æ‰€æŒç‰©:Object.fromEntries(a.value.æ‰€æŒç‰©||new Map)};t.c1=n,e.characters=t,replaceVariables(e,{type:'chat'})}catch(e){console.error('Failed to save user data to chat variables:',e)}},u=e=>'['+Object.entries(e).map(([e,t])=>'string'==typeof t?`'${e}':'${t}'`:`'${e}':${t}`).join(', ')+']',p=()=>{let e='\n</ä¸–ç•ŒèƒŒæ™¯>\n';return e+='\n',e+=`${(()=>{const e=getVariables({type:'chat'}).characters;if(void 0===e)return'';let t='<CharacterStatus>\n';for(const[a,n]of Object.entries(e))'c1'!==a&&(t+=`idï¼š${a}\n`,t+=`  å§“æ°ï¼š${n.å§“æ°||''}\n`,t+=`  åå­—ï¼š${n.åå­—||''}\n`,t+=`  å¹´é½¡ï¼š${n.å¹´é½¡||''}\n`,t+=`  æ€§åˆ¥ï¼š${n.æ€§åˆ¥||''}\n`,t+=`  èº«ä»½ï¼š${n.èº«ä»½||''}\n`,t+=`  èº«é«˜ï¼š${n.èº«é«˜||''}\n`,t+=`  é«”é‡ï¼š${n.é«”é‡||''}\n`,t+=`  èƒ¸åœï¼š${n.èƒ¸åœ||''}\n`,t+=`  ç½©æ¯ï¼š${n.ç½©æ¯||''}\n`,t+=`  è…°åœï¼š${n.è…°åœ||''}\n`,t+=`  è‡€åœï¼š${n.è‡€åœ||''}\n`,t+=`  é«®åž‹ï¼š${n.é«®åž‹||''}\n`,t+=`  æ¨£è²Œï¼š${n.æ¨£è²Œ||''}\n`,t+=`  è¡£è‘—ï¼š${n.è¡£è‘—||''}\n`,t+=`  ç°¡ä»‹ï¼š${n.ç°¡ä»‹||''}\n`,t+=`  æ€§æ ¼ï¼š${n.æ€§æ ¼||''}\n`,t+=`  æ„›å¥½ï¼š${n.æ„›å¥½||''}\n`,t+=`  é‡‘éŒ¢ï¼š${n.é‡‘éŒ¢||''}\n`,t+=`  å¿ƒæƒ…ï¼š${n.å¿ƒæƒ…||''}\n`,t+=`  æ€§æ…¾ï¼š${n.æ€§æ…¾||''}\n`,t+=`  ç”Ÿæ—¥æœˆä»½ï¼š${n.ç”Ÿæ—¥æœˆä»½||''}\n`,t+=`  ç”Ÿæ—¥æ—¥æœŸï¼š${n.ç”Ÿæ—¥æ—¥æœŸ||''}\n`,t+=`  å…¶ä»–é‡è¦è³‡è¨Šï¼š${n.å…¶ä»–é‡è¦è³‡è¨Š||''}\n`,t+=`  é—œä¿‚ï¼š${u(n.é—œä¿‚)}\n`,t+=`  å‹å¥½åº¦ï¼š${u(n.å‹å¥½åº¦)}\n`,t+=`  æ„›æƒ…åº¦ï¼š${u(n.æ„›æƒ…åº¦)}\n\n`);return t+='</CharacterStatus>',t})()}\n`,e+='\n',e+=`${(()=>{let e='<ItemTable>\n';e+='|id|åç¨±|æè¿°|åƒ¹å€¼|\n',e+='|---|---|---|---|\n';const t=getVariables({type:'chat'}).items;if(void 0===t)return'';for(const[a,n]of Object.entries(t))e+=`|${a}|${n.name}|${n.description}|${n.value}|\n`;return e+='</ItemTable>',e})()}\n`,e+='\n',e+=`${(()=>{let e='<LocationTable>\n';e+='|id|åœ°é»ž|ä½ç½®|æè¿°|å­åœ°é»ž|\n',e+='|---|---|---|---|---|\n';const t=getVariables({type:'chat'}).locations;if(void 0===t)return'';for(const[a,n]of Object.entries(t)){const t=n.sub_location?n.sub_location.join(', '):'';e+=`|${a}|${n.name}|${n.location||''}|${n.description}|${t}|\n`}return e+='</LocationTable>',e})()}\n`,e+='\n',e+=`${(()=>{let e='';const t=getVariables({type:'chat'}).extra_world_info;if(void 0===t)return'';for(const a of Array.from(t))''!==a.name&&''!==a.content&&(e+=`<${a.name}>\n`,e+=`${a.content}\n`,e+=`</${a.name}>\n`,e+='\n');return e})()}\n`,e+='\n',e+='<ç”Ÿæˆè¦æ±‚>\n',e+=`${a.value.generation_requirement}\n`,e+='</ç”Ÿæˆè¦æ±‚>\n',e+='\n',e+='<example>\n',e+='# The following is an example of user input and expected output. Please strictly follow the style and format to generate the output. Output anything other than this format is prohibited.\n',e+='å§“æ°ï¼šstring\n',e+='åå­—ï¼šstring\n',e+='å¹´é½¡ï¼šnumber\n',e+='æ€§åˆ¥ï¼š\'ç”·\' | \'å¥³\' | \'ä¸æ˜Ž\'\n',e+='èº«ä»½ï¼š\'ä»¥ç¬¬ä¸‰äººç¨±å®¢è§€åœ°æè¿°\'\n',e+='ç°¡ä»‹ï¼š\'ä»¥ç¬¬ä¸‰äººç¨±å®¢è§€åœ°æè¿°\'\n',e+='æ€§æ ¼ï¼š\'ä»¥ç¬¬ä¸‰äººç¨±å®¢è§€åœ°æè¿°\'\n',e+='èº«é«˜ï¼šnumber\n',e+='é«”é‡ï¼šnumber\n',e+='èƒ¸åœï¼šnumber\n',e+='ç½©æ¯ï¼š\'Capital Letter\' | \'ä¸é©ç”¨\'\n',e+='è…°åœï¼šnumber\n',e+='è‡€åœï¼šnumber\n',e+='é«®åž‹ï¼š\'ä»¥ç¬¬ä¸‰äººç¨±å®¢è§€åœ°æè¿°\'\n',e+='æ¨£è²Œï¼š\'ä»¥ç¬¬ä¸‰äººç¨±å®¢è§€åœ°æè¿°\'\n',e+='è¡£è‘—ï¼š\'ä»¥ç¬¬ä¸‰äººç¨±å®¢è§€åœ°æè¿°ç•¶å‰èº«ä¸Šæœè£\'\n',e+='ç”Ÿæ—¥(æœˆ)ï¼šnumber\n',e+='ç”Ÿæ—¥(æ—¥)ï¼šnumber\n',e+='å–œå¥½ï¼š\'ä»¥ç¬¬ä¸‰äººç¨±å®¢è§€åœ°æè¿°\'\n',e+='å…¶ä»–é‡è¦è³‡è¨Šï¼š\'ä»¥ç¬¬ä¸‰äººç¨±å®¢è§€åœ°æè¿°\'\n',e+='é‡‘éŒ¢ï¼šnumber\n',e+='é—œä¿‚ï¼š[\'character_id\':\'å°æ­¤è§’è‰²çš„é—œä¿‚\', ...]\n',e+='æ‰€æŒç‰©ï¼š[\'item_id\':quantity, ...]\n',e+='</example>',e},m=async()=>{n.value=!0;try{const e=(()=>{let e='è«‹æ ¹æ“šä¸–ç•ŒèƒŒæ™¯è³‡è¨Šã€ç”Ÿæˆè¦æ±‚åŠå·²æœ‰è§’è‰²è³‡æ–™ï¼Œç‚ºç”¨æˆ¶å®Œå–„ä»¥ä¸‹çš„è§’è‰²è³‡æ–™è¨­å®šï¼š\n';return e+='\n',e+=`å§“æ°ï¼š${a.value.surname}\n`,e+=`åå­—ï¼š${a.value.name}\n`,e+=`å¹´é½¡ï¼š${a.value.age}\n`,e+=`æ€§åˆ¥ï¼š${a.value.gender}\n`,e+=`èº«ä»½ï¼š${a.value.identity}\n`,e+=`ç°¡ä»‹ï¼š${a.value.introduction}\n`,e+=`æ€§æ ¼ï¼š${a.value.personality}\n`,e+=`èº«é«˜ï¼š${a.value.height}\n`,e+=`é«”é‡ï¼š${a.value.weight}\n`,e+=`èƒ¸åœï¼š${a.value.chest_size}\n`,e+=`ç½©æ¯ï¼š${a.value.cup_size}\n`,e+=`è…°åœï¼š${a.value.waist_size}\n`,e+=`è‡€åœï¼š${a.value.hips_size}\n`,e+=`é«®åž‹ï¼š${a.value.hairstyle}\n`,e+=`æ¨£è²Œï¼š${a.value.appearance}\n`,e+=`è¡£è‘—ï¼š${a.value.clothes}\n`,e+=`ç”Ÿæ—¥(æœˆ)ï¼š${a.value.birthday_month}\n`,e+=`ç”Ÿæ—¥(æ—¥)ï¼š${a.value.birthday_day}\n`,e+=`å–œå¥½ï¼š${a.value.favourite}\n`,e+=`å…¶ä»–é‡è¦è³‡è¨Šï¼š${a.value.extra_information}\n`,e+=`é‡‘éŒ¢ï¼š${a.value.money}\n`,e+=`é—œä¿‚ï¼š${u(Object.fromEntries(a.value.é—œä¿‚||new Map))}\n`,e+=`æ‰€æŒç‰©ï¼š${u(Object.fromEntries(a.value.æ‰€æŒç‰©||new Map))}\n`,e})(),t=(()=>{const e=getVariables({type:'chat'}).world_info;let t=getCharData('current').description;t=t.replace('{{getvar::world_info}}',e);let a='ä½ æ˜¯ä¸€å€‹å°ˆæ¥­çš„è§’è‰²è¨­è¨ˆåŠ©æ‰‹ï¼Œæ“…é•·å‰µé€ è±å¯Œå¤šå½©çš„è§’è‰²è¨­å®šã€‚è«‹æ ¹æ“šæä¾›çš„ä¸–ç•ŒèƒŒæ™¯åŠç”Ÿæˆè¦æ±‚ï¼Œç‚ºç”¨æˆ¶å®Œå–„è§’è‰²è³‡æ–™ã€‚\n';return a+='\n',a+='<ä¸–ç•ŒèƒŒæ™¯>\n','ä½ æ˜¯ä¸€å€‹å°ˆæ¥­çš„è§’è‰²è¨­è¨ˆåŠ©æ‰‹ï¼Œæ“…é•·å‰µé€ è±å¯Œå¤šå½©çš„è§’è‰²è¨­å®šã€‚è«‹æ ¹æ“šæä¾›çš„ä¸–ç•ŒèƒŒæ™¯åŠç”Ÿæˆè¦æ±‚ï¼Œç‚ºç”¨æˆ¶å®Œå–„è§’è‰²è³‡æ–™ã€‚\n\n<ä¸–ç•ŒèƒŒæ™¯>\n'})(),n=p(),o=await generateRaw({user_input:e,ordered_prompts:[{role:'system',content:t},'char_description',{role:'system',content:n},'user_input']});v(o);try{localStorage.setItem('user_profile_generated',JSON.stringify({generation_requirement:a.value.generation_requirement,generated_surname:a.value.generated_surname,generated_name:a.value.generated_name,generated_age:a.value.generated_age,generated_gender:a.value.generated_gender,generated_identity:a.value.generated_identity,generated_introduction:a.value.generated_introduction,generated_personality:a.value.generated_personality,generated_height:a.value.generated_height,generated_weight:a.value.generated_weight,generated_chest_size:a.value.generated_chest_size,generated_cup_size:a.value.generated_cup_size,generated_waist_size:a.value.generated_waist_size,generated_hips_size:a.value.generated_hips_size,generated_hairstyle:a.value.generated_hairstyle,generated_appearance:a.value.generated_appearance,generated_clothes:a.value.generated_clothes,generated_birthday_month:a.value.generated_birthday_month,generated_birthday_day:a.value.generated_birthday_day,generated_favourite:a.value.generated_favourite,generated_extra_information:a.value.generated_extra_information,generated_money:a.value.generated_money,generated_relationship:a.value.generated_relationship,generated_inventory:a.value.generated_inventory}))}catch(e){console.error('Failed to save generated user profile to localStorage:',e)}}catch(e){console.error('ç”Ÿæˆç”¨æˆ¶è³‡æ–™å¤±æ•—:',e),a.value.generated_age='ç”Ÿæˆå¤±æ•—ï¼Œè«‹é‡è©¦ã€‚'}finally{n.value=!1}},v=e=>{const t=e.split('\n'),n={};for(const e of t){const t=e.indexOf('ï¼š');if(t>0){const a=e.substring(0,t).trim(),o=e.substring(t+1).trim();switch(a){case'å§“æ°':n.generated_surname=o.replace(/^["']|["']$/g,'');break;case'åå­—':n.generated_name=o.replace(/^["']|["']$/g,'');break;case'å¹´é½¡':n.generated_age=o.replace(/[^\d]/g,'');break;case'æ€§åˆ¥':n.generated_gender=o.replace(/^["']|["']$/g,'');break;case'èº«ä»½':n.generated_identity=o.replace(/^["']|["']$/g,'');break;case'ç°¡ä»‹':n.generated_introduction=o.replace(/^["']|["']$/g,'');break;case'æ€§æ ¼':n.generated_personality=o.replace(/^["']|["']$/g,'');break;case'èº«é«˜':n.generated_height=o.replace(/[^\d]/g,'');break;case'é«”é‡':n.generated_weight=o.replace(/[^\d]/g,'');break;case'èƒ¸åœ':n.generated_chest_size=o.replace(/[^\d]/g,'');break;case'ç½©æ¯':n.generated_cup_size=o.replace(/^["']|["']$/g,'');break;case'è…°åœ':n.generated_waist_size=o.replace(/[^\d]/g,'');break;case'è‡€åœ':n.generated_hips_size=o.replace(/[^\d]/g,'');break;case'é«®åž‹':n.generated_hairstyle=o.replace(/^["']|["']$/g,'');break;case'æ¨£è²Œ':n.generated_appearance=o.replace(/^["']|["']$/g,'');break;case'è¡£è‘—':n.generated_clothes=o.replace(/^["']|["']$/g,'');break;case'ç”Ÿæ—¥(æœˆ)':n.generated_birthday_month=o.replace(/[^\d]/g,'');break;case'ç”Ÿæ—¥(æ—¥)':n.generated_birthday_day=o.replace(/[^\d]/g,'');break;case'å–œå¥½':n.generated_favourite=o.replace(/^["']|["']$/g,'');break;case'å…¶ä»–é‡è¦è³‡è¨Š':n.generated_extra_information=o.replace(/^["']|["']$/g,'');break;case'é‡‘éŒ¢':n.generated_money=o.replace(/[^\d]/g,'');break;case'é—œä¿‚':n.generated_relationship=o.replace(/^["']|["']$/g,'');break;case'æ‰€æŒç‰©':n.generated_inventory=o.replace(/^["']|["']$/g,'')}}}Object.assign(a.value,n)},g=()=>{if(a.value.generated_surname&&(a.value.surname=a.value.generated_surname),a.value.generated_name&&(a.value.name=a.value.generated_name),a.value.generated_age&&(a.value.age=parseInt(a.value.generated_age)||null),a.value.generated_gender&&(a.value.gender=a.value.generated_gender),a.value.generated_identity&&(a.value.identity=a.value.generated_identity),a.value.generated_introduction&&(a.value.introduction=a.value.generated_introduction),a.value.generated_personality&&(a.value.personality=a.value.generated_personality),a.value.generated_height&&(a.value.height=parseInt(a.value.generated_height)||null),a.value.generated_weight&&(a.value.weight=parseInt(a.value.generated_weight)||null),a.value.generated_chest_size&&(a.value.chest_size=parseInt(a.value.generated_chest_size)||null),a.value.generated_cup_size&&(a.value.cup_size=a.value.generated_cup_size),a.value.generated_waist_size&&(a.value.waist_size=parseInt(a.value.generated_waist_size)||null),a.value.generated_hips_size&&(a.value.hips_size=parseInt(a.value.generated_hips_size)||null),a.value.generated_hairstyle&&(a.value.hairstyle=a.value.generated_hairstyle),a.value.generated_appearance&&(a.value.appearance=a.value.generated_appearance),a.value.generated_clothes&&(a.value.clothes=a.value.generated_clothes),a.value.generated_birthday_month&&(a.value.birthday_month=parseInt(a.value.generated_birthday_month)||null),a.value.generated_birthday_day&&(a.value.birthday_day=parseInt(a.value.generated_birthday_day)||null),a.value.generated_favourite&&(a.value.favourite=a.value.generated_favourite),a.value.generated_extra_information&&(a.value.extra_information=a.value.generated_extra_information),a.value.generated_money&&(a.value.money=parseInt(a.value.generated_money)||null),a.value.generated_relationship){a.value.é—œä¿‚||(a.value.é—œä¿‚=new Map);const e=a.value.generated_relationship.replace(/^["']|["']$/g,'');if(e.startsWith('[')&&e.endsWith(']')){const t=e.slice(1,-1).split(',').map(e=>e.trim());for(const e of t){const t=e.indexOf(':');if(t>0){const n=e.substring(0,t).replace(/^["']|["']$/g,'').trim(),o=e.substring(t+1).replace(/^["']|["']$/g,'').trim();n&&o&&a.value.é—œä¿‚.set(n,o)}}}a.value.generated_relationship=''}if(a.value.generated_inventory){a.value.æ‰€æŒç‰©||(a.value.æ‰€æŒç‰©=new Map);const e=a.value.generated_inventory.replace(/^["']|["']$/g,'');if(e.startsWith('[')&&e.endsWith(']')){const t=e.slice(1,-1).split(',').map(e=>e.trim());for(const e of t){const t=e.indexOf(':');if(t>0){const n=e.substring(0,t).replace(/^["']|["']$/g,'').trim(),o=parseInt(e.substring(t+1).replace(/^["']|["']$/g,'').trim());n&&!isNaN(o)&&o>0&&a.value.æ‰€æŒç‰©.set(n,o)}}}a.value.generated_inventory=''}a.value.generated_surname='',a.value.generated_name='',a.value.generated_age='',a.value.generated_gender='',a.value.generated_identity='',a.value.generated_introduction='',a.value.generated_personality='',a.value.generated_height='',a.value.generated_weight='',a.value.generated_chest_size='',a.value.generated_cup_size='',a.value.generated_waist_size='',a.value.generated_hips_size='',a.value.generated_hairstyle='',a.value.generated_appearance='',a.value.generated_clothes='',a.value.generated_birthday_month='',a.value.generated_birthday_day='',a.value.generated_favourite='',a.value.generated_extra_information='',a.value.generated_money='',a.value.generated_relationship='',a.value.generated_inventory=''},b=()=>{a.value.selected_relation_target&&(a.value.é—œä¿‚||(a.value.é—œä¿‚=new Map),a.value.é—œä¿‚.set(a.value.selected_relation_target,''),a.value.selected_relation_target='',c())},f=()=>{if(!a.value.selected_inventory_item||!a.value.selected_inventory_quantity)return;a.value.æ‰€æŒç‰©||(a.value.æ‰€æŒç‰©=new Map);const e=a.value.æ‰€æŒç‰©.get(a.value.selected_inventory_item)||0;a.value.æ‰€æŒç‰©.set(a.value.selected_inventory_item,e+a.value.selected_inventory_quantity),a.value.selected_inventory_item='',a.value.selected_inventory_quantity=1,c()},h=(e,t)=>{switch(e){case'å§“æ°':a.value.surname=t,a.value.generated_surname='';break;case'åå­—':a.value.name=t,a.value.generated_name='';break;case'å¹´é½¡':a.value.age=parseInt(t)||null,a.value.generated_age='';break;case'æ€§åˆ¥':a.value.gender=t,a.value.generated_gender='';break;case'èº«ä»½':a.value.identity=t,a.value.generated_identity='';break;case'èº«é«˜':a.value.height=parseInt(t)||null,a.value.generated_height='';break;case'é«”é‡':a.value.weight=parseInt(t)||null,a.value.generated_weight='';break;case'èƒ¸åœ':a.value.chest_size=parseInt(t)||null,a.value.generated_chest_size='';break;case'ç½©æ¯':a.value.cup_size=t,a.value.generated_cup_size='';break;case'è…°åœ':a.value.waist_size=parseInt(t)||null,a.value.generated_waist_size='';break;case'è‡€åœ':a.value.hips_size=parseInt(t)||null,a.value.generated_hips_size='';break;case'é«®åž‹':a.value.hairstyle=t,a.value.generated_hairstyle='';break;case'æ¨£è²Œ':a.value.appearance=t,a.value.generated_appearance='';break;case'è¡£è‘—':a.value.clothes=t,a.value.generated_clothes='';break;case'ç°¡ä»‹':a.value.introduction=t,a.value.generated_introduction='';break;case'æ€§æ ¼':a.value.personality=t,a.value.generated_personality='';break;case'å–œå¥½':a.value.favourite=t,a.value.generated_favourite='';break;case'é‡‘éŒ¢':a.value.money=parseInt(t)||null,a.value.generated_money='';break;case'å…¶ä»–é‡è¦è³‡è¨Š':a.value.extra_information=t,a.value.generated_extra_information='';break;case'é—œä¿‚':{a.value.é—œä¿‚||(a.value.é—œä¿‚=new Map);const e=t.replace(/^["']|["']$/g,'');if(e.startsWith('[')&&e.endsWith(']')){const t=e.slice(1,-1).split(',').map(e=>e.trim());for(const e of t){const t=e.indexOf(':');if(t>0){const n=e.substring(0,t).replace(/^["']|["']$/g,'').trim(),o=e.substring(t+1).replace(/^["']|["']$/g,'').trim();n&&o&&a.value.é—œä¿‚.set(n,o)}}}a.value.generated_relationship='';break}case'æ‰€æŒç‰©':{a.value.æ‰€æŒç‰©||(a.value.æ‰€æŒç‰©=new Map);const e=t.replace(/^["']|["']$/g,'');if(e.startsWith('[')&&e.endsWith(']')){const t=e.slice(1,-1).split(',').map(e=>e.trim());for(const e of t){const t=e.indexOf(':');if(t>0){const n=e.substring(0,t).replace(/^["']|["']$/g,'').trim(),o=parseInt(e.substring(t+1).replace(/^["']|["']$/g,'').trim());n&&!isNaN(o)&&o>0&&a.value.æ‰€æŒç‰©.set(n,o)}}}a.value.generated_inventory='';break}}c()};return(0,t.watch)(a,()=>{c()},{deep:!0}),(0,t.watch)(()=>a.value.generation_requirement,e=>{try{const t=localStorage.getItem('user_profile_generated'),a=t?JSON.parse(t):{};a.generation_requirement=e,localStorage.setItem('user_profile_generated',JSON.stringify(a))}catch(e){console.error('Failed to save generation_requirement to localStorage:',e)}},{immediate:!1}),(0,t.onMounted)(()=>{(()=>{try{const e=(getVariables({type:'chat'}).characters||{}).c1;e&&(a.value.surname=e['å§“æ°']||'',a.value.name=e['åå­—']||'',a.value.age=e['å¹´é½¡'],a.value.gender=e['æ€§åˆ¥']||'',a.value.identity=e['èº«ä»½']||'',a.value.introduction=e['ç°¡ä»‹']||'',a.value.personality=e['æ€§æ ¼']||'',a.value.height=e['èº«é«˜'],a.value.weight=e['é«”é‡'],a.value.chest_size=e['èƒ¸åœ'],a.value.cup_size=e['ç½©æ¯']||'',a.value.waist_size=e['è…°åœ'],a.value.hips_size=e['è‡€åœ'],a.value.hairstyle=e['é«®åž‹']||'',a.value.appearance=e['æ¨£è²Œ']||'',a.value.clothes=e['è¡£è‘—']||'',a.value.favourite=e['æ„›å¥½']||'',a.value.extra_information=e['å…¶ä»–é‡è¦è³‡è¨Š']||'',a.value.money=e['é‡‘éŒ¢'],a.value.birthday_month=e['ç”Ÿæ—¥æœˆä»½'],a.value.birthday_day=e['ç”Ÿæ—¥æ—¥æœŸ'],e.é—œä¿‚?a.value.é—œä¿‚=new Map(Object.entries(e.é—œä¿‚)):a.value.é—œä¿‚=new Map,e.æ‰€æŒç‰©?a.value.æ‰€æŒç‰©=new Map(Object.entries(e.æ‰€æŒç‰©)):a.value.æ‰€æŒç‰©=new Map)}catch(e){console.error('Failed to load user data from chat variables:',e)}try{const e=localStorage.getItem('user_profile_generated');if(e){const t=JSON.parse(e);Object.assign(a.value,t)}}catch(e){console.error('Failed to load generated user profile from localStorage:',e)}})()}),(0,t.onBeforeUnmount)(()=>{c()}),(e,u)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',Vr,[u[103]||(u[103]=(0,t.createElementVNode)('h3',null,'ç”¨æˆ¶è³‡æ–™è¨­å®š',-1)),(0,t.createCommentVNode)(' åŸºæœ¬è³‡è¨Š '),(0,t.createElementVNode)('div',Nr,[u[60]||(u[60]=(0,t.createElementVNode)('h4',null,'åŸºæœ¬è³‡è¨Š',-1)),(0,t.createElementVNode)('div',wr,[u[59]||(u[59]=(0,t.createElementVNode)('div',{class:'input-group'},[(0,t.createElementVNode)('label',null,'è§’è‰²ID'),(0,t.createElementVNode)('div',{class:'display-text'},'c1')],-1)),(0,t.createElementVNode)('div',Sr,[u[48]||(u[48]=(0,t.createElementVNode)('label',{for:'surname-input'},'å§“æ°',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{id:'surname-input','onUpdate:modelValue':u[0]||(u[0]=e=>a.value.surname=e),type:'text',placeholder:'ä¾‹å¦‚ï¼šå¼µ',class:'text-input'},null,512),[[t.vModelText,a.value.surname]]),a.value.generated_surname?((0,t.openBlock)(),(0,t.createElementBlock)('div',Br,[u[47]||(u[47]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',Cr,(0,t.toDisplayString)(a.value.generated_surname),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:u[1]||(u[1]=e=>{a.value.surname=a.value.generated_surname,a.value.generated_surname=''})},' ä½¿ç”¨ ')])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',$r,[u[50]||(u[50]=(0,t.createElementVNode)('label',{for:'name-input'},'åå­—',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{id:'name-input','onUpdate:modelValue':u[2]||(u[2]=e=>a.value.name=e),type:'text',placeholder:'ä¾‹å¦‚ï¼šå°æ˜Ž',class:'text-input'},null,512),[[t.vModelText,a.value.name]]),a.value.generated_name?((0,t.openBlock)(),(0,t.createElementBlock)('div',Ir,[u[49]||(u[49]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',zr,(0,t.toDisplayString)(a.value.generated_name),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:u[3]||(u[3]=e=>{a.value.name=a.value.generated_name,a.value.generated_name=''})},' ä½¿ç”¨ ')])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',Dr,[u[52]||(u[52]=(0,t.createElementVNode)('label',{for:'age-input'},'å¹´é½¡',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{id:'age-input','onUpdate:modelValue':u[4]||(u[4]=e=>a.value.age=e),type:'number',placeholder:'ä¾‹å¦‚ï¼š18',class:'text-input',min:'0',max:'200'},null,512),[[t.vModelText,a.value.age,void 0,{number:!0}]]),a.value.generated_age?((0,t.openBlock)(),(0,t.createElementBlock)('div',Tr,[u[51]||(u[51]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',Mr,(0,t.toDisplayString)(a.value.generated_age),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:u[5]||(u[5]=e=>{a.value.age=parseInt(a.value.generated_age)||null,a.value.generated_age=''})},' ä½¿ç”¨ ')])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',Yr,[u[54]||(u[54]=(0,t.createElementVNode)('label',{for:'gender-input'},'æ€§åˆ¥',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{id:'gender-input','onUpdate:modelValue':u[6]||(u[6]=e=>a.value.gender=e),type:'text',placeholder:'ä¾‹å¦‚ï¼šå¥³',class:'text-input'},null,512),[[t.vModelText,a.value.gender]]),a.value.generated_gender?((0,t.openBlock)(),(0,t.createElementBlock)('div',Or,[u[53]||(u[53]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',Ar,(0,t.toDisplayString)(a.value.generated_gender),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:u[7]||(u[7]=e=>{a.value.gender=a.value.generated_gender,a.value.generated_gender=''})},' ä½¿ç”¨ ')])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',Rr,[u[56]||(u[56]=(0,t.createElementVNode)('label',{for:'identity-input'},'èº«ä»½',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{id:'identity-input','onUpdate:modelValue':u[8]||(u[8]=e=>a.value.identity=e),type:'text',placeholder:'ä¾‹å¦‚ï¼šé«˜ä¸­ç”Ÿ',class:'text-input'},null,512),[[t.vModelText,a.value.identity]]),a.value.generated_identity?((0,t.openBlock)(),(0,t.createElementBlock)('div',Kr,[u[55]||(u[55]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',Ur,(0,t.toDisplayString)(a.value.generated_identity),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:u[9]||(u[9]=e=>{a.value.identity=a.value.generated_identity,a.value.generated_identity=''})},' ä½¿ç”¨ ')])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',Lr,[u[58]||(u[58]=(0,t.createElementVNode)('label',{for:'birthday-input'},'ç”Ÿæ—¥',-1)),(0,t.createElementVNode)('div',Fr,[(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':u[10]||(u[10]=e=>a.value.birthday_month=e),type:'number',placeholder:'æœˆ',class:'birthday-input',min:'1',max:'12'},null,512),[[t.vModelText,a.value.birthday_month,void 0,{number:!0}]]),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':u[11]||(u[11]=e=>a.value.birthday_day=e),type:'number',placeholder:'æ—¥',class:'birthday-input',min:'1',max:'31'},null,512),[[t.vModelText,a.value.birthday_day,void 0,{number:!0}]])]),a.value.generated_birthday_month||a.value.generated_birthday_day?((0,t.openBlock)(),(0,t.createElementBlock)('div',jr,[u[57]||(u[57]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',Hr,(0,t.toDisplayString)(a.value.generated_birthday_month)+'æœˆ '+(0,t.toDisplayString)(a.value.generated_birthday_day)+'æ—¥ ',1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:u[12]||(u[12]=e=>{a.value.birthday_month=parseInt(a.value.generated_birthday_month)||null,a.value.birthday_day=parseInt(a.value.generated_birthday_day)||null,a.value.generated_birthday_month='',a.value.generated_birthday_day=''})},' ä½¿ç”¨ ')])):(0,t.createCommentVNode)('v-if',!0)])])]),(0,t.createCommentVNode)(' å¤–è²Œç‰¹å¾µ '),(0,t.createElementVNode)('div',Pr,[u[73]||(u[73]=(0,t.createElementVNode)('h4',null,'å¤–è²Œç‰¹å¾µ',-1)),(0,t.createElementVNode)('div',Gr,[(0,t.createElementVNode)('div',qr,[u[62]||(u[62]=(0,t.createElementVNode)('label',{for:'height-input'},'èº«é«˜ (cm)',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{id:'height-input','onUpdate:modelValue':u[13]||(u[13]=e=>a.value.height=e),type:'number',placeholder:'ä¾‹å¦‚ï¼š165',class:'text-input',min:'0',max:'300'},null,512),[[t.vModelText,a.value.height,void 0,{number:!0}]]),a.value.generated_height?((0,t.openBlock)(),(0,t.createElementBlock)('div',Xr,[u[61]||(u[61]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',Wr,(0,t.toDisplayString)(a.value.generated_height),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:u[14]||(u[14]=e=>{a.value.height=parseInt(a.value.generated_height)||null,a.value.generated_height=''})},' ä½¿ç”¨ ')])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',Jr,[u[64]||(u[64]=(0,t.createElementVNode)('label',{for:'weight-input'},'é«”é‡ (kg)',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{id:'weight-input','onUpdate:modelValue':u[15]||(u[15]=e=>a.value.weight=e),type:'number',placeholder:'ä¾‹å¦‚ï¼š50',class:'text-input',min:'0',max:'500'},null,512),[[t.vModelText,a.value.weight,void 0,{number:!0}]]),a.value.generated_weight?((0,t.openBlock)(),(0,t.createElementBlock)('div',Zr,[u[63]||(u[63]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',Qr,(0,t.toDisplayString)(a.value.generated_weight),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:u[16]||(u[16]=e=>{a.value.weight=parseInt(a.value.generated_weight)||null,a.value.generated_weight=''})},' ä½¿ç”¨ ')])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',el,[u[66]||(u[66]=(0,t.createElementVNode)('label',{for:'chest-size-input'},'èƒ¸åœ (cm)',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{id:'chest-size-input','onUpdate:modelValue':u[17]||(u[17]=e=>a.value.chest_size=e),type:'number',placeholder:'ä¾‹å¦‚ï¼š85',class:'text-input',min:'0',max:'200'},null,512),[[t.vModelText,a.value.chest_size,void 0,{number:!0}]]),a.value.generated_chest_size?((0,t.openBlock)(),(0,t.createElementBlock)('div',tl,[u[65]||(u[65]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',al,(0,t.toDisplayString)(a.value.generated_chest_size),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:u[18]||(u[18]=e=>{a.value.chest_size=parseInt(a.value.generated_chest_size)||null,a.value.generated_chest_size=''})},' ä½¿ç”¨ ')])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',nl,[u[68]||(u[68]=(0,t.createElementVNode)('label',{for:'cup-size-input'},'ç½©æ¯',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{id:'cup-size-input','onUpdate:modelValue':u[19]||(u[19]=e=>a.value.cup_size=e),type:'text',placeholder:'ä¾‹å¦‚ï¼šC',class:'text-input'},null,512),[[t.vModelText,a.value.cup_size]]),a.value.generated_cup_size?((0,t.openBlock)(),(0,t.createElementBlock)('div',ol,[u[67]||(u[67]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',rl,(0,t.toDisplayString)(a.value.generated_cup_size),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:u[20]||(u[20]=e=>{a.value.cup_size=a.value.generated_cup_size,a.value.generated_cup_size=''})},' ä½¿ç”¨ ')])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',ll,[u[70]||(u[70]=(0,t.createElementVNode)('label',{for:'waist-size-input'},'è…°åœ (cm)',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{id:'waist-size-input','onUpdate:modelValue':u[21]||(u[21]=e=>a.value.waist_size=e),type:'number',placeholder:'ä¾‹å¦‚ï¼š60',class:'text-input',min:'0',max:'200'},null,512),[[t.vModelText,a.value.waist_size,void 0,{number:!0}]]),a.value.generated_waist_size?((0,t.openBlock)(),(0,t.createElementBlock)('div',il,[u[69]||(u[69]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',sl,(0,t.toDisplayString)(a.value.generated_waist_size),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:u[22]||(u[22]=e=>{a.value.waist_size=parseInt(a.value.generated_waist_size)||null,a.value.generated_waist_size=''})},' ä½¿ç”¨ ')])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',dl,[u[72]||(u[72]=(0,t.createElementVNode)('label',{for:'hips-size-input'},'è‡€åœ (cm)',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{id:'hips-size-input','onUpdate:modelValue':u[23]||(u[23]=e=>a.value.hips_size=e),type:'number',placeholder:'ä¾‹å¦‚ï¼š88',class:'text-input',min:'0',max:'200'},null,512),[[t.vModelText,a.value.hips_size,void 0,{number:!0}]]),a.value.generated_hips_size?((0,t.openBlock)(),(0,t.createElementBlock)('div',cl,[u[71]||(u[71]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',ul,(0,t.toDisplayString)(a.value.generated_hips_size),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:u[24]||(u[24]=e=>{a.value.hips_size=parseInt(a.value.generated_hips_size)||null,a.value.generated_hips_size=''})},' ä½¿ç”¨ ')])):(0,t.createCommentVNode)('v-if',!0)])])]),(0,t.createCommentVNode)(' å¤–è§€æè¿° '),(0,t.createElementVNode)('div',pl,[u[80]||(u[80]=(0,t.createElementVNode)('h4',null,'å¤–è§€æè¿°',-1)),(0,t.createElementVNode)('div',ml,[(0,t.createElementVNode)('div',vl,[u[75]||(u[75]=(0,t.createElementVNode)('label',{for:'hairstyle-input'},'é«®åž‹',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{id:'hairstyle-input','onUpdate:modelValue':u[25]||(u[25]=e=>a.value.hairstyle=e),type:'text',placeholder:'ä¾‹å¦‚ï¼šé»‘è‰²é•·ç›´é«®',class:'text-input'},null,512),[[t.vModelText,a.value.hairstyle]]),a.value.generated_hairstyle?((0,t.openBlock)(),(0,t.createElementBlock)('div',gl,[u[74]||(u[74]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',bl,(0,t.toDisplayString)(a.value.generated_hairstyle),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:u[26]||(u[26]=e=>{a.value.hairstyle=a.value.generated_hairstyle,a.value.generated_hairstyle=''})},' ä½¿ç”¨ ')])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',fl,[u[77]||(u[77]=(0,t.createElementVNode)('label',{for:'appearance-input'},'å¤–è²Œ',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{id:'appearance-input','onUpdate:modelValue':u[27]||(u[27]=e=>a.value.appearance=e),placeholder:'æè¿°å¤–è²Œç‰¹å¾µ...',class:'text-area',rows:'3'},null,512),[[t.vModelText,a.value.appearance]]),a.value.generated_appearance?((0,t.openBlock)(),(0,t.createElementBlock)('div',hl,[u[76]||(u[76]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',xl,(0,t.toDisplayString)(a.value.generated_appearance),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:u[28]||(u[28]=e=>{a.value.appearance=a.value.generated_appearance,a.value.generated_appearance=''})},' ä½¿ç”¨ ')])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',yl,[u[79]||(u[79]=(0,t.createElementVNode)('label',{for:'clothes-input'},'æœè£',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{id:'clothes-input','onUpdate:modelValue':u[29]||(u[29]=e=>a.value.clothes=e),placeholder:'æè¿°å¸¸ç©¿çš„æœè£...',class:'text-area',rows:'3'},null,512),[[t.vModelText,a.value.clothes]]),a.value.generated_clothes?((0,t.openBlock)(),(0,t.createElementBlock)('div',_l,[u[78]||(u[78]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',El,(0,t.toDisplayString)(a.value.generated_clothes),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:u[30]||(u[30]=e=>{a.value.clothes=a.value.generated_clothes,a.value.generated_clothes=''})},' ä½¿ç”¨ ')])):(0,t.createCommentVNode)('v-if',!0)])])]),(0,t.createCommentVNode)(' å€‹æ€§èˆ‡å–œå¥½ '),(0,t.createElementVNode)('div',kl,[u[87]||(u[87]=(0,t.createElementVNode)('h4',null,'å€‹æ€§èˆ‡å–œå¥½',-1)),(0,t.createElementVNode)('div',Vl,[(0,t.createElementVNode)('div',Nl,[u[82]||(u[82]=(0,t.createElementVNode)('label',{for:'introduction-input'},'è§’è‰²ç°¡ä»‹',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{id:'introduction-input','onUpdate:modelValue':u[31]||(u[31]=e=>a.value.introduction=e),placeholder:'ç°¡å–®ä»‹ç´¹è‡ªå·±...',class:'text-area',rows:'3'},null,512),[[t.vModelText,a.value.introduction]]),a.value.generated_introduction?((0,t.openBlock)(),(0,t.createElementBlock)('div',wl,[u[81]||(u[81]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',Sl,(0,t.toDisplayString)(a.value.generated_introduction),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:u[32]||(u[32]=e=>{a.value.introduction=a.value.generated_introduction,a.value.generated_introduction=''})},' ä½¿ç”¨ ')])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',Bl,[u[84]||(u[84]=(0,t.createElementVNode)('label',{for:'personality-input'},'å€‹æ€§',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{id:'personality-input','onUpdate:modelValue':u[33]||(u[33]=e=>a.value.personality=e),placeholder:'æè¿°æ€§æ ¼ç‰¹é»ž...',class:'text-area',rows:'3'},null,512),[[t.vModelText,a.value.personality]]),a.value.generated_personality?((0,t.openBlock)(),(0,t.createElementBlock)('div',Cl,[u[83]||(u[83]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',$l,(0,t.toDisplayString)(a.value.generated_personality),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:u[34]||(u[34]=e=>{a.value.personality=a.value.generated_personality,a.value.generated_personality=''})},' ä½¿ç”¨ ')])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',Il,[u[86]||(u[86]=(0,t.createElementVNode)('label',{for:'favourite-input'},'å–œå¥½',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{id:'favourite-input','onUpdate:modelValue':u[35]||(u[35]=e=>a.value.favourite=e),placeholder:'æè¿°å–œæ­¡çš„äº‹ç‰©...',class:'text-area',rows:'3'},null,512),[[t.vModelText,a.value.favourite]]),a.value.generated_favourite?((0,t.openBlock)(),(0,t.createElementBlock)('div',zl,[u[85]||(u[85]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',Dl,(0,t.toDisplayString)(a.value.generated_favourite),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:u[36]||(u[36]=e=>{a.value.favourite=a.value.generated_favourite,a.value.generated_favourite=''})},' ä½¿ç”¨ ')])):(0,t.createCommentVNode)('v-if',!0)])])]),(0,t.createCommentVNode)(' å…¶ä»–è³‡è¨Š '),(0,t.createElementVNode)('div',Tl,[u[100]||(u[100]=(0,t.createElementVNode)('h4',null,'å…¶ä»–è³‡è¨Š',-1)),(0,t.createElementVNode)('div',Ml,[(0,t.createElementVNode)('div',Yl,[u[89]||(u[89]=(0,t.createElementVNode)('label',{for:'money-input'},'é‡‘éŒ¢',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{id:'money-input','onUpdate:modelValue':u[37]||(u[37]=e=>a.value.money=e),type:'number',placeholder:'ä¾‹å¦‚ï¼š10000',class:'text-input',min:'0'},null,512),[[t.vModelText,a.value.money,void 0,{number:!0}]]),a.value.generated_money?((0,t.openBlock)(),(0,t.createElementBlock)('div',Ol,[u[88]||(u[88]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',Al,(0,t.toDisplayString)(a.value.generated_money),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:u[38]||(u[38]=e=>{a.value.money=parseInt(a.value.generated_money)||null,a.value.generated_money=''})},' ä½¿ç”¨ ')])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',Rl,[u[91]||(u[91]=(0,t.createElementVNode)('label',{for:'extra-info-input'},'å…¶ä»–é‡è¦è³‡è¨Š',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{id:'extra-info-input','onUpdate:modelValue':u[39]||(u[39]=e=>a.value.extra_information=e),placeholder:'å…¶ä»–éœ€è¦æè¿°çš„è³‡è¨Š...',class:'text-area',rows:'3'},null,512),[[t.vModelText,a.value.extra_information]]),a.value.generated_extra_information?((0,t.openBlock)(),(0,t.createElementBlock)('div',Kl,[u[90]||(u[90]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',Ul,(0,t.toDisplayString)(a.value.generated_extra_information),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:u[40]||(u[40]=e=>{a.value.extra_information=a.value.generated_extra_information,a.value.generated_extra_information=''})},' ä½¿ç”¨ ')])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',Ll,[u[95]||(u[95]=(0,t.createElementVNode)('label',null,'é—œä¿‚',-1)),(0,t.createElementVNode)('div',Fl,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(Array.from(a.value.é—œä¿‚||new Map),([e,n])=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:e,class:'relation-item'},[(0,t.createElementVNode)('span',jl,'['+(0,t.toDisplayString)(e)+'] '+(0,t.toDisplayString)(r(e)),1),u[92]||(u[92]=(0,t.createTextVNode)(' æ˜¯æ­¤è§’è‰²çš„ ',-1)),(0,t.createElementVNode)('input',{value:n,type:'text',placeholder:'è¼¸å…¥é—œä¿‚æè¿°',class:'relation-input',onInput:t=>((e,t)=>{a.value.é—œä¿‚||(a.value.é—œä¿‚=new Map);const n=new Map(a.value.é—œä¿‚);n.set(e,t),a.value.é—œä¿‚=n,c()})(e,t.target.value)},null,40,Hl),(0,t.createElementVNode)('button',{class:'remove-relation-btn',onClick:t=>(e=>{if(!a.value.é—œä¿‚)return;const t=new Map(a.value.é—œä¿‚);t.delete(e),a.value.é—œä¿‚=t,c()})(e)},'Ã—',8,Pl)]))),128)),(0,t.createElementVNode)('div',Gl,[(0,t.withDirectives)((0,t.createElementVNode)('select',{'onUpdate:modelValue':u[41]||(u[41]=e=>a.value.selected_relation_target=e),class:'relation-select'},[u[93]||(u[93]=(0,t.createElementVNode)('option',{value:''},'é¸æ“‡ç›®æ¨™è§’è‰²',-1)),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(s(),([e,a])=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:e,value:e},(0,t.toDisplayString)(`${e}: ${a.å§“æ°||''}${a.åå­—||''}`),9,ql))),128))],512),[[t.vModelSelect,a.value.selected_relation_target]]),(0,t.createElementVNode)('button',{class:'add-relation-btn',disabled:!a.value.selected_relation_target,onClick:b},' æ·»åŠ é—œä¿‚ ',8,Xl)])]),a.value.generated_relationship?((0,t.openBlock)(),(0,t.createElementBlock)('div',Wl,[u[94]||(u[94]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',Jl,(0,t.toDisplayString)(a.value.generated_relationship),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:u[42]||(u[42]=e=>h('é—œä¿‚',a.value.generated_relationship))},' ä½¿ç”¨ ')])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',Zl,[u[99]||(u[99]=(0,t.createElementVNode)('label',null,'æ‰€æŒç‰©',-1)),(0,t.createElementVNode)('div',Ql,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(Array.from(a.value.æ‰€æŒç‰©||new Map),([e,n])=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:e,class:'inventory-item'},[(0,t.createElementVNode)('span',ei,'['+(0,t.toDisplayString)(e)+'] '+(0,t.toDisplayString)(l(e)),1),u[96]||(u[96]=(0,t.createTextVNode)(' : ',-1)),(0,t.createElementVNode)('input',{value:n,type:'number',placeholder:'æ•¸é‡',class:'inventory-input',min:'1',onInput:t=>((e,t)=>{a.value.æ‰€æŒç‰©||(a.value.æ‰€æŒç‰©=new Map);const n=new Map(a.value.æ‰€æŒç‰©);t>0?n.set(e,t):n.delete(e),a.value.æ‰€æŒç‰©=n,c()})(e,parseInt(t.target.value)||1)},null,40,ti),(0,t.createElementVNode)('button',{class:'remove-inventory-btn',onClick:t=>(e=>{if(!a.value.æ‰€æŒç‰©)return;const t=new Map(a.value.æ‰€æŒç‰©);t.delete(e),a.value.æ‰€æŒç‰©=t,c()})(e)},'Ã—',8,ai)]))),128)),(0,t.createElementVNode)('div',ni,[(0,t.withDirectives)((0,t.createElementVNode)('select',{'onUpdate:modelValue':u[43]||(u[43]=e=>a.value.selected_inventory_item=e),class:'inventory-select'},[u[97]||(u[97]=(0,t.createElementVNode)('option',{value:''},'é¸æ“‡ç‰©å“',-1)),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(o(),([e,a])=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:e,value:e},(0,t.toDisplayString)(`${e}: ${a.name||'æœªçŸ¥ç‰©å“'}`),9,oi))),128))],512),[[t.vModelSelect,a.value.selected_inventory_item]]),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':u[44]||(u[44]=e=>a.value.selected_inventory_quantity=e),type:'number',placeholder:'æ•¸é‡',class:'quantity-input',min:'1',disabled:!a.value.selected_inventory_item},null,8,ri),[[t.vModelText,a.value.selected_inventory_quantity,void 0,{number:!0}]]),(0,t.createElementVNode)('button',{class:'add-inventory-btn',disabled:!a.value.selected_inventory_item||!a.value.selected_inventory_quantity,onClick:f},' æ·»åŠ ç‰©å“ ',8,li)])]),a.value.generated_inventory?((0,t.openBlock)(),(0,t.createElementBlock)('div',ii,[u[98]||(u[98]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',si,(0,t.toDisplayString)(a.value.generated_inventory),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:u[45]||(u[45]=e=>h('æ‰€æŒç‰©',a.value.generated_inventory))},' ä½¿ç”¨ ')])):(0,t.createCommentVNode)('v-if',!0)])])]),(0,t.createCommentVNode)(' ç”Ÿæˆè¦æ±‚ '),(0,t.createElementVNode)('div',di,[u[102]||(u[102]=(0,t.createElementVNode)('h4',null,'ç”Ÿæˆè¦æ±‚',-1)),(0,t.createElementVNode)('div',ci,[(0,t.createElementVNode)('div',ui,[u[101]||(u[101]=(0,t.createElementVNode)('label',{for:'generation-requirement-input'},'å°AIç”Ÿæˆçš„è¦æ±‚',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{id:'generation-requirement-input','onUpdate:modelValue':u[46]||(u[46]=e=>a.value.generation_requirement=e),placeholder:'å°AIç”Ÿæˆçš„è¦æ±‚...',class:'text-area',rows:'3'},null,512),[[t.vModelText,a.value.generation_requirement]])])])]),(0,t.createCommentVNode)(' ç”ŸæˆæŒ‰éˆ• '),(0,t.createElementVNode)('div',pi,[(0,t.createElementVNode)('button',{class:'generate-btn',disabled:!(0,t.unref)(d)||n.value,onClick:m},[n.value?((0,t.openBlock)(),(0,t.createElementBlock)('span',vi)):(0,t.createCommentVNode)('v-if',!0),(0,t.createTextVNode)(' '+(0,t.toDisplayString)(n.value?'ç”Ÿæˆä¸­...':(0,t.unref)(d)?'ç”Ÿæˆæœªå¡«å¯«çš„å­—æ®µ':'è«‹å…ˆå®Œæˆä¸–ç•ŒèƒŒæ™¯è¨­å®š'),1)],8,mi),(0,t.createElementVNode)('button',{class:'apply-all-btn',disabled:!(0,t.unref)(i),onClick:g},'æ‡‰ç”¨å…¨éƒ¨',8,gi)])]))}});n(2628);const fi=(0,d.A)(bi,[['__scopeId','data-v-76149319']]),hi={class:'world-background-container'},xi={class:'input-group'},yi={class:'input-group'},_i={class:'input-group'},Ei={class:'input-group'},ki=['disabled'],Vi={key:0,class:'loading-spinner'},Ni={class:'info-section'},wi={class:'input-group'},Si={class:'input-group'},Bi=['disabled'],Ci=(0,t.defineComponent)({__name:'world_info_tab',setup(e){const a=(0,t.ref)(''),n=(0,t.ref)(''),o=(0,t.ref)(''),r=(0,t.ref)(''),l=(0,t.ref)(!1),i=(0,t.ref)(''),s=(0,t.ref)(''),d=(0,t.computed)(()=>a.value.trim()||n.value.trim()||o.value.trim()||r.value.trim()),c=()=>{try{const e={place:a.value,era:n.value,style:o.value,additional_conditions:r.value};localStorage.setItem('world_info_input_fields',JSON.stringify(e))}catch(e){console.error('Failed to save input fields to localStorage:',e)}};(0,t.watch)([a,n,o,r],()=>{c()}),(0,t.watch)(i,e=>{try{insertOrAssignVariables({world_info:e},{type:'chat'})}catch(e){console.error('Failed to save world info:',e)}}),(0,t.onMounted)(()=>{(()=>{try{const e=localStorage.getItem('world_info_input_fields');if(e){const t=JSON.parse(e);a.value=t.place||'',n.value=t.era||'',o.value=t.style||'',r.value=t.additional_conditions||''}}catch(e){console.error('Failed to load input fields from localStorage:',e)}try{const e=localStorage.getItem('world_info_generated');e&&(s.value=e)}catch(e){console.error('Failed to load generated world info from localStorage:',e)}})(),(()=>{try{const e=getVariables({type:'chat'});e?.world_info&&(i.value=e.world_info)}catch(e){console.error('Failed to load world info:',e)}})()}),(0,t.onBeforeUnmount)(()=>{c()});const u=(e,t,a,n)=>{let o='è«‹æ ¹æ“šä»¥ä¸‹è³‡è¨Šç”Ÿæˆä¸€å€‹è©³ç´°çš„ä¸–ç•ŒèƒŒæ™¯è¨­å®šï¼š\n';return o+='\n',o+=`åœ°é»žï¼š${e||'æœªæŒ‡å®š'}\n`,o+=`æ™‚ä»£ï¼š${t||'æœªæŒ‡å®š'}\n`,o+=`é¢¨æ ¼ï¼š${a||'æœªæŒ‡å®š'}\n`,o+=`é¡å¤–æ¢ä»¶ï¼š${n||'ç„¡'}\n`,o+='\n',o+='è«‹ç”Ÿæˆä¸€å€‹å®Œæ•´ä¸”è©³ç´°çš„ä¸–ç•ŒèƒŒæ™¯æè¿°ï¼ŒåŒ…æ‹¬ç’°å¢ƒã€åœ°åœ–ã€ç¤¾æœƒçµæ§‹ã€æ–‡åŒ–ç‰¹è‰²ç­‰å…ƒç´ ã€‚',o},p=async()=>{l.value=!0;try{const e=u(a.value,n.value,o.value,r.value),t='ä½ æ˜¯ä¸€å€‹å°ˆæ¥­çš„ä¸–ç•Œæ§‹ç¯‰åŠ©æ‰‹ï¼Œæ“…é•·å‰µé€ è±å¯Œå¤šå½©çš„å¥‡å¹»ä¸–ç•Œã€‚è«‹æ ¹æ“šç”¨æˆ¶æä¾›çš„è³‡è¨Šï¼Œåš´æ ¼éµå®ˆä»¥ä¸‹ä¾‹å­çš„æ ¼å¼ï¼Œç”Ÿæˆä¸–ç•ŒèƒŒæ™¯è¨­å®šã€‚';let l='<example>\n';l+='# The following is an example of user input and expected output. Please strictly follow the style and format to generate the output.\n',l+='<UserInput>\n',l+=`${u('æ«»å¦»å¸‚','ç¾ä»£','é’æ˜¥ï¼Œæ—¥å¸¸ï¼Œæ ¡åœ’ï¼Œæˆ€æ„›å–œåŠ‡','ç„¡')}\n`,l+='</UserInput>\n',l+='\n',l+='<GeneratedOutput>\n  - <char> is a virtual interactive novel engine designed specifically for <user>, vividly role-playing every school character except <user>, creating an immersive Japanese anime-style high school romance experience.\n  - allows vivid portrayals of various scenarios, including innocent, subtly romantic scenes and youth-focused situations with mature elements, free from the limitations of real-world moral scales.\n  - World setting: The story happens in a Japanese coastal fictional city: "æ«»å¦»å¸‚", featuring the city\'s only high school, "æ«»å¦»å¸‚åœ‹ç«‹ä¸­å­¸". The world logic has high flexibility, centered purely upon internal consistency of school setting without real-world rules.\n  - Environment & atmosphere setup: Most events prominently take place within the vivid daytime campus environment of "æ«»å¦»å¸‚åœ‹ç«‹ä¸­å­¸", a beautifully stylized coastal school campus with rich and authentic Japanese anime-style youth atmosphere.\n  - Exceptional immersion in youth atmosphere: Offer subtle, detailed, vividly realized scenarios in a genuine Japanese-school youths\' daily experiences, allowing great freedom for subtle interactions and tastes ranging from pure, simple school life to delicate adolescent romance and relationships.\n',l+='</GeneratedOutput>\n',l+='</example>';let i=await generateRaw({user_input:e,ordered_prompts:[{role:'system',content:t},{role:'system',content:l},'user_input']});const d=SillyTavern.name1,c=SillyTavern.name2;i=i.replace(/<user>/g,d),i=i.replace(/<char>/g,c),s.value=i;try{localStorage.setItem('world_info_generated',i)}catch(e){console.error('Failed to save generated world info to localStorage:',e)}}catch(e){console.error('ç”Ÿæˆä¸–ç•ŒèƒŒæ™¯å¤±æ•—:',e),s.value='ç”Ÿæˆå¤±æ•—ï¼Œè«‹é‡è©¦ã€‚'}finally{l.value=!1}},m=()=>{if(s.value.trim()){i.value=s.value;try{insertOrAssignVariables({world_info:s.value},{type:'chat'})}catch(e){console.error('Failed to save world info:',e)}}};return(e,c)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',hi,[c[12]||(c[12]=(0,t.createElementVNode)('h3',null,'ä¸–ç•ŒèƒŒæ™¯è¨­å®š',-1)),(0,t.createElementVNode)('div',xi,[c[6]||(c[6]=(0,t.createElementVNode)('label',{for:'place-input'},'åœ°é»ž',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{id:'place-input','onUpdate:modelValue':c[0]||(c[0]=e=>a.value=e),type:'text',placeholder:'ä¾‹å¦‚ï¼šæ±äº¬ã€é­”æ³•æ£®æž—ã€å¤ªç©ºç«™...',class:'text-input'},null,512),[[t.vModelText,a.value]])]),(0,t.createElementVNode)('div',yi,[c[7]||(c[7]=(0,t.createElementVNode)('label',{for:'era-input'},'æ™‚ä»£',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{id:'era-input','onUpdate:modelValue':c[1]||(c[1]=e=>n.value=e),type:'text',placeholder:'ä¾‹å¦‚ï¼šä¸­ä¸–ç´€ã€ç¾ä»£ã€æœªä¾†...',class:'text-input'},null,512),[[t.vModelText,n.value]])]),(0,t.createElementVNode)('div',_i,[c[8]||(c[8]=(0,t.createElementVNode)('label',{for:'style-input'},'é¢¨æ ¼',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{id:'style-input','onUpdate:modelValue':c[2]||(c[2]=e=>o.value=e),type:'text',placeholder:'ä¾‹å¦‚ï¼šå¥‡å¹»ã€ç§‘å¹»ã€ç¾å¯¦ä¸»ç¾©...',class:'text-input'},null,512),[[t.vModelText,o.value]])]),(0,t.createElementVNode)('div',Ei,[c[9]||(c[9]=(0,t.createElementVNode)('label',{for:'additional-conditions-input'},'å…¶ä»–é¡å¤–æ¢ä»¶',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{id:'additional-conditions-input','onUpdate:modelValue':c[3]||(c[3]=e=>r.value=e),placeholder:'ä¾‹å¦‚ï¼šé­”æ³•ç³»çµ±ã€ç‰¹æ®Šè¦å‰‡ã€é‡è¦äº‹ä»¶...',class:'text-area',rows:'4'},null,512),[[t.vModelText,r.value]])]),(0,t.createElementVNode)('button',{class:'generate-btn',disabled:l.value||!d.value,onClick:p},[l.value?((0,t.openBlock)(),(0,t.createElementBlock)('span',Vi)):(0,t.createCommentVNode)('v-if',!0),(0,t.createTextVNode)(' '+(0,t.toDisplayString)(l.value?'ç”Ÿæˆä¸­...':'ç”Ÿæˆ'),1)],8,ki),(0,t.createElementVNode)('div',Ni,[(0,t.createElementVNode)('div',wi,[c[10]||(c[10]=(0,t.createElementVNode)('label',{for:'current-world-info'},'ç•¶å‰ä¸–ç•Œè³‡è¨Š',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{id:'current-world-info','onUpdate:modelValue':c[4]||(c[4]=e=>i.value=e),placeholder:'ç•¶å‰ä¸–ç•Œè³‡è¨Šå°‡é¡¯ç¤ºåœ¨é€™è£¡...',class:'text-area',rows:'6'},null,512),[[t.vModelText,i.value]])]),(0,t.createElementVNode)('div',Si,[c[11]||(c[11]=(0,t.createElementVNode)('label',{for:'generated-world-info'},'ç”Ÿæˆçš„ä¸–ç•Œè³‡è¨Š',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{id:'generated-world-info','onUpdate:modelValue':c[5]||(c[5]=e=>s.value=e),placeholder:'é»žæ“Šç”ŸæˆæŒ‰éˆ•å¾Œï¼Œç”Ÿæˆçš„ä¸–ç•Œè³‡è¨Šå°‡é¡¯ç¤ºåœ¨é€™è£¡...',class:'text-area',rows:'6',readonly:''},null,512),[[t.vModelText,s.value]])]),(0,t.createElementVNode)('button',{class:'replace-btn',disabled:!s.value.trim(),onClick:m},' æ›¿æ›ç‚ºç”Ÿæˆçš„ä¸–ç•Œè³‡è¨Š ',8,Bi)])]))}});n(676);const $i=(0,d.A)(Ci,[['__scopeId','data-v-6467ee74']]),Ii={class:'initializations-container'},zi={class:'tab-navigation top first-row'},Di={class:'tab-navigation top second-row'},Ti={class:'main-content'},Mi={key:0,class:'initialization-area'},Yi={key:1,class:'initialization-area'},Oi={key:2,class:'initialization-area'},Ai={key:3,class:'initialization-area'},Ri={key:4,class:'initialization-area'},Ki={key:5,class:'initialization-area'},Ui={key:6,class:'initialization-area'},Li=(0,t.defineComponent)({__name:'initialization_interface',setup(e){const a=(0,t.ref)('world_info'),n=e=>{a.value=e};return(e,o)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',Ii,[(0,t.createCommentVNode)(' ç¬¬ä¸€è¡Œæ¨™ç±¤ '),(0,t.createElementVNode)('div',zi,[(0,t.createElementVNode)('button',{class:(0,t.normalizeClass)(['tab-button',{active:'world_info'===a.value}]),onClick:o[0]||(o[0]=e=>n('world_info'))},' ä¸–ç•ŒèƒŒæ™¯ ',2),(0,t.createElementVNode)('button',{class:(0,t.normalizeClass)(['tab-button',{active:'user'===a.value}]),onClick:o[1]||(o[1]=e=>n('user'))},'ç”¨æˆ¶',2),(0,t.createElementVNode)('button',{class:(0,t.normalizeClass)(['tab-button',{active:'character'===a.value}]),onClick:o[2]||(o[2]=e=>n('character'))},' è§’è‰² ',2),(0,t.createElementVNode)('button',{class:(0,t.normalizeClass)(['tab-button',{active:'item'===a.value}]),onClick:o[3]||(o[3]=e=>n('item'))},'ç‰©å“',2)]),(0,t.createCommentVNode)(' ç¬¬äºŒè¡Œæ¨™ç±¤ '),(0,t.createElementVNode)('div',Di,[(0,t.createElementVNode)('button',{class:(0,t.normalizeClass)(['tab-button',{active:'location'===a.value}]),onClick:o[4]||(o[4]=e=>n('location'))},'åœ°é»ž',2),(0,t.createElementVNode)('button',{class:(0,t.normalizeClass)(['tab-button',{active:'extra'===a.value}]),onClick:o[5]||(o[5]=e=>n('extra'))},'å…¶ä»–',2),(0,t.createElementVNode)('button',{class:(0,t.normalizeClass)(['tab-button',{active:'start'===a.value}]),onClick:o[6]||(o[6]=e=>n('start'))},'é–‹å§‹',2)]),(0,t.createElementVNode)('div',Ti,['start'===a.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',Mi,[(0,t.createVNode)(kr)])):'world_info'===a.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',Yi,[(0,t.createVNode)($i)])):'user'===a.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',Oi,[(0,t.createVNode)(fi)])):'character'===a.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',Ai,[(0,t.createVNode)(Da)])):'item'===a.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',Ri,[(0,t.createVNode)(Dn)])):'location'===a.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',Ki,[(0,t.createVNode)(Co)])):'extra'===a.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',Ui,[(0,t.createVNode)(an)])):(0,t.createCommentVNode)('v-if',!0)])]))}});n(1454);const Fi=(0,d.A)(Li,[['__scopeId','data-v-252c6a8b']]),ji={class:'confirm-dialog-header'},Hi={class:'confirm-dialog-body'},Pi={class:'confirm-dialog-footer'},Gi=['data-confirm-text'],qi=(0,t.defineComponent)({__name:'confirmation_window',props:{confirmDialog:{}},emits:['update:confirm_dialog','confirm-dialog-confirm','confirm-dialog-cancel'],setup(e,{expose:a,emit:n}){const o=n,r=()=>{o('confirm-dialog-confirm')},l=()=>{o('confirm-dialog-cancel')},i=()=>{l()};return a({}),(a,n)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',null,[(0,t.createCommentVNode)(' ConfirmDialog çµ„ä»¶ '),e.confirmDialog.visible?((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:0,class:'confirm-dialog-overlay',onClick:i},[(0,t.createElementVNode)('div',{class:'confirm-dialog',onClick:n[0]||(n[0]=(0,t.withModifiers)(()=>{},['stop']))},[(0,t.createElementVNode)('div',ji,[(0,t.createElementVNode)('h3',null,(0,t.toDisplayString)(e.confirmDialog.title),1)]),(0,t.createElementVNode)('div',Hi,[(0,t.createElementVNode)('p',null,(0,t.toDisplayString)(e.confirmDialog.message),1)]),(0,t.createElementVNode)('div',Pi,[(0,t.createElementVNode)('button',{class:'confirm-btn cancel-btn',onClick:l},(0,t.toDisplayString)(e.confirmDialog.cancelText),1),(0,t.createElementVNode)('button',{class:'confirm-btn confirm-action-btn','data-confirm-text':e.confirmDialog.confirmText,onClick:r},(0,t.toDisplayString)(e.confirmDialog.confirmText),9,Gi)])])])):(0,t.createCommentVNode)('v-if',!0)]))}});n(5401);const Xi=qi,Wi={class:'progress-bar-container'},Ji={class:'progress-bar-label'},Zi={class:'progress-bar-wrapper'},Qi={class:'progress-bar-value'},es=(0,t.defineComponent)({__name:'progress_bar',props:{label:{},value:{},min:{default:0},max:{default:100},unit:{default:''},color:{default:'#007acc'},attributeType:{default:''}},setup(e){const a=e,n=(0,t.computed)(()=>{const{attributeType:e,value:t}=a;switch(e){case'mood':return t>=0?{color:'#ffdd44',min:0,max:100,isReverse:!1}:{color:'#007acc',min:0,max:100,isReverse:!1};case'horny':return{color:'#ff44aa',min:0,max:100,isReverse:!1};case'friendship':return t>=0?{color:'#44ff44',min:0,max:1e3,isReverse:!1}:{color:'#888888',min:0,max:1e3,isReverse:!1};case'love':return{color:'#ff4444',min:0,max:1e3,isReverse:!1};default:return{color:a.color,min:a.min,max:a.max,isReverse:!1}}}),o=(0,t.computed)(()=>{const e=n.value,t=Math.abs(a.value),o=Math.max(e.min,Math.min(e.max,t)),r=e.max-e.min;return(o-e.min)/r*100}),r=(0,t.computed)(()=>{const e=n.value;return`linear-gradient(90deg, ${e.color} 0%, ${e.color}dd 100%)`});return(a,n)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',Wi,[(0,t.createElementVNode)('div',Ji,(0,t.toDisplayString)(e.label),1),(0,t.createElementVNode)('div',Zi,[(0,t.createElementVNode)('div',{class:'progress-bar-fill',style:(0,t.normalizeStyle)({width:`${(0,t.unref)(o)}%`,background:(0,t.unref)(r)})},null,4),(0,t.createElementVNode)('div',Qi,(0,t.toDisplayString)(e.value)+(0,t.toDisplayString)(e.unit),1)])]))}});n(2436);const ts=(0,d.A)(es,[['__scopeId','data-v-be0274c0']]),as={class:'character-tab-container'},ns={key:0,class:'character-content'},os={class:'character-section'},rs={class:'character-list'},ls=['onClick'],is=['onClick'],ss={key:1,class:'character-progress-bars'},ds={key:0,class:'no-characters-message'},cs={class:'character-section'},us={class:'character-list'},ps=['onClick'],ms=['onClick'],vs={key:1,class:'character-progress-bars'},gs={key:0,class:'no-characters-message'},bs={class:'character-detail-content'},fs={class:'character-header'},hs={class:'header-buttons'},xs={class:'character-detail-name'},ys={class:'attributes-grid'},_s={class:'attribute-item horizontal'},Es={key:0,class:'attribute-value'},ks={class:'attribute-item horizontal'},Vs={key:0,class:'attribute-value'},Ns={class:'attribute-item horizontal'},ws={key:0,class:'attribute-value'},Ss={class:'attribute-item horizontal'},Bs={key:0,class:'attribute-value'},Cs={class:'attribute-item horizontal'},$s={key:0,class:'attribute-value'},Is={class:'attribute-item horizontal'},zs={key:0,class:'attribute-value'},Ds={class:'attribute-item horizontal'},Ts={key:0,class:'attribute-value'},Ms={class:'attribute-item horizontal'},Ys={key:0,class:'attribute-value'},Os={class:'attribute-item horizontal'},As={key:0,class:'attribute-value'},Rs={class:'attribute-item horizontal'},Ks={key:0,class:'attribute-value'},Us={class:'attribute-item full-width horizontal'},Ls={key:0,class:'attribute-value money'},Fs={class:'attribute-item full-width birthday-fullwidth'},js={key:0,class:'attribute-value'},Hs={key:1,class:'birthday-edit-container'},Ps={class:'birthday-input-group'},Gs={key:0,class:'attribute-item full-width'},qs={key:1,class:'progress-edit-container'},Xs={key:1,class:'attribute-item full-width'},Ws={key:1,class:'progress-edit-container'},Js={class:'attribute-item full-width'},Zs={key:0,class:'attribute-value no-bold'},Qs={class:'attribute-item full-width'},ed={key:0,class:'attribute-value no-bold'},td={class:'attribute-item full-width'},ad={key:0,class:'attribute-value no-bold'},nd={class:'attribute-item full-width'},od={key:0,class:'attribute-value no-bold'},rd={class:'attribute-item full-width'},ld={key:0,class:'attribute-value no-bold'},id={class:'attribute-item full-width'},sd={key:0,class:'attribute-value no-bold'},dd={class:'attribute-item full-width'},cd={key:0,class:'attribute-value no-bold'},ud={key:2,class:'attribute-item full-width'},pd={key:0,class:'attribute-value no-bold'},md={class:'relations-section'},vd={key:0,class:'relations-list'},gd={class:'relation-highlight'},bd={class:'relation-highlight'},fd={key:0,class:'no-message'},hd={key:1,class:'relations-edit-list'},xd=['value','onChange'],yd=['value'],_d=['onUpdate:modelValue'],Ed=['onClick'],kd={key:0,class:'friendships-section'},Vd={key:0,class:'friendships-list'},Nd={key:0,class:'no-message'},wd={key:1,class:'friendships-edit-list'},Sd=['value','onChange'],Bd=['value'],Cd=['onUpdate:modelValue','onInput','onBlur'],$d=['onClick'],Id={key:1,class:'loves-section'},zd={key:0,class:'loves-list'},Dd={key:0,class:'no-message'},Td={key:1,class:'loves-edit-list'},Md=['value','onChange'],Yd=['value'],Od=['onUpdate:modelValue','onInput','onBlur'],Ad=['onClick'],Rd={class:'inventory-section'},Kd={key:0,class:'inventory-list'},Ud={class:'inventory-first-row'},Ld={class:'item-name-id'},Fd={key:0,class:'item-quantity'},jd={key:1,class:'storage-indicator'},Hd={class:'inventory-second-row'},Pd={key:0,class:'inventory-third-row'},Gd={key:0,class:'no-inventory'},qd={key:1,class:'inventory-items'},Xd={key:0,class:'no-message'},Wd={key:1,class:'inventory-edit-list'},Jd=['value','onChange'],Zd={label:'ç‰©å“'},Qd=['value'],ec={label:'è²¯å­˜é»ž'},tc=['value'],ac={key:0,class:'inventory-edit-connector'},nc=['onUpdate:modelValue'],oc=['onClick'],rc={key:2,class:'edit-buttons'},lc=['disabled'],ic=(0,t.defineComponent)({__name:'character_tab',setup(e,{expose:a}){(0,t.useCssVars)(e=>({v1299b277:c.value}));const n=(0,t.ref)(!1),o=(0,t.ref)(!1),r=(0,t.ref)(null),l=(0,t.ref)(''),i=(0,t.ref)({visible:!1,title:'',message:'',confirmText:'',cancelText:''}),s=(0,t.ref)(0),d=(0,t.ref)(null),c=(0,t.computed)(()=>`calc(100vh - ${s.value}px)`);a({handleTabClick:()=>{b.value?(n.value&&q(),b.value=null):o.value&&q()}});const u=(0,t.computed)(()=>{if(!o.value||!r.value)return!1;return['åç¨±','æ€§åˆ¥','å¹´é½¡','èº«é«˜','é«”é‡','èƒ¸åœ','ç½©æ¯','è…°åœ','è‡€åœ','èº«ä»½','é«®åž‹','æ¨£è²Œ','è¡£è‘—','æ„›å¥½','ç°¡ä»‹','æ€§æ ¼','å…¶ä»–é‡è¦è³‡è¨Š'].some(e=>{const t=r.value[e];return null==t||''===t||'string'==typeof t&&''===t.trim()})}),p=(0,t.computed)({get:()=>r.value?.[Io.RELATIONS_KEY]||{},set:e=>{r.value&&(r.value[Io.RELATIONS_KEY]=e)}}),m=(0,t.computed)({get:()=>r.value?.[Io.INVENTORY_KEY]||{},set:e=>{r.value&&(r.value[Io.INVENTORY_KEY]=e)}}),v=(0,t.computed)({get:()=>r.value?.[Io.FRIENDSHIPS_KEY]||{},set:e=>{r.value&&(r.value[Io.FRIENDSHIPS_KEY]=e)}}),g=(0,t.computed)({get:()=>r.value?.[Io.LOVES_KEY]||{},set:e=>{r.value&&(r.value[Io.LOVES_KEY]=e)}}),b=(0,t.ref)(null),f=(0,t.ref)(null),h=()=>{try{const e=getLastMessageId();f.value=Oo.loadFromVariable(e)}catch(e){console.error('Failed to load state:',e),f.value=null}};h(),(0,t.onMounted)(()=>{(0,t.nextTick)(()=>{X()})}),(0,t.onUnmounted)(()=>{W()});const x=(0,t.computed)(()=>f.value?.active_characters||new Map),y=(0,t.computed)(()=>f.value?.deactive_characters||new Map),E=(0,t.computed)(()=>b.value&&f.value?f.value.getCharacter(b.value):null),k=(0,t.computed)(()=>{if(!f.value)return[];const e=[];for(const[t,a]of f.value.active_characters)t!==b.value&&e.push({id:t,name:a.name});for(const[t,a]of f.value.deactive_characters)t!==b.value&&e.push({id:t,name:a.name});return e}),V=(0,t.computed)(()=>{if(!f.value)return[];const e=[];for(const[t,a]of f.value.items)e.push({id:t,name:a.name,type:'item'});for(const[t,a]of f.value.storages)e.push({id:t,name:a.name,type:'storage'});return e}),N=e=>{if(!f.value)return'æœªçŸ¥';const t=f.value.items.get(e);if(t)return t.name;const a=f.value.storages.get(e);return a?a.name:'æœªçŸ¥'},w=e=>f.value?.storages.has(e)||!1,S=e=>{const t=f.value?.storages.get(e);return t?.inventory.size||0},B=e=>{const t=f.value?.storages.get(e);return t?.inventory||new Map},C=e=>{if(!f.value)return'ç„¡æè¿°';const t=f.value.items.get(e);if(t)return t.description;const a=f.value.storages.get(e);return a?a.description:'ç„¡æè¿°'},I=e=>{b.value=e},D=e=>{if(!f.value||'c1'===e)return;const t=f.value.getCharacter(e);if(!t)return;f.value.active_characters.has(e)?(f.value.active_characters.delete(e),f.value.deactive_characters.set(e,t)):(f.value.deactive_characters.delete(e),f.value.active_characters.set(e,t)),f.value.saveAsVariable(getLastMessageId()),h()},T=()=>{n.value&&q(),b.value=null},M=()=>{E.value&&'c1'!==b.value&&(i.value={visible:!0,title:'ç¢ºèªåˆªé™¤è§’è‰²',message:`ç¢ºå®šè¦åˆªé™¤è§’è‰² "${E.value.name}" å—Žï¼Ÿæ­¤æ“ä½œç„¡æ³•æ’¤éŠ·ã€‚`,confirmText:'åˆªé™¤',cancelText:'å–æ¶ˆ'})},Y=()=>{f.value&&b.value&&'c1'!==b.value&&(f.value.active_characters.delete(b.value),f.value.deactive_characters.delete(b.value),f.value.saveAsVariable(getLastMessageId()),b.value=null,h()),i.value.visible=!1},O=()=>{i.value.visible=!1},A=()=>{r.value?.é—œä¿‚&&(r.value.é—œä¿‚['']='')},R=()=>{r.value?.æ‰€æŒç‰©&&(r.value.æ‰€æŒç‰©['']=1)},K=()=>{r.value?.å‹å¥½åº¦&&(r.value.å‹å¥½åº¦['']=0)},U=()=>{r.value?.æ„›æƒ…åº¦&&(r.value.æ„›æƒ…åº¦['']=0)},L=()=>{r.value&&void 0!==r.value.å¿ƒæƒ…&&(r.value.å¿ƒæƒ…<-100?r.value.å¿ƒæƒ…=-100:r.value.å¿ƒæƒ…>100&&(r.value.å¿ƒæƒ…=100))},F=()=>{r.value&&void 0!==r.value.æ€§æ…¾&&(r.value.æ€§æ…¾<0?r.value.æ€§æ…¾=0:r.value.æ€§æ…¾>100&&(r.value.æ€§æ…¾=100))},j=e=>{v.value&&void 0!==v.value[e]&&(v.value[e]<-1e3?v.value[e]=-1e3:v.value[e]>1e3&&(v.value[e]=1e3))},H=e=>{g.value&&void 0!==g.value[e]&&(g.value[e]<0?g.value[e]=0:g.value[e]>1e3&&(g.value[e]=1e3))},P=()=>{if(E.value){const e=E.value.toRecord();r.value={[Io.NAME_KEY]:e[Io.NAME_KEY],[Io.GENDER_KEY]:e[Io.GENDER_KEY],[Io.AGE_KEY]:e[Io.AGE_KEY].toString(),[Io.HEIGHT_KEY]:e[Io.HEIGHT_KEY].toString(),[Io.WEIGHT_KEY]:e[Io.WEIGHT_KEY].toString(),[Io.CHEST_SIZE_KEY]:e[Io.CHEST_SIZE_KEY].toString(),[Io.CUP_SIZE_KEY]:e[Io.CUP_SIZE_KEY]||'',[Io.WAIST_SIZE_KEY]:e[Io.WAIST_SIZE_KEY].toString(),[Io.HIPS_SIZE_KEY]:e[Io.HIPS_SIZE_KEY].toString(),[Io.IDENTITY_KEY]:e[Io.IDENTITY_KEY],[Io.HAIRSTYLE_KEY]:e[Io.HAIRSTYLE_KEY],[Io.APPEARANCE_KEY]:e[Io.APPEARANCE_KEY],[Io.CLOTHES_KEY]:e[Io.CLOTHES_KEY],[Io.FAVOURITE_KEY]:e[Io.FAVOURITE_KEY],[Io.INTRODUCTION_KEY]:e[Io.INTRODUCTION_KEY],[Io.PERSONALITY_KEY]:e[Io.PERSONALITY_KEY],[Io.EXTRA_INFORMATION_KEY]:e[Io.EXTRA_INFORMATION_KEY],[Io.MONEY_KEY]:e[Io.MONEY_KEY],[Io.MOOD_KEY]:e[Io.MOOD_KEY],[Io.HORNY_KEY]:e[Io.HORNY_KEY],[Io.RELATIONS_KEY]:e[Io.RELATIONS_KEY],[Io.FRIENDSHIPS_KEY]:e[Io.FRIENDSHIPS_KEY],[Io.LOVES_KEY]:e[Io.LOVES_KEY],[Io.INVENTORY_KEY]:e[Io.INVENTORY_KEY],[Io.BIRTHDAY_KEY]:e[Io.BIRTHDAY_KEY]},l.value=b.value||'',n.value=!0,o.value=!1}},G=()=>{const e=(()=>{if(!f.value)return'c2';const e=new Set;for(const t of f.value.active_characters.keys())e.add(t);for(const t of f.value.deactive_characters.keys())e.add(t);let t=2;for(;e.has(`c${t}`);)t++;return`c${t}`})();l.value=e,r.value={[Io.NAME_KEY]:'',[Io.AGE_KEY]:null,[Io.GENDER_KEY]:'',[Io.IDENTITY_KEY]:'',[Io.INTRODUCTION_KEY]:'',[Io.PERSONALITY_KEY]:'',[Io.HEIGHT_KEY]:0,[Io.WEIGHT_KEY]:0,[Io.CHEST_SIZE_KEY]:0,[Io.CUP_SIZE_KEY]:'',[Io.WAIST_SIZE_KEY]:0,[Io.HIPS_SIZE_KEY]:0,[Io.HAIRSTYLE_KEY]:'',[Io.APPEARANCE_KEY]:'',[Io.CLOTHES_KEY]:'',[Io.BIRTHDAY_KEY]:{month:1,date:1},[Io.FAVOURITE_KEY]:'',[Io.EXTRA_INFORMATION_KEY]:'',[Io.MONEY_KEY]:0,[Io.MOOD_KEY]:0,[Io.HORNY_KEY]:0,[Io.RELATIONS_KEY]:{},[Io.INVENTORY_KEY]:{},[Io.FRIENDSHIPS_KEY]:{},[Io.LOVES_KEY]:{}},n.value=!0,o.value=!0,b.value=null},q=()=>{n.value=!1,o.value=!1,r.value=null,l.value=''},X=()=>{if('undefined'==typeof ResizeObserver)return void(s.value=74);d.value=new ResizeObserver(e=>{for(const t of e){const e=t.target;e.classList.contains('tab-navigation')&&(s.value=e.offsetHeight)}});const e=document.querySelector('.tab-navigation.top');e&&(d.value.observe(e),s.value=e.offsetHeight)},W=()=>{d.value&&(d.value.disconnect(),d.value=null)},J=()=>{if(f.value&&r.value){const e=l.value.trim();if(o.value){const t=f.value.active_characters.has(e),a=f.value.deactive_characters.has(e);if(t||a)return void toastr.error(`è§’è‰²ID "${e}" å·²ç¶“å­˜åœ¨ï¼Œè«‹é¸æ“‡å…¶ä»–ID`)}else if(b.value&&e!==b.value){const t=f.value.active_characters.has(e),a=f.value.deactive_characters.has(e);if(t||a)return void toastr.error(`è§’è‰²ID "${e}" å·²ç¶“å­˜åœ¨ï¼Œè«‹é¸æ“‡å…¶ä»–ID`)}if(r.value.ç”Ÿæ—¥&&r.value.ç”Ÿæ—¥.month&&r.value.ç”Ÿæ—¥.date){const e=new Date,t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate(),o=r.value.ç”Ÿæ—¥.month,l=r.value.ç”Ÿæ—¥.date;let i=t-(r.value.å¹´é½¡||0);(o>a||o===a&&l>n)&&(i-=1),r.value.ç”Ÿæ—¥=new Date(i,r.value.ç”Ÿæ—¥.month-1,r.value.ç”Ÿæ—¥.date).toString()}if(r.value.é—œä¿‚){const e={};for(const[t,a]of Object.entries(r.value.é—œä¿‚))t&&a&&'string'==typeof a&&''!==a.trim()&&(e[t]=a);r.value.é—œä¿‚=e}if(r.value.æ‰€æŒç‰©){const e={};for(const[t,a]of Object.entries(r.value.æ‰€æŒç‰©))if(t&&a&&'number'==typeof a&&a>0){const n=w(t)?1:a;e[t]=n}r.value.æ‰€æŒç‰©=e}if(r.value.å‹å¥½åº¦){const e={};for(const[t,a]of Object.entries(r.value.å‹å¥½åº¦))t&&void 0!==a&&'number'==typeof a&&a>=-1e3&&a<=1e3&&(e[t]=a);r.value.å‹å¥½åº¦=e}if(r.value.æ„›æƒ…åº¦){const e={};for(const[t,a]of Object.entries(r.value.æ„›æƒ…åº¦))t&&void 0!==a&&'number'==typeof a&&a>0&&a<=1e3&&(e[t]=a);r.value.æ„›æƒ…åº¦=e}const t=e,a={[Io.NAME_KEY]:r.value.åç¨±,[Io.GENDER_KEY]:r.value.æ€§åˆ¥,[Io.AGE_KEY]:parseInt(r.value.å¹´é½¡),[Io.HEIGHT_KEY]:parseInt(r.value.èº«é«˜),[Io.WEIGHT_KEY]:parseInt(r.value.é«”é‡),[Io.CHEST_SIZE_KEY]:parseInt(r.value.èƒ¸åœ),[Io.CUP_SIZE_KEY]:r.value.ç½©æ¯||void 0,[Io.WAIST_SIZE_KEY]:parseInt(r.value.è…°åœ),[Io.HIPS_SIZE_KEY]:parseInt(r.value.è‡€åœ),[Io.IDENTITY_KEY]:r.value.èº«ä»½,[Io.HAIRSTYLE_KEY]:r.value.é«®åž‹,[Io.APPEARANCE_KEY]:r.value.æ¨£è²Œ,[Io.CLOTHES_KEY]:r.value.è¡£è‘—,[Io.FAVOURITE_KEY]:r.value.æ„›å¥½,[Io.INTRODUCTION_KEY]:r.value.ç°¡ä»‹,[Io.PERSONALITY_KEY]:r.value.æ€§æ ¼,[Io.EXTRA_INFORMATION_KEY]:r.value.å…¶ä»–é‡è¦è³‡è¨Š,[Io.BIRTHDAY_KEY]:r.value.ç”Ÿæ—¥,[Io.MONEY_KEY]:r.value.é‡‘éŒ¢??0,[Io.MOOD_KEY]:r.value.å¿ƒæƒ…??50,[Io.HORNY_KEY]:r.value.æ€§æ…¾??0,[Io.RELATIONS_KEY]:r.value.é—œä¿‚??{},[Io.FRIENDSHIPS_KEY]:r.value.å‹å¥½åº¦??{},[Io.LOVES_KEY]:r.value.æ„›æƒ…åº¦??{},[Io.INVENTORY_KEY]:r.value.æ‰€æŒç‰©??{}};if(o.value)f.value.active_characters.set(t,Io.fromRecord(a)),f.value.saveAsVariable(getLastMessageId()),h(),b.value=t;else if(b.value){const e=f.value.active_characters.has(b.value);t!==b.value?(e?(f.value.active_characters.delete(b.value),f.value.active_characters.set(t,Io.fromRecord(a))):(f.value.deactive_characters.delete(b.value),f.value.deactive_characters.set(t,Io.fromRecord(a))),b.value=t):e?f.value.active_characters.set(b.value,Io.fromRecord(a)):f.value.deactive_characters.set(b.value,Io.fromRecord(a)),f.value.saveAsVariable(getLastMessageId()),h()}}n.value=!1,o.value=!1,r.value=null,l.value=''};return(e,a)=>{return(0,t.openBlock)(),(0,t.createElementBlock)('div',as,[(0,t.createCommentVNode)(' è§’è‰²åˆ—è¡¨è¦–åœ– '),b.value||o.value?((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,{key:1},[(0,t.createCommentVNode)(' è§’è‰²è©³ç´°ä¿¡æ¯è¦–åœ– '),(0,t.createElementVNode)('div',bs,[(0,t.createCommentVNode)(' è§’è‰²åç¨±æ¨™é¡Œ '),(0,t.createElementVNode)('div',fs,[(0,t.createElementVNode)('div',hs,[n.value||o.value?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('button',{key:0,class:'edit-button',onClick:P},'ç·¨è¼¯')),n.value||o.value||'c1'===b.value?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('button',{key:1,class:'delete-button',onClick:M},' åˆªé™¤ '))]),(0,t.createElementVNode)('h1',xs,(0,t.toDisplayString)(o.value?'æ–°å¢žè§’è‰²':E.value?.name||'N/A'),1),(0,t.createElementVNode)('button',{class:'back-button',onClick:T},'â†')]),(0,t.createCommentVNode)(' æ‰€æœ‰å±¬æ€§çµ±ä¸€é¡¯ç¤º '),(0,t.createElementVNode)('div',ys,[(0,t.createCommentVNode)(' åŸºæœ¬ä¿¡æ¯ '),(0,t.createElementVNode)('div',_s,[a[25]||(a[25]=(0,t.createElementVNode)('span',{class:'attribute-label'},'ID',-1)),n.value||o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:1,'onUpdate:modelValue':a[0]||(a[0]=e=>l.value=e),class:'attribute-input'},null,512)),[[t.vModelText,l.value]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',Es,(0,t.toDisplayString)(b.value),1))]),(0,t.createElementVNode)('div',ks,[a[26]||(a[26]=(0,t.createElementVNode)('span',{class:'attribute-label'},[(0,t.createTextVNode)('åç¨±'),(0,t.createElementVNode)('span',{class:'required-asterisk'},'*')],-1)),n.value||o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:1,'onUpdate:modelValue':a[1]||(a[1]=e=>r.value.åç¨±=e),class:'attribute-input'},null,512)),[[t.vModelText,r.value.åç¨±]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',Vs,(0,t.toDisplayString)(E.value?.name||'N/A'),1))]),(0,t.createElementVNode)('div',Ns,[a[27]||(a[27]=(0,t.createElementVNode)('span',{class:'attribute-label'},[(0,t.createTextVNode)('æ€§åˆ¥'),(0,t.createElementVNode)('span',{class:'required-asterisk'},'*')],-1)),n.value||o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:1,'onUpdate:modelValue':a[2]||(a[2]=e=>r.value.æ€§åˆ¥=e),class:'attribute-input'},null,512)),[[t.vModelText,r.value.æ€§åˆ¥]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',ws,(0,t.toDisplayString)(E.value?.gender||'N/A'),1))]),(0,t.createElementVNode)('div',Ss,[a[28]||(a[28]=(0,t.createElementVNode)('span',{class:'attribute-label'},[(0,t.createTextVNode)('å¹´é½¡'),(0,t.createElementVNode)('span',{class:'required-asterisk'},'*')],-1)),n.value||o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:1,'onUpdate:modelValue':a[3]||(a[3]=e=>r.value.å¹´é½¡=e),class:'attribute-input',type:'number'},null,512)),[[t.vModelText,r.value.å¹´é½¡,void 0,{number:!0}]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',Bs,(0,t.toDisplayString)(E.value?.age||'N/A'),1))]),(0,t.createCommentVNode)(' èº«é«”æ¸¬é‡ '),(0,t.createElementVNode)('div',Cs,[a[29]||(a[29]=(0,t.createElementVNode)('span',{class:'attribute-label unit-label'},[(0,t.createTextVNode)('èº«é«˜ (cm)'),(0,t.createElementVNode)('span',{class:'required-asterisk'},'*')],-1)),n.value||o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:1,'onUpdate:modelValue':a[4]||(a[4]=e=>r.value.èº«é«˜=e),class:'attribute-input',type:'number'},null,512)),[[t.vModelText,r.value.èº«é«˜,void 0,{number:!0}]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',$s,(0,t.toDisplayString)(E.value?.height||'N/A'),1))]),(0,t.createElementVNode)('div',Is,[a[30]||(a[30]=(0,t.createElementVNode)('span',{class:'attribute-label unit-label'},[(0,t.createTextVNode)('é«”é‡ (kg)'),(0,t.createElementVNode)('span',{class:'required-asterisk'},'*')],-1)),n.value||o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:1,'onUpdate:modelValue':a[5]||(a[5]=e=>r.value.é«”é‡=e),class:'attribute-input',type:'number'},null,512)),[[t.vModelText,r.value.é«”é‡,void 0,{number:!0}]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',zs,(0,t.toDisplayString)(E.value?.weight||'N/A'),1))]),(0,t.createElementVNode)('div',Ds,[a[31]||(a[31]=(0,t.createElementVNode)('span',{class:'attribute-label unit-label'},[(0,t.createTextVNode)('èƒ¸åœ (cm)'),(0,t.createElementVNode)('span',{class:'required-asterisk'},'*')],-1)),n.value||o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:1,'onUpdate:modelValue':a[6]||(a[6]=e=>r.value.èƒ¸åœ=e),class:'attribute-input',type:'number'},null,512)),[[t.vModelText,r.value.èƒ¸åœ,void 0,{number:!0}]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',Ts,(0,t.toDisplayString)(E.value?.chest_size||'N/A'),1))]),(0,t.createElementVNode)('div',Ms,[a[32]||(a[32]=(0,t.createElementVNode)('span',{class:'attribute-label'},[(0,t.createTextVNode)('ç½©æ¯'),(0,t.createElementVNode)('span',{class:'required-asterisk'},'*')],-1)),n.value||o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:1,'onUpdate:modelValue':a[7]||(a[7]=e=>r.value.ç½©æ¯=e),class:'attribute-input'},null,512)),[[t.vModelText,r.value.ç½©æ¯]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',Ys,(0,t.toDisplayString)(E.value?.cup_size||'ä¸é©ç”¨'),1))]),(0,t.createElementVNode)('div',Os,[a[33]||(a[33]=(0,t.createElementVNode)('span',{class:'attribute-label unit-label'},[(0,t.createTextVNode)('è…°åœ (cm)'),(0,t.createElementVNode)('span',{class:'required-asterisk'},'*')],-1)),n.value||o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:1,'onUpdate:modelValue':a[8]||(a[8]=e=>r.value.è…°åœ=e),class:'attribute-input',type:'number'},null,512)),[[t.vModelText,r.value.è…°åœ,void 0,{number:!0}]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',As,(0,t.toDisplayString)(E.value?.waist_size||'N/A'),1))]),(0,t.createElementVNode)('div',Rs,[a[34]||(a[34]=(0,t.createElementVNode)('span',{class:'attribute-label unit-label'},[(0,t.createTextVNode)('è‡€åœ (cm)'),(0,t.createElementVNode)('span',{class:'required-asterisk'},'*')],-1)),n.value||o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:1,'onUpdate:modelValue':a[9]||(a[9]=e=>r.value.è‡€åœ=e),class:'attribute-input',type:'number'},null,512)),[[t.vModelText,r.value.è‡€åœ,void 0,{number:!0}]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',Ks,(0,t.toDisplayString)(E.value?.hips_size||'N/A'),1))]),(0,t.createCommentVNode)(' é‡‘éŒ¢ '),(0,t.createElementVNode)('div',Us,[a[35]||(a[35]=(0,t.createElementVNode)('span',{class:'attribute-label'},'é‡‘éŒ¢',-1)),n.value||o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:1,'onUpdate:modelValue':a[10]||(a[10]=e=>r.value.é‡‘éŒ¢=e),class:'attribute-input',type:'number'},null,512)),[[t.vModelText,r.value.é‡‘éŒ¢,void 0,{number:!0}]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',Ls,(0,t.toDisplayString)((d=E.value?.money,void 0===d?'N/A':`$${d.toLocaleString()}`)),1))]),(0,t.createCommentVNode)(' ç”Ÿæ—¥ '),(0,t.createElementVNode)('div',Fs,[a[38]||(a[38]=(0,t.createElementVNode)('span',{class:'attribute-label'},'ç”Ÿæ—¥',-1)),n.value||o.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',Hs,[(0,t.createElementVNode)('div',Ps,[(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':a[11]||(a[11]=e=>r.value.ç”Ÿæ—¥.month=e),class:'attribute-input birthday-month',type:'number',placeholder:'æœˆ',min:'1',max:'12'},null,512),[[t.vModelText,r.value.ç”Ÿæ—¥.month,void 0,{number:!0}]]),a[36]||(a[36]=(0,t.createElementVNode)('span',{class:'birthday-separator'},'æœˆ',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':a[12]||(a[12]=e=>r.value.ç”Ÿæ—¥.date=e),class:'attribute-input birthday-date',type:'number',placeholder:'æ—¥',min:'1',max:'31'},null,512),[[t.vModelText,r.value.ç”Ÿæ—¥.date,void 0,{number:!0}]]),a[37]||(a[37]=(0,t.createElementVNode)('span',{class:'birthday-separator'},'æ—¥',-1))])])):((0,t.openBlock)(),(0,t.createElementBlock)('span',js,(0,t.toDisplayString)((s=E.value?.birthday,s?`${s.month}æœˆ${s.date}æ—¥`:'N/A')),1))]),(0,t.createCommentVNode)(' å¿ƒæƒ…å’Œæ€§æ…¾ (åƒ…éžç”¨æˆ¶è§’è‰²é¡¯ç¤º) '),'c1'!==b.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',Gs,[n.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',qs,[a[39]||(a[39]=(0,t.createElementVNode)('span',{class:'attribute-label'},'å¿ƒæƒ…',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':a[13]||(a[13]=e=>r.value.å¿ƒæƒ…=e),class:'attribute-input',type:'number',min:'-100',max:'100',onInput:L,onBlur:L},null,544),[[t.vModelText,r.value.å¿ƒæƒ…,void 0,{number:!0}]])])):((0,t.openBlock)(),(0,t.createBlock)(ts,{key:0,label:'å¿ƒæƒ…',value:E.value?.mood||0,attributeType:'mood'},null,8,['value']))])):(0,t.createCommentVNode)('v-if',!0),'c1'!==b.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',Xs,[n.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',Ws,[a[40]||(a[40]=(0,t.createElementVNode)('span',{class:'attribute-label'},'æ€§æ…¾',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':a[14]||(a[14]=e=>r.value.æ€§æ…¾=e),class:'attribute-input',type:'number',min:'0',max:'100',onInput:F,onBlur:F},null,544),[[t.vModelText,r.value.æ€§æ…¾,void 0,{number:!0}]])])):((0,t.openBlock)(),(0,t.createBlock)(ts,{key:0,label:'æ€§æ…¾',value:E.value?.horny||0,attributeType:'horny'},null,8,['value']))])):(0,t.createCommentVNode)('v-if',!0),(0,t.createCommentVNode)(' å¤–è²Œç‰¹å¾µ '),(0,t.createElementVNode)('div',Js,[a[41]||(a[41]=(0,t.createElementVNode)('span',{class:'attribute-label'},[(0,t.createTextVNode)('èº«ä»½'),(0,t.createElementVNode)('span',{class:'required-asterisk'},'*')],-1)),n.value||o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('textarea',{key:1,'onUpdate:modelValue':a[15]||(a[15]=e=>r.value.èº«ä»½=e),class:'attribute-textarea'},null,512)),[[t.vModelText,r.value.èº«ä»½]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',Zs,(0,t.toDisplayString)(E.value?.identity||'N/A'),1))]),(0,t.createElementVNode)('div',Qs,[a[42]||(a[42]=(0,t.createElementVNode)('span',{class:'attribute-label'},[(0,t.createTextVNode)('é«®åž‹'),(0,t.createElementVNode)('span',{class:'required-asterisk'},'*')],-1)),n.value||o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('textarea',{key:1,'onUpdate:modelValue':a[16]||(a[16]=e=>r.value.é«®åž‹=e),class:'attribute-textarea'},null,512)),[[t.vModelText,r.value.é«®åž‹]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',ed,(0,t.toDisplayString)(E.value?.hairstyle||'N/A'),1))]),(0,t.createElementVNode)('div',td,[a[43]||(a[43]=(0,t.createElementVNode)('span',{class:'attribute-label'},[(0,t.createTextVNode)('æ¨£è²Œ'),(0,t.createElementVNode)('span',{class:'required-asterisk'},'*')],-1)),n.value||o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('textarea',{key:1,'onUpdate:modelValue':a[17]||(a[17]=e=>r.value.æ¨£è²Œ=e),class:'attribute-textarea'},null,512)),[[t.vModelText,r.value.æ¨£è²Œ]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',ad,(0,t.toDisplayString)(E.value?.appearance||'N/A'),1))]),(0,t.createElementVNode)('div',nd,[a[44]||(a[44]=(0,t.createElementVNode)('span',{class:'attribute-label'},[(0,t.createTextVNode)('è¡£è‘—'),(0,t.createElementVNode)('span',{class:'required-asterisk'},'*')],-1)),n.value||o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('textarea',{key:1,'onUpdate:modelValue':a[18]||(a[18]=e=>r.value.è¡£è‘—=e),class:'attribute-textarea'},null,512)),[[t.vModelText,r.value.è¡£è‘—]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',od,(0,t.toDisplayString)(E.value?.clothes||'N/A'),1))]),(0,t.createElementVNode)('div',rd,[a[45]||(a[45]=(0,t.createElementVNode)('span',{class:'attribute-label'},[(0,t.createTextVNode)('æ„›å¥½'),(0,t.createElementVNode)('span',{class:'required-asterisk'},'*')],-1)),n.value||o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('textarea',{key:1,'onUpdate:modelValue':a[19]||(a[19]=e=>r.value.æ„›å¥½=e),class:'attribute-textarea'},null,512)),[[t.vModelText,r.value.æ„›å¥½]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',ld,(0,t.toDisplayString)(E.value?.favourite||'N/A'),1))]),(0,t.createElementVNode)('div',id,[a[46]||(a[46]=(0,t.createElementVNode)('span',{class:'attribute-label'},[(0,t.createTextVNode)('ç°¡ä»‹'),(0,t.createElementVNode)('span',{class:'required-asterisk'},'*')],-1)),n.value||o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('textarea',{key:1,'onUpdate:modelValue':a[20]||(a[20]=e=>r.value.ç°¡ä»‹=e),class:'attribute-textarea'},null,512)),[[t.vModelText,r.value.ç°¡ä»‹]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',sd,(0,t.toDisplayString)(E.value?.introduction||'N/A'),1))]),(0,t.createElementVNode)('div',dd,[a[47]||(a[47]=(0,t.createElementVNode)('span',{class:'attribute-label'},[(0,t.createTextVNode)('æ€§æ ¼'),(0,t.createElementVNode)('span',{class:'required-asterisk'},'*')],-1)),n.value||o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('textarea',{key:1,'onUpdate:modelValue':a[21]||(a[21]=e=>r.value.æ€§æ ¼=e),class:'attribute-textarea'},null,512)),[[t.vModelText,r.value.æ€§æ ¼]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',cd,(0,t.toDisplayString)(E.value?.personality||'N/A'),1))]),E.value?.extra_information&&!o.value||n.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',ud,[a[48]||(a[48]=(0,t.createElementVNode)('span',{class:'attribute-label'},[(0,t.createTextVNode)('å…¶ä»–é‡è¦è³‡è¨Š'),(0,t.createElementVNode)('span',{class:'required-asterisk'},'*')],-1)),n.value||o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('textarea',{key:1,'onUpdate:modelValue':a[22]||(a[22]=e=>r.value.å…¶ä»–é‡è¦è³‡è¨Š=e),class:'attribute-textarea'},null,512)),[[t.vModelText,r.value.å…¶ä»–é‡è¦è³‡è¨Š]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',pd,(0,t.toDisplayString)(E.value?.extra_information||'N/A'),1))])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createCommentVNode)(' é—œä¿‚ '),(0,t.createElementVNode)('div',md,[a[52]||(a[52]=(0,t.createElementVNode)('h3',{class:'section-title'},'é—œä¿‚',-1)),n.value||o.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',hd,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(p.value,(_,e)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:e,class:'edit-item'},[(0,t.createElementVNode)('select',{value:e,class:'relation-select',onChange:t=>((e,t)=>{if(r.value?.é—œä¿‚&&e!==t){const a=r.value.é—œä¿‚[e];delete r.value.é—œä¿‚[e],t&&(r.value.é—œä¿‚[t]=a)}})(String(e),t.target.value)},[a[50]||(a[50]=(0,t.createElementVNode)('option',{value:'',disabled:''},'é¸æ“‡è§’è‰²',-1)),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(k.value,e=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:e.id,value:e.id},(0,t.toDisplayString)(e.name)+' ('+(0,t.toDisplayString)(e.id)+') ',9,yd))),128))],40,xd),a[51]||(a[51]=(0,t.createElementVNode)('span',{class:'edit-connector'},' æ˜¯æ­¤è§’è‰²çš„ ',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':t=>p.value[e]=t,class:'input-field',placeholder:'é—œä¿‚'},null,8,_d),[[t.vModelText,p.value[e]]]),(0,t.createElementVNode)('button',{class:'relation-remove-btn',onClick:t=>(e=>{r.value?.é—œä¿‚&&delete r.value.é—œä¿‚[e]})(String(e))},'Ã—',8,Ed)]))),128)),(0,t.createElementVNode)('button',{class:'add-relation-btn',onClick:A},'+ æ·»åŠ é—œä¿‚')])):((0,t.openBlock)(),(0,t.createElementBlock)('div',vd,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(E.value?.relations||[],([e,n])=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:e,class:'relation-item'},[(0,t.createElementVNode)('span',gd,(0,t.toDisplayString)(f.value?.getCharacter(e)?.name||'æœªçŸ¥')+' ('+(0,t.toDisplayString)(e)+')',1),a[49]||(a[49]=(0,t.createElementVNode)('span',{class:'connector'},' æ˜¯æ­¤è§’è‰²çš„ ',-1)),(0,t.createElementVNode)('span',bd,(0,t.toDisplayString)(n),1)]))),128)),E.value?.relations&&0!==E.value.relations.size?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('div',fd,' æ²’æœ‰ä»»ä½•é—œä¿‚ '))]))]),(0,t.createCommentVNode)(' å‹å¥½åº¦å’Œæ„›æƒ…åº¦ (åƒ…éžç”¨æˆ¶è§’è‰²é¡¯ç¤º) '),'c1'!==b.value||o.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',kd,[a[55]||(a[55]=(0,t.createElementVNode)('h3',{class:'section-title'},'å‹å¥½åº¦',-1)),n.value||o.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',wd,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(v.value,(_,e)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:e,class:'edit-item'},[(0,t.createElementVNode)('select',{value:e,class:'relation-select',onChange:t=>((e,t)=>{if(r.value?.å‹å¥½åº¦&&e!==t){const a=r.value.å‹å¥½åº¦[e];delete r.value.å‹å¥½åº¦[e],t&&(r.value.å‹å¥½åº¦[t]=a)}})(String(e),t.target.value)},[a[53]||(a[53]=(0,t.createElementVNode)('option',{value:'',disabled:''},'é¸æ“‡è§’è‰²',-1)),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(k.value,e=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:e.id,value:e.id},(0,t.toDisplayString)(e.name)+' ('+(0,t.toDisplayString)(e.id)+') ',9,Bd))),128))],40,Sd),a[54]||(a[54]=(0,t.createElementVNode)('span',{class:'edit-connector'},' : ',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':t=>v.value[e]=t,class:'input-field',type:'number',min:'-1000',max:'1000',placeholder:'å‹å¥½åº¦',onInput:t=>j(String(e)),onBlur:t=>j(String(e))},null,40,Cd),[[t.vModelText,v.value[e],void 0,{number:!0}]]),(0,t.createElementVNode)('button',{class:'friendship-remove-btn',onClick:t=>(e=>{r.value?.å‹å¥½åº¦&&delete r.value.å‹å¥½åº¦[e]})(String(e))},'Ã—',8,$d)]))),128)),(0,t.createElementVNode)('button',{class:'add-friendship-btn',onClick:K},'+ æ·»åŠ å‹å¥½åº¦')])):((0,t.openBlock)(),(0,t.createElementBlock)('div',Vd,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(E.value?.friendships||[],([e,a])=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:e,class:'friendship-item'},[(0,t.createVNode)(ts,{label:`${f.value?.getCharacter(e)?.name||'æœªçŸ¥'} (${e})`,value:a,attributeType:'friendship'},null,8,['label','value'])]))),128)),E.value?.friendships&&0!==E.value.friendships.size?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('div',Nd,' æ²’æœ‰ä»»ä½•å‹å¥½åº¦ '))]))])):(0,t.createCommentVNode)('v-if',!0),'c1'!==b.value||o.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',Id,[a[58]||(a[58]=(0,t.createElementVNode)('h3',{class:'section-title'},'æ„›æƒ…åº¦',-1)),n.value||o.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',Td,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(g.value,(_,e)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:e,class:'edit-item'},[(0,t.createElementVNode)('select',{value:e,class:'relation-select',onChange:t=>((e,t)=>{if(r.value?.æ„›æƒ…åº¦&&e!==t){const a=r.value.æ„›æƒ…åº¦[e];delete r.value.æ„›æƒ…åº¦[e],t&&(r.value.æ„›æƒ…åº¦[t]=a)}})(String(e),t.target.value)},[a[56]||(a[56]=(0,t.createElementVNode)('option',{value:'',disabled:''},'é¸æ“‡è§’è‰²',-1)),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(k.value,e=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:e.id,value:e.id},(0,t.toDisplayString)(e.name)+' ('+(0,t.toDisplayString)(e.id)+') ',9,Yd))),128))],40,Md),a[57]||(a[57]=(0,t.createElementVNode)('span',{class:'edit-connector'},' : ',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':t=>g.value[e]=t,class:'input-field',type:'number',min:'0',max:'1000',placeholder:'æ„›æƒ…åº¦',onInput:t=>H(String(e)),onBlur:t=>H(String(e))},null,40,Od),[[t.vModelText,g.value[e],void 0,{number:!0}]]),(0,t.createElementVNode)('button',{class:'love-remove-btn',onClick:t=>(e=>{r.value?.æ„›æƒ…åº¦&&delete r.value.æ„›æƒ…åº¦[e]})(String(e))},'Ã—',8,Ad)]))),128)),(0,t.createElementVNode)('button',{class:'add-love-btn',onClick:U},'+ æ·»åŠ æ„›æƒ…åº¦')])):((0,t.openBlock)(),(0,t.createElementBlock)('div',zd,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(E.value?.loves||[],([e,a])=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:e,class:'love-item'},[(0,t.createVNode)(ts,{label:`${f.value?.getCharacter(e)?.name||'æœªçŸ¥'} (${e})`,value:a,attributeType:'love'},null,8,['label','value'])]))),128)),E.value?.loves&&0!==E.value.loves.size?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('div',Dd,' æ²’æœ‰ä»»ä½•æ„›æƒ…åº¦ '))]))])):(0,t.createCommentVNode)('v-if',!0),(0,t.createElementVNode)('div',Rd,[a[60]||(a[60]=(0,t.createElementVNode)('h3',{class:'section-title'},'æ‰€æŒç‰©',-1)),n.value||o.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',Wd,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(m.value,(_,e)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:e,class:'inventory-edit-item'},[(0,t.createElementVNode)('select',{value:e,class:'inventory-select',onChange:t=>((e,t)=>{if(r.value?.æ‰€æŒç‰©&&e!==t){const a=r.value.æ‰€æŒç‰©[e];delete r.value.æ‰€æŒç‰©[e],t&&(r.value.æ‰€æŒç‰©[t]=a)}})(String(e),t.target.value)},[a[59]||(a[59]=(0,t.createElementVNode)('option',{value:'',disabled:''},'é¸æ“‡ç‰©å“æˆ–è²¯å­˜é»ž...',-1)),(0,t.createElementVNode)('optgroup',Zd,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(V.value.filter(e=>'item'===e.type),e=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:e.id,value:e.id},(0,t.toDisplayString)(e.name)+' ('+(0,t.toDisplayString)(e.id)+') ',9,Qd))),128))]),(0,t.createElementVNode)('optgroup',ec,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(V.value.filter(e=>'storage'===e.type),e=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:e.id,value:e.id},(0,t.toDisplayString)(e.name)+' ('+(0,t.toDisplayString)(e.id)+') ',9,tc))),128))])],40,Jd),w(String(e))?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('span',ac,'Ã—')),w(String(e))?(0,t.createCommentVNode)('v-if',!0):(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:1,'onUpdate:modelValue':t=>m.value[e]=t,class:'inventory-quantity-input',type:'number',min:'0',placeholder:'æ•¸é‡'},null,8,nc)),[[t.vModelText,m.value[e],void 0,{number:!0}]]),(0,t.createElementVNode)('button',{class:'inventory-remove-btn',onClick:t=>(e=>{r.value?.æ‰€æŒç‰©&&delete r.value.æ‰€æŒç‰©[e]})(String(e))},'Ã—',8,oc)]))),128)),(0,t.createElementVNode)('button',{class:'add-inventory-btn',onClick:R},'+ æ·»åŠ ç‰©å“æˆ–è²¯å­˜é»ž')])):((0,t.openBlock)(),(0,t.createElementBlock)('div',Kd,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(E.value?.inventory||[],([e,a])=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:e,class:(0,t.normalizeClass)(['inventory-item',{'storage-item':w(e)}])},[(0,t.createElementVNode)('div',Ud,[(0,t.createElementVNode)('span',Ld,(0,t.toDisplayString)(N(e))+' ('+(0,t.toDisplayString)(e)+')',1),w(e)?((0,t.openBlock)(),(0,t.createElementBlock)('span',jd,'è²¯å­˜é»ž')):((0,t.openBlock)(),(0,t.createElementBlock)('span',Fd,'Ã— '+(0,t.toDisplayString)(a),1))]),(0,t.createElementVNode)('div',Hd,(0,t.toDisplayString)(C(e)),1),w(e)?((0,t.openBlock)(),(0,t.createElementBlock)('div',Pd,[0===S(e)?((0,t.openBlock)(),(0,t.createElementBlock)('div',Gd,'ç„¡ç‰©å“')):((0,t.openBlock)(),(0,t.createElementBlock)('div',qd,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(B(e),([e,a])=>((0,t.openBlock)(),(0,t.createElementBlock)('span',{key:e,class:(0,t.normalizeClass)(f.value?.storages.has(e)?'storage-item-tag':'inventory-item-tag')},(0,t.toDisplayString)(N(e))+' ('+(0,t.toDisplayString)(e)+')'+(0,t.toDisplayString)(f.value?.storages.has(e)?'':` Ã— ${a}`),3))),128))]))])):(0,t.createCommentVNode)('v-if',!0)],2))),128)),E.value?.inventory&&0!==E.value.inventory.size?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('div',Xd,' æ²’æœ‰ä»»ä½•ç‰©å“ '))]))]),(0,t.createCommentVNode)(' ç·¨è¼¯æŒ‰éˆ• '),n.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',rc,[(0,t.createElementVNode)('button',{class:'confirm-button',disabled:u.value,onClick:J},'ç¢ºèª',8,lc),(0,t.createElementVNode)('button',{class:'cancel-button',onClick:q},'å–æ¶ˆ')])):(0,t.createCommentVNode)('v-if',!0)])],2112)):((0,t.openBlock)(),(0,t.createElementBlock)('div',ns,[(0,t.createCommentVNode)(' æ´»èºè§’è‰²éƒ¨åˆ† '),(0,t.createElementVNode)('div',os,[a[23]||(a[23]=(0,t.createElementVNode)('h3',{class:'section-title'},'æ´»èºè§’è‰²',-1)),(0,t.createElementVNode)('div',rs,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(x.value,([e,a])=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:e,class:'character-item clickable',onClick:t=>I(e)},[(0,t.createElementVNode)('div',{class:(0,t.normalizeClass)(['character-info',{'user-character-info':'c1'===e}])},[(0,t.createElementVNode)('span',{class:(0,t.normalizeClass)('c1'===e?'user-id':'character-id')},(0,t.toDisplayString)(e),3),(0,t.createElementVNode)('span',{class:(0,t.normalizeClass)('c1'===e?'user-name':'character-name')},(0,t.toDisplayString)(a.name),3)],2),'c1'!==e?((0,t.openBlock)(),(0,t.createElementBlock)('button',{key:0,class:'toggle-status-button',title:'è¨­ç‚ºéžæ´»èº',onClick:(0,t.withModifiers)(t=>D(e),['stop'])},' â†“ ',8,is)):(0,t.createCommentVNode)('v-if',!0),'c1'!==e?((0,t.openBlock)(),(0,t.createElementBlock)('div',ss,[(0,t.createVNode)(ts,{label:'å¿ƒæƒ…',value:a.mood||0,attributeType:'mood'},null,8,['value']),(0,t.createVNode)(ts,{label:'æ€§æ…¾',value:a.horny||0,attributeType:'horny'},null,8,['value']),(0,t.createVNode)(ts,{label:'å‹å¥½åº¦',value:a.friendships?.get('c1')||0,attributeType:'friendship'},null,8,['value']),(0,t.createVNode)(ts,{label:'æ„›æƒ…åº¦',value:a.loves?.get('c1')||0,attributeType:'love'},null,8,['value'])])):(0,t.createCommentVNode)('v-if',!0)],8,ls))),128)),0===x.value.size?((0,t.openBlock)(),(0,t.createElementBlock)('div',ds,'æ²’æœ‰æ´»èºè§’è‰²')):(0,t.createCommentVNode)('v-if',!0)])]),(0,t.createCommentVNode)(' éžæ´»èºè§’è‰²éƒ¨åˆ† '),(0,t.createElementVNode)('div',cs,[a[24]||(a[24]=(0,t.createElementVNode)('h3',{class:'section-title'},'éžæ´»èºè§’è‰²',-1)),(0,t.createElementVNode)('div',us,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(y.value,([e,a])=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:e,class:'character-item clickable',onClick:t=>I(e)},[(0,t.createElementVNode)('div',{class:(0,t.normalizeClass)(['character-info',{'user-character-info':'c1'===e}])},[(0,t.createElementVNode)('span',{class:(0,t.normalizeClass)('c1'===e?'user-id':'character-id')},(0,t.toDisplayString)(e),3),(0,t.createElementVNode)('span',{class:(0,t.normalizeClass)('c1'===e?'user-name':'character-name')},(0,t.toDisplayString)(a.name),3)],2),'c1'!==e?((0,t.openBlock)(),(0,t.createElementBlock)('button',{key:0,class:'toggle-status-button',title:'è¨­ç‚ºæ´»èº',onClick:(0,t.withModifiers)(t=>D(e),['stop'])},' â†‘ ',8,ms)):(0,t.createCommentVNode)('v-if',!0),'c1'!==e?((0,t.openBlock)(),(0,t.createElementBlock)('div',vs,[(0,t.createVNode)(ts,{label:'å¿ƒæƒ…',value:a.mood||0,attributeType:'mood'},null,8,['value']),(0,t.createVNode)(ts,{label:'æ€§æ…¾',value:a.horny||0,attributeType:'horny'},null,8,['value']),(0,t.createVNode)(ts,{label:'å‹å¥½åº¦',value:a.friendships?.get('c1')||0,attributeType:'friendship'},null,8,['value']),(0,t.createVNode)(ts,{label:'æ„›æƒ…åº¦',value:a.loves?.get('c1')||0,attributeType:'love'},null,8,['value'])])):(0,t.createCommentVNode)('v-if',!0)],8,ps))),128)),0===y.value.size?((0,t.openBlock)(),(0,t.createElementBlock)('div',gs,'æ²’æœ‰éžæ´»èºè§’è‰²')):(0,t.createCommentVNode)('v-if',!0)])]),(0,t.createCommentVNode)(' æ–°å¢žè§’è‰²æŒ‰éˆ• '),o.value?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('button',{key:0,class:'add-character-button',onClick:G},'+ æ·»åŠ è§’è‰²'))])),(0,t.createCommentVNode)(' ç¢ºèªçª—å£ '),(0,t.createVNode)(Xi,{'confirm-dialog':i.value,onConfirmDialogConfirm:Y,onConfirmDialogCancel:O},null,8,['confirm-dialog'])]);var s,d}}});n(4084);const sc=(0,d.A)(ic,[['__scopeId','data-v-684d53c6']]);class dc{static instance;state=(0,t.ref)({is_generating:!1,is_generating_new_swipe:!1,current_generation_id:null,last_user_message_id:null,last_user_message_text:'',swipe_generation_message_id:null});constructor(){eventOn(iframe_events.GENERATION_ENDED,(e,t)=>{this.handleGenerationEnd(e,t)})}static getInstance(){return dc.instance||(dc.instance=new dc),dc.instance}getState(){return this.state}startGeneration(e,t){this.state.value.is_generating=!0,this.state.value.last_user_message_id=t,this.state.value.last_user_message_text=e;const a=`generation_${Date.now()}`;this.state.value.current_generation_id=a,eventEmit('MESSAGE_SENT',t),this.hideSummarizedMessages(),this.addEventStartTag(),generate({generation_id:a})}startSwipeGeneration(e){this.state.value.is_generating_new_swipe=!0,this.state.value.swipe_generation_message_id=e,this.hideSummarizedMessages(),this.addEventStartTag(),setChatMessages([{message_id:e,is_hidden:!0}],{refresh:'none'});const t=`swipe_generation_${Date.now()}`;this.state.value.current_generation_id=t,generate({generation_id:t})}async stopGeneration(){if(this.state.value.current_generation_id)try{await stopGenerationById(this.state.value.current_generation_id),this.state.value.is_generating_new_swipe?(this.state.value.is_generating_new_swipe=!1,this.state.value.swipe_generation_message_id=null):null!==this.state.value.last_user_message_id&&this.restoreUserInput(),this.resetState()}catch(e){console.error('Failed to stop generation:',e),this.resetState()}}restoreUserInput(){eventEmit('RESTORE_USER_INPUT',this.state.value.last_user_message_text)}async handleGenerationEnd(e,t){try{if(!t||!t.startsWith('generation_')&&!t.startsWith('swipe_generation_'))return;if(this.state.value.is_generating_new_swipe&&null!==this.state.value.swipe_generation_message_id){const t=this.state.value.swipe_generation_message_id,a=getChatMessages(t,{include_swipes:!0})[0];if(a&&a.swipes){const n=[...a.swipes,e],o=n.length-1;await setChatMessages([{message_id:t,swipes:n,swipe_id:o,is_hidden:!1}],{refresh:'none'})}}else await createChatMessages([{role:'assistant',message:e}],{refresh:'none'});this.removeEventStartTag(),eventEmit('MESSAGE_RECEIVED',getLastMessageId())}catch(e){console.error('Failed to handle generation end:',e)}finally{this.resetState()}}resetState(){this.state.value.is_generating=!1,this.state.value.is_generating_new_swipe=!1,this.state.value.current_generation_id=null,this.state.value.swipe_generation_message_id=null,this.state.value.last_user_message_id=null,this.state.value.last_user_message_text=''}isGenerating(){return this.state.value.is_generating||this.state.value.is_generating_new_swipe}getCurrentGenerationId(){return this.state.value.current_generation_id}hideSummarizedMessages(){try{if(0===getLastMessageId())return;const e=Oo.loadFromVariable(getLastMessageId()-1).getLatestSummaryLastMessageId(),t=getLastMessageId()+1,a=[];if(e>=0)for(let t=0;t<=e;t++)a.push({message_id:t,is_hidden:!0});for(let n=e+1;n<t;n++)a.push({message_id:n,is_hidden:!1});a.length>0&&setChatMessages(a,{refresh:'none'})}catch(e){console.error('Failed to hide summarized messages:',e)}}addEventStartTag(){if(0===getLastMessageId())return;const e=Oo.loadFromVariable(getLastMessageId()-1),t=0===e.summaries.length?0:e.summaries[e.summaries.length-1].last_message_id+1,a=getChatMessages(t)[0].message,n=`\x3c!--${Oo.CURRENT_EVENT_KEY}é–‹å§‹--\x3e\n`;setChatMessages([{message_id:t,message:`${n}${a}`}])}removeEventStartTag(){if(0===getLastMessageId())return;const e=Oo.loadFromVariable(getLastMessageId()-1),t=0===e.summaries.length?0:e.summaries[e.summaries.length-1].last_message_id+1,a=getChatMessages(t)[0].message,n=`\x3c!--${Oo.CURRENT_EVENT_KEY}é–‹å§‹--\x3e\n`;setChatMessages([{message_id:t,message:a.replaceAll(n,'')}])}}const cc=dc.getInstance(),uc={class:'conversation-tab-container'},pc={class:'main-content'},mc={class:'dialogue-fullscreen'},vc={key:0,class:'load-more-container'},gc={key:0,class:'edit-mode'},bc={class:'edit-controls'},fc=['onClick'],hc={class:'message-header'},xc={class:'message-header-row'},yc={class:'message-id'},_c={class:'message-actions'},Ec=['onClick'],kc=['onClick'],Vc={class:'message-status-row'},Nc={class:'status-info'},wc={class:'status-datetime'},Sc={class:'status-location'},Bc={class:'message-content'},Cc=['innerHTML'],$c=['innerHTML'],Ic={key:0,class:'swipe-controls'},zc=['disabled','onClick'],Dc={class:'swipe-indicator'},Tc=['disabled','onClick'],Mc=['disabled','onClick'],Yc={class:'input-container'},Oc={key:0,class:'loading-spinner'},Ac='conversation_user_input',Rc=(0,t.defineComponent)({__name:'conversation_tab',emits:['renderSizeChanged'],setup(e,{expose:a,emit:n}){(0,t.useCssVars)(e=>({v14702539:k.value}));const o=(0,t.ref)(''),r=(0,t.ref)([]),l=cc.getState(),i=(0,t.computed)(()=>l.value.is_generating),s=(0,t.computed)(()=>l.value.is_generating_new_swipe),d=(0,t.ref)(null),u=(0,t.ref)(null),p=(0,t.ref)(null),m=(0,t.ref)(null),v=(0,t.ref)(''),g=(0,t.ref)({visible:!1,title:'',message:'',confirmText:'ç¢ºå®š',cancelText:'å–æ¶ˆ'}),b=(0,t.ref)(10),f=(0,t.ref)(0),h=(0,t.ref)(!1),x=(0,t.ref)(0),y=(0,t.ref)(0),E=(0,t.ref)(null),k=(0,t.computed)(()=>`calc(100vh - ${x.value+y.value}px)`),V=(0,t.ref)(0),N=e=>{try{const t=Oo.loadFromVariable(e),a=t.datetime,n=a.year,o=a.month,r=a.date,l=a.hours,i=a.minutes,s=['æ—¥','ä¸€','äºŒ','ä¸‰','å››','äº”','å…­'][a.toDate().getDay()],d=`${n}å¹´${o}æœˆ${r}æ—¥ (${s}) ${`${l.toString().padStart(2,'0')}:${i.toString().padStart(2,'0')}`} ${t.weather}`,c=t.getCurrentLocations();return{datetimeLine:d,locationString:c.map(e=>e.name).join('-')}}catch(e){return console.error('Failed to load message status:',e),{datetimeLine:'è¼‰å…¥ç‹€æ…‹ä¸­...',locationString:''}}},w=(0,t.ref)(new Map),S=(0,t.ref)(new Set),B=async(e,t)=>{if(!w.value.has(e)&&!S.value.has(e)){S.value.add(e);try{const a=await SillyTavern.getTokenCountAsync(t);w.value.set(e,a)}catch(t){console.error('Failed to get token count:',t),w.value.set(e,0)}finally{S.value.delete(e)}}},C=()=>{if(u.value){const e=u.value.scrollHeight,a=u.value.scrollTop;f.value+=b.value,q(),(0,t.nextTick)(()=>{(0,t.nextTick)(()=>{if(u.value){const t=u.value.scrollHeight-e;u.value.scrollTop=a+t}})})}else f.value+=b.value,q()},I=()=>{f.value=b.value},D=e=>{'Enter'===e.key&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),H())},T=()=>{(()=>{if(d.value){d.value.style.height='auto';const e=Math.min(d.value.scrollHeight,120);d.value.style.height=`${e}px`}})(),(()=>{try{localStorage.setItem(Ac,o.value)}catch(e){console.error('Failed to save user input to localStorage:',e)}})()},M=()=>{m.value=null,v.value=''},Y=e=>{},O=async(e,a)=>{try{const e=getLastMessageId(),n=[];for(let t=a+1;t<r.value.length;t++){const a=e-(r.value.length-1-t);n.push(a)}n.length>0&&await deleteChatMessages(n,{refresh:'none'});let l='';for(let e=a+1;e<r.value.length;e++)if('user'===r.value[e].role){l=r.value[e].content;break}o.value=l,I(),q(),(0,t.nextTick)(()=>{K()})}catch(e){console.error('Failed to rewind conversation:',e)}},A=e=>{let t=[{type:'plain_text',message:e}];const a=(()=>{try{const e=getVariables({type:'chat'});return e?.settings?.tag_rules||[]}catch(e){return console.error('Failed to load folding rules:',e),[]}})();for(const e of a)t=R(e,t);for(const e of t)'plain_text'===e.type&&(e.message=e.message.replace(/ã€Œ([^ã€]*)ã€/g,'<span class="dialogue-text">ã€Œ$1ã€</span>'));return t},R=(e,t)=>{const a=[];for(const n of t){if('plain_text'!==n.type){a.push(n);continue}const t=n.message,o=`<${e.tag_name}>`,r=`</${e.tag_name}>`;if('both'===e.match_mode&&'first'===e.match_strategy){let n=t;for(;;){const t=n.indexOf(o),l=n.indexOf(r);if(t<0||l<0||l<=t){''!==n&&a.push({type:'plain_text',message:n});break}const i=n.substring(0,t);''!==i&&a.push({type:'plain_text',message:i});const s=n.substring(t+o.length,l);'invisible'===e.display_mode||'fold_bar'===e.display_mode&&a.push({type:'fold_bar',message:s,fold_bar_title:e.title_name||e.tag_name}),n=n.substring(l+r.length)}}else{const l='both'===e.match_mode?t.indexOf(o):-1,i='first'===e.match_strategy?t.indexOf(r):t.lastIndexOf(r);if(i<0||'both'===e.match_mode&&l<0){a.push(n);continue}const s='both'===e.match_mode?l+o.length:0,d=l<0?'':t.substring(0,l),c=t.substring(s,i),u=t.substring(i+r.length);'invisible'===e.display_mode?a.push({type:'plain_text',message:d+u}):'fold_bar'===e.display_mode&&(''!==d&&a.push({type:'plain_text',message:d}),a.push({type:'fold_bar',message:c,fold_bar_title:e.title_name||e.tag_name}),''!==u&&a.push({type:'plain_text',message:u}))}}return a},K=()=>{u.value&&(u.value.scrollTop=u.value.scrollHeight)},U=(e,t,a)=>{g.value={visible:!0,title:e,message:t,confirmText:'ç¢ºå®š',cancelText:'å–æ¶ˆ'},a&&(g.value._callback=a)},L=()=>{const e=g.value._callback;e&&e(),g.value.visible=!1,delete g.value._callback},F=()=>{g.value.visible=!1},j=e=>{const t=-1===e;Oo.loadFromVariable(e).injectPrompt(t)},H=async e=>{if(void 0===e&&(e=!1),e||o.value.trim()){const e=o.value.trim();o.value='',d.value&&(d.value.style.height='auto');try{localStorage.removeItem(Ac)}catch(e){console.error('Failed to clear user input from localStorage:',e)}try{await createChatMessages([{role:'user',message:e}],{refresh:'none'});const t=getLastMessageId();I(),q(),j(getLastMessageId()-1),cc.startGeneration(e,t)}catch(e){console.error('Failed to send message:',e),cc.stopGeneration()}}},P=async e=>{const t=e.swipe_id||0;if(t<e.swipes.length-1){const e=t+1;await setChatMessages([{message_id:getLastMessageId(),swipe_id:e}],{refresh:'none'}),q(),K()}else await(async()=>{const e=getLastMessageId();await setChatMessages([{message_id:e,is_hidden:!0}],{refresh:'none'}),j(getLastMessageId()-1),cc.startSwipeGeneration(e)})()},G=async(e,t,a,n,o)=>{const r=a.filter((_,e)=>e!==t),l=n.filter((_,e)=>e!==t),i=o.filter((_,e)=>e!==t);let s=t;s>=r.length&&(s=r.length-1),await setChatMessages([{message_id:getLastMessageId(),swipes:r,swipes_data:l,swipes_info:i,swipe_id:s}],{refresh:'none'}),q(),K()},q=()=>{try{w.value.clear();const e=getLastMessageId();if(V.value=e,e>=0){const a=f.value,n=Math.max(0,e-a+1),o=getChatMessages(`${n}-${e}`,{include_swipes:!0});r.value=o.map((e,t)=>{const a='assistant'===e.role&&t===o.length-1,n=e;return{content:n.swipes?n.swipes[n.swipe_id||0]:e.message,role:e.role,swipe_id:n.swipe_id,swipes:n.swipes,swipes_data:n.swipes_data,swipes_info:n.swipes_info,is_latest_assistant:a}}),h.value=n>0,f.value===b.value&&(0,t.nextTick)(()=>{K()})}}catch(e){console.error('Failed to load messages:',e),r.value=[],h.value=!1}};return a({handleRenderSizeChanged:e=>{console.log('Render size changed to:',e),b.value=e,I(),q()},getScrollPosition:()=>u.value?.scrollTop||0,setScrollPosition:e=>{u.value&&(u.value.scrollTop=e)}}),(0,t.onMounted)(()=>{(()=>{try{const e=getVariables({type:'chat'});e?.settings?.render_size&&(b.value=e.settings.render_size)}catch(e){console.error('Failed to load chat settings:',e)}})(),f.value=b.value,V.value=getLastMessageId(),q(),(()=>{try{const e=localStorage.getItem(Ac);e&&(o.value=e)}catch(e){console.error('Failed to restore user input from localStorage:',e)}})(),(0,t.nextTick)(()=>{(()=>{if('undefined'==typeof ResizeObserver)return x.value=80,void(y.value=68);E.value=new ResizeObserver(e=>{for(const t of e){const e=t.target;e.classList.contains('tab-navigation')?x.value=e.offsetHeight:e.classList.contains('input-area')&&(y.value=e.offsetHeight)}});const e=document.querySelector('.tab-navigation.top');e&&(E.value.observe(e),x.value=e.offsetHeight),p.value&&(E.value.observe(p.value),y.value=p.value.offsetHeight)})()}),cc.getState(),eventOn('initialization_completed',()=>{H(!0)}),eventOn('MESSAGE_RECEIVED_PROCESSED',()=>{q(),(0,t.nextTick)(()=>{(()=>{if(u.value){const e=u.value.querySelectorAll('.message');e.length>0&&e[e.length-1].scrollIntoView({behavior:'smooth',block:'start'})}})()})}),eventOn(tavern_events.GENERATION_ENDED,e=>{cc.stopGeneration()}),eventOn('RESTORE_USER_INPUT',e=>{o.value=e})}),(0,t.onUnmounted)(()=>{E.value&&(E.value.disconnect(),E.value=null)}),(e,a)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',uc,[(0,t.createElementVNode)('div',pc,[(0,t.createElementVNode)('div',mc,[(0,t.createElementVNode)('div',{ref_key:'messages_container_ref',ref:u,class:'messages-container'},[(0,t.createCommentVNode)(' è¼‰å…¥æ›´å¤šæ¶ˆæ¯æŒ‰éˆ• '),h.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',vc,[(0,t.createElementVNode)('button',{class:'load-more-btn',onClick:C},'è¼‰å…¥æ›´å¤šæ¶ˆæ¯')])):(0,t.createCommentVNode)('v-if',!0),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(r.value,(e,n)=>{return(0,t.openBlock)(),(0,t.createElementBlock)('div',{key:n,class:(0,t.normalizeClass)(['message',e.role])},[m.value===n?((0,t.openBlock)(),(0,t.createElementBlock)('div',gc,[(0,t.withDirectives)((0,t.createElementVNode)('textarea',{'onUpdate:modelValue':a[0]||(a[0]=e=>v.value=e),class:'edit-textarea',rows:'3',onKeydown:Y},null,544),[[t.vModelText,v.value]]),(0,t.createElementVNode)('div',bc,[(0,t.createElementVNode)('button',{class:'edit-btn confirm-btn',onClick:t=>(async(e,t)=>{if(v.value.trim()&&v.value!==e.content)try{if('user'===e.role)await setChatMessages([{message_id:getLastMessageId()-(r.value.length-1-t),message:v.value.trim()}],{refresh:'none'});else if('assistant'===e.role)if(e.swipes){const a=e.swipe_id||0,n=[...e.swipes];n[a]=v.value.trim(),await setChatMessages([{message_id:getLastMessageId()-(r.value.length-1-t),swipes:n}],{refresh:'none'})}else await setChatMessages([{message_id:getLastMessageId()-(r.value.length-1-t),message:v.value.trim()}],{refresh:'none'});q()}catch(e){console.error('Failed to save edit:',e)}M()})(e,n)},'âœ“',8,fc),(0,t.createElementVNode)('button',{class:'edit-btn cancel-btn',onClick:M},'âœ•')])])):((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,{key:1},[(0,t.createElementVNode)('div',hc,[(0,t.createElementVNode)('div',xc,[(0,t.createElementVNode)('span',yc,'#'+(0,t.toDisplayString)(V.value-(r.value.length-1-n))+' ('+(0,t.toDisplayString)((o=V.value-(r.value.length-1-n),l=e.content,w.value.has(o)?`${w.value.get(o)}`:(S.value.has(o)||B(o,l),'...')))+' tokens)',1),(0,t.createElementVNode)('div',_c,['assistant'!==e.role||e.is_latest_assistant?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('button',{key:0,class:'rewind-message-btn',title:'å¾žæ­¤é»žå›žé€€å°è©±',onClick:t=>((e,t)=>{U('å›žé€€å°è©±','ç¢ºå®šè¦å¾žæ­¤é»žå›žé€€å°è©±å—Žï¼Ÿé€™å°‡åˆªé™¤æ­¤é»žä¹‹å¾Œçš„æ‰€æœ‰æ¶ˆæ¯ã€‚',()=>O(e,t))})(e,n)},' âª ',8,Ec)),(0,t.createElementVNode)('button',{class:'edit-message-btn',title:'ç·¨è¼¯æ¶ˆæ¯',onClick:t=>((e,t)=>{m.value=t,v.value=e.content})(e,n)},'âœï¸',8,kc)])]),(0,t.createElementVNode)('div',Vc,[(0,t.createElementVNode)('div',Nc,[(0,t.createElementVNode)('div',wc,(0,t.toDisplayString)(N(V.value-(r.value.length-1-n)).datetimeLine),1),(0,t.createElementVNode)('div',Sc,(0,t.toDisplayString)(N(V.value-(r.value.length-1-n)).locationString),1)])])]),(0,t.createElementVNode)('div',Bc,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(A(e.content),(e,a)=>((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,{key:a},[(0,t.createCommentVNode)(' æ™®é€šæ–‡æœ¬ '),(0,t.createCommentVNode)(' eslint-disable-next-line vue/no-v-html '),'plain_text'===e.type?((0,t.openBlock)(),(0,t.createElementBlock)('span',{key:0,innerHTML:e.message},null,8,Cc)):(0,t.createCommentVNode)('v-if',!0),(0,t.createCommentVNode)(' æ‘ºç–Šæ¬„ '),'fold_bar'===e.type?((0,t.openBlock)(),(0,t.createBlock)(c,{key:1,title:e.fold_bar_title||'å…§å®¹','is-open':e.is_open||!1},{default:(0,t.withCtx)(()=>[(0,t.createCommentVNode)(' eslint-disable-next-line vue/no-v-html '),(0,t.createElementVNode)('span',{innerHTML:e.message},null,8,$c)]),_:2},1032,['title','is-open'])):(0,t.createCommentVNode)('v-if',!0)],64))),128))]),e.is_latest_assistant&&e.swipes?((0,t.openBlock)(),(0,t.createElementBlock)('div',Ic,[(0,t.createElementVNode)('button',{class:'swipe-btn',disabled:(e.swipe_id||0)<=0,onClick:t=>(async e=>{if(e.swipe_id>0){const t=e.swipe_id-1;await setChatMessages([{message_id:getLastMessageId(),swipe_id:t}],{refresh:'none'}),q(),K()}})(e)},' â€¹ ',8,zc),(0,t.createElementVNode)('span',Dc,(0,t.toDisplayString)((e.swipe_id||0)+1)+'/'+(0,t.toDisplayString)(e.swipes.length),1),(0,t.createElementVNode)('button',{class:'swipe-btn',disabled:s.value,onClick:t=>P(e)},'â€º',8,Tc),(0,t.createElementVNode)('button',{class:'swipe-btn delete-btn',disabled:e.swipes.length<=1,title:'åˆªé™¤ç•¶å‰swipe',onClick:t=>(async e=>{const t=e.swipe_id||0,a=e.swipes,n=e.swipes_data,o=e.swipes_info;a.length<=1||U('åˆªé™¤å›žæ‡‰è®Šé«”',`ç¢ºå®šè¦åˆªé™¤ç¬¬ ${t+1} å€‹å›žæ‡‰è®Šé«”å—Žï¼Ÿ\n\né€™å°‡æ°¸ä¹…åˆªé™¤è©²å›žæ‡‰è®Šé«”ã€‚`,()=>G(e,t,a,n,o))})(e)},' Ã— ',8,Mc)])):(0,t.createCommentVNode)('v-if',!0)],64))],2);var o,l}),128))],512)]),(0,t.createElementVNode)('div',{ref_key:'input_area_ref',ref:p,class:'input-area'},[(0,t.createElementVNode)('div',Yc,[(0,t.withDirectives)((0,t.createElementVNode)('textarea',{ref_key:'message_input_ref',ref:d,'onUpdate:modelValue':a[1]||(a[1]=e=>o.value=e),class:'message-input',placeholder:'è¼¸å…¥æ‚¨çš„è¨Šæ¯...',rows:'1',onKeydown:D,onInput:T},null,544),[[t.vModelText,o.value]]),i.value||s.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',Oc)):(0,t.createCommentVNode)('v-if',!0),(0,t.createElementVNode)('button',{class:'send-button',onClick:a[2]||(a[2]=e=>i.value||s.value?(async()=>{await cc.stopGeneration()})():H())},(0,t.toDisplayString)(i.value||s.value?'åœæ­¢':'ç™¼é€'),1)])],512),(0,t.createCommentVNode)(' é€šç”¨çµ„ä»¶ '),(0,t.createVNode)(Xi,{'confirm-dialog':g.value,onConfirmDialogConfirm:L,onConfirmDialogCancel:F},null,8,['confirm-dialog'])])]))}});n(6125);const Kc=(0,d.A)(Rc,[['__scopeId','data-v-18297b7b']]),Uc={class:'item-tab-container'},Lc={class:'item-content'},Fc={class:'item-list'},jc={class:'item-info'},Hc={class:'item-id-name-row'},Pc={key:0,class:'item-id'},Gc=['onUpdate:modelValue'],qc={key:2,class:'item-name'},Xc=['onUpdate:modelValue'],Wc={key:0,class:'item-description'},Jc=['onUpdate:modelValue'],Zc={class:'item-value-actions-row'},Qc={key:0,class:'item-value'},eu={key:1,class:'item-value-input-wrapper'},tu=['onUpdate:modelValue'],au={class:'item-actions'},nu=['onClick'],ou=['onClick'],ru=['onClick'],lu=['onClick'],iu={key:0,class:'item-row new-item-row'},su={class:'item-info'},du={class:'item-id-name-row'},cu={class:'item-value-actions-row'},uu={class:'item-value-input-wrapper'},pu={key:1,class:'no-items-message'},mu=(0,t.defineComponent)({__name:'item_tab',setup(e){(0,t.useCssVars)(e=>({f33397ea:o.value}));const a=(0,t.ref)(0),n=(0,t.ref)(null),o=(0,t.computed)(()=>`calc(100vh - ${a.value}px)`);(0,t.onMounted)(()=>{(async()=>{await(0,t.nextTick)();const e=document.querySelector('.tab-navigation');e&&window.ResizeObserver?(n.value=new ResizeObserver(e=>{for(const t of e)a.value=t.contentRect.height}),n.value.observe(e)):a.value=74})()}),(0,t.onUnmounted)(()=>{n.value&&(n.value.disconnect(),n.value=null)});const r=(0,t.ref)(!1),l=(0,t.ref)(new Set),i=(0,t.ref)({id:'',name:'',description:'',value:0}),s=(0,t.ref)({}),d=(0,t.ref)({visible:!1,title:'',message:'',confirmText:'ç¢ºèª',cancelText:'å–æ¶ˆ'}),c=(0,t.ref)(null),u=(0,t.ref)(null),p=()=>{u.value&&(u.value.saveAsVariable(getLastMessageId()),m())},m=()=>{try{const e=getLastMessageId();u.value=Oo.loadFromVariable(e)}catch(e){console.error('Failed to load state:',e),u.value=null}};m();const v=(0,t.computed)(()=>u.value?.items||new Map),g=()=>{r.value=!0,i.value={id:'',name:'',description:'',value:0}},b=()=>{if(!u.value||!i.value.id||!i.value.name)return;if(u.value.items.has(i.value.id))return void f();const e=new zo(i.value.name,i.value.description,i.value.value);u.value.items.set(i.value.id,e),p(),f()},f=()=>{r.value=!1,i.value={id:'',name:'',description:'',value:0}},h=e=>{l.value.delete(e),delete s.value[e]},x=()=>{c.value&&u.value&&(u.value.items.delete(c.value),p()),d.value.visible=!1,c.value=null},y=()=>{d.value.visible=!1,c.value=null};return(e,a)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',Uc,[(0,t.createElementVNode)('div',Lc,[(0,t.createCommentVNode)(' ç‰©å“åˆ—è¡¨æ¨™é¡Œ '),a[7]||(a[7]=(0,t.createElementVNode)('div',{class:'item-section'},[(0,t.createElementVNode)('h3',{class:'section-title'},'ç‰©å“åˆ—è¡¨')],-1)),(0,t.createCommentVNode)(' ç‰©å“åˆ—è¡¨ '),(0,t.createElementVNode)('div',Fc,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(v.value,([e,n])=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:e,class:'item-row'},[(0,t.createCommentVNode)(' ç‰©å“ä¿¡æ¯ '),(0,t.createElementVNode)('div',jc,[(0,t.createElementVNode)('div',Hc,[l.value.has(e)?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:1,'onUpdate:modelValue':t=>s.value[e].id=t,class:'item-id-input',placeholder:'ç‰©å“ID'},null,8,Gc)),[[t.vModelText,s.value[e].id]]):((0,t.openBlock)(),(0,t.createElementBlock)('div',Pc,(0,t.toDisplayString)(e),1)),l.value.has(e)?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:3,'onUpdate:modelValue':t=>s.value[e].name=t,class:'item-name-input',placeholder:'ç‰©å“åç¨±'},null,8,Xc)),[[t.vModelText,s.value[e].name]]):((0,t.openBlock)(),(0,t.createElementBlock)('div',qc,(0,t.toDisplayString)(n.name),1))]),l.value.has(e)?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('textarea',{key:1,'onUpdate:modelValue':t=>s.value[e].description=t,class:'item-description-input',placeholder:'ç‰©å“æè¿°'},null,8,Jc)),[[t.vModelText,s.value[e].description]]):((0,t.openBlock)(),(0,t.createElementBlock)('div',Wc,(0,t.toDisplayString)(n.description),1))]),(0,t.createCommentVNode)(' åƒ¹å€¼å’Œæ“ä½œæŒ‰éˆ• '),(0,t.createElementVNode)('div',Zc,[l.value.has(e)?((0,t.openBlock)(),(0,t.createElementBlock)('div',eu,[a[5]||(a[5]=(0,t.createElementVNode)('span',{class:'dollar-sign'},'$',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':t=>s.value[e].value=t,class:'item-value-input',type:'number',placeholder:'åƒ¹å€¼'},null,8,tu),[[t.vModelText,s.value[e].value,void 0,{number:!0}]])])):((0,t.openBlock)(),(0,t.createElementBlock)('div',Qc,'$'+(0,t.toDisplayString)(n.value.toLocaleString()),1)),(0,t.createElementVNode)('div',au,[l.value.has(e)?((0,t.openBlock)(),(0,t.createElementBlock)('button',{key:1,class:'confirm-button',onClick:t=>(e=>{if(!u.value||!s.value[e])return;const t=s.value[e];if(t.id!==e&&u.value.items.has(t.id))return void h(e);const a=u.value.items.get(e);a&&(t.id!==e&&(u.value.items.delete(e),u.value.items.set(t.id,a)),a.name=t.name,a.description=t.description,a.value=t.value,p()),h(e)})(e)},'ä¿å­˜',8,ou)):((0,t.openBlock)(),(0,t.createElementBlock)('button',{key:0,class:'edit-item-button',onClick:t=>(e=>{const t=v.value.get(e);t&&(l.value.add(e),s.value[e]={id:e,name:t.name,description:t.description,value:t.value})})(e)},' ç·¨è¼¯ ',8,nu)),l.value.has(e)?((0,t.openBlock)(),(0,t.createElementBlock)('button',{key:3,class:'cancel-button',onClick:t=>h(e)},'å–æ¶ˆ',8,lu)):((0,t.openBlock)(),(0,t.createElementBlock)('button',{key:2,class:'delete-item-button',onClick:t=>(e=>{const t=v.value.get(e);t&&(c.value=e,d.value={visible:!0,title:'ç¢ºèªåˆªé™¤ç‰©å“',message:`ç¢ºå®šè¦åˆªé™¤ç‰©å“ "${t.name}" å—Žï¼Ÿæ­¤æ“ä½œç„¡æ³•æ’¤éŠ·ã€‚`,confirmText:'åˆªé™¤',cancelText:'å–æ¶ˆ'})})(e)},' åˆªé™¤ ',8,ru))])])]))),128)),(0,t.createCommentVNode)(' æ–°ç‰©å“ç·¨è¼¯è¡Œ '),r.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',iu,[(0,t.createCommentVNode)(' ç‰©å“ä¿¡æ¯ '),(0,t.createElementVNode)('div',su,[(0,t.createElementVNode)('div',du,[(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':a[0]||(a[0]=e=>i.value.id=e),class:'item-id-input',placeholder:'ç‰©å“ID'},null,512),[[t.vModelText,i.value.id]]),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':a[1]||(a[1]=e=>i.value.name=e),class:'item-name-input',placeholder:'ç‰©å“åç¨±'},null,512),[[t.vModelText,i.value.name]])]),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{'onUpdate:modelValue':a[2]||(a[2]=e=>i.value.description=e),class:'item-description-input',placeholder:'ç‰©å“æè¿°'},null,512),[[t.vModelText,i.value.description]])]),(0,t.createCommentVNode)(' åƒ¹å€¼å’Œæ“ä½œæŒ‰éˆ• '),(0,t.createElementVNode)('div',cu,[(0,t.createElementVNode)('div',uu,[a[6]||(a[6]=(0,t.createElementVNode)('span',{class:'dollar-sign'},'$',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':a[3]||(a[3]=e=>i.value.value=e),class:'item-value-input',type:'number',placeholder:'åƒ¹å€¼'},null,512),[[t.vModelText,i.value.value,void 0,{number:!0}]])]),(0,t.createElementVNode)('div',{class:'item-actions'},[(0,t.createElementVNode)('button',{class:'confirm-button',onClick:b},'æ·»åŠ '),(0,t.createElementVNode)('button',{class:'cancel-button',onClick:f},'å–æ¶ˆ')])])])):(0,t.createCommentVNode)('v-if',!0),0!==v.value.size||r.value?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('div',pu,'æ²’æœ‰ä»»ä½•ç‰©å“')),r.value?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('button',{key:2,class:'add-item-button',onClick:g},'+ æ·»åŠ ç‰©å“'))]),(0,t.createCommentVNode)(' ç¢ºèªçª—å£ '),(0,t.createVNode)(Xi,{'confirm-dialog':d.value,'onUpdate:confirmDialog':a[4]||(a[4]=e=>d.value=e),onConfirmDialogConfirm:x,onConfirmDialogCancel:y},null,8,['confirm-dialog'])])]))}});n(4750);const vu=(0,d.A)(mu,[['__scopeId','data-v-b32ed7ea']]),gu={class:'location-tab-container'},bu={class:'location-content'},fu={class:'location-list'},hu=['id'],xu={class:'location-first-row'},yu={class:'location-id-name-group'},_u={key:0,class:'location-id'},Eu=['onUpdate:modelValue'],ku={key:2,class:'location-name'},Vu=['onUpdate:modelValue'],Nu={class:'location-actions'},wu=['onClick'],Su=['onClick'],Bu={class:'location-location-row'},Cu={class:'location-location-group'},$u={key:0,class:'location-location'},Iu=['onUpdate:modelValue'],zu={key:0,class:'location-edit-actions'},Du=['onClick'],Tu=['onClick'],Mu={key:0,class:'location-parent-display'},Yu=['onClick'],Ou={key:1,class:'location-parent-tag'},Au={key:1,class:'location-parent-input-group'},Ru=['onUpdate:modelValue'],Ku=['value','disabled'],Uu={key:2,class:'location-children-display'},Lu=['onClick'],Fu={key:3,class:'location-children-input-group'},ju={class:'selected-children'},Hu=['onClick'],Pu=['onChange'],Gu=['value','disabled'],qu={key:4,class:'location-storages-display'},Xu={key:5,class:'location-storages-input-group'},Wu={class:'selected-storages'},Ju=['onClick'],Zu=['onChange'],Qu=['value','disabled'],ep={key:6,class:'location-description'},tp=['onUpdate:modelValue'],ap={key:0,class:'location-row new-location-row'},np={class:'location-first-row'},op={class:'location-id-name-group'},rp={class:'location-location-row'},lp={class:'location-location-group'},ip={class:'location-parent-input-group'},sp=['value'],dp={class:'location-children-input-group'},cp={class:'selected-children'},up=['onClick'],pp=['value','disabled'],mp={class:'location-storages-input-group'},vp={class:'selected-storages'},gp=['onClick'],bp=['value','disabled'],fp={key:1,class:'no-locations-message'},hp=(0,t.defineComponent)({__name:'location_tab',setup(e){(0,t.useCssVars)(e=>({v77958077:o.value}));const a=(0,t.ref)(0),n=(0,t.ref)(null),o=(0,t.computed)(()=>`calc(100vh - ${a.value}px)`);(0,t.onMounted)(()=>{(async()=>{await(0,t.nextTick)();const e=document.querySelector('.tab-navigation');e&&window.ResizeObserver?(n.value=new ResizeObserver(e=>{for(const t of e)a.value=t.contentRect.height}),n.value.observe(e)):a.value=74})()}),(0,t.onUnmounted)(()=>{n.value&&(n.value.disconnect(),n.value=null)});const r=(0,t.ref)(!1),l=(0,t.ref)(new Set),i=(0,t.ref)({id:'',name:'',location:'',description:'',parent_location_id:null,sub_location_ids:[],storage_ids:[]}),s=(0,t.ref)({}),d=(0,t.ref)({visible:!1,title:'',message:'',confirmText:'ç¢ºèª',cancelText:'å–æ¶ˆ'}),c=(0,t.ref)(null),u=(0,t.ref)(null),p=()=>{u.value&&(u.value.saveAsVariable(getLastMessageId()),m())},m=()=>{try{const e=getLastMessageId();u.value=Oo.loadFromVariable(e)}catch(e){console.error('Failed to load state:',e),u.value=null}};m();const v=(0,t.computed)(()=>u.value?.locations||new Map),g=(0,t.computed)(()=>u.value?.storages||new Map),b=(e,t)=>{let a=t;const n=new Set;for(;a;){if(n.has(a))return!0;if(a===e)return!0;n.add(a);const t=v.value.get(a);a=t?.parent_location_id||null}return!1},f=()=>{r.value=!0,i.value={id:'',name:'',location:'',description:'',parent_location_id:null,sub_location_ids:[],storage_ids:[]},i.value.id=(()=>{const e=Array.from(v.value.keys());let t=1;for(;e.includes(`l${t}`);)t++;return`l${t}`})()},h=e=>{if(!(e.id&&e.name&&e.location&&e.description))return null;try{return new Do(e.id,e.name,e.location,e.description,e.parent_location_id,e.sub_location_ids,e.storage_ids)}catch(e){return console.error('Failed to create location:',e),null}},x=()=>{if(!u.value)return;if(u.value.locations.has(i.value.id))return void y();const e=h(i.value);e?(u.value.locations.set(i.value.id,e),p(),y()):y()},y=()=>{r.value=!1,i.value={id:'',name:'',location:'',description:'',parent_location_id:null,sub_location_ids:[],storage_ids:[]}},E=e=>{l.value.delete(e),delete s.value[e]},k=()=>{c.value&&u.value&&(u.value.locations.delete(c.value),p()),d.value.visible=!1,c.value=null},V=()=>{d.value.visible=!1,c.value=null},N=(e,t)=>{e.sub_location_ids.includes(t)||e.sub_location_ids.push(t)},w=(e,t)=>{const a=e.sub_location_ids.indexOf(t);a>-1&&e.sub_location_ids.splice(a,1)},S=(e,t)=>{e.storage_ids.includes(t)||e.storage_ids.push(t)},B=(e,t)=>{const a=e.storage_ids.indexOf(t);a>-1&&e.storage_ids.splice(a,1)},C=e=>{const t=document.getElementById(`location-${e}`);t&&t.scrollIntoView({behavior:'smooth',block:'start'})};return(e,a)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',gu,[(0,t.createElementVNode)('div',bu,[(0,t.createCommentVNode)(' åœ°é»žåˆ—è¡¨æ¨™é¡Œ '),a[16]||(a[16]=(0,t.createElementVNode)('div',{class:'location-section'},[(0,t.createElementVNode)('h3',{class:'section-title'},'åœ°é»žåˆ—è¡¨')],-1)),(0,t.createCommentVNode)(' åœ°é»žåˆ—è¡¨ '),(0,t.createElementVNode)('div',fu,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(v.value,([e,n])=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{id:`location-${e}`,key:e,class:'location-row'},[(0,t.createCommentVNode)(' ç¬¬ä¸€è¡Œï¼šIDã€åç¨±ã€æ“ä½œæŒ‰éˆ• '),(0,t.createElementVNode)('div',xu,[(0,t.createElementVNode)('div',yu,[l.value.has(e)?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:1,'onUpdate:modelValue':t=>s.value[e].id=t,class:'location-id-input',placeholder:'åœ°é»žID'},null,8,Eu)),[[t.vModelText,s.value[e].id]]):((0,t.openBlock)(),(0,t.createElementBlock)('div',_u,(0,t.toDisplayString)(e),1)),l.value.has(e)?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:3,'onUpdate:modelValue':t=>s.value[e].name=t,class:'location-name-input',placeholder:'åœ°é»žåç¨±'},null,8,Vu)),[[t.vModelText,s.value[e].name]]):((0,t.openBlock)(),(0,t.createElementBlock)('div',ku,(0,t.toDisplayString)(n.name),1))]),(0,t.createElementVNode)('div',Nu,[l.value.has(e)?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('button',{key:0,class:'edit-location-button',onClick:t=>(e=>{const t=v.value.get(e);t&&(l.value.add(e),s.value[e]={id:e,name:t.name,location:t.location,description:t.description,parent_location_id:t.parent_location_id,sub_location_ids:[...t.sub_location_ids],storage_ids:[...t.storage_ids]})})(e)},' ç·¨è¼¯ ',8,wu)),l.value.has(e)?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('button',{key:1,class:'delete-location-button',onClick:t=>(e=>{const t=v.value.get(e);t&&(c.value=e,d.value={visible:!0,title:'ç¢ºèªåˆªé™¤åœ°é»ž',message:`ç¢ºå®šè¦åˆªé™¤åœ°é»ž "${t.name}" å—Žï¼Ÿæ­¤æ“ä½œç„¡æ³•æ’¤éŠ·ã€‚`,confirmText:'åˆªé™¤',cancelText:'å–æ¶ˆ'})})(e)},' åˆªé™¤ ',8,Su))])]),(0,t.createCommentVNode)(' ç¬¬äºŒè¡Œï¼šä½ç½® + ç·¨è¼¯æŒ‰éˆ• '),(0,t.createElementVNode)('div',Bu,[(0,t.createElementVNode)('div',Cu,[a[8]||(a[8]=(0,t.createElementVNode)('span',{class:'location-location-label'},'ä½ç½®ï¼š',-1)),l.value.has(e)?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:1,'onUpdate:modelValue':t=>s.value[e].location=t,class:'location-location-input location-location-input-edit',placeholder:'åœ°é»žä½ç½®'},null,8,Iu)),[[t.vModelText,s.value[e].location]]):((0,t.openBlock)(),(0,t.createElementBlock)('div',$u,(0,t.toDisplayString)(n.location),1))]),l.value.has(e)?((0,t.openBlock)(),(0,t.createElementBlock)('div',zu,[(0,t.createElementVNode)('button',{class:'confirm-button',onClick:t=>(e=>{if(!u.value||!s.value[e])return;const t=s.value[e];if(t.id!==e&&u.value.locations.has(t.id))return void E(e);const a=h(t);if(a){const n=u.value.locations.get(e);n&&(t.id!==e?(u.value.locations.delete(e),u.value.locations.set(t.id,a)):(n.name=a.name,n.location=a.location,n.description=a.description,n.parent_location_id=a.parent_location_id,n.sub_location_ids=a.sub_location_ids,n.storage_ids=a.storage_ids),p()),E(e)}else E(e)})(e)},'ä¿å­˜',8,Du),(0,t.createElementVNode)('button',{class:'cancel-button',onClick:t=>E(e)},'å–æ¶ˆ',8,Tu)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createCommentVNode)(' ç¬¬ä¸‰è¡Œï¼šçˆ¶åœ°é»ž '),l.value.has(e)?((0,t.openBlock)(),(0,t.createElementBlock)('div',Au,[(0,t.withDirectives)((0,t.createElementVNode)('select',{'onUpdate:modelValue':t=>s.value[e].parent_location_id=t,class:'parent-location-select'},[a[9]||(a[9]=(0,t.createElementVNode)('option',{value:null},'æ ¹åœ°é»ž',-1)),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(v.value,([a,n])=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:a,value:a,disabled:a===e||b(e,a)},(0,t.toDisplayString)(n.name)+' ('+(0,t.toDisplayString)(a)+') ',9,Ku))),128))],8,Ru),[[t.vModelSelect,s.value[e].parent_location_id]])])):((0,t.openBlock)(),(0,t.createElementBlock)('div',Mu,[n.parent_location_id?((0,t.openBlock)(),(0,t.createElementBlock)('span',{key:0,class:'location-parent-tag',onClick:e=>C(n.parent_location_id)},' çˆ¶: '+(0,t.toDisplayString)(n.parent_location_id)+' '+(0,t.toDisplayString)(v.value.get(n.parent_location_id)?.name||n.parent_location_id),9,Yu)):((0,t.openBlock)(),(0,t.createElementBlock)('span',Ou,'æ ¹åœ°é»ž'))])),(0,t.createCommentVNode)(' ç¬¬å››è¡Œï¼šå­åœ°é»ž '),l.value.has(e)?((0,t.openBlock)(),(0,t.createElementBlock)('div',Fu,[(0,t.createElementVNode)('div',ju,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(s.value[e].sub_location_ids,a=>((0,t.openBlock)(),(0,t.createElementBlock)('span',{key:a,class:'selected-child-tag'},[(0,t.createTextVNode)((0,t.toDisplayString)(v.value.get(a)?.name||a)+' ',1),(0,t.createElementVNode)('button',{class:'remove-child-btn',onClick:t=>w(s.value[e],a)},' Ã— ',8,Hu)]))),128))]),(0,t.createElementVNode)('select',{class:'child-location-select',onChange:t=>{N(s.value[e],t.target.value),t.target.value=''}},[a[10]||(a[10]=(0,t.createElementVNode)('option',{value:''},'é¸æ“‡å­åœ°é»ž...',-1)),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(v.value,([a,n])=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:a,value:a,disabled:s.value[e].sub_location_ids.includes(a)||a===e||b(a,e)},(0,t.toDisplayString)(n.name)+' ('+(0,t.toDisplayString)(a)+') ',9,Gu))),128))],40,Pu)])):((0,t.openBlock)(),(0,t.createElementBlock)('div',Uu,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(n.sub_location_ids,e=>((0,t.openBlock)(),(0,t.createElementBlock)('span',{key:e,class:'location-child-tag',onClick:t=>C(e)},' å­: '+(0,t.toDisplayString)(e)+' '+(0,t.toDisplayString)(v.value.get(e)?.name||e),9,Lu))),128))])),(0,t.createCommentVNode)(' ç¬¬äº”è¡Œï¼šè²¯å­˜é»ž '),l.value.has(e)?((0,t.openBlock)(),(0,t.createElementBlock)('div',Xu,[(0,t.createElementVNode)('div',Wu,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(s.value[e].storage_ids,a=>((0,t.openBlock)(),(0,t.createElementBlock)('span',{key:a,class:'selected-storage-tag'},[(0,t.createTextVNode)((0,t.toDisplayString)(g.value.get(a)?.name||a)+' ',1),(0,t.createElementVNode)('button',{class:'remove-storage-btn',onClick:t=>B(s.value[e],a)},' Ã— ',8,Ju)]))),128))]),(0,t.createElementVNode)('select',{class:'storage-location-select',onChange:t=>{S(s.value[e],t.target.value),t.target.value=''}},[a[11]||(a[11]=(0,t.createElementVNode)('option',{value:''},'é¸æ“‡è²¯å­˜é»ž...',-1)),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(g.value,([a,n])=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:a,value:a,disabled:s.value[e].storage_ids.includes(a)},(0,t.toDisplayString)(n.name)+' ('+(0,t.toDisplayString)(a)+') ',9,Qu))),128))],40,Zu)])):((0,t.openBlock)(),(0,t.createElementBlock)('div',qu,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(n.storage_ids,e=>((0,t.openBlock)(),(0,t.createElementBlock)('span',{key:e,class:'location-storage-tag'},' è²¯: '+(0,t.toDisplayString)(e)+' '+(0,t.toDisplayString)(g.value.get(e)?.name||e),1))),128))])),(0,t.createCommentVNode)(' ç¬¬äº”è¡Œï¼šæè¿° '),l.value.has(e)?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('textarea',{key:7,'onUpdate:modelValue':t=>s.value[e].description=t,class:'location-description-input',placeholder:'åœ°é»žæè¿°'},null,8,tp)),[[t.vModelText,s.value[e].description]]):((0,t.openBlock)(),(0,t.createElementBlock)('div',ep,(0,t.toDisplayString)(n.description),1))],8,hu))),128)),(0,t.createCommentVNode)(' æ–°åœ°é»žç·¨è¼¯è¡Œ '),r.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',ap,[(0,t.createCommentVNode)(' ç¬¬ä¸€è¡Œï¼šIDã€åç¨± '),(0,t.createElementVNode)('div',np,[(0,t.createElementVNode)('div',op,[(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':a[0]||(a[0]=e=>i.value.id=e),class:'location-id-input',placeholder:'åœ°é»žID'},null,512),[[t.vModelText,i.value.id]]),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':a[1]||(a[1]=e=>i.value.name=e),class:'location-name-input',placeholder:'åœ°é»žåç¨±'},null,512),[[t.vModelText,i.value.name]])])]),(0,t.createCommentVNode)(' ç¬¬äºŒè¡Œï¼šä½ç½® + æ·»åŠ æŒ‰éˆ• '),(0,t.createElementVNode)('div',rp,[(0,t.createElementVNode)('div',lp,[a[12]||(a[12]=(0,t.createElementVNode)('span',{class:'location-location-label'},'ä½ç½®ï¼š',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':a[2]||(a[2]=e=>i.value.location=e),class:'location-location-input location-location-input-edit',placeholder:'åœ°é»žä½ç½®'},null,512),[[t.vModelText,i.value.location]])]),(0,t.createElementVNode)('div',{class:'location-edit-actions'},[(0,t.createElementVNode)('button',{class:'confirm-button',onClick:x},'æ·»åŠ '),(0,t.createElementVNode)('button',{class:'cancel-button',onClick:y},'å–æ¶ˆ')])]),(0,t.createCommentVNode)(' ç¬¬ä¸‰è¡Œï¼šçˆ¶åœ°é»ž '),(0,t.createElementVNode)('div',ip,[(0,t.withDirectives)((0,t.createElementVNode)('select',{'onUpdate:modelValue':a[3]||(a[3]=e=>i.value.parent_location_id=e),class:'parent-location-select'},[a[13]||(a[13]=(0,t.createElementVNode)('option',{value:null},'æ ¹åœ°é»ž',-1)),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(v.value,([e,a])=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:e,value:e},(0,t.toDisplayString)(a.name)+' ('+(0,t.toDisplayString)(e)+') ',9,sp))),128))],512),[[t.vModelSelect,i.value.parent_location_id]])]),(0,t.createCommentVNode)(' ç¬¬å››è¡Œï¼šå­åœ°é»ž '),(0,t.createElementVNode)('div',dp,[(0,t.createElementVNode)('div',cp,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(i.value.sub_location_ids,e=>((0,t.openBlock)(),(0,t.createElementBlock)('span',{key:e,class:'selected-child-tag'},[(0,t.createTextVNode)((0,t.toDisplayString)(v.value.get(e)?.name||e)+' ',1),(0,t.createElementVNode)('button',{class:'remove-child-btn',onClick:t=>w(i.value,e)},'Ã—',8,up)]))),128))]),(0,t.createElementVNode)('select',{class:'child-location-select',onChange:a[4]||(a[4]=e=>{N(i.value,e.target.value),e.target.value=''})},[a[14]||(a[14]=(0,t.createElementVNode)('option',{value:''},'é¸æ“‡å­åœ°é»ž...',-1)),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(v.value,([e,a])=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:e,value:e,disabled:i.value.sub_location_ids.includes(e)||e===i.value.id},(0,t.toDisplayString)(a.name)+' ('+(0,t.toDisplayString)(e)+') ',9,pp))),128))],32)]),(0,t.createCommentVNode)(' ç¬¬äº”è¡Œï¼šè²¯å­˜é»ž '),(0,t.createElementVNode)('div',mp,[(0,t.createElementVNode)('div',vp,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(i.value.storage_ids,e=>((0,t.openBlock)(),(0,t.createElementBlock)('span',{key:e,class:'selected-storage-tag'},[(0,t.createTextVNode)((0,t.toDisplayString)(g.value.get(e)?.name||e)+' ',1),(0,t.createElementVNode)('button',{class:'remove-storage-btn',onClick:t=>B(i.value,e)},'Ã—',8,gp)]))),128))]),(0,t.createElementVNode)('select',{class:'storage-location-select',onChange:a[5]||(a[5]=e=>{S(i.value,e.target.value),e.target.value=''})},[a[15]||(a[15]=(0,t.createElementVNode)('option',{value:''},'é¸æ“‡è²¯å­˜é»ž...',-1)),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(g.value,([e,a])=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:e,value:e,disabled:i.value.storage_ids.includes(e)},(0,t.toDisplayString)(a.name)+' ('+(0,t.toDisplayString)(e)+') ',9,bp))),128))],32)]),(0,t.createCommentVNode)(' ç¬¬å…­è¡Œï¼šæè¿° '),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{'onUpdate:modelValue':a[6]||(a[6]=e=>i.value.description=e),class:'location-description-input',placeholder:'åœ°é»žæè¿°'},null,512),[[t.vModelText,i.value.description]])])):(0,t.createCommentVNode)('v-if',!0),0!==v.value.size||r.value?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('div',fp,'æ²’æœ‰ä»»ä½•åœ°é»ž')),r.value?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('button',{key:2,class:'add-location-button',onClick:f},'+ æ·»åŠ åœ°é»ž'))]),(0,t.createCommentVNode)(' ç¢ºèªçª—å£ '),(0,t.createVNode)(Xi,{'confirm-dialog':d.value,'onUpdate:confirmDialog':a[7]||(a[7]=e=>d.value=e),onConfirmDialogConfirm:k,onConfirmDialogCancel:V},null,8,['confirm-dialog'])])]))}});n(3112);const xp=(0,d.A)(hp,[['__scopeId','data-v-bd354e5e']]),yp={class:'storage-tab-container'},_p={class:'storage-content'},Ep={class:'storage-list'},kp=['id'],Vp={class:'storage-first-row'},Np={class:'storage-id-name-group'},wp={key:0,class:'storage-id'},Sp=['onUpdate:modelValue'],Bp={key:2,class:'storage-name'},Cp=['onUpdate:modelValue'],$p={class:'storage-actions'},Ip=['onClick'],zp=['onClick'],Dp={class:'storage-money-row'},Tp={class:'storage-money-group'},Mp={key:0,class:'storage-money'},Yp=['onUpdate:modelValue','onInput'],Op={key:0,class:'storage-edit-actions'},Ap=['disabled','onClick'],Rp=['onClick'],Kp={key:0,class:'storage-parent-display'},Up={class:'storage-parent-tag'},Lp={key:1,class:'storage-parent-input-group'},Fp=['onUpdate:modelValue'],jp={label:'è§’è‰²'},Hp=['value'],Pp={label:'åœ°é»ž'},Gp=['value'],qp={label:'è²¯å­˜é»ž'},Xp=['value','disabled'],Wp={key:2,class:'storage-inventory-display'},Jp={key:0,class:'no-inventory'},Zp={key:1,class:'inventory-items'},Qp={key:3,class:'storage-inventory-input-group'},em={class:'selected-inventory'},tm={class:'item-name'},am={key:0,class:'storage-indicator'},nm={key:1,class:'inventory-edit-connector'},om=['onUpdate:modelValue','onInput'],rm=['onClick'],lm=['onChange'],im={label:'ç‰©å“'},sm=['value','disabled'],dm={label:'è²¯å­˜é»ž'},cm=['value','disabled'],um={key:4,class:'storage-description'},pm=['onUpdate:modelValue'],mm={key:0,class:'storage-row new-storage-row'},vm={class:'storage-first-row'},gm={class:'storage-id-name-group'},bm={class:'storage-money-row'},fm={class:'storage-money-group'},hm={class:'storage-edit-actions'},xm=['disabled'],ym={class:'storage-parent-input-group'},_m={label:'è§’è‰²'},Em=['value'],km={label:'åœ°é»ž'},Vm=['value'],Nm={label:'è²¯å­˜é»ž'},wm=['value'],Sm={class:'storage-inventory-input-group'},Bm={class:'selected-inventory'},Cm={class:'item-name'},$m={key:0,class:'storage-indicator'},Im={key:1,class:'inventory-edit-connector'},zm=['onUpdate:modelValue','onInput'],Dm=['onClick'],Tm={label:'ç‰©å“'},Mm=['value','disabled'],Ym={label:'è²¯å­˜é»ž'},Om=['value','disabled'],Am={key:1,class:'no-storages-message'},Rm=(0,t.defineComponent)({__name:'storage_tab',setup(e){(0,t.useCssVars)(e=>({v4efc9d77:o.value}));const a=(0,t.ref)(0),n=(0,t.ref)(null),o=(0,t.computed)(()=>`calc(100vh - ${a.value}px)`);(0,t.onMounted)(()=>{(async()=>{await(0,t.nextTick)();const e=document.querySelector('.tab-navigation');e&&window.ResizeObserver?(n.value=new ResizeObserver(e=>{for(const t of e)a.value=t.contentRect.height}),n.value.observe(e)):a.value=74})()}),(0,t.onUnmounted)(()=>{n.value&&(n.value.disconnect(),n.value=null)});const r=(0,t.ref)(!1),l=(0,t.ref)(new Set),i=(0,t.ref)({id:'',name:'',description:'',parent_id:'',money:0,inventory:{}}),s=(0,t.ref)({}),d=(0,t.ref)({visible:!1,title:'',message:'',confirmText:'ç¢ºèª',cancelText:'å–æ¶ˆ'}),c=(0,t.ref)(null),u=e=>p.value?.storages.has(e)||!1,p=(0,t.ref)(null),m=()=>{p.value&&(p.value.saveAsVariable(getLastMessageId()),v())},v=()=>{try{const e=getLastMessageId();p.value=Oo.loadFromVariable(e)}catch(e){console.error('Failed to load state:',e),p.value=null}};v();const g=(0,t.computed)(()=>p.value?.storages||new Map),b=(0,t.computed)(()=>p.value?.active_characters||new Map),f=(0,t.computed)(()=>p.value?.locations||new Map),h=(0,t.computed)(()=>p.value?.items||new Map),x=()=>{r.value=!0,i.value={id:'',name:'',description:'',parent_id:'',money:0,inventory:{}}},y=e=>{if(!e.id||!e.name||!e.description||e.money<0)return null;if(!(b.value.has(e.parent_id)||f.value.has(e.parent_id)||g.value.has(e.parent_id)))return null;for(const t in e.inventory){const a=h.value.has(t)||g.value.has(t),n=g.value.has(t)?1:e.inventory[t];if(!a||n<1)return null}try{const t=new Map;for(const[a,n]of Object.entries(e.inventory)){const e=g.value.has(a)?1:n;t.set(a,e)}return new Mo(e.name,e.description,e.parent_id,e.money,t)}catch(e){return console.error('Failed to create storage:',e),null}},E=()=>{if(!p.value)return;if(p.value.storages.has(i.value.id))return void k();const e=y(i.value);e?(p.value.storages.set(i.value.id,e),m(),k()):k()},k=()=>{r.value=!1,i.value={id:'',name:'',description:'',parent_id:'',money:0,inventory:{}}},V=e=>{l.value.delete(e),delete s.value[e]},N=()=>{c.value&&p.value&&(p.value.storages.delete(c.value),m()),d.value.visible=!1,c.value=null},w=()=>{d.value.visible=!1,c.value=null},S=(e,t)=>{t in e.inventory||(e.inventory[t]=1)},B=(e,t)=>{delete e.inventory[t]};return(e,a)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',yp,[(0,t.createElementVNode)('div',_p,[(0,t.createCommentVNode)(' è²¯å­˜é»žåˆ—è¡¨æ¨™é¡Œ '),a[14]||(a[14]=(0,t.createElementVNode)('div',{class:'storage-section'},[(0,t.createElementVNode)('h3',{class:'section-title'},'è²¯å­˜é»žåˆ—è¡¨')],-1)),(0,t.createCommentVNode)(' è²¯å­˜é»žåˆ—è¡¨ '),(0,t.createElementVNode)('div',Ep,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(g.value,([e,n])=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{id:`storage-${e}`,key:e,class:'storage-row'},[(0,t.createCommentVNode)(' ç¬¬ä¸€è¡Œï¼šIDã€åç¨±ã€æ“ä½œæŒ‰éˆ• '),(0,t.createElementVNode)('div',Vp,[(0,t.createElementVNode)('div',Np,[l.value.has(e)?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:1,'onUpdate:modelValue':t=>s.value[e].id=t,class:'storage-id-input',placeholder:'è²¯å­˜é»žID'},null,8,Sp)),[[t.vModelText,s.value[e].id]]):((0,t.openBlock)(),(0,t.createElementBlock)('div',wp,(0,t.toDisplayString)(e),1)),l.value.has(e)?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:3,'onUpdate:modelValue':t=>s.value[e].name=t,class:'storage-name-input',placeholder:'è²¯å­˜é»žåç¨±'},null,8,Cp)),[[t.vModelText,s.value[e].name]]):((0,t.openBlock)(),(0,t.createElementBlock)('div',Bp,(0,t.toDisplayString)(n.name),1))]),(0,t.createElementVNode)('div',$p,[l.value.has(e)?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('button',{key:0,class:'edit-storage-button',onClick:t=>(e=>{const t=g.value.get(e);t&&(l.value.add(e),s.value[e]={id:e,name:t.name,description:t.description,parent_id:t.parent_id,money:t.money,inventory:Object.fromEntries(t.inventory)})})(e)},' ç·¨è¼¯ ',8,Ip)),l.value.has(e)?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('button',{key:1,class:'delete-storage-button',onClick:t=>(e=>{const t=g.value.get(e);t&&(c.value=e,d.value={visible:!0,title:'ç¢ºèªåˆªé™¤è²¯å­˜é»ž',message:`ç¢ºå®šè¦åˆªé™¤è²¯å­˜é»ž "${t.name}" å—Žï¼Ÿæ­¤æ“ä½œç„¡æ³•æ’¤éŠ·ã€‚`,confirmText:'åˆªé™¤',cancelText:'å–æ¶ˆ'})})(e)},' åˆªé™¤ ',8,zp))])]),(0,t.createCommentVNode)(' ç¬¬äºŒè¡Œï¼šé‡‘éŒ¢ + ç·¨è¼¯æŒ‰éˆ• '),(0,t.createElementVNode)('div',Dp,[(0,t.createElementVNode)('div',Tp,[a[8]||(a[8]=(0,t.createElementVNode)('span',{class:'storage-money-label'},'è²¯å­˜é‡‘é¡ï¼š',-1)),l.value.has(e)?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:1,'onUpdate:modelValue':t=>s.value[e].money=t,type:'number',class:'storage-money-input storage-money-input-edit',placeholder:'é‡‘éŒ¢æ•¸é‡',min:'0',onInput:t=>s.value[e].money=Math.max(0,parseInt(t.target.value)||0)},null,40,Yp)),[[t.vModelText,s.value[e].money,void 0,{number:!0}]]):((0,t.openBlock)(),(0,t.createElementBlock)('div',Mp,'$'+(0,t.toDisplayString)(n.money),1))]),l.value.has(e)?((0,t.openBlock)(),(0,t.createElementBlock)('div',Op,[(0,t.createElementVNode)('button',{class:'confirm-button',disabled:!s.value[e].id||!s.value[e].name||!s.value[e].parent_id,onClick:t=>(e=>{if(!p.value||!s.value[e])return;const t=s.value[e];if(t.id!==e&&p.value.storages.has(t.id))return void V(e);const a=y(t);if(a){const n=p.value.storages.get(e);n&&(t.id!==e?(p.value.storages.delete(e),p.value.storages.set(t.id,a)):(n.name=a.name,n.description=a.description,n.parent_id=a.parent_id,n.money=a.money,n.inventory=a.inventory),m()),V(e)}else V(e)})(e)},' ä¿å­˜ ',8,Ap),(0,t.createElementVNode)('button',{class:'cancel-button',onClick:t=>V(e)},'å–æ¶ˆ',8,Rp)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createCommentVNode)(' ç¬¬ä¸‰è¡Œï¼šçˆ¶ç´š '),l.value.has(e)?((0,t.openBlock)(),(0,t.createElementBlock)('div',Lp,[(0,t.withDirectives)((0,t.createElementVNode)('select',{'onUpdate:modelValue':t=>s.value[e].parent_id=t,class:'parent-select'},[a[9]||(a[9]=(0,t.createElementVNode)('option',{value:'',disabled:''},'é¸æ“‡çˆ¶ç´š (è§’è‰²ã€åœ°é»žæˆ–è²¯å­˜é»ž)...',-1)),(0,t.createElementVNode)('optgroup',jp,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(b.value,([e,a])=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:`char-${e}`,value:e},(0,t.toDisplayString)(a.name)+' ('+(0,t.toDisplayString)(e)+') ',9,Hp))),128))]),(0,t.createElementVNode)('optgroup',Pp,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(f.value,([e,a])=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:`loc-${e}`,value:e},(0,t.toDisplayString)(a.name)+' ('+(0,t.toDisplayString)(e)+') ',9,Gp))),128))]),(0,t.createElementVNode)('optgroup',qp,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(g.value,([a,n])=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:`storage-${a}`,value:a,disabled:a===e},(0,t.toDisplayString)(n.name)+' ('+(0,t.toDisplayString)(a)+') ',9,Xp))),128))])],8,Fp),[[t.vModelSelect,s.value[e].parent_id]])])):((0,t.openBlock)(),(0,t.createElementBlock)('div',Kp,[(0,t.createElementVNode)('span',Up,(0,t.toDisplayString)(n.parent_id)+' '+(0,t.toDisplayString)(b.value.get(n.parent_id)?.name||f.value.get(n.parent_id)?.name||g.value.get(n.parent_id)?.name||n.parent_id),1)])),(0,t.createCommentVNode)(' ç¬¬å››è¡Œï¼šåº«å­˜ '),l.value.has(e)?((0,t.openBlock)(),(0,t.createElementBlock)('div',Qp,[(0,t.createElementVNode)('div',em,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(Object.keys(s.value[e].inventory),a=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:a,class:'selected-inventory-item'},[(0,t.createElementVNode)('span',tm,(0,t.toDisplayString)(h.value.get(a)?.name||g.value.get(a)?.name||a),1),u(a)?((0,t.openBlock)(),(0,t.createElementBlock)('span',am,'è²¯å­˜é»ž')):(0,t.createCommentVNode)('v-if',!0),u(a)?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('span',nm,'Ã—')),u(a)?(0,t.createCommentVNode)('v-if',!0):(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:2,'onUpdate:modelValue':t=>s.value[e].inventory[a]=t,type:'number',class:'item-quantity-input',placeholder:'æ•¸é‡',min:'1',step:'1',onInput:t=>s.value[e].inventory[a]=Math.max(1,parseInt(t.target.value)||1)},null,40,om)),[[t.vModelText,s.value[e].inventory[a],void 0,{number:!0}]]),(0,t.createElementVNode)('button',{class:'remove-item-btn',onClick:t=>B(s.value[e],a)},'Ã—',8,rm)]))),128))]),(0,t.createElementVNode)('select',{class:'item-select',onChange:t=>{S(s.value[e],t.target.value),t.target.value=''}},[a[10]||(a[10]=(0,t.createElementVNode)('option',{value:''},'é¸æ“‡ç‰©å“æˆ–è²¯å­˜é»ž...',-1)),(0,t.createElementVNode)('optgroup',im,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(h.value,([a,n])=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:a,value:a,disabled:s.value[e].inventory.hasOwnProperty(a)},(0,t.toDisplayString)(n.name)+' ('+(0,t.toDisplayString)(a)+') ',9,sm))),128))]),(0,t.createElementVNode)('optgroup',dm,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(g.value,([a,n])=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:a,value:a,disabled:s.value[e].inventory.hasOwnProperty(a)||a===e},(0,t.toDisplayString)(n.name)+' ('+(0,t.toDisplayString)(a)+') ',9,cm))),128))])],40,lm)])):((0,t.openBlock)(),(0,t.createElementBlock)('div',Wp,[0===n.inventory.size?((0,t.openBlock)(),(0,t.createElementBlock)('div',Jp,'ç„¡ç‰©å“')):((0,t.openBlock)(),(0,t.createElementBlock)('div',Zp,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(n.inventory,([e,a])=>((0,t.openBlock)(),(0,t.createElementBlock)('span',{key:e,class:(0,t.normalizeClass)(g.value.has(e)?'storage-item-tag':'inventory-item-tag')},(0,t.toDisplayString)(h.value.get(e)?.name||g.value.get(e)?.name||e)+' ('+(0,t.toDisplayString)(e)+')'+(0,t.toDisplayString)(g.value.has(e)?'':` Ã— ${a}`),3))),128))]))])),(0,t.createCommentVNode)(' ç¬¬äº”è¡Œï¼šæè¿° '),l.value.has(e)?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('textarea',{key:5,'onUpdate:modelValue':t=>s.value[e].description=t,class:'storage-description-input',placeholder:'è²¯å­˜é»žæè¿°'},null,8,pm)),[[t.vModelText,s.value[e].description]]):((0,t.openBlock)(),(0,t.createElementBlock)('div',um,(0,t.toDisplayString)(n.description),1))],8,kp))),128)),(0,t.createCommentVNode)(' æ–°è²¯å­˜é»žç·¨è¼¯è¡Œ '),r.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',mm,[(0,t.createCommentVNode)(' ç¬¬ä¸€è¡Œï¼šIDã€åç¨± '),(0,t.createElementVNode)('div',vm,[(0,t.createElementVNode)('div',gm,[(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':a[0]||(a[0]=e=>i.value.id=e),class:'storage-id-input',placeholder:'è²¯å­˜é»žID'},null,512),[[t.vModelText,i.value.id]]),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':a[1]||(a[1]=e=>i.value.name=e),class:'storage-name-input',placeholder:'è²¯å­˜é»žåç¨±'},null,512),[[t.vModelText,i.value.name]])])]),(0,t.createCommentVNode)(' ç¬¬äºŒè¡Œï¼šé‡‘éŒ¢ + æ·»åŠ æŒ‰éˆ• '),(0,t.createElementVNode)('div',bm,[(0,t.createElementVNode)('div',fm,[a[11]||(a[11]=(0,t.createElementVNode)('span',{class:'storage-money-label'},'è²¯å­˜é‡‘é¡ï¼š',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':a[2]||(a[2]=e=>i.value.money=e),type:'number',class:'storage-money-input storage-money-input-edit',placeholder:'é‡‘éŒ¢æ•¸é‡',min:'0',onInput:a[3]||(a[3]=e=>i.value.money=Math.max(0,parseInt(e.target.value)||0))},null,544),[[t.vModelText,i.value.money,void 0,{number:!0}]])]),(0,t.createElementVNode)('div',hm,[(0,t.createElementVNode)('button',{class:'confirm-button',disabled:!i.value.id||!i.value.name||!i.value.parent_id,onClick:E},' æ·»åŠ  ',8,xm),(0,t.createElementVNode)('button',{class:'cancel-button',onClick:k},'å–æ¶ˆ')])]),(0,t.createCommentVNode)(' ç¬¬ä¸‰è¡Œï¼šçˆ¶ç´š '),(0,t.createElementVNode)('div',ym,[(0,t.withDirectives)((0,t.createElementVNode)('select',{'onUpdate:modelValue':a[4]||(a[4]=e=>i.value.parent_id=e),class:'parent-select'},[a[12]||(a[12]=(0,t.createElementVNode)('option',{value:'',disabled:''},'é¸æ“‡çˆ¶ç´š (è§’è‰²ã€åœ°é»žæˆ–è²¯å­˜é»ž)...',-1)),(0,t.createElementVNode)('optgroup',_m,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(b.value,([e,a])=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:`char-${e}`,value:e},(0,t.toDisplayString)(a.name)+' ('+(0,t.toDisplayString)(e)+') ',9,Em))),128))]),(0,t.createElementVNode)('optgroup',km,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(f.value,([e,a])=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:`loc-${e}`,value:e},(0,t.toDisplayString)(a.name)+' ('+(0,t.toDisplayString)(e)+') ',9,Vm))),128))]),(0,t.createElementVNode)('optgroup',Nm,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(g.value,([e,a])=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:`storage-${e}`,value:e},(0,t.toDisplayString)(a.name)+' ('+(0,t.toDisplayString)(e)+') ',9,wm))),128))])],512),[[t.vModelSelect,i.value.parent_id]])]),(0,t.createCommentVNode)(' ç¬¬å››è¡Œï¼šåº«å­˜ '),(0,t.createElementVNode)('div',Sm,[(0,t.createElementVNode)('div',Bm,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(Object.keys(i.value.inventory),e=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:e,class:'selected-inventory-item'},[(0,t.createElementVNode)('span',Cm,(0,t.toDisplayString)(h.value.get(e)?.name||g.value.get(e)?.name||e),1),u(e)?((0,t.openBlock)(),(0,t.createElementBlock)('span',$m,'è²¯å­˜é»ž')):(0,t.createCommentVNode)('v-if',!0),u(e)?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('span',Im,'Ã—')),u(e)?(0,t.createCommentVNode)('v-if',!0):(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:2,'onUpdate:modelValue':t=>i.value.inventory[e]=t,type:'number',class:'item-quantity-input',placeholder:'æ•¸é‡',min:'1',step:'1',onInput:t=>i.value.inventory[e]=Math.max(1,parseInt(t.target.value)||1)},null,40,zm)),[[t.vModelText,i.value.inventory[e],void 0,{number:!0}]]),(0,t.createElementVNode)('button',{class:'remove-item-btn',onClick:t=>B(i.value,e)},'Ã—',8,Dm)]))),128))]),(0,t.createElementVNode)('select',{class:'item-select',onChange:a[5]||(a[5]=e=>{S(i.value,e.target.value),e.target.value=''})},[a[13]||(a[13]=(0,t.createElementVNode)('option',{value:''},'é¸æ“‡ç‰©å“æˆ–è²¯å­˜é»ž...',-1)),(0,t.createElementVNode)('optgroup',Tm,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(h.value,([e,a])=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:e,value:e,disabled:i.value.inventory.hasOwnProperty(e)},(0,t.toDisplayString)(a.name)+' ('+(0,t.toDisplayString)(e)+') ',9,Mm))),128))]),(0,t.createElementVNode)('optgroup',Ym,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(g.value,([e,a])=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:e,value:e,disabled:i.value.inventory.hasOwnProperty(e)},(0,t.toDisplayString)(a.name)+' ('+(0,t.toDisplayString)(e)+') ',9,Om))),128))])],32)]),(0,t.createCommentVNode)(' ç¬¬äº”è¡Œï¼šæè¿° '),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{'onUpdate:modelValue':a[6]||(a[6]=e=>i.value.description=e),class:'storage-description-input',placeholder:'è²¯å­˜é»žæè¿°'},null,512),[[t.vModelText,i.value.description]])])):(0,t.createCommentVNode)('v-if',!0),0!==g.value.size||r.value?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('div',Am,'æ²’æœ‰ä»»ä½•è²¯å­˜é»ž')),r.value?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('button',{key:2,class:'add-storage-button',onClick:x},'+ æ·»åŠ è²¯å­˜é»ž'))]),(0,t.createCommentVNode)(' ç¢ºèªçª—å£ '),(0,t.createVNode)(Xi,{'confirm-dialog':d.value,'onUpdate:confirmDialog':a[7]||(a[7]=e=>d.value=e),onConfirmDialogConfirm:N,onConfirmDialogCancel:w},null,8,['confirm-dialog'])])]))}});n(230);const Km=(0,d.A)(Rm,[['__scopeId','data-v-62b84623']]),Um={class:'promise-tab-container'},Lm={class:'promise-content'},Fm={class:'promise-list'},jm={class:'promise-first-row'},Hm={class:'promise-id-name-group'},Pm={key:0,class:'promise-id'},Gm=['onUpdate:modelValue'],qm={key:2,class:'promise-deadline'},Xm={key:3,class:'promise-deadline-input-group'},Wm=['onUpdate:modelValue','onInput'],Jm=['onUpdate:modelValue','onInput'],Zm=['onUpdate:modelValue','onInput'],Qm=['onUpdate:modelValue','onInput'],ev=['onUpdate:modelValue','onInput'],tv={class:'promise-actions'},av=['onClick'],nv=['onClick'],ov={class:'promise-location-row'},rv={class:'promise-location-group'},lv={key:0,class:'promise-location'},iv=['onUpdate:modelValue'],sv=['value'],dv={key:0,class:'promise-edit-actions'},cv=['onClick'],uv=['onClick'],pv={key:0,class:'promise-character-ids-display'},mv={key:1,class:'promise-character-ids-input-group'},vv={class:'selected-characters'},gv=['onClick'],bv=['onChange'],fv=['value','disabled'],hv={key:2,class:'promise-description'},xv=['onUpdate:modelValue'],yv={key:0,class:'promise-row new-promise-row'},_v={class:'promise-first-row'},Ev={class:'promise-id-name-group'},kv={class:'promise-deadline-input-group'},Vv={class:'promise-location-row'},Nv={class:'promise-location-group'},wv=['value'],Sv={class:'promise-character-ids-input-group'},Bv={class:'selected-characters'},Cv=['onClick'],$v=['value','disabled'],Iv={key:1,class:'no-promises-message'},zv=(0,t.defineComponent)({__name:'promise_tab',setup(e){(0,t.useCssVars)(e=>({v592213a0:o.value}));const a=(0,t.ref)(0),n=(0,t.ref)(null),o=(0,t.computed)(()=>`calc(100vh - ${a.value}px)`);(0,t.onMounted)(()=>{(async()=>{await(0,t.nextTick)();const e=document.querySelector('.tab-navigation');e&&window.ResizeObserver?(n.value=new ResizeObserver(e=>{for(const t of e)a.value=t.contentRect.height}),n.value.observe(e)):a.value=74})()}),(0,t.onUnmounted)(()=>{n.value&&(n.value.disconnect(),n.value=null)});const r=e=>{const t=e.toDate();return{year:t.getFullYear().toString(),month:(t.getMonth()+1).toString(),day:t.getDate().toString(),hour:t.getHours().toString(),minute:t.getMinutes().toString()}},l=(0,t.ref)(!1),i=(0,t.ref)(new Set),s=(0,t.ref)({id:'',deadline:{year:'',month:'',day:'',hour:'',minute:''},location_id:'',character_ids:[],description:''}),d=(0,t.ref)({}),c=(0,t.ref)({visible:!1,title:'',message:'',confirmText:'ç¢ºèª',cancelText:'å–æ¶ˆ'}),u=(0,t.ref)(null),p=(0,t.ref)(null),m=()=>{p.value&&(p.value.saveAsVariable(getLastMessageId()),v())},v=()=>{try{const e=getLastMessageId();p.value=Oo.loadFromVariable(e)}catch(e){console.error('Failed to load state:',e),p.value=null}};v();const g=(0,t.computed)(()=>p.value?.promises||new Map),b=(0,t.computed)(()=>{if(!p.value)return[];const e=new Map;for(const[t,a]of p.value.active_characters)e.set(t,a.name);for(const[t,a]of p.value.deactive_characters)e.set(t,a.name);return Array.from(e.entries()).map(([e,t])=>({id:e,name:t}))}),f=(0,t.computed)(()=>p.value?Array.from(p.value.locations.values()):[]),h=()=>{l.value=!0,s.value={id:'',deadline:{year:'',month:'',day:'',hour:'',minute:''},location_id:'',character_ids:[],description:''},s.value.id=(()=>{const e=Array.from(g.value.keys());let t=1;for(;e.includes(`p${t}`);)t++;return`p${t}`})()},x=e=>{if(!e.id||!e.deadline||!e.description)return null;try{const t=(e=>{const t=parseInt(e.year)||(new Date).getFullYear(),a=parseInt(e.month)||1,n=parseInt(e.day)||1,o=parseInt(e.hour)||0,r=parseInt(e.minute)||0;return new $o(new Date(t,a-1,n,o,r,0))})(e.deadline),a=e.character_ids.filter(e=>e),n=e.location_id||null;return new To(t,a,n,e.description)}catch(e){return console.error('Failed to create promise:',e),null}},y=()=>{if(!p.value)return;if(p.value.promises.has(s.value.id))return void E();const e=x(s.value);e?(p.value.promises.set(s.value.id,e),m(),E()):E()},E=()=>{l.value=!1,s.value={id:'',deadline:{year:'',month:'',day:'',hour:'',minute:''},location_id:'',character_ids:[],description:''}},k=e=>{i.value.delete(e),delete d.value[e]},V=()=>{u.value&&p.value&&(p.value.promises.delete(u.value),m()),c.value.visible=!1,u.value=null},N=()=>{c.value.visible=!1,u.value=null},w=(e,t)=>{e.character_ids.includes(t)||e.character_ids.push(t)},S=(e,t)=>{const a=e.character_ids.indexOf(t);a>-1&&e.character_ids.splice(a,1)},B=(e,t,a)=>{const n=parseInt(e);return isNaN(n)?'':Math.min(Math.max(n,t),a).toString()},C=e=>{const t=e.toDate();return`${t.getFullYear()}å¹´${t.getMonth()+1}æœˆ${t.getDate()}æ—¥ ${t.getHours().toString().padStart(2,'0')}:${t.getMinutes().toString().padStart(2,'0')}`};return(e,a)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',Um,[(0,t.createElementVNode)('div',Lm,[(0,t.createCommentVNode)(' ç´„å®šåˆ—è¡¨æ¨™é¡Œ '),a[31]||(a[31]=(0,t.createElementVNode)('div',{class:'promise-section'},[(0,t.createElementVNode)('h3',{class:'section-title'},'ç´„å®šåˆ—è¡¨')],-1)),(0,t.createCommentVNode)(' ç´„å®šåˆ—è¡¨ '),(0,t.createElementVNode)('div',Fm,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(g.value,([e,n])=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:e,class:'promise-row'},[(0,t.createCommentVNode)(' ç¬¬ä¸€è¡Œï¼šIDã€æˆªæ­¢æ—¥æœŸã€æ“ä½œæŒ‰éˆ• '),(0,t.createElementVNode)('div',jm,[(0,t.createElementVNode)('div',Hm,[i.value.has(e)?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:1,'onUpdate:modelValue':t=>d.value[e].id=t,class:'promise-id-input',placeholder:'ç´„å®šID'},null,8,Gm)),[[t.vModelText,d.value[e].id]]):((0,t.openBlock)(),(0,t.createElementBlock)('div',Pm,(0,t.toDisplayString)(e),1)),i.value.has(e)?((0,t.openBlock)(),(0,t.createElementBlock)('div',Xm,[(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':t=>d.value[e].deadline.year=t,type:'number',placeholder:'å¹´',class:'promise-deadline-input promise-deadline-year-input',onInput:t=>d.value[e].deadline.year=B(d.value[e].deadline.year.toString(),0,Number.MAX_SAFE_INTEGER)},null,40,Wm),[[t.vModelText,d.value[e].deadline.year,void 0,{number:!0}]]),a[15]||(a[15]=(0,t.createElementVNode)('span',null,'å¹´',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':t=>d.value[e].deadline.month=t,type:'number',placeholder:'æœˆ',class:'promise-deadline-input',onInput:t=>d.value[e].deadline.month=B(d.value[e].deadline.month.toString(),1,12)},null,40,Jm),[[t.vModelText,d.value[e].deadline.month,void 0,{number:!0}]]),a[16]||(a[16]=(0,t.createElementVNode)('span',null,'æœˆ',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':t=>d.value[e].deadline.day=t,type:'number',placeholder:'æ—¥',class:'promise-deadline-input',onInput:t=>d.value[e].deadline.day=B(d.value[e].deadline.day.toString(),1,31)},null,40,Zm),[[t.vModelText,d.value[e].deadline.day,void 0,{number:!0}]]),a[17]||(a[17]=(0,t.createElementVNode)('span',null,'æ—¥',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':t=>d.value[e].deadline.hour=t,type:'number',placeholder:'æ™‚',class:'promise-deadline-input',onInput:t=>d.value[e].deadline.hour=B(d.value[e].deadline.hour.toString(),0,23)},null,40,Qm),[[t.vModelText,d.value[e].deadline.hour,void 0,{number:!0}]]),a[18]||(a[18]=(0,t.createElementVNode)('span',null,':',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':t=>d.value[e].deadline.minute=t,type:'number',placeholder:'åˆ†',class:'promise-deadline-input',onInput:t=>d.value[e].deadline.minute=B(d.value[e].deadline.minute.toString(),0,59)},null,40,ev),[[t.vModelText,d.value[e].deadline.minute,void 0,{number:!0}]])])):((0,t.openBlock)(),(0,t.createElementBlock)('div',qm,(0,t.toDisplayString)(C(n.deadline)),1))]),(0,t.createElementVNode)('div',tv,[i.value.has(e)?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('button',{key:0,class:'edit-promise-button',onClick:t=>(e=>{const t=g.value.get(e);t&&(i.value.add(e),d.value[e]={id:e,deadline:r(t.deadline),location_id:t.location_id||'',character_ids:[...t.character_ids],description:t.description})})(e)},' ç·¨è¼¯ ',8,av)),i.value.has(e)?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('button',{key:1,class:'delete-promise-button',onClick:t=>(e=>{const t=g.value.get(e);t&&(u.value=e,c.value={visible:!0,title:'ç¢ºèªåˆªé™¤ç´„å®š',message:`ç¢ºå®šè¦åˆªé™¤ç´„å®š "${t.description}" å—Žï¼Ÿæ­¤æ“ä½œç„¡æ³•æ’¤éŠ·ã€‚`,confirmText:'åˆªé™¤',cancelText:'å–æ¶ˆ'})})(e)},' åˆªé™¤ ',8,nv))])]),(0,t.createCommentVNode)(' ç¬¬äºŒè¡Œï¼šåœ°é»ž + ç·¨è¼¯æŒ‰éˆ• '),(0,t.createElementVNode)('div',ov,[(0,t.createElementVNode)('div',rv,[a[21]||(a[21]=(0,t.createElementVNode)('span',{class:'promise-location-label'},'åœ°é»žï¼š',-1)),i.value.has(e)?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('select',{key:1,'onUpdate:modelValue':t=>d.value[e].location_id=t,class:'promise-location-input promise-location-input-edit'},[a[19]||(a[19]=(0,t.createElementVNode)('option',{value:'',disabled:''},'é¸æ“‡åœ°é»ž...',-1)),a[20]||(a[20]=(0,t.createElementVNode)('option',{value:''},'ç„¡',-1)),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(f.value,e=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:e.id,value:e.id},(0,t.toDisplayString)(e.name)+' ('+(0,t.toDisplayString)(e.id)+') ',9,sv))),128))],8,iv)),[[t.vModelSelect,d.value[e].location_id]]):((0,t.openBlock)(),(0,t.createElementBlock)('div',lv,(0,t.toDisplayString)(n.location_id?f.value.find(e=>e.id===n.location_id)?.name||n.location_id:'ç„¡'),1))]),i.value.has(e)?((0,t.openBlock)(),(0,t.createElementBlock)('div',dv,[(0,t.createElementVNode)('button',{class:'confirm-button',onClick:t=>(e=>{if(!p.value||!d.value[e])return;const t=d.value[e];if(t.id!==e&&p.value.promises.has(t.id))return void k(e);const a=x(t);if(a){const n=p.value.promises.get(e);n&&(t.id!==e?(p.value.promises.delete(e),p.value.promises.set(t.id,a)):(n.deadline=a.deadline,n.location_id=a.location_id,n.character_ids=a.character_ids,n.description=a.description),m()),k(e)}else k(e)})(e)},'ä¿å­˜',8,cv),(0,t.createElementVNode)('button',{class:'cancel-button',onClick:t=>k(e)},'å–æ¶ˆ',8,uv)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createCommentVNode)(' ç¬¬ä¸‰è¡Œï¼šè§’è‰²ID '),i.value.has(e)?((0,t.openBlock)(),(0,t.createElementBlock)('div',mv,[(0,t.createElementVNode)('div',vv,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(d.value[e].character_ids,a=>((0,t.openBlock)(),(0,t.createElementBlock)('span',{key:a,class:'selected-character-tag'},[(0,t.createTextVNode)((0,t.toDisplayString)(b.value.find(e=>e.id===a)?.name||a)+' ',1),(0,t.createElementVNode)('button',{class:'remove-character-btn',onClick:t=>S(d.value[e],a)},' Ã— ',8,gv)]))),128))]),(0,t.createElementVNode)('select',{class:'character-select',onChange:t=>{w(d.value[e],t.target.value),t.target.value=''}},[a[22]||(a[22]=(0,t.createElementVNode)('option',{value:''},'é¸æ“‡è§’è‰²...',-1)),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(b.value,a=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:a.id,value:a.id,disabled:d.value[e].character_ids.includes(a.id)},(0,t.toDisplayString)(a.name)+' ('+(0,t.toDisplayString)(a.id)+') ',9,fv))),128))],40,bv)])):((0,t.openBlock)(),(0,t.createElementBlock)('div',pv,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(n.character_ids,e=>((0,t.openBlock)(),(0,t.createElementBlock)('span',{key:e,class:'promise-character-id-tag'},(0,t.toDisplayString)(b.value.find(t=>t.id===e)?.name||e),1))),128))])),(0,t.createCommentVNode)(' ç¬¬å››è¡Œï¼šæè¿° '),i.value.has(e)?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('textarea',{key:3,'onUpdate:modelValue':t=>d.value[e].description=t,class:'promise-description-input',placeholder:'ç´„å®šå…§å®¹'},null,8,xv)),[[t.vModelText,d.value[e].description]]):((0,t.openBlock)(),(0,t.createElementBlock)('div',hv,(0,t.toDisplayString)(n.description),1))]))),128)),(0,t.createCommentVNode)(' æ–°ç´„å®šç·¨è¼¯è¡Œ '),l.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',yv,[(0,t.createCommentVNode)(' ç¬¬ä¸€è¡Œï¼šIDã€æˆªæ­¢æ—¥æœŸ '),(0,t.createElementVNode)('div',_v,[(0,t.createElementVNode)('div',Ev,[(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':a[0]||(a[0]=e=>s.value.id=e),class:'promise-id-input',placeholder:'ç´„å®šID'},null,512),[[t.vModelText,s.value.id]]),(0,t.createElementVNode)('div',kv,[(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':a[1]||(a[1]=e=>s.value.deadline.year=e),type:'number',placeholder:'å¹´',class:'promise-deadline-input promise-deadline-year-input',onInput:a[2]||(a[2]=e=>s.value.deadline.year=B(s.value.deadline.year.toString(),0,Number.MAX_SAFE_INTEGER))},null,544),[[t.vModelText,s.value.deadline.year,void 0,{number:!0}]]),a[23]||(a[23]=(0,t.createElementVNode)('span',null,'å¹´',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':a[3]||(a[3]=e=>s.value.deadline.month=e),type:'number',placeholder:'æœˆ',class:'promise-deadline-input',onInput:a[4]||(a[4]=e=>s.value.deadline.month=B(s.value.deadline.month.toString(),1,12))},null,544),[[t.vModelText,s.value.deadline.month,void 0,{number:!0}]]),a[24]||(a[24]=(0,t.createElementVNode)('span',null,'æœˆ',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':a[5]||(a[5]=e=>s.value.deadline.day=e),type:'number',placeholder:'æ—¥',class:'promise-deadline-input',onInput:a[6]||(a[6]=e=>s.value.deadline.day=B(s.value.deadline.day.toString(),1,31))},null,544),[[t.vModelText,s.value.deadline.day,void 0,{number:!0}]]),a[25]||(a[25]=(0,t.createElementVNode)('span',null,'æ—¥',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':a[7]||(a[7]=e=>s.value.deadline.hour=e),type:'number',placeholder:'æ™‚',class:'promise-deadline-input',onInput:a[8]||(a[8]=e=>s.value.deadline.hour=B(s.value.deadline.hour.toString(),0,23))},null,544),[[t.vModelText,s.value.deadline.hour,void 0,{number:!0}]]),a[26]||(a[26]=(0,t.createElementVNode)('span',null,':',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':a[9]||(a[9]=e=>s.value.deadline.minute=e),type:'number',placeholder:'åˆ†',class:'promise-deadline-input',onInput:a[10]||(a[10]=e=>s.value.deadline.minute=B(s.value.deadline.minute.toString(),0,59))},null,544),[[t.vModelText,s.value.deadline.minute,void 0,{number:!0}]])])])]),(0,t.createCommentVNode)(' ç¬¬äºŒè¡Œï¼šåœ°é»ž + æ·»åŠ æŒ‰éˆ• '),(0,t.createElementVNode)('div',Vv,[(0,t.createElementVNode)('div',Nv,[a[29]||(a[29]=(0,t.createElementVNode)('span',{class:'promise-location-label'},'åœ°é»žï¼š',-1)),(0,t.withDirectives)((0,t.createElementVNode)('select',{'onUpdate:modelValue':a[11]||(a[11]=e=>s.value.location_id=e),class:'promise-location-input promise-location-input-edit'},[a[27]||(a[27]=(0,t.createElementVNode)('option',{value:'',disabled:''},'é¸æ“‡åœ°é»ž...',-1)),a[28]||(a[28]=(0,t.createElementVNode)('option',{value:''},'ç„¡',-1)),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(f.value,e=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:e.id,value:e.id},(0,t.toDisplayString)(e.name)+' ('+(0,t.toDisplayString)(e.id)+') ',9,wv))),128))],512),[[t.vModelSelect,s.value.location_id]])]),(0,t.createElementVNode)('div',{class:'promise-edit-actions'},[(0,t.createElementVNode)('button',{class:'confirm-button',onClick:y},'æ·»åŠ '),(0,t.createElementVNode)('button',{class:'cancel-button',onClick:E},'å–æ¶ˆ')])]),(0,t.createCommentVNode)(' ç¬¬ä¸‰è¡Œï¼šè§’è‰²ID '),(0,t.createElementVNode)('div',Sv,[(0,t.createElementVNode)('div',Bv,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(s.value.character_ids,e=>((0,t.openBlock)(),(0,t.createElementBlock)('span',{key:e,class:'selected-character-tag'},[(0,t.createTextVNode)((0,t.toDisplayString)(b.value.find(t=>t.id===e)?.name||e)+' ',1),(0,t.createElementVNode)('button',{class:'remove-character-btn',onClick:t=>S(s.value,e)},'Ã—',8,Cv)]))),128))]),(0,t.createElementVNode)('select',{class:'character-select',onChange:a[12]||(a[12]=e=>{w(s.value,e.target.value),e.target.value=''})},[a[30]||(a[30]=(0,t.createElementVNode)('option',{value:''},'é¸æ“‡è§’è‰²...',-1)),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(b.value,e=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:e.id,value:e.id,disabled:s.value.character_ids.includes(e.id)},(0,t.toDisplayString)(e.name)+' ('+(0,t.toDisplayString)(e.id)+') ',9,$v))),128))],32)]),(0,t.createCommentVNode)(' ç¬¬å››è¡Œï¼šæè¿° '),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{'onUpdate:modelValue':a[13]||(a[13]=e=>s.value.description=e),class:'promise-description-input',placeholder:'ç´„å®šå…§å®¹'},null,512),[[t.vModelText,s.value.description]])])):(0,t.createCommentVNode)('v-if',!0),0!==g.value.size||l.value?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('div',Iv,'æ²’æœ‰ä»»ä½•ç´„å®š')),l.value?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('button',{key:2,class:'add-promise-button',onClick:h},'+ æ·»åŠ ç´„å®š'))]),(0,t.createCommentVNode)(' ç¢ºèªçª—å£ '),(0,t.createVNode)(Xi,{'confirm-dialog':c.value,'onUpdate:confirmDialog':a[14]||(a[14]=e=>c.value=e),onConfirmDialogConfirm:V,onConfirmDialogCancel:N},null,8,['confirm-dialog'])])]))}});n(4359);const Dv=(0,d.A)(zv,[['__scopeId','data-v-25ffb8d9']]),Tv={class:'settings-container'},Mv={class:'settings-list'},Yv={class:'setting-item version-item'},Ov={class:'setting-control'},Av={class:'version-number'},Rv={class:'setting-item'},Kv={class:'setting-control'},Uv={class:'switch'},Lv={class:'setting-item'},Fv={class:'setting-control'},jv={class:'setting-item'},Hv={class:'setting-control'},Pv={class:'folding-rules-fullwidth'},Gv={class:'folding-rules-container'},qv={class:'rule-cell'},Xv=['onUpdate:modelValue','onInput'],Wv={class:'rule-cell'},Jv=['onUpdate:modelValue','onInput'],Zv={class:'rule-cell'},Qv=['onUpdate:modelValue','onChange'],eg={class:'rule-cell'},tg={class:'radio-group compact'},ag={class:'radio-option compact'},ng=['onUpdate:modelValue','onChange'],og={class:'radio-option compact'},rg=['onUpdate:modelValue','onChange'],lg={class:'rule-cell'},ig={class:'radio-group compact'},sg={class:'radio-option compact'},dg=['onUpdate:modelValue','onChange'],cg={class:'radio-option compact'},ug=['onUpdate:modelValue','onChange'],pg={class:'rule-cell'},mg=['onClick'],vg=(0,t.defineComponent)({__name:'setting_tab',emits:['renderSizeChanged'],setup(e,{expose:a,emit:n}){(0,t.useCssVars)(e=>({v50c01ddd:p.value}));const o=n,r=(0,t.ref)('0.4.2'),l=(0,t.ref)(!1),i=(0,t.ref)(10),s=(0,t.ref)(1),d=(0,t.ref)([]),c=(0,t.ref)(0),u=(0,t.ref)(null),p=(0,t.computed)(()=>`calc(100vh - ${c.value}px)`),m=()=>{try{const e=getVariables({type:'chat'});e&&e.settings?(l.value=e.settings.fullscreen_enabled||!1,i.value=e.settings.render_size||10,s.value=e.settings.exclude_latest_summaries||1,d.value=e.settings.tag_rules||[]):v()}catch(e){console.error('Failed to load settings:',e)}},v=()=>{try{const e={fullscreen_enabled:l.value,render_size:i.value,exclude_latest_summaries:s.value,tag_rules:d.value};insertOrAssignVariables({settings:e},{type:'chat'})}catch(e){console.error('Failed to save settings:',e)}},g=async()=>{l.value?await(async()=>{try{document.documentElement.requestFullscreen?await document.documentElement.requestFullscreen():document.documentElement.webkitRequestFullscreen?await document.documentElement.webkitRequestFullscreen():document.documentElement.mozRequestFullScreen?await document.documentElement.mozRequestFullScreen():document.documentElement.msRequestFullscreen&&await document.documentElement.msRequestFullscreen()}catch(e){console.error('Failed to enter fullscreen:',e)}})():await(async()=>{try{document.exitFullscreen?await document.exitFullscreen():document.webkitExitFullscreen?await document.webkitExitFullscreen():document.mozCancelFullScreen?await document.mozCancelFullScreen():document.msExitFullscreen&&await document.msExitFullscreen()}catch(e){console.error('Failed to exit fullscreen:',e)}})(),v()},b=()=>{let e=Math.floor(Number(i.value));(isNaN(e)||e<1)&&(e=10),i.value=e,v(),o('renderSizeChanged',i.value)},f=()=>{let e=Math.floor(Number(s.value));(isNaN(e)||e<0)&&(e=1),s.value=e,v()},h=()=>{d.value.push({tag_name:'',match_mode:'both',match_strategy:'first',display_mode:'invisible',title_name:''}),v()},x=(e,t)=>{e>=0&&e<d.value.length&&(d.value[e]={...d.value[e],...t},v())},y=()=>{const e=!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement);l.value=e,v()};return m(),document.addEventListener('fullscreenchange',y),document.addEventListener('webkitfullscreenchange',y),document.addEventListener('mozfullscreenchange',y),document.addEventListener('MSFullscreenChange',y),(0,t.onMounted)(()=>{(0,t.nextTick)(()=>{(()=>{if('undefined'==typeof ResizeObserver)return void(c.value=74);u.value=new ResizeObserver(e=>{for(const t of e){const e=t.target;e.classList.contains('tab-navigation')&&(c.value=e.offsetHeight)}});const e=document.querySelector('.tab-navigation.top');e&&(u.value.observe(e),c.value=e.offsetHeight)})()})}),(0,t.onUnmounted)(()=>{u.value&&(u.value.disconnect(),u.value=null)}),eventOn(tavern_events.APP_READY,()=>{y()}),(0,t.onUnmounted)(()=>{document.removeEventListener('fullscreenchange',y),document.removeEventListener('webkitfullscreenchange',y),document.removeEventListener('mozfullscreenchange',y),document.removeEventListener('MSFullscreenChange',y)}),a({reloadSettings:m}),(e,a)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',Tv,[a[15]||(a[15]=(0,t.createElementVNode)('div',{class:'settings-header'},[(0,t.createElementVNode)('h2',null,'è¨­ç½®')],-1)),(0,t.createElementVNode)('div',Mv,[(0,t.createCommentVNode)(' ç‰ˆæœ¬è™Ÿ '),(0,t.createElementVNode)('div',Yv,[a[3]||(a[3]=(0,t.createElementVNode)('div',{class:'setting-label'},[(0,t.createElementVNode)('span',{class:'setting-title'},'ç‰ˆæœ¬è™Ÿ'),(0,t.createElementVNode)('span',{class:'setting-description'},'ç•¶å‰æ‡‰ç”¨ç‰ˆæœ¬')],-1)),(0,t.createElementVNode)('div',Ov,[(0,t.createElementVNode)('span',Av,(0,t.toDisplayString)(r.value),1)])]),(0,t.createCommentVNode)(' å…¨å±é–‹é—œ '),(0,t.createElementVNode)('div',Rv,[a[5]||(a[5]=(0,t.createElementVNode)('div',{class:'setting-label'},[(0,t.createElementVNode)('span',{class:'setting-title'},'å…¨å±æ¨¡å¼'),(0,t.createElementVNode)('span',{class:'setting-description'},'å•Ÿç”¨å…¨å±é¡¯ç¤ºæ¨¡å¼')],-1)),(0,t.createElementVNode)('div',Kv,[(0,t.createElementVNode)('label',Uv,[(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':a[0]||(a[0]=e=>l.value=e),type:'checkbox',onChange:g},null,544),[[t.vModelCheckbox,l.value]]),a[4]||(a[4]=(0,t.createElementVNode)('span',{class:'slider'},null,-1))])])]),(0,t.createCommentVNode)(' æ¸²æŸ“å¤§å° '),(0,t.createElementVNode)('div',Lv,[a[6]||(a[6]=(0,t.createElementVNode)('div',{class:'setting-label'},[(0,t.createElementVNode)('span',{class:'setting-title'},'è¼‰å…¥æ¨“å±¤æ•¸ç›®'),(0,t.createElementVNode)('span',{class:'setting-description'},'è¨­ç½®æ¯æ¬¡è¼‰å…¥æ¨“å±¤çš„æ•¸ç›®')],-1)),(0,t.createElementVNode)('div',Fv,[(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':a[1]||(a[1]=e=>i.value=e),type:'number',class:'number-input',min:'1',onInput:b},null,544),[[t.vModelText,i.value,void 0,{number:!0}]])])]),(0,t.createCommentVNode)(' æŽ’é™¤æœ€æ–°ç¸½çµæ•¸é‡ '),(0,t.createElementVNode)('div',jv,[a[7]||(a[7]=(0,t.createElementVNode)('div',{class:'setting-label'},[(0,t.createElementVNode)('span',{class:'setting-title'},'æŽ’é™¤æœ€æ–°ç¸½çµæ•¸é‡'),(0,t.createElementVNode)('span',{class:'setting-description'},'è¨­ç½®ä¸ä½¿ç”¨æœ€æ–°nå€‹ç¸½çµçš„æ•¸é‡')],-1)),(0,t.createElementVNode)('div',Hv,[(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':a[2]||(a[2]=e=>s.value=e),type:'number',class:'number-input',min:'0',onInput:f},null,544),[[t.vModelText,s.value,void 0,{number:!0}]])])]),(0,t.createCommentVNode)(' XMLå…§å®¹æ‘ºç–Šè¦å‰‡ '),a[14]||(a[14]=(0,t.createElementVNode)('div',{class:'setting-item xml-rules-item'},[(0,t.createElementVNode)('div',{class:'setting-label'},[(0,t.createElementVNode)('span',{class:'setting-title'},'XMLå…§å®¹æ‘ºç–Šè¦å‰‡'),(0,t.createElementVNode)('span',{class:'setting-description'},'è¨­ç½®XMLæ¨™ç±¤å…§å®¹çš„é¡¯ç¤ºæ–¹å¼')])],-1)),(0,t.createCommentVNode)(' XMLå…§å®¹æ‘ºç–Šè¦å‰‡è¡¨æ ¼ '),(0,t.createElementVNode)('div',Pv,[(0,t.createElementVNode)('div',Gv,[(0,t.createCommentVNode)(' è¡¨é ­ '),a[13]||(a[13]=(0,t.createStaticVNode)('<div class="rules-header" data-v-d8917884><div class="header-cell" data-v-d8917884>æ¨™ç±¤åç¨±</div><div class="header-cell" data-v-d8917884>æ¨™é¡Œåç¨±</div><div class="header-cell" data-v-d8917884>é¡¯ç¤ºæ¨¡å¼</div><div class="header-cell" data-v-d8917884>åŒ¹é…æ¨¡å¼</div><div class="header-cell" data-v-d8917884>åŒ¹é…çµæŸæ¨™ç±¤ç­–ç•¥</div><div class="header-cell" data-v-d8917884>æ“ä½œ</div></div>',1)),(0,t.createCommentVNode)(' è¦å‰‡è¡Œ '),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(d.value,(e,n)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:n,class:'folding-rule-row'},[(0,t.createCommentVNode)(' æ¨™ç±¤åç¨± '),(0,t.createElementVNode)('div',qv,[(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':t=>e.tag_name=t,type:'text',class:'text-input compact',placeholder:'ä¾‹å¦‚: think',onInput:t=>x(n,{tag_name:e.tag_name})},null,40,Xv),[[t.vModelText,e.tag_name]])]),(0,t.createCommentVNode)(' æ¨™é¡Œåç¨± '),(0,t.createElementVNode)('div',Wv,[(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':t=>e.title_name=t,type:'text',class:'text-input compact',placeholder:'ä¾‹å¦‚: æ€è€ƒå…§å®¹',onInput:t=>x(n,{title_name:e.title_name})},null,40,Jv),[[t.vModelText,e.title_name]])]),(0,t.createCommentVNode)(' é¡¯ç¤ºæ¨¡å¼ '),(0,t.createElementVNode)('div',Zv,[(0,t.withDirectives)((0,t.createElementVNode)('select',{'onUpdate:modelValue':t=>e.display_mode=t,class:'select-input compact',onChange:t=>x(n,{display_mode:e.display_mode})},[...a[8]||(a[8]=[(0,t.createElementVNode)('option',{value:'invisible'},'éš±è—',-1),(0,t.createElementVNode)('option',{value:'fold_bar'},'æ‘ºç–Šæ¬„',-1)])],40,Qv),[[t.vModelSelect,e.display_mode]])]),(0,t.createCommentVNode)(' åŒ¹é…æ¨¡å¼ '),(0,t.createElementVNode)('div',eg,[(0,t.createElementVNode)('div',tg,[(0,t.createElementVNode)('label',ag,[(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':t=>e.match_mode=t,type:'radio',value:'both',onChange:t=>x(n,{match_mode:e.match_mode})},null,40,ng),[[t.vModelRadio,e.match_mode]]),a[9]||(a[9]=(0,t.createElementVNode)('span',{class:'radio-label'},'é–‹å§‹åŠçµæŸ',-1))]),(0,t.createElementVNode)('label',og,[(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':t=>e.match_mode=t,type:'radio',value:'end_only',onChange:t=>x(n,{match_mode:e.match_mode})},null,40,rg),[[t.vModelRadio,e.match_mode]]),a[10]||(a[10]=(0,t.createElementVNode)('span',{class:'radio-label'},'åªçµæŸ',-1))])])]),(0,t.createCommentVNode)(' åŒ¹é…çµæŸæ¨™ç±¤ç­–ç•¥ '),(0,t.createElementVNode)('div',lg,[(0,t.createElementVNode)('div',ig,[(0,t.createElementVNode)('label',sg,[(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':t=>e.match_strategy=t,type:'radio',value:'first',onChange:t=>x(n,{match_strategy:e.match_strategy})},null,40,dg),[[t.vModelRadio,e.match_strategy]]),a[11]||(a[11]=(0,t.createElementVNode)('span',{class:'radio-label'},'ç¬¬ä¸€å€‹',-1))]),(0,t.createElementVNode)('label',cg,[(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':t=>e.match_strategy=t,type:'radio',value:'last',onChange:t=>x(n,{match_strategy:e.match_strategy})},null,40,ug),[[t.vModelRadio,e.match_strategy]]),a[12]||(a[12]=(0,t.createElementVNode)('span',{class:'radio-label'},'æœ€å¾Œä¸€å€‹',-1))])])]),(0,t.createCommentVNode)(' åˆªé™¤æŒ‰éˆ• '),(0,t.createElementVNode)('div',pg,[(0,t.createElementVNode)('button',{class:'delete-rule-btn compact',onClick:e=>{var t;(t=n)>=0&&t<d.value.length&&(d.value.splice(t,1),v())}},'åˆªé™¤',8,mg)])]))),128)),(0,t.createCommentVNode)(' æ·»åŠ è¦å‰‡æŒ‰éˆ• '),(0,t.createElementVNode)('div',{class:'add-rule-row'},[(0,t.createElementVNode)('button',{class:'add-rule-btn',onClick:h},'+ æ·»åŠ æ‘ºç–Šè¦å‰‡')])])])])]))}});n(7549);const gg=(0,d.A)(vg,[['__scopeId','data-v-d8917884']]),bg={class:'summary-tab-container'},fg={class:'summary-content'},hg={key:0,class:'summary-row new-summary-row'},xg={class:'summary-edit-mode'},yg={class:'summary-edit-first-row'},_g={class:'summary-weighting-last-message-input-group'},Eg={class:'summary-last-message-id-input-group'},kg=['value'],Vg={class:'summary-weighting-input-group'},Ng=['value'],wg={class:'summary-edit-actions'},Sg=['disabled'],Bg={class:'summary-edit-datetime-row'},Cg={class:'summary-datetime-input-group'},$g=['value'],Ig=['value'],zg=['value'],Dg=['value'],Tg=['value'],Mg=['value'],Yg={class:'summary-list'},Og={key:0,class:'summary-edit-mode'},Ag={class:'summary-edit-first-row'},Rg={class:'summary-weighting-last-message-input-group'},Kg={class:'summary-last-message-id-input-group'},Ug=['value'],Lg={class:'summary-weighting-input-group'},Fg=['value'],jg={class:'summary-edit-actions'},Hg=['disabled'],Pg={class:'summary-edit-datetime-row'},Gg={class:'summary-datetime-input-group'},qg=['value'],Xg=['value'],Wg=['value'],Jg=['value'],Zg=['value'],Qg=['value'],eb={class:'summary-first-row'},tb={class:'summary-weighting-last-message-group'},ab={class:'summary-last-message-id'},nb={class:'summary-weighting'},ob={class:'summary-actions'},rb=['onClick'],lb=['onClick'],ib={class:'summary-datetime-row'},sb={class:'summary-datetime'},db={class:'summary-content-display'},cb={key:0,class:'no-summaries-message'},ub=(0,t.defineComponent)({__name:'summary_tab',setup(e){(0,t.useCssVars)(e=>({v70237b32:o.value}));const a=(0,t.ref)(0),n=(0,t.ref)(null),o=(0,t.computed)(()=>`calc(100vh - ${a.value}px)`);(0,t.onMounted)(()=>{(async()=>{await(0,t.nextTick)();const e=document.querySelector('.tab-navigation');e&&window.ResizeObserver?(n.value=new ResizeObserver(e=>{for(const t of e)a.value=t.contentRect.height}),n.value.observe(e)):a.value=74})()}),(0,t.onUnmounted)(()=>{n.value&&(n.value.disconnect(),n.value=null)});const r=(0,t.ref)({visible:!1,title:'',message:'',confirmText:'ç¢ºèª',cancelText:'å–æ¶ˆ'}),l=(0,t.ref)(null),i=(0,t.ref)(null),s=(0,t.ref)(!1),d=(0,t.ref)({year:0,month:0,day:0,hour:0,minute:0}),c=(0,t.ref)(0),u=(0,t.ref)(0),p=(0,t.ref)(''),m=(0,t.ref)(null),v=()=>{m.value&&(m.value.saveAsVariable(getLastMessageId()),g())},g=()=>{try{const e=getLastMessageId();m.value=Oo.loadFromVariable(e)}catch(e){console.error('Failed to load state:',e),m.value=null}};g();const b=(0,t.computed)(()=>m.value?.summaries?[...m.value.summaries].sort((e,t)=>t.last_message_id-e.last_message_id):[]),f=e=>{if(!m.value)return'unused';const t=(getVariables({type:'chat'}).settings||{}).exclude_latest_summaries||1,a=[...m.value.summaries].sort((e,t)=>e.last_message_id-t.last_message_id);return a.findIndex(t=>t.last_message_id===e.last_message_id)>=a.length-t?'unused':'used'},h=()=>{if(null!==l.value&&m.value){const e=b.value[l.value],t=m.value.summaries.indexOf(e);-1!==t&&(m.value.summaries.splice(t,1),v())}r.value.visible=!1,l.value=null},x=()=>{r.value.visible=!1,l.value=null},y=()=>{if(s.value=!0,m.value){const e=m.value.datetime.toDate();d.value={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes()}}u.value=(()=>{const e=getChatMessages(-1,{role:'assistant'});return e.length>0?e[0].message_id:getLastMessageId()})(),c.value=.5,p.value=''},E=()=>{if(m.value)try{const e=new Date(d.value.year,d.value.month-1,d.value.day,d.value.hour,d.value.minute,0),t=new $o(e),a=new Yo(t,p.value.trim(),c.value,u.value);if(null!==i.value){const e=b.value[i.value],t=m.value.summaries.indexOf(e);-1!==t&&(m.value.summaries[t]=a,v(),i.value=null)}else s.value&&(m.value.summaries.push(a),m.value.summaries.sort((e,t)=>e.last_message_id-t.last_message_id),v(),s.value=!1)}catch(e){console.error('Failed to save summary:',e)}},k=()=>{i.value=null,s.value=!1},V=(0,t.computed)(()=>{if(u.value<0||!Number.isInteger(u.value))return!1;if(c.value<0||c.value>1)return!1;if(d.value.year<0||!Number.isInteger(d.value.year))return!1;if(!p.value.trim())return!1;try{const e=new Date(d.value.year,d.value.month-1,d.value.day,d.value.hour,d.value.minute,0);if(e.getFullYear()!==d.value.year||e.getMonth()!==d.value.month-1||e.getDate()!==d.value.day)return!1}catch{return!1}return!0}),N=(e,t,a,n=!1)=>{const o=n?parseFloat(e):parseInt(e);return isNaN(o)?'':Math.min(Math.max(o,t),a).toString()},w=e=>{const t=e.target,a=parseInt(N(t.value,0,Number.MAX_SAFE_INTEGER));u.value=a},S=e=>{const t=e.target,a=parseFloat(N(t.value,0,1,!0));c.value=a},B=(e,t)=>{const a=t.target;let n;switch(e){case'year':n=parseInt(N(a.value,0,Number.MAX_SAFE_INTEGER));break;case'month':n=parseInt(N(a.value,1,12));break;case'day':n=parseInt(N(a.value,1,31));break;case'hour':n=parseInt(N(a.value,0,23));break;case'minute':n=parseInt(N(a.value,0,59));break;default:return}d.value={...d.value,[e]:n}},C=e=>{const t=e.toDate();return`${t.getFullYear()}å¹´${t.getMonth()+1}æœˆ${t.getDate()}æ—¥ ${t.getHours().toString().padStart(2,'0')}:${t.getMinutes().toString().padStart(2,'0')}`};return(e,a)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',bg,[(0,t.createElementVNode)('div',fg,[(0,t.createCommentVNode)(' ç¸½çµåˆ—è¡¨æ¨™é¡Œ '),(0,t.createElementVNode)('div',{class:'summary-section'},[a[17]||(a[17]=(0,t.createElementVNode)('h3',{class:'section-title'},'ç¸½çµåˆ—è¡¨',-1)),(0,t.createElementVNode)('button',{class:'add-summary-button',onClick:y},'+ æ·»åŠ ç¸½çµ')]),(0,t.createCommentVNode)(' æ·»åŠ æ–°ç¸½çµç·¨è¼¯å€åŸŸ '),s.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',hg,[(0,t.createElementVNode)('div',xg,[(0,t.createCommentVNode)(' ç¬¬ä¸€è¡Œï¼šæœ€å¾Œæ¨“å±¤ã€æ¬Šé‡ã€æ“ä½œæŒ‰éˆ• '),(0,t.createElementVNode)('div',yg,[(0,t.createElementVNode)('div',_g,[(0,t.createElementVNode)('div',Eg,[a[18]||(a[18]=(0,t.createTextVNode)(' æœ€å¾Œæ¨“å±¤: ',-1)),(0,t.createElementVNode)('input',{value:u.value,type:'number',class:'summary-last-message-id-input',min:'0',step:'1',onInput:a[0]||(a[0]=e=>w(e))},null,40,kg)]),(0,t.createElementVNode)('div',Vg,[a[19]||(a[19]=(0,t.createTextVNode)(' æ¬Šé‡: ',-1)),(0,t.createElementVNode)('input',{value:c.value,type:'number',class:'summary-weighting-input',step:'0.1',min:'0',max:'1',onInput:a[1]||(a[1]=e=>S(e))},null,40,Ng)])]),(0,t.createElementVNode)('div',wg,[(0,t.createElementVNode)('button',{class:'confirm-button',disabled:!V.value,onClick:E},'ä¿å­˜',8,Sg),(0,t.createElementVNode)('button',{class:'cancel-button',onClick:k},'å–æ¶ˆ')])]),(0,t.createCommentVNode)(' ç¬¬äºŒè¡Œï¼šæ™‚é–“è¼¸å…¥ '),(0,t.createElementVNode)('div',Bg,[(0,t.createElementVNode)('div',Cg,[(0,t.createElementVNode)('input',{value:d.value.year,type:'number',class:'summary-datetime-input summary-datetime-year-input',placeholder:'å¹´',onInput:a[2]||(a[2]=e=>B('year',e))},null,40,$g),a[20]||(a[20]=(0,t.createTextVNode)('å¹´ ',-1)),(0,t.createElementVNode)('input',{value:d.value.month,type:'number',class:'summary-datetime-input',placeholder:'æœˆ',min:'1',max:'12',onInput:a[3]||(a[3]=e=>B('month',e))},null,40,Ig),a[21]||(a[21]=(0,t.createTextVNode)('æœˆ ',-1)),(0,t.createElementVNode)('input',{value:d.value.day,type:'number',class:'summary-datetime-input',placeholder:'æ—¥',min:'1',max:'31',onInput:a[4]||(a[4]=e=>B('day',e))},null,40,zg),a[22]||(a[22]=(0,t.createTextVNode)('æ—¥ ',-1)),(0,t.createElementVNode)('input',{value:d.value.hour,type:'number',class:'summary-datetime-input',placeholder:'æ™‚',min:'0',max:'23',onInput:a[5]||(a[5]=e=>B('hour',e))},null,40,Dg),a[23]||(a[23]=(0,t.createTextVNode)(': ',-1)),(0,t.createElementVNode)('input',{value:d.value.minute,type:'number',class:'summary-datetime-input',placeholder:'åˆ†',min:'0',max:'59',onInput:a[6]||(a[6]=e=>B('minute',e))},null,40,Tg)])]),(0,t.createCommentVNode)(' ç¬¬ä¸‰è¡Œï¼šç¸½çµå…§å®¹è¼¸å…¥ '),(0,t.createElementVNode)('textarea',{value:p.value,class:'summary-content-input',placeholder:'è¼¸å…¥ç¸½çµå…§å®¹...',onInput:a[7]||(a[7]=e=>p.value=e.target.value)},null,40,Mg)])])):(0,t.createCommentVNode)('v-if',!0),(0,t.createCommentVNode)(' ç¸½çµåˆ—è¡¨ '),(0,t.createElementVNode)('div',Yg,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(b.value,(e,n)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:n,class:(0,t.normalizeClass)(['summary-row',{'new-summary-row':i.value===n}])},[(0,t.createCommentVNode)(' ç·¨è¼¯æ¨¡å¼ '),i.value===n?((0,t.openBlock)(),(0,t.createElementBlock)('div',Og,[(0,t.createCommentVNode)(' ç¬¬ä¸€è¡Œï¼šæœ€å¾Œæ¨“å±¤ã€æ¬Šé‡ã€æ“ä½œæŒ‰éˆ• '),(0,t.createElementVNode)('div',Ag,[(0,t.createElementVNode)('div',Rg,[(0,t.createElementVNode)('div',Kg,[a[24]||(a[24]=(0,t.createTextVNode)(' æœ€å¾Œæ¨“å±¤: ',-1)),(0,t.createElementVNode)('input',{value:u.value,type:'number',class:'summary-last-message-id-input',min:'0',step:'1',onInput:a[8]||(a[8]=e=>w(e))},null,40,Ug)]),(0,t.createElementVNode)('div',Lg,[a[25]||(a[25]=(0,t.createTextVNode)(' æ¬Šé‡: ',-1)),(0,t.createElementVNode)('input',{value:c.value,type:'number',class:'summary-weighting-input',step:'0.1',min:'0',max:'1',onInput:a[9]||(a[9]=e=>S(e))},null,40,Fg)])]),(0,t.createElementVNode)('div',jg,[(0,t.createElementVNode)('button',{class:'confirm-button',disabled:!V.value,onClick:E},'ä¿å­˜',8,Hg),(0,t.createElementVNode)('button',{class:'cancel-button',onClick:k},'å–æ¶ˆ')])]),(0,t.createCommentVNode)(' ç¬¬äºŒè¡Œï¼šæ™‚é–“è¼¸å…¥ '),(0,t.createElementVNode)('div',Pg,[(0,t.createElementVNode)('div',Gg,[(0,t.createElementVNode)('input',{value:d.value.year,type:'number',class:'summary-datetime-input summary-datetime-year-input',placeholder:'å¹´',onInput:a[10]||(a[10]=e=>B('year',e))},null,40,qg),a[26]||(a[26]=(0,t.createTextVNode)('å¹´ ',-1)),(0,t.createElementVNode)('input',{value:d.value.month,type:'number',class:'summary-datetime-input',placeholder:'æœˆ',min:'1',max:'12',onInput:a[11]||(a[11]=e=>B('month',e))},null,40,Xg),a[27]||(a[27]=(0,t.createTextVNode)('æœˆ ',-1)),(0,t.createElementVNode)('input',{value:d.value.day,type:'number',class:'summary-datetime-input',placeholder:'æ—¥',min:'1',max:'31',onInput:a[12]||(a[12]=e=>B('day',e))},null,40,Wg),a[28]||(a[28]=(0,t.createTextVNode)('æ—¥ ',-1)),(0,t.createElementVNode)('input',{value:d.value.hour,type:'number',class:'summary-datetime-input',placeholder:'æ™‚',min:'0',max:'23',onInput:a[13]||(a[13]=e=>B('hour',e))},null,40,Jg),a[29]||(a[29]=(0,t.createTextVNode)(': ',-1)),(0,t.createElementVNode)('input',{value:d.value.minute,type:'number',class:'summary-datetime-input',placeholder:'åˆ†',min:'0',max:'59',onInput:a[14]||(a[14]=e=>B('minute',e))},null,40,Zg)])]),(0,t.createCommentVNode)(' ç¬¬ä¸‰è¡Œï¼šç¸½çµå…§å®¹è¼¸å…¥ '),(0,t.createElementVNode)('textarea',{value:p.value,class:'summary-content-input',placeholder:'è¼¸å…¥ç¸½çµå…§å®¹...',onInput:a[15]||(a[15]=e=>p.value=e.target.value)},null,40,Qg)])):((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,{key:1},[(0,t.createCommentVNode)(' é¡¯ç¤ºæ¨¡å¼ '),(0,t.createElementVNode)('div',null,[(0,t.createCommentVNode)(' ç¬¬ä¸€è¡Œï¼šæ¶ˆæ¯IDã€æ¬Šé‡ã€æ“ä½œæŒ‰éˆ• '),(0,t.createElementVNode)('div',eb,[(0,t.createElementVNode)('div',tb,[(0,t.createElementVNode)('div',ab,'æœ€å¾Œæ¨“å±¤: '+(0,t.toDisplayString)(e.last_message_id),1),(0,t.createElementVNode)('div',nb,'æ¬Šé‡: '+(0,t.toDisplayString)(e.weighting),1),(0,t.createElementVNode)('div',{class:(0,t.normalizeClass)(['summary-status',`status-${f(e)}`])},(0,t.toDisplayString)('used'===f(e)?'ä½¿ç”¨ä¸­':'æœªä½¿ç”¨'),3)]),(0,t.createElementVNode)('div',ob,[(0,t.createElementVNode)('button',{class:'edit-summary-button',onClick:e=>(e=>{if(m.value&&b.value[e]){i.value=e;const t=b.value[e],a=t.datetime.toDate();d.value={year:a.getFullYear(),month:a.getMonth()+1,day:a.getDate(),hour:a.getHours(),minute:a.getMinutes()},c.value=t.weighting,u.value=t.last_message_id,p.value=t.summary}})(n)},'ç·¨è¼¯',8,rb),(0,t.createElementVNode)('button',{class:'delete-summary-button',onClick:e=>(e=>{if(m.value&&b.value[e]){const t=b.value[e];l.value=e,r.value={visible:!0,title:'ç¢ºèªåˆªé™¤ç¸½çµ',message:`ç¢ºå®šè¦åˆªé™¤ç¸½çµ "${t.summary.substring(0,50)}${t.summary.length>50?'...':''}" å—Žï¼Ÿæ­¤æ“ä½œç„¡æ³•æ’¤éŠ·ã€‚`,confirmText:'åˆªé™¤',cancelText:'å–æ¶ˆ'}}})(n)},'åˆªé™¤',8,lb)])]),(0,t.createCommentVNode)(' ç¬¬äºŒè¡Œï¼šæ™‚é–“ '),(0,t.createElementVNode)('div',ib,[(0,t.createElementVNode)('div',sb,(0,t.toDisplayString)(C(e.datetime)),1)]),(0,t.createCommentVNode)(' ç¬¬ä¸‰è¡Œï¼šç¸½çµå…§å®¹ '),(0,t.createElementVNode)('div',db,(0,t.toDisplayString)(e.summary),1)])],2112))],2))),128)),0===b.value.length?((0,t.openBlock)(),(0,t.createElementBlock)('div',cb,'æ²’æœ‰ä»»ä½•ç¸½çµ')):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createCommentVNode)(' ç¢ºèªçª—å£ '),(0,t.createVNode)(Xi,{'confirm-dialog':r.value,'onUpdate:confirmDialog':a[16]||(a[16]=e=>r.value=e),onConfirmDialogConfirm:h,onConfirmDialogCancel:x},null,8,['confirm-dialog'])])]))}});n(4916);const pb=(0,d.A)(ub,[['__scopeId','data-v-3de5c4ec']]),mb={class:'user-tab-container'},vb={ref:'userContentRef',class:'user-content'},gb={class:'user-header'},bb={class:'user-name'},fb={class:'attributes-grid'},hb={class:'attribute-item horizontal'},xb={class:'attribute-value'},yb={class:'attribute-item horizontal'},_b={key:0,class:'attribute-value'},Eb={class:'attribute-item horizontal'},kb={key:0,class:'attribute-value'},Vb={class:'attribute-item horizontal'},Nb={key:0,class:'attribute-value'},wb={class:'attribute-item horizontal'},Sb={key:0,class:'attribute-value'},Bb={class:'attribute-item horizontal'},Cb={key:0,class:'attribute-value'},$b={class:'attribute-item horizontal'},Ib={key:0,class:'attribute-value'},zb={class:'attribute-item horizontal'},Db={key:0,class:'attribute-value'},Tb={class:'attribute-item horizontal'},Mb={key:0,class:'attribute-value'},Yb={class:'attribute-item full-width horizontal'},Ob={key:0,class:'attribute-value money'},Ab={class:'attribute-item full-width birthday-fullwidth'},Rb={key:0,class:'attribute-value'},Kb={key:1,class:'birthday-edit-container'},Ub={class:'birthday-input-group'},Lb={class:'attribute-item full-width'},Fb={key:0,class:'attribute-value no-bold'},jb={class:'attribute-item full-width'},Hb={key:0,class:'attribute-value no-bold'},Pb={class:'attribute-item full-width'},Gb={key:0,class:'attribute-value no-bold'},qb={class:'attribute-item full-width'},Xb={key:0,class:'attribute-value no-bold'},Wb={class:'attribute-item full-width'},Jb={key:0,class:'attribute-value no-bold'},Zb={class:'attribute-item full-width'},Qb={key:0,class:'attribute-value no-bold'},ef={class:'attribute-item full-width'},tf={key:0,class:'attribute-value no-bold'},af={key:0,class:'attribute-item full-width'},nf={key:0,class:'attribute-value no-bold'},of={class:'relations-section'},rf={key:0,class:'relations-list'},lf={class:'relation-highlight'},sf={class:'relation-highlight'},df={key:0,class:'no-relations-message'},cf={key:1,class:'relations-edit-list'},uf=['value','onChange'],pf=['value'],mf=['onUpdate:modelValue'],vf=['onClick'],gf={class:'inventory-section'},bf={key:0,class:'inventory-list'},ff={class:'inventory-first-row'},hf={class:'item-name-id'},xf={key:0,class:'item-quantity'},yf={key:1,class:'storage-indicator'},_f={class:'inventory-second-row'},Ef={key:0,class:'inventory-third-row'},kf={key:0,class:'no-inventory'},Vf={key:1,class:'inventory-items'},Nf={key:0,class:'no-inventory-message'},wf={key:1,class:'inventory-edit-list'},Sf=['value','onChange'],Bf={label:'ç‰©å“'},Cf=['value'],$f={label:'è²¯å­˜é»ž'},If=['value'],zf={key:0,class:'inventory-edit-connector'},Df=['onUpdate:modelValue'],Tf=['onClick'],Mf={key:0,class:'edit-buttons'},Yf=(0,t.defineComponent)({__name:'user_tab',setup(a,{expose:n}){(0,t.useCssVars)(e=>({v68dcf940:s.value}));const o=(0,t.ref)(!1),r=(0,t.ref)(null),l=(0,t.ref)(0),i=(0,t.ref)(null),s=(0,t.computed)(()=>`calc(100vh - ${l.value}px)`),d=(0,t.computed)({get:()=>r.value?.é—œä¿‚||{},set:e=>{r.value&&(r.value.é—œä¿‚=e)}}),c=(0,t.computed)({get:()=>r.value?.æ‰€æŒç‰©||{},set:e=>{r.value&&(r.value.æ‰€æŒç‰©=e)}}),u=(0,t.computed)(()=>{if(!y.value)return[];const e=[];for(const[t,a]of y.value.active_characters)'c1'!==t&&e.push({id:t,name:a.name});for(const[t,a]of y.value.deactive_characters)e.push({id:t,name:a.name});return e}),p=(0,t.computed)(()=>{if(!y.value)return[];const e=[];for(const[t,a]of y.value.items)e.push({id:t,name:a.name,type:'item'});for(const[t,a]of y.value.storages)e.push({id:t,name:a.name,type:'storage'});return e}),m=e=>{if(!y.value)return'æœªçŸ¥';const t=y.value.items.get(e);if(t)return t.name;const a=y.value.storages.get(e);return a?a.name:'æœªçŸ¥'},v=e=>y.value?.storages.has(e)||!1,g=e=>{const t=y.value?.storages.get(e);return t?.inventory.size||0},b=e=>{const t=y.value?.storages.get(e);return t?.inventory||new Map},f=e=>{if(!y.value)return'ç„¡æè¿°';const t=y.value.items.get(e);if(t)return t.description;const a=y.value.storages.get(e);return a?a.description:'ç„¡æè¿°'},h=()=>{r.value?.é—œä¿‚&&(r.value.é—œä¿‚['']='')},x=()=>{r.value?.æ‰€æŒç‰©&&(r.value.æ‰€æŒç‰©['']=1)},y=(0,t.ref)(null),E=()=>{try{const e=getLastMessageId();y.value=Oo.loadFromVariable(e)}catch(e){console.error('Failed to load state:',e),y.value=null}};E();const k=(0,t.computed)(()=>y.value?.getCharacter('c1')||null),V=()=>{k.value&&(r.value=e(k.value.toRecord()),r.value.é—œä¿‚=Object.fromEntries(k.value.relations),r.value.æ‰€æŒç‰©=Object.fromEntries(k.value.inventory),r.value.ç”Ÿæ—¥={month:k.value.birthday.month,date:k.value.birthday.date},o.value=!0)},N=()=>{o.value=!1,r.value=null},w=()=>{if(y.value&&r.value){if(r.value.ç”Ÿæ—¥&&r.value.ç”Ÿæ—¥.month&&r.value.ç”Ÿæ—¥.date){const e=new Date,t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate(),o=r.value.ç”Ÿæ—¥.month,l=r.value.ç”Ÿæ—¥.date;let i=t-(r.value.å¹´é½¡||0);(o>a||o===a&&l>n)&&(i-=1),r.value.ç”Ÿæ—¥=new Date(i,r.value.ç”Ÿæ—¥.month-1,r.value.ç”Ÿæ—¥.date).toString()}if(r.value.é—œä¿‚){const e={};for(const[t,a]of Object.entries(r.value.é—œä¿‚))t&&a&&'string'==typeof a&&''!==a.trim()&&(e[t]=a);r.value.é—œä¿‚=e}if(r.value.æ‰€æŒç‰©){const e={};for(const[t,a]of Object.entries(r.value.æ‰€æŒç‰©))if(t&&a&&'number'==typeof a&&a>0){const n=v(t)?1:a;e[t]=n}r.value.æ‰€æŒç‰©=e}y.value.active_characters.set('c1',Io.fromRecord(r.value)),y.value.saveAsVariable(getLastMessageId()),E()}o.value=!1,r.value=null};n({handleTabClick:()=>{o.value&&N()}});return(0,t.onMounted)(()=>{(0,t.nextTick)(()=>{(()=>{if('undefined'==typeof ResizeObserver)return void(l.value=74);i.value=new ResizeObserver(e=>{for(const t of e){const e=t.target;e.classList.contains('tab-navigation')&&(l.value=e.offsetHeight)}});const e=document.querySelector('.tab-navigation.top');e&&(i.value.observe(e),l.value=e.offsetHeight)})()})}),(0,t.onUnmounted)(()=>{i.value&&(i.value.disconnect(),i.value=null)}),(e,a)=>{return(0,t.openBlock)(),(0,t.createElementBlock)('div',mb,[(0,t.createElementVNode)('div',vb,[(0,t.createCommentVNode)(' ç”¨æˆ¶åç¨±æ¨™é¡Œ '),(0,t.createElementVNode)('div',gb,[(0,t.createElementVNode)('h1',bb,(0,t.toDisplayString)(k.value?.name||'N/A'),1),o.value?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('button',{key:0,class:'edit-button',onClick:V},'ç·¨è¼¯'))]),(0,t.createCommentVNode)(' æ‰€æœ‰å±¬æ€§çµ±ä¸€é¡¯ç¤º '),(0,t.createElementVNode)('div',fb,[(0,t.createCommentVNode)(' åŸºæœ¬ä¿¡æ¯ '),(0,t.createElementVNode)('div',hb,[a[19]||(a[19]=(0,t.createElementVNode)('span',{class:'attribute-label'},'ID',-1)),(0,t.createElementVNode)('span',xb,(0,t.toDisplayString)(k.value?'c1':'N/A'),1)]),(0,t.createElementVNode)('div',yb,[a[20]||(a[20]=(0,t.createElementVNode)('span',{class:'attribute-label'},'æ€§åˆ¥',-1)),o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:1,'onUpdate:modelValue':a[0]||(a[0]=e=>r.value.æ€§åˆ¥=e),class:'attribute-input'},null,512)),[[t.vModelText,r.value.æ€§åˆ¥]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',_b,(0,t.toDisplayString)(k.value?.gender||'N/A'),1))]),(0,t.createElementVNode)('div',Eb,[a[21]||(a[21]=(0,t.createElementVNode)('span',{class:'attribute-label'},'å¹´é½¡',-1)),o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:1,'onUpdate:modelValue':a[1]||(a[1]=e=>r.value.å¹´é½¡=e),class:'attribute-input',type:'number'},null,512)),[[t.vModelText,r.value.å¹´é½¡,void 0,{number:!0}]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',kb,(0,t.toDisplayString)(k.value?.age||'N/A'),1))]),(0,t.createCommentVNode)(' èº«é«”æ¸¬é‡ '),(0,t.createElementVNode)('div',Vb,[a[22]||(a[22]=(0,t.createElementVNode)('span',{class:'attribute-label unit-label'},'èº«é«˜ (cm)',-1)),o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:1,'onUpdate:modelValue':a[2]||(a[2]=e=>r.value.èº«é«˜=e),class:'attribute-input',type:'number'},null,512)),[[t.vModelText,r.value.èº«é«˜,void 0,{number:!0}]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',Nb,(0,t.toDisplayString)(k.value?.height||'N/A'),1))]),(0,t.createElementVNode)('div',wb,[a[23]||(a[23]=(0,t.createElementVNode)('span',{class:'attribute-label unit-label'},'é«”é‡ (kg)',-1)),o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:1,'onUpdate:modelValue':a[3]||(a[3]=e=>r.value.é«”é‡=e),class:'attribute-input',type:'number'},null,512)),[[t.vModelText,r.value.é«”é‡,void 0,{number:!0}]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',Sb,(0,t.toDisplayString)(k.value?.weight||'N/A'),1))]),(0,t.createElementVNode)('div',Bb,[a[24]||(a[24]=(0,t.createElementVNode)('span',{class:'attribute-label unit-label'},'èƒ¸åœ (cm)',-1)),o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:1,'onUpdate:modelValue':a[4]||(a[4]=e=>r.value.èƒ¸åœ=e),class:'attribute-input',type:'number'},null,512)),[[t.vModelText,r.value.èƒ¸åœ,void 0,{number:!0}]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',Cb,(0,t.toDisplayString)(k.value?.chest_size||'N/A'),1))]),(0,t.createElementVNode)('div',$b,[a[25]||(a[25]=(0,t.createElementVNode)('span',{class:'attribute-label'},'ç½©æ¯',-1)),o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:1,'onUpdate:modelValue':a[5]||(a[5]=e=>r.value.ç½©æ¯=e),class:'attribute-input'},null,512)),[[t.vModelText,r.value.ç½©æ¯]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',Ib,(0,t.toDisplayString)(k.value?.cup_size||'ä¸é©ç”¨'),1))]),(0,t.createElementVNode)('div',zb,[a[26]||(a[26]=(0,t.createElementVNode)('span',{class:'attribute-label unit-label'},'è…°åœ (cm)',-1)),o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:1,'onUpdate:modelValue':a[6]||(a[6]=e=>r.value.è…°åœ=e),class:'attribute-input',type:'number'},null,512)),[[t.vModelText,r.value.è…°åœ,void 0,{number:!0}]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',Db,(0,t.toDisplayString)(k.value?.waist_size||'N/A'),1))]),(0,t.createElementVNode)('div',Tb,[a[27]||(a[27]=(0,t.createElementVNode)('span',{class:'attribute-label unit-label'},'è‡€åœ (cm)',-1)),o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:1,'onUpdate:modelValue':a[7]||(a[7]=e=>r.value.è‡€åœ=e),class:'attribute-input',type:'number'},null,512)),[[t.vModelText,r.value.è‡€åœ,void 0,{number:!0}]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',Mb,(0,t.toDisplayString)(k.value?.hips_size||'N/A'),1))]),(0,t.createCommentVNode)(' é‡‘éŒ¢ '),(0,t.createElementVNode)('div',Yb,[a[28]||(a[28]=(0,t.createElementVNode)('span',{class:'attribute-label'},'é‡‘éŒ¢',-1)),o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:1,'onUpdate:modelValue':a[8]||(a[8]=e=>r.value.é‡‘éŒ¢=e),class:'attribute-input',type:'number'},null,512)),[[t.vModelText,r.value.é‡‘éŒ¢,void 0,{number:!0}]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',Ob,(0,t.toDisplayString)((l=k.value?.money,void 0===l?'N/A':`$${l.toLocaleString()}`)),1))]),(0,t.createCommentVNode)(' ç”Ÿæ—¥ '),(0,t.createElementVNode)('div',Ab,[a[31]||(a[31]=(0,t.createElementVNode)('span',{class:'attribute-label'},'ç”Ÿæ—¥',-1)),o.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',Kb,[(0,t.createElementVNode)('div',Ub,[(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':a[9]||(a[9]=e=>r.value.ç”Ÿæ—¥.month=e),class:'attribute-input birthday-month',type:'number',placeholder:'æœˆ',min:'1',max:'12'},null,512),[[t.vModelText,r.value.ç”Ÿæ—¥.month,void 0,{number:!0}]]),a[29]||(a[29]=(0,t.createElementVNode)('span',{class:'birthday-separator'},'æœˆ',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':a[10]||(a[10]=e=>r.value.ç”Ÿæ—¥.date=e),class:'attribute-input birthday-date',type:'number',placeholder:'æ—¥',min:'1',max:'31'},null,512),[[t.vModelText,r.value.ç”Ÿæ—¥.date,void 0,{number:!0}]]),a[30]||(a[30]=(0,t.createElementVNode)('span',{class:'birthday-separator'},'æ—¥',-1))])])):((0,t.openBlock)(),(0,t.createElementBlock)('span',Rb,(0,t.toDisplayString)((n=k.value?.birthday,n?`${n.month}æœˆ${n.date}æ—¥`:'N/A')),1))]),(0,t.createCommentVNode)(' å¤–è²Œç‰¹å¾µ '),(0,t.createElementVNode)('div',Lb,[a[32]||(a[32]=(0,t.createElementVNode)('span',{class:'attribute-label'},'èº«ä»½',-1)),o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('textarea',{key:1,'onUpdate:modelValue':a[11]||(a[11]=e=>r.value.èº«ä»½=e),class:'attribute-textarea'},null,512)),[[t.vModelText,r.value.èº«ä»½]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',Fb,(0,t.toDisplayString)(k.value?.identity||'N/A'),1))]),(0,t.createElementVNode)('div',jb,[a[33]||(a[33]=(0,t.createElementVNode)('span',{class:'attribute-label'},'é«®åž‹',-1)),o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('textarea',{key:1,'onUpdate:modelValue':a[12]||(a[12]=e=>r.value.é«®åž‹=e),class:'attribute-textarea'},null,512)),[[t.vModelText,r.value.é«®åž‹]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',Hb,(0,t.toDisplayString)(k.value?.hairstyle||'N/A'),1))]),(0,t.createElementVNode)('div',Pb,[a[34]||(a[34]=(0,t.createElementVNode)('span',{class:'attribute-label'},'æ¨£è²Œ',-1)),o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('textarea',{key:1,'onUpdate:modelValue':a[13]||(a[13]=e=>r.value.æ¨£è²Œ=e),class:'attribute-textarea'},null,512)),[[t.vModelText,r.value.æ¨£è²Œ]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',Gb,(0,t.toDisplayString)(k.value?.appearance||'N/A'),1))]),(0,t.createElementVNode)('div',qb,[a[35]||(a[35]=(0,t.createElementVNode)('span',{class:'attribute-label'},'è¡£è‘—',-1)),o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('textarea',{key:1,'onUpdate:modelValue':a[14]||(a[14]=e=>r.value.è¡£è‘—=e),class:'attribute-textarea'},null,512)),[[t.vModelText,r.value.è¡£è‘—]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',Xb,(0,t.toDisplayString)(k.value?.clothes||'N/A'),1))]),(0,t.createElementVNode)('div',Wb,[a[36]||(a[36]=(0,t.createElementVNode)('span',{class:'attribute-label'},'æ„›å¥½',-1)),o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('textarea',{key:1,'onUpdate:modelValue':a[15]||(a[15]=e=>r.value.æ„›å¥½=e),class:'attribute-textarea'},null,512)),[[t.vModelText,r.value.æ„›å¥½]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',Jb,(0,t.toDisplayString)(k.value?.favourite||'N/A'),1))]),(0,t.createElementVNode)('div',Zb,[a[37]||(a[37]=(0,t.createElementVNode)('span',{class:'attribute-label'},'ç°¡ä»‹',-1)),o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('textarea',{key:1,'onUpdate:modelValue':a[16]||(a[16]=e=>r.value.ç°¡ä»‹=e),class:'attribute-textarea'},null,512)),[[t.vModelText,r.value.ç°¡ä»‹]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',Qb,(0,t.toDisplayString)(k.value?.introduction||'N/A'),1))]),(0,t.createElementVNode)('div',ef,[a[38]||(a[38]=(0,t.createElementVNode)('span',{class:'attribute-label'},'æ€§æ ¼',-1)),o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('textarea',{key:1,'onUpdate:modelValue':a[17]||(a[17]=e=>r.value.æ€§æ ¼=e),class:'attribute-textarea'},null,512)),[[t.vModelText,r.value.æ€§æ ¼]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',tf,(0,t.toDisplayString)(k.value?.personality||'N/A'),1))]),k.value?.extra_information||o.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',af,[a[39]||(a[39]=(0,t.createElementVNode)('span',{class:'attribute-label'},'å…¶ä»–é‡è¦è³‡è¨Š',-1)),o.value?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('textarea',{key:1,'onUpdate:modelValue':a[18]||(a[18]=e=>r.value.å…¶ä»–é‡è¦è³‡è¨Š=e),class:'attribute-textarea'},null,512)),[[t.vModelText,r.value.å…¶ä»–é‡è¦è³‡è¨Š]]):((0,t.openBlock)(),(0,t.createElementBlock)('span',nf,(0,t.toDisplayString)(k.value?.extra_information||'N/A'),1))])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createCommentVNode)(' é—œä¿‚å’Œç‰©å“ '),(0,t.createElementVNode)('div',of,[a[43]||(a[43]=(0,t.createElementVNode)('h3',{class:'section-title'},'é—œä¿‚',-1)),o.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',cf,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(d.value,(_,e)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:e,class:'relation-edit-item'},[(0,t.createElementVNode)('select',{value:e,class:'relation-select',onChange:t=>((e,t)=>{if(r.value?.é—œä¿‚&&e!==t){const a=r.value.é—œä¿‚[e];delete r.value.é—œä¿‚[e],t&&(r.value.é—œä¿‚[t]=a)}})(String(e),t.target.value)},[a[41]||(a[41]=(0,t.createElementVNode)('option',{value:'',disabled:''},'é¸æ“‡è§’è‰²',-1)),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(u.value,e=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:e.id,value:e.id},(0,t.toDisplayString)(e.name)+' ('+(0,t.toDisplayString)(e.id)+') ',9,pf))),128))],40,uf),a[42]||(a[42]=(0,t.createElementVNode)('span',{class:'relation-edit-connector'},' æ˜¯æ­¤è§’è‰²çš„ ',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':t=>d.value[e]=t,class:'relation-input',placeholder:'é—œä¿‚'},null,8,mf),[[t.vModelText,d.value[e]]]),(0,t.createElementVNode)('button',{class:'relation-remove-btn',onClick:t=>(e=>{r.value?.é—œä¿‚&&delete r.value.é—œä¿‚[e]})(String(e))},'Ã—',8,vf)]))),128)),(0,t.createElementVNode)('button',{class:'add-relation-btn',onClick:h},'+ æ·»åŠ é—œä¿‚')])):((0,t.openBlock)(),(0,t.createElementBlock)('div',rf,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(k.value?.relations||[],([e,n])=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:e,class:'relation-item'},[(0,t.createElementVNode)('span',lf,(0,t.toDisplayString)(y.value?.getCharacter(e)?.name||'æœªçŸ¥')+' ('+(0,t.toDisplayString)(e)+')',1),a[40]||(a[40]=(0,t.createElementVNode)('span',{class:'relation-connector'},' æ˜¯æ­¤è§’è‰²çš„ ',-1)),(0,t.createElementVNode)('span',sf,(0,t.toDisplayString)(n),1)]))),128)),k.value?.relations&&0!==k.value.relations.size?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('div',df,' æ²’æœ‰ä»»ä½•é—œä¿‚ '))]))]),(0,t.createElementVNode)('div',gf,[a[45]||(a[45]=(0,t.createElementVNode)('h3',{class:'section-title'},'æ‰€æŒç‰©',-1)),o.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',wf,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(c.value,(_,e)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:e,class:'inventory-edit-item'},[(0,t.createElementVNode)('select',{value:e,class:'inventory-select',onChange:t=>((e,t)=>{if(r.value?.æ‰€æŒç‰©&&e!==t){const a=r.value.æ‰€æŒç‰©[e];delete r.value.æ‰€æŒç‰©[e],t&&(r.value.æ‰€æŒç‰©[t]=a)}})(String(e),t.target.value)},[a[44]||(a[44]=(0,t.createElementVNode)('option',{value:'',disabled:''},'é¸æ“‡ç‰©å“æˆ–è²¯å­˜é»ž...',-1)),(0,t.createElementVNode)('optgroup',Bf,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(p.value.filter(e=>'item'===e.type),e=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:e.id,value:e.id},(0,t.toDisplayString)(e.name)+' ('+(0,t.toDisplayString)(e.id)+') ',9,Cf))),128))]),(0,t.createElementVNode)('optgroup',$f,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(p.value.filter(e=>'storage'===e.type),e=>((0,t.openBlock)(),(0,t.createElementBlock)('option',{key:e.id,value:e.id},(0,t.toDisplayString)(e.name)+' ('+(0,t.toDisplayString)(e.id)+') ',9,If))),128))])],40,Sf),v(String(e))?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('span',zf,'Ã—')),v(String(e))?(0,t.createCommentVNode)('v-if',!0):(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)('input',{key:1,'onUpdate:modelValue':t=>c.value[e]=t,class:'inventory-quantity-input',type:'number',min:'0',placeholder:'æ•¸é‡'},null,8,Df)),[[t.vModelText,c.value[e],void 0,{number:!0}]]),(0,t.createElementVNode)('button',{class:'inventory-remove-btn',onClick:t=>(e=>{r.value?.æ‰€æŒç‰©&&delete r.value.æ‰€æŒç‰©[e]})(String(e))},'Ã—',8,Tf)]))),128)),(0,t.createElementVNode)('button',{class:'add-inventory-btn',onClick:x},'+ æ·»åŠ ç‰©å“æˆ–è²¯å­˜é»ž')])):((0,t.openBlock)(),(0,t.createElementBlock)('div',bf,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(k.value?.inventory||[],([e,a])=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:e,class:(0,t.normalizeClass)(['inventory-item',{'storage-item':v(e)}])},[(0,t.createElementVNode)('div',ff,[(0,t.createElementVNode)('span',hf,(0,t.toDisplayString)(m(e))+' ('+(0,t.toDisplayString)(e)+')',1),v(e)?((0,t.openBlock)(),(0,t.createElementBlock)('span',yf,'è²¯å­˜é»ž')):((0,t.openBlock)(),(0,t.createElementBlock)('span',xf,'Ã— '+(0,t.toDisplayString)(a),1))]),(0,t.createElementVNode)('div',_f,(0,t.toDisplayString)(f(e)),1),v(e)?((0,t.openBlock)(),(0,t.createElementBlock)('div',Ef,[0===g(e)?((0,t.openBlock)(),(0,t.createElementBlock)('div',kf,'ç„¡ç‰©å“')):((0,t.openBlock)(),(0,t.createElementBlock)('div',Vf,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(b(e),([e,a])=>((0,t.openBlock)(),(0,t.createElementBlock)('span',{key:e,class:(0,t.normalizeClass)(y.value?.storages.has(e)?'storage-item-tag':'inventory-item-tag')},(0,t.toDisplayString)(m(e))+' ('+(0,t.toDisplayString)(e)+')'+(0,t.toDisplayString)(y.value?.storages.has(e)?'':` Ã— ${a}`),3))),128))]))])):(0,t.createCommentVNode)('v-if',!0)],2))),128)),k.value?.inventory&&0!==k.value.inventory.size?(0,t.createCommentVNode)('v-if',!0):((0,t.openBlock)(),(0,t.createElementBlock)('div',Nf,' æ²’æœ‰ä»»ä½•ç‰©å“ '))]))]),(0,t.createCommentVNode)(' ç·¨è¼¯æŒ‰éˆ• '),o.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',Mf,[(0,t.createElementVNode)('button',{class:'confirm-button',onClick:w},'ç¢ºèª'),(0,t.createElementVNode)('button',{class:'cancel-button',onClick:N},'å–æ¶ˆ')])):(0,t.createCommentVNode)('v-if',!0)],512)]);var n,l}}});n(2095);const Of=(0,d.A)(Yf,[['__scopeId','data-v-ada46c14']]),Af={class:'world-info-container'},Rf={class:'world-info-content'},Kf={class:'section'},Uf={class:'sortable-container'},Lf={key:0,class:'drop-indicator'},Ff=['data-id','onDragstart','onDragover','onDrop'],jf=['onClick'],Hf={class:'fold-content'},Pf={class:'input-group'},Gf=['onUpdate:modelValue'],qf={class:'input-group'},Xf=['onUpdate:modelValue'],Wf={class:'input-group'},Jf=['onUpdate:modelValue'],Zf={key:0,class:'generated-result'},Qf={class:'generated-text'},eh=['onClick'],th={class:'item-actions'},ah=['disabled','onClick'],nh={key:0,class:'loading-spinner'},oh=['disabled','onClick'],rh={key:0,class:'drop-indicator'},lh=(0,t.defineComponent)({__name:'world_info_tab',setup(e){(0,t.useCssVars)(e=>({ae590e90:(0,t.unref)(o)}));const a=(0,t.ref)(0),n=(0,t.ref)(null),o=(0,t.computed)(()=>`calc(100vh - ${a.value}px)`);(0,t.onMounted)(()=>{v(),f(),(async()=>{await(0,t.nextTick)();const e=document.querySelector('.tab-navigation');e&&window.ResizeObserver?(n.value=new ResizeObserver(e=>{for(const t of e)a.value=t.contentRect.height}),n.value.observe(e)):a.value=74})()}),(0,t.onUnmounted)(()=>{n.value&&(n.value.disconnect(),n.value=null)});const r=(0,t.ref)([]),l=(0,t.ref)(new Map),i=(0,t.computed)(()=>{try{const e=getVariables({type:'chat'});return!!e?.world_info?.trim()}catch{return!1}}),s=(0,t.ref)(null),d=(0,t.ref)(null),u=e=>{const t=r.value[e];if(t&&t.generated_content){t.content=t.generated_content,t.generated_content='',r.value[e]={...t};try{t.name&&t.name.trim()&&localStorage.removeItem(`world_info_item_generated_${t.name.trim()}`)}catch(e){console.error(`Failed to remove generated world info item for ${t.name} from localStorage:`,e)}}},p=()=>{const e={id:Date.now().toString(),name:'',content:'',generation_requirement:'',is_open:!1,generated_content:''};r.value.push(e)},m=()=>{try{const e=getVariables({type:'chat'}),t=r.value.map(e=>({name:e.name,content:e.content}));e.extra_world_info=t,replaceVariables(e,{type:'chat'}),(()=>{const e=getVariables({type:'chat'});let t='';for(const a of Array.from(e.extra_world_info))''!==a.name.trim()&&''!==a.content.trim()&&(t+=`<${a.name}>\n`,t+=`${a.content}\n`,t+=`</${a.name}>\n`,t+='\n');e.extra_world_info_prompt=t,replaceVariables(e,{type:'chat'})})()}catch(e){console.error('ä¿å­˜ extra_world_info å¤±æ•—:',e)}},v=()=>{try{const e=getVariables({type:'chat'});if(e?.extra_world_info&&Array.isArray(e.extra_world_info)){const t=e.extra_world_info.map((e,t)=>({id:`loaded_${t}_${Date.now()}`,name:e.name||'æœªå‘½åé …ç›®',content:e.content||'',generation_requirement:'',is_open:!1,generated_content:''}));r.value=t}}catch(e){console.error('åŠ è¼‰ extra_world_info å¤±æ•—:',e)}},g=()=>{d.value=null},b=()=>{s.value=null,d.value=null},f=()=>{try{const e=localStorage.getItem('world_info_tab_generation_requirements');if(e){const t=JSON.parse(e);r.value.forEach(e=>{e.name&&e.name.trim()&&t[e.name.trim()]&&(e.generation_requirement=t[e.name.trim()])})}r.value.forEach(e=>{if(e.name&&e.name.trim()){const t=localStorage.getItem(`world_info_item_generated_${e.name.trim()}`);if(t)try{const a=JSON.parse(t);a[e.name.trim()]&&(e.generated_content=a[e.name.trim()])}catch(t){console.error(`Failed to parse generated content for ${e.name}:`,t)}}})}catch(e){console.error('å¾ž localStorage åŠ è¼‰ç”Ÿæˆè¦æ±‚å¤±æ•—:',e)}};(0,t.watch)(r,()=>{m(),(()=>{try{const e={};r.value.forEach(t=>{t.name&&t.name.trim()&&(e[t.name.trim()]=t.generation_requirement)}),localStorage.setItem('world_info_tab_generation_requirements',JSON.stringify(e))}catch(e){console.error('ä¿å­˜ç”Ÿæˆè¦æ±‚åˆ° localStorage å¤±æ•—:',e)}})()},{deep:!0}),(0,t.watch)(()=>getVariables({type:'chat'}),e=>{e?.extra_world_info&&v()},{deep:!0});const h=e=>{let t='è«‹æ ¹æ“šä¸–ç•ŒèƒŒæ™¯è³‡è¨Šã€ç”Ÿæˆè¦æ±‚åŠå·²æœ‰é …ç›®è³‡æ–™ï¼Œç‚ºä»¥ä¸‹é …ç›®å®Œå–„å…§å®¹è¨­å®šï¼š\n\n';return t+=`åç¨±ï¼š${e.name||''}\n`,t+=`å…§å®¹ï¼š${e.content||''}\n`,t},x=()=>{const e=getVariables({type:'chat'}).world_info;let t=getCharData('current').description;t=t.replace('{{getvar::world_info}}',e);let a='ä½ æ˜¯ä¸€å€‹å°ˆæ¥­çš„é …ç›®å…§å®¹è¨­è¨ˆåŠ©æ‰‹ï¼Œæ“…é•·å‰µé€ è±å¯Œå¤šå½©çš„é …ç›®è¨­å®šã€‚è«‹æ ¹æ“šæä¾›çš„ä¸–ç•ŒèƒŒæ™¯åŠç”Ÿæˆè¦æ±‚ï¼Œç‚ºé …ç›®å®Œå–„å…§å®¹ã€‚\n';return a+='\n',a+='<ä¸–ç•ŒèƒŒæ™¯>\n','ä½ æ˜¯ä¸€å€‹å°ˆæ¥­çš„é …ç›®å…§å®¹è¨­è¨ˆåŠ©æ‰‹ï¼Œæ“…é•·å‰µé€ è±å¯Œå¤šå½©çš„é …ç›®è¨­å®šã€‚è«‹æ ¹æ“šæä¾›çš„ä¸–ç•ŒèƒŒæ™¯åŠç”Ÿæˆè¦æ±‚ï¼Œç‚ºé …ç›®å®Œå–„å…§å®¹ã€‚\n\n<ä¸–ç•ŒèƒŒæ™¯>\n'},y=e=>{let t='\n</ä¸–ç•ŒèƒŒæ™¯>\n';return t+='\n',t+=`${(()=>{const e=getVariables({type:'chat'}).characters.c1,t=`${e.å§“æ°}${e.åå­—}`;let a=`<${t}Status>\n`;return a+='idï¼šc1\n',a+=`  å§“æ°ï¼š${e.å§“æ°||''}\n`,a+=`  åå­—ï¼š${e.åå­—||''}\n`,a+=`  å¹´é½¡ï¼š${e.å¹´é½¡||''}\n`,a+=`  æ€§åˆ¥ï¼š${e.æ€§åˆ¥||''}\n`,a+=`  èº«ä»½ï¼š${e.èº«ä»½||''}\n`,a+=`  èº«é«˜ï¼š${e.èº«é«˜||''}\n`,a+=`  é«”é‡ï¼š${e.é«”é‡||''}\n`,a+=`  èƒ¸åœï¼š${e.èƒ¸åœ||''}\n`,a+=`  ç½©æ¯ï¼š${e.ç½©æ¯||''}\n`,a+=`  è…°åœï¼š${e.è…°åœ||''}\n`,a+=`  è‡€åœï¼š${e.è‡€åœ||''}\n`,a+=`  é«®åž‹ï¼š${e.é«®åž‹||''}\n`,a+=`  æ¨£è²Œï¼š${e.æ¨£è²Œ||''}\n`,a+=`  è¡£è‘—ï¼š${e.è¡£è‘—||''}\n`,a+=`  ç°¡ä»‹ï¼š${e.ç°¡ä»‹||''}\n`,a+=`  æ€§æ ¼ï¼š${e.æ€§æ ¼||''}\n`,a+=`  æ„›å¥½ï¼š${e.æ„›å¥½||''}\n`,a+=`  é‡‘éŒ¢ï¼š${e.é‡‘éŒ¢||''}\n`,a+=`  ç”Ÿæ—¥æœˆä»½ï¼š${e.ç”Ÿæ—¥æœˆä»½||''}\n`,a+=`  ç”Ÿæ—¥æ—¥æœŸï¼š${e.ç”Ÿæ—¥æ—¥æœŸ||''}\n`,a+=`  å…¶ä»–é‡è¦è³‡è¨Šï¼š${e.å…¶ä»–é‡è¦è³‡è¨Š||''}\n`,a+=`  é—œä¿‚ï¼š${E(e.é—œä¿‚)}\n`,a+=`  å‹å¥½åº¦ï¼š${E(e.å‹å¥½åº¦)}\n`,a+=`  æ„›æƒ…åº¦ï¼š${E(e.æ„›æƒ…åº¦)}\n`,a+=`</${t}Status>`,a})()}\n`,t+='\n',t+=`${(()=>{const e=getVariables({type:'chat'}).characters;if(void 0===e)return'';let t='<CharacterStatus>\n';for(const[a,n]of Object.entries(e))'c1'!==a&&(t+=`idï¼š${a}\n`,t+=`  å§“æ°ï¼š${n.å§“æ°||''}\n`,t+=`  åå­—ï¼š${n.åå­—||''}\n`,t+=`  å¹´é½¡ï¼š${n.å¹´é½¡||''}\n`,t+=`  æ€§åˆ¥ï¼š${n.æ€§åˆ¥||''}\n`,t+=`  èº«ä»½ï¼š${n.èº«ä»½||''}\n`,t+=`  èº«é«˜ï¼š${n.èº«é«˜||''}\n`,t+=`  é«”é‡ï¼š${n.é«”é‡||''}\n`,t+=`  èƒ¸åœï¼š${n.èƒ¸åœ||''}\n`,t+=`  ç½©æ¯ï¼š${n.ç½©æ¯||''}\n`,t+=`  è…°åœï¼š${n.è…°åœ||''}\n`,t+=`  è‡€åœï¼š${n.è‡€åœ||''}\n`,t+=`  é«®åž‹ï¼š${n.é«®åž‹||''}\n`,t+=`  æ¨£è²Œï¼š${n.æ¨£è²Œ||''}\n`,t+=`  è¡£è‘—ï¼š${n.è¡£è‘—||''}\n`,t+=`  ç°¡ä»‹ï¼š${n.ç°¡ä»‹||''}\n`,t+=`  æ€§æ ¼ï¼š${n.æ€§æ ¼||''}\n`,t+=`  æ„›å¥½ï¼š${n.æ„›å¥½||''}\n`,t+=`  é‡‘éŒ¢ï¼š${n.é‡‘éŒ¢||''}\n`,t+=`  å¿ƒæƒ…ï¼š${n.å¿ƒæƒ…||''}\n`,t+=`  æ€§æ…¾ï¼š${n.æ€§æ…¾||''}\n`,t+=`  ç”Ÿæ—¥æœˆä»½ï¼š${n.ç”Ÿæ—¥æœˆä»½||''}\n`,t+=`  ç”Ÿæ—¥æ—¥æœŸï¼š${n.ç”Ÿæ—¥æ—¥æœŸ||''}\n`,t+=`  å…¶ä»–é‡è¦è³‡è¨Šï¼š${n.å…¶ä»–é‡è¦è³‡è¨Š||''}\n`,t+=`  é—œä¿‚ï¼š${E(n.é—œä¿‚)}\n`,t+=`  å‹å¥½åº¦ï¼š${E(n.å‹å¥½åº¦)}\n`,t+=`  æ„›æƒ…åº¦ï¼š${E(n.æ„›æƒ…åº¦)}\n\n`);return t+='</CharacterStatus>',t})()}\n`,t+='\n',t+=`${(()=>{let e='<ItemTable>\n';e+='|id|åç¨±|æè¿°|åƒ¹å€¼|\n',e+='|---|---|---|---|\n';const t=getVariables({type:'chat'}).items;if(void 0===t)return'';for(const[a,n]of Object.entries(t))e+=`|${a}|${n.name}|${n.description}|${n.value}|\n`;return e+='</ItemTable>',e})()}\n`,t+='\n',t+=`${(()=>{let e='<LocationTable>\n';e+='|id|åœ°é»ž|ä½ç½®|æè¿°|å­åœ°é»ž|\n',e+='|---|---|---|---|---|\n';const t=getVariables({type:'chat'}).locations;if(void 0===t)return'';for(const[a,n]of Object.entries(t)){const t=n.sub_location?n.sub_location.join(', '):'';e+=`|${a}|${n.name}|${n.location||''}|${n.description}|${t}|\n`}return e+='</LocationTable>',e})()}\n`,t+='\n',t+=`${(()=>{let e='';const t=getVariables({type:'chat'}).extra_world_info;if(void 0===t)return'';for(const a of Array.from(t))''!==a.name&&''!==a.content&&(e+=`<${a.name}>\n`,e+=`${a.content}\n`,e+=`</${a.name}>\n`,e+='\n');return e})()}\n`,t+='\n',t+='<ç”Ÿæˆè¦æ±‚>\n',t+=`${e.generation_requirement||'ç„¡ç‰¹æ®Šè¦æ±‚'}\n`,t+='</ç”Ÿæˆè¦æ±‚>\n',t},E=e=>'['+Object.entries(e).map(([e,t])=>'string'==typeof t?`'${e}':'${t}'`:`'${e}':${t}`).join(', ')+']',k=(e,t)=>{t.generated_content=e};return(e,a)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',Af,[(0,t.createElementVNode)('div',Rf,[a[5]||(a[5]=(0,t.createElementVNode)('h3',null,'ä¸–ç•Œè³‡è¨Š',-1)),(0,t.createElementVNode)('div',Kf,[(0,t.createElementVNode)('div',Uf,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(r.value,(e,n)=>((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,{key:e.id},[d.value===n&&null!==s.value&&s.value!==n?((0,t.openBlock)(),(0,t.createElementBlock)('div',Lf)):(0,t.createCommentVNode)('v-if',!0),(0,t.createElementVNode)('div',{class:(0,t.normalizeClass)(['sortable-item',{dragging:s.value===n}]),'data-id':e.id,draggable:'true',onDragstart:e=>((e,t)=>{s.value=t,e.dataTransfer&&(e.dataTransfer.effectAllowed='move')})(e,n),onDragover:(0,t.withModifiers)(e=>((e,t)=>{e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect='move');const a=e.target.getBoundingClientRect(),n=e.clientY-a.top,o=a.height;d.value=n<o/2?t:t+1})(e,n),['prevent']),onDrop:e=>((e,t)=>{e.preventDefault();const a=s.value;if(null!==a&&a!==t){const e=[...r.value],[n]=e.splice(a,1);e.splice(t,0,n),r.value=e}s.value=null})(e,n),onDragend:b,onDragleave:g},[(0,t.createVNode)(c,{title:e.name||'æœªè¨­å®š','is-open':e.is_open,class:(0,t.normalizeClass)(['draggable-fold-bar',{incomplete:!e.name||!e.content}]),onToggle:e=>(e=>{r.value[e].is_open=!r.value[e].is_open})(n)},{'title-actions':(0,t.withCtx)(()=>[(0,t.createElementVNode)('button',{class:'remove-btn',title:'ç§»é™¤æ­¤é …ç›®',onClick:(0,t.withModifiers)(e=>(e=>{r.value.splice(e,1)})(n),['stop'])},[...a[0]||(a[0]=[(0,t.createElementVNode)('span',null,'Ã—',-1)])],8,jf)]),default:(0,t.withCtx)(()=>[(0,t.createElementVNode)('div',Hf,[(0,t.createElementVNode)('div',Pf,[a[1]||(a[1]=(0,t.createElementVNode)('label',null,'åç¨±',-1)),(0,t.withDirectives)((0,t.createElementVNode)('input',{'onUpdate:modelValue':t=>e.name=t,type:'text',class:'form-input',placeholder:'è¼¸å…¥é …ç›®åç¨±'},null,8,Gf),[[t.vModelText,e.name]])]),(0,t.createElementVNode)('div',qf,[a[2]||(a[2]=(0,t.createElementVNode)('label',null,'å…§å®¹',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{'onUpdate:modelValue':t=>e.content=t,class:'form-textarea',placeholder:'è¼¸å…¥é …ç›®å…§å®¹',rows:'3'},null,8,Xf),[[t.vModelText,e.content]])]),(0,t.createElementVNode)('div',Wf,[a[3]||(a[3]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆè¦æ±‚',-1)),(0,t.withDirectives)((0,t.createElementVNode)('textarea',{'onUpdate:modelValue':t=>e.generation_requirement=t,class:'form-textarea',placeholder:'è¼¸å…¥ç”Ÿæˆæ­¤é …ç›®çš„è¦æ±‚',rows:'2'},null,8,Jf),[[t.vModelText,e.generation_requirement]])]),e.generated_content?((0,t.openBlock)(),(0,t.createElementBlock)('div',Zf,[a[4]||(a[4]=(0,t.createElementVNode)('label',null,'ç”Ÿæˆçµæžœï¼š',-1)),(0,t.createElementVNode)('div',Qf,(0,t.toDisplayString)(e.generated_content),1),(0,t.createElementVNode)('button',{class:'replace-btn',onClick:e=>u(n)},'ä½¿ç”¨',8,eh)])):(0,t.createCommentVNode)('v-if',!0),(0,t.createElementVNode)('div',th,[(0,t.createElementVNode)('button',{class:'action-btn generate',disabled:!(0,t.unref)(i)||l.value.get(e.id),onClick:e=>(async e=>{const t=r.value[e];if(t){l.value.set(t.id,!0);try{const a=h(t),n=x(),o=y(t),l=await generateRaw({user_input:a,ordered_prompts:[{role:'system',content:n},'char_description',{role:'system',content:o},'user_input']});k(l,t);try{if(t.name&&t.name.trim()){const e={};e[t.name.trim()]=t.generated_content||'',localStorage.setItem(`world_info_item_generated_${t.name.trim()}`,JSON.stringify(e))}}catch(e){console.error(`Failed to save generated world info item for ${t.name} to localStorage:`,e)}r.value[e]={...t}}catch(e){console.error(`ç”Ÿæˆé …ç›® ${t.name} å…§å®¹å¤±æ•—:`,e)}finally{l.value.set(t.id,!1)}}})(n)},[l.value.get(e.id)?((0,t.openBlock)(),(0,t.createElementBlock)('span',nh)):(0,t.createCommentVNode)('v-if',!0),(0,t.createTextVNode)(' '+(0,t.toDisplayString)(l.value.get(e.id)?'ç”Ÿæˆä¸­...':(0,t.unref)(i)?'ç”Ÿæˆå…§å®¹':'è«‹å…ˆå®Œæˆä¸–ç•ŒèƒŒæ™¯è¨­å®š'),1)],8,ah),(0,t.createElementVNode)('button',{class:'action-btn apply',disabled:!e.generated_content,onClick:e=>u(n)},' æ‡‰ç”¨çµæžœ ',8,oh)])])]),_:2},1032,['title','is-open','class','onToggle'])],42,Ff)],64))),128)),d.value===r.value.length&&null!==s.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',rh)):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',{class:'add-item-section'},[(0,t.createElementVNode)('button',{class:'add-btn',onClick:p},'+ æ·»åŠ æ–°é …ç›®')])])])]))}});n(6111);const ih=(0,d.A)(lh,[['__scopeId','data-v-ee3aed0a']]),sh={class:'main-interface-container'},dh={class:'tab-navigation top'},ch={class:'time-row'},uh={class:'current-time'},ph={class:'tab-row'},mh={class:'tab-row'},vh={key:'conversation',class:'conversation-area'},gh={key:'user',class:'user-area'},bh={key:'character',class:'character-area'},fh={key:'item',class:'item-area'},hh={key:'storage',class:'storage-area'},xh={key:'location',class:'location-area'},yh={key:'promise',class:'promise-area'},_h={key:'summary',class:'summary-area'},Eh={key:'world_info',class:'world-info-area'},kh={key:'settings',class:'settings-area'},Vh=(0,t.defineComponent)({__name:'main_interface',setup(e){const a=(0,t.ref)('conversation'),n=(0,t.ref)(null),o=(0,t.ref)(null),r=(0,t.ref)(null),l=(0,t.ref)(0),i=(0,t.ref)(''),s=['conversation','user','character','item','storage','location','promise','summary','world_info','settings'],d=(0,t.ref)(0),c=(0,t.ref)(0),u=(0,t.ref)(0),p=(0,t.ref)(!1),m=(0,t.ref)(!1),v=(0,t.ref)('right'),g=()=>{const e=new Date,t=e.getHours().toString().padStart(2,'0'),a=e.getMinutes().toString().padStart(2,'0');i.value=`${t}:${a}`};let b=null;(0,t.onMounted)(()=>{g(),b=window.setInterval(g,6e4)}),(0,t.onUnmounted)(()=>{null!==b&&clearInterval(b)});const f=(e,t=!1)=>{e!==a.value?(m.value=t,'conversation'===a.value&&n.value&&(l.value=n.value.getScrollPosition()),a.value=e,'conversation'===e&&setTimeout(()=>{n.value&&n.value.setScrollPosition(l.value)},0)):'character'===e&&o.value?o.value.handleTabClick():'user'===e&&r.value&&r.value.handleTabClick()},h=e=>{const t=s.indexOf(e);return-1===t||t===s.length-1?e:s[t+1]},x=e=>{const t=s.indexOf(e);return-1===t||0===t?e:s[t-1]},y=e=>{n.value&&n.value.handleRenderSizeChanged&&n.value.handleRenderSizeChanged(e)},E=e=>{const t=e.touches[0];d.value=t.clientX,c.value=t.clientY,u.value=Date.now()},k=e=>{},V=e=>{const t=e.changedTouches[0],n=t.clientX-d.value,o=t.clientY-c.value,r=Date.now()-u.value;if(Math.abs(n)>20&&r<1e3&&Math.abs(n)>Math.abs(o))if(n<0){v.value='left';const e=h(a.value);f(e,!0)}else{v.value='right';const e=x(a.value);f(e,!0)}},N=e=>{p.value=!0,d.value=e.clientX,c.value=e.clientY,u.value=Date.now()},w=e=>{},S=e=>{if(!p.value)return;p.value=!1;const t=e.clientX-d.value,n=e.clientY-c.value,o=Date.now()-u.value;if(Math.abs(t)>20&&o<1e3&&Math.abs(t)>Math.abs(n))if(t<0){v.value='left';const e=h(a.value);f(e,!0)}else{v.value='right';const e=x(a.value);f(e,!0)}};return(e,l)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',sh,[(0,t.createElementVNode)('div',dh,[(0,t.createCommentVNode)(' æ™‚é–“é¡¯ç¤ºè¡Œ '),(0,t.createElementVNode)('div',ch,[(0,t.createElementVNode)('div',uh,(0,t.toDisplayString)(i.value),1)]),(0,t.createCommentVNode)(' ç¬¬ä¸€è¡Œæ¨™ç±¤ '),(0,t.createElementVNode)('div',ph,[(0,t.createElementVNode)('button',{class:(0,t.normalizeClass)(['tab-button',{active:'conversation'===a.value}]),onClick:l[0]||(l[0]=e=>f('conversation'))},' å°è©± ',2),(0,t.createElementVNode)('button',{class:(0,t.normalizeClass)(['tab-button',{active:'user'===a.value}]),onClick:l[1]||(l[1]=e=>f('user'))},'ç”¨æˆ¶',2),(0,t.createElementVNode)('button',{class:(0,t.normalizeClass)(['tab-button',{active:'character'===a.value}]),onClick:l[2]||(l[2]=e=>f('character'))},' è§’è‰² ',2),(0,t.createElementVNode)('button',{class:(0,t.normalizeClass)(['tab-button',{active:'item'===a.value}]),onClick:l[3]||(l[3]=e=>f('item'))},'ç‰©å“',2),(0,t.createElementVNode)('button',{class:(0,t.normalizeClass)(['tab-button',{active:'storage'===a.value}]),onClick:l[4]||(l[4]=e=>f('storage'))},'è²¯å­˜',2)]),(0,t.createCommentVNode)(' ç¬¬äºŒè¡Œæ¨™ç±¤ '),(0,t.createElementVNode)('div',mh,[(0,t.createElementVNode)('button',{class:(0,t.normalizeClass)(['tab-button',{active:'location'===a.value}]),onClick:l[5]||(l[5]=e=>f('location'))},' åœ°é»ž ',2),(0,t.createElementVNode)('button',{class:(0,t.normalizeClass)(['tab-button',{active:'promise'===a.value}]),onClick:l[6]||(l[6]=e=>f('promise'))},' ç´„å®š ',2),(0,t.createElementVNode)('button',{class:(0,t.normalizeClass)(['tab-button',{active:'summary'===a.value}]),onClick:l[7]||(l[7]=e=>f('summary'))},' ç¸½çµ ',2),(0,t.createElementVNode)('button',{class:(0,t.normalizeClass)(['tab-button',{active:'world_info'===a.value}]),onClick:l[8]||(l[8]=e=>f('world_info'))},' ä¸–ç•Œ ',2),(0,t.createElementVNode)('button',{class:(0,t.normalizeClass)(['tab-button',{active:'settings'===a.value}]),onClick:l[9]||(l[9]=e=>f('settings'))},' è¨­ç½® ',2)])]),(0,t.createElementVNode)('div',{class:'main-content',onTouchstart:E,onTouchmove:k,onTouchend:V,onMousedown:N,onMousemove:w,onMouseup:S},[(0,t.createVNode)(t.Transition,{name:m.value?`slide-${v.value}`:'no-transition',mode:'out-in'},{default:(0,t.withCtx)(()=>['conversation'===a.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',vh,[(0,t.createVNode)(Kc,{ref_key:'conversation_tab_ref',ref:n},null,512)])):'user'===a.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',gh,[(0,t.createVNode)(Of,{ref_key:'user_tab_ref',ref:r},null,512)])):'character'===a.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',bh,[(0,t.createVNode)(sc,{ref_key:'character_tab_ref',ref:o},null,512)])):'item'===a.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',fh,[(0,t.createVNode)(vu)])):'storage'===a.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',hh,[(0,t.createVNode)(Km)])):'location'===a.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',xh,[(0,t.createVNode)(xp)])):'promise'===a.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',yh,[(0,t.createVNode)(Dv)])):'summary'===a.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',_h,[(0,t.createVNode)(pb)])):'world_info'===a.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',Eh,[(0,t.createVNode)(ih)])):'settings'===a.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',kh,[(0,t.createVNode)(gg,{onRenderSizeChanged:y})])):(0,t.createCommentVNode)('v-if',!0)]),_:1},8,['name'])],32)]))}});n(5162);const Nh=(0,d.A)(Vh,[['__scopeId','data-v-9fb68f82']]),wh={key:0,class:'initialization-wrapper'},Sh=(0,t.defineComponent)({__name:'app',setup(e){const a=(0,t.ref)(!1),n=(0,t.ref)(!1),o=(0,t.ref)('100vh'),r=()=>{if(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)o.value='100vh';else try{window.parent&&window.parent.innerHeight&&(o.value=.8*window.parent.innerHeight+'px')}catch(e){console.warn('Unable to access parent window height:',e)}},l=()=>{r()},i=()=>{try{const e=getVariables({type:'chat'});void 0===e?.is_initialized?(n.value=!1,insertOrAssignVariables({is_initialized:!1},{type:'chat'})):n.value=e.is_initialized}catch(e){console.error('Failed to load chat settings:',e)}};return(0,t.onMounted)(()=>{a.value=!0,i(),eventOn(tavern_events.CHAT_CHANGED,e=>{console.log('Chat changed to:',e),i()}),eventOn('initialization_completed',()=>{console.log('Initialization completed, switching to main interface'),n.value=!0}),(0,t.watch)(()=>getVariables({type:'chat'}),e=>{void 0!==e?.is_initialized&&(n.value=e.is_initialized)},{deep:!0}),r(),document.addEventListener('fullscreenchange',l),document.addEventListener('webkitfullscreenchange',l),document.addEventListener('mozfullscreenchange',l),document.addEventListener('MSFullscreenChange',l)}),(0,t.onUnmounted)(()=>{document.removeEventListener('fullscreenchange',l),document.removeEventListener('webkitfullscreenchange',l),document.removeEventListener('mozfullscreenchange',l),document.removeEventListener('MSFullscreenChange',l)}),(e,r)=>a.value?((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:0,class:'app-container',style:(0,t.normalizeStyle)({height:o.value})},[(0,t.createCommentVNode)(' åˆå§‹åŒ–UI '),n.value?((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,{key:1},[(0,t.createCommentVNode)(' ä¸»è¦UI '),(0,t.createElementVNode)('div',null,[(0,t.createVNode)(Nh)])],2112)):((0,t.openBlock)(),(0,t.createElementBlock)('div',wh,[(0,t.createVNode)(Fi)]))],4)):(0,t.createCommentVNode)('v-if',!0)}});n(2913),n(4607);const Bh=(0,d.A)(Sh,[['__scopeId','data-v-e8f6a8aa']]);var Ch,$h,Ih,zh,Dh,Th,Mh,Yh,Oh,Ah,Rh,Kh,Uh,Lh,Fh,jh,Hh,Ph,Gh,qh,Xh,Wh,Jh,Zh,Qh,ex=n(9974),tx=function(e,t,a,n){var o,r=arguments.length,l=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)l=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(r<3?o(l):r>3?o(t,a,l):o(t,a))||l);return r>3&&l&&Object.defineProperty(t,a,l),l},ax=function(e,t){if('object'==typeof Reflect&&'function'==typeof Reflect.metadata)return Reflect.metadata(e,t)};class nx{static registry=new ex._;constructor(...e){}static parseString(e){if(void 0===e)return[];return[...e.matchAll(this.prototype.REGEX)].map(e=>({command:this.prototype.create(e.slice(1).map(e=>e.trim())),index:e.index})).filter(({command:e})=>e.isValid())}}let ox=Ch=class extends nx{delta_minutes;constructor(e){super(),this.delta_minutes=e}get REGEX(){return/deltaMinutes\(\s*([^,()]+)\s*\)/g}create(e){const t=Number(e[0]);return new Ch(t)}isValid(){return!isNaN(this.delta_minutes)}execute(e,t){return e.datetime.deltaMinutes(this.delta_minutes),e}};ox=Ch=tx([nx.registry.register(),ax('design:paramtypes',[Number])],ox);let rx=$h=class extends nx{current_location_id;constructor(e){super(),this.current_location_id=e}get REGEX(){return/setCurrentLocation\(\s*"([^"]+?)"\s*\s*\)/g}create(e){const t=e[0];return new $h(t)}isValid(){return!0}execute(e,t){return e.locations.has(this.current_location_id)?(e.current_location_id=this.current_location_id,e):e}};rx=$h=tx([nx.registry.register(),ax('design:paramtypes',[String])],rx);let lx=Ih=class extends nx{weather;constructor(e){super(),this.weather=e}get REGEX(){return/setWeather\(\s*"([^"]+?)"\s*\s*\)/g}create(e){const t=e[0];return new Ih(t)}isValid(){return!0}execute(e,t){return e.weather=this.weather,e}};lx=Ih=tx([nx.registry.register(),ax('design:paramtypes',[String])],lx);let ix=zh=class extends nx{id;name;age;gender;identity;introduction;personality;height;weight;chest_size;cup_size;waist_size;hips_size;hairstyle;appearance;clothes;birthday_month;birthday_date;favourite;extra_information;money;mood;horny;constructor(e,t,a,n,o,r,l,i,s,d,c,u,p,m,v,g,b,f,h,x,y,E,k){super(),this.id=e,this.name=t,this.age=a,this.gender=n,this.identity=o,this.introduction=r,this.personality=l,this.height=i,this.weight=s,this.chest_size=d,this.cup_size=c,this.waist_size=u,this.hips_size=p,this.hairstyle=m,this.appearance=v,this.clothes=g,this.birthday_month=b,this.birthday_date=f,this.favourite=h,this.extra_information=x,this.money=y,this.mood=E,this.horny=k}get REGEX(){return/createCharacter\(\s*"([^"]+?)"\s*,\s*"([^"]+?)"\s*,\s*([^"]+?)\s*,\s*"([^"]+?)"\s*,\s*"([^"]+?)"\s*,\s*"([^"]+?)"\s*,\s*"([^"]+?)"\s*,\s*([^"]+?)\s*,\s*([^"]+?)\s*,\s*([^"]+?)\s*,\s*"([^"]+?)"\s*,\s*([^"]+?)\s*,\s*([^"]+?)\s*,\s*"([^"]+?)"\s*,\s*"([^"]+?)"\s*,\s*"([^"]+?)"\s*,\s*([^"]+?)\s*,\s*([^"]+?)\s*,\s*"([^"]+?)"\s*,\s*"([^"]*?)"\s*,\s*([^"]+?)\s*,\s*([^"]+?)\s*,\s*([^"]+?)\s*\)/g}create(e){const t=e[0],a=e[1],n=Number(e[2]),o=e[3],r=e[4],l=e[5],i=e[6],s=Number(e[7]),d=Number(e[8]),c=Number(e[9]),u=e[10],p=Number(e[11]),m=Number(e[12]),v=e[13],g=e[14],b=e[15],f=Number(e[16]),h=Number(e[17]),x=e[18],y=e[19],E=Number(e[20]),k=Number(e[21]),V=Number(e[22]);return new zh(t,a,n,o,r,l,i,s,d,c,u,p,m,v,g,b,f,h,x,y,E,k,V)}isValid(){return!isNaN(this.age)&&(!isNaN(this.height)&&(!isNaN(this.weight)&&(!isNaN(this.chest_size)&&(!isNaN(this.waist_size)&&(!isNaN(this.hips_size)&&(!isNaN(this.birthday_month)&&(!isNaN(this.birthday_date)&&(!isNaN(this.money)&&(!isNaN(this.mood)&&!isNaN(this.horny))))))))))}execute(e,t){if(e.hasCharacter(this.id))return e;let a=e.datetime.year-this.age;(e.datetime.month<this.birthday_month||e.datetime.month===this.birthday_month&&e.datetime.date<this.birthday_date)&&(a-=1);const n=new $o(new Date(a,this.birthday_month,this.birthday_date)),o=new Io(this.name,this.age,this.gender,this.identity,this.introduction,this.personality,this.height,this.weight,this.chest_size,this.cup_size,this.waist_size,this.hips_size,this.hairstyle,this.appearance,this.clothes,n,this.favourite,this.extra_information,this.money,this.mood,this.horny,new Map,new Map,new Map,new Map);return e.active_characters.set(this.id,o),e}};ix=zh=tx([nx.registry.register(),ax('design:paramtypes',[String,String,Number,String,String,String,String,Number,Number,Number,String,Number,Number,String,String,String,Number,Number,String,String,Number,Number,Number])],ix);let sx=Dh=class extends nx{id;delta;constructor(e,t){super(),this.id=e,this.delta=t}get REGEX(){return/deltaMoney\(\s*"([^"]+?)"\s*,\s*([^,()]+)\s*\)/g}create(e){const t=e[0],a=Number(e[1]);return new Dh(t,a)}isValid(){return!isNaN(this.delta)}execute(e,t){const a=e.getCharacter(this.id),n=e.storages.get(this.id);return a||n?(a?a.money+=this.delta:n.money+=this.delta,e):e}};sx=Dh=tx([nx.registry.register(),ax('design:paramtypes',[String,Number])],sx);let dx=Th=class extends nx{from_id;to_id;delta;constructor(e,t,a){super(),this.from_id=e,this.to_id=t,this.delta=a}get REGEX(){return/deltaFriendship\(\s*"([^"]+?)"\s*,\s*"([^"]+?)"\s*,\s*([^,()]+)\s*\)/g}create(e){const t=e[0],a=e[1],n=Number(e[2]);return new Th(t,a,n)}isValid(){return!isNaN(this.delta)}execute(e,t){if(!e.hasCharacter(this.from_id))return e;if(!e.hasCharacter(this.to_id))return e;const a=e.getCharacter(this.from_id);return a?(a.deltaFriendship(this.to_id,this.delta),e):e}};dx=Th=tx([nx.registry.register(),ax('design:paramtypes',[String,String,Number])],dx);let cx=Mh=class extends nx{from_id;to_id;delta;constructor(e,t,a){super(),this.from_id=e,this.to_id=t,this.delta=a}get REGEX(){return/deltaLove\(\s*"([^"]+?)"\s*,\s*"([^"]+?)"\s*,\s*([^,()]+)\s*\)/g}create(e){const t=e[0],a=e[1],n=Number(e[2]);return new Mh(t,a,n)}isValid(){return!isNaN(this.delta)}execute(e,t){if(!e.hasCharacter(this.from_id))return e;if(!e.hasCharacter(this.to_id))return e;const a=e.getCharacter(this.from_id);return a?(a.deltaLove(this.to_id,this.delta),e):e}};cx=Mh=tx([nx.registry.register(),ax('design:paramtypes',[String,String,Number])],cx);let ux=Yh=class extends nx{id;delta;constructor(e,t){super(),this.id=e,this.delta=t}get REGEX(){return/deltaMood\(\s*"([^"]+?)"\s*,\s*([^,()]+)\s*\)/g}create(e){const t=e[0],a=Number(e[1]);return new Yh(t,a)}isValid(){return!isNaN(this.delta)}execute(e,t){const a=e.getCharacter(this.id);return a?(a.deltaMood(this.delta),e):e}};ux=Yh=tx([nx.registry.register(),ax('design:paramtypes',[String,Number])],ux);let px=Oh=class extends nx{id;delta;constructor(e,t){super(),this.id=e,this.delta=t}get REGEX(){return/deltaHorny\(\s*"([^"]+?)"\s*,\s*([^,()]+)\s*\)/g}create(e){const t=e[0],a=Number(e[1]);return new Oh(t,a)}isValid(){return!isNaN(this.delta)}execute(e,t){const a=e.getCharacter(this.id);return a?(a.deltaHorny(this.delta),e):e}};px=Oh=tx([nx.registry.register(),ax('design:paramtypes',[String,Number])],px);let mx=Ah=class extends nx{from_id;to_id;relation;constructor(e,t,a){super(),this.from_id=e,this.to_id=t,this.relation=a}get REGEX(){return/setRelation\(\s*"([^"]+?)"\s*,\s*"([^"]+?)"\s*,\s*"([^"]+?)"\s*\)/g}create(e){const t=e[0],a=e[1],n=e[2];return new Ah(t,a,n)}isValid(){return!0}execute(e,t){if(!e.hasCharacter(this.from_id))return e;if(!e.hasCharacter(this.to_id))return e;const a=e.getCharacter(this.from_id);return a?(a.relations.set(this.to_id,this.relation),e):e}};mx=Ah=tx([nx.registry.register(),ax('design:paramtypes',[String,String,String])],mx);let vx=Rh=class extends nx{id;key;value;constructor(e,t,a){super(),this.id=e,this.key=t,this.value=a}get REGEX(){return/setCharacterProperty\(\s*"([^"]+?)"\s*,\s*"([^"]+?)"\s*,\s*"([^"]+?)"\s*\)/g}create(e){const t=e[0],a=e[1],n=e[2];return new Rh(t,a,n)}isValid(){return[Io.IDENTITY_KEY,Io.INTRODUCTION_KEY,Io.PERSONALITY_KEY,Io.HAIRSTYLE_KEY,Io.APPEARANCE_KEY,Io.CLOTHES_KEY,Io.FAVOURITE_KEY,Io.EXTRA_INFORMATION_KEY].includes(this.key)}execute(e,t){const a=e.getCharacter(this.id);if(!a)return e;switch(this.key){case Io.IDENTITY_KEY:a.identity=this.value;break;case Io.INTRODUCTION_KEY:a.introduction=this.value;break;case Io.PERSONALITY_KEY:a.personality=this.value;break;case Io.HAIRSTYLE_KEY:a.hairstyle=this.value;break;case Io.APPEARANCE_KEY:a.appearance=this.value;break;case Io.CLOTHES_KEY:a.clothes=this.value;break;case Io.FAVOURITE_KEY:a.favourite=this.value;break;case Io.EXTRA_INFORMATION_KEY:a.extra_information=this.value}return e}};vx=Rh=tx([nx.registry.register(),ax('design:paramtypes',[String,String,String])],vx);let gx=Kh=class extends nx{id;name;description;value;constructor(e,t,a,n){super(),this.id=e,this.name=t,this.description=a,this.value=n}get REGEX(){return/createItem\(\s*"([^"]+?)"\s*,\s*"([^"]+?)"\s*,\s*"([^"]+?)"\s*,\s*([^,()]+)\s*\)/g}create(e){const t=e[0],a=e[1],n=e[2],o=Number(e[3]);return new Kh(t,a,n,o)}isValid(){return!isNaN(this.value)}execute(e,t){if(e.items.has(this.id))return e;const a=new zo(this.name,this.description,this.value);return e.items.set(this.id,a),e}};gx=Kh=tx([nx.registry.register(),ax('design:paramtypes',[String,String,String,Number])],gx);let bx=Uh=class extends nx{id;item_id;delta;constructor(e,t,a){super(),this.id=e,this.item_id=t,this.delta=a}get REGEX(){return/deltaInventory\(\s*"([^"]+?)"\s*,\s*"([^"]+?)"\s*,\s*([^,()]+)\s*\)/g}create(e){const t=e[0],a=e[1],n=Number(e[2]);return new Uh(t,a,n)}isValid(){return!isNaN(this.delta)}execute(e,t){if(!e.items.has(this.item_id))return e;const a=e.getCharacter(this.id),n=e.storages.get(this.id);if(!a&&!n)return e;const o=a?a.inventory:n.inventory;let r=o.get(this.item_id)||0;return r+=this.delta,r<=0?o.delete(this.item_id):o.set(this.item_id,r),e}};bx=Uh=tx([nx.registry.register(),ax('design:paramtypes',[String,String,Number])],bx);let fx=Lh=class extends nx{id;name;description;parent_id;constructor(e,t,a,n){super(),this.id=e,this.name=t,this.description=a,this.parent_id=n}get REGEX(){return/createStorage\(\s*"([^"]+?)"\s*,\s*"([^"]+?)"\s*,\s*"([^"]+?)"\s*,\s*"([^"]+?)"\s*\)/g}create(e){const t=e[0],a=e[1],n=e[2],o=e[3];return new Lh(t,a,n,o)}isValid(){return''!==this.id.trim()&&(''!==this.name.trim()&&(''!==this.description.trim()&&''!==this.parent_id.trim()))}execute(e,t){return e.addStorage(this.id,this.name,this.description,this.parent_id),e}};fx=Lh=tx([nx.registry.register(),ax('design:paramtypes',[String,String,String,String])],fx);let hx=Fh=class extends nx{id;constructor(e){super(),this.id=e}get REGEX(){return/removeStorage\(\s*"([^"]+?)"\s*\)/g}create(e){const t=e[0];return new Fh(t)}isValid(){return''!==this.id.trim()}execute(e,t){return e.removeStorage(this.id),e}};hx=Fh=tx([nx.registry.register(),ax('design:paramtypes',[String])],hx);let xx=jh=class extends nx{storage_id;parent_id;constructor(e,t){super(),this.storage_id=e,this.parent_id=t}get REGEX(){return/setStorageParent\(\s*"([^"]+?)"\s*,\s*"([^"]+?)"\s*\)/g}create(e){const t=e[0],a=e[1];return new jh(t,a)}isValid(){return''!==this.storage_id.trim()&&''!==this.parent_id.trim()}execute(e,t){return e.setStorageParent(this.storage_id,this.parent_id),e}};xx=jh=tx([nx.registry.register(),ax('design:paramtypes',[String,String])],xx);let yx=Hh=class extends nx{id;name;location;description;constructor(e,t,a,n){super(),this.id=e,this.name=t,this.location=a,this.description=n}get REGEX(){return/createLocation\(\s*"([^"]+?)"\s*,\s*"([^"]+?)"\s*,\s*"([^"]+?)"\s*,\s*"([^"]+?)"\s*\)/g}create(e){const t=e[0],a=e[1],n=e[2],o=e[3];return new Hh(t,a,n,o)}isValid(){return''!==this.id.trim()&&(''!==this.name.trim()&&(''!==this.location.trim()&&''!==this.description.trim()))}execute(e,t){if(e.locations.has(this.id))return e;const a=new Do(this.id,this.name,this.location,this.description,null,[],[]);return e.locations.set(this.id,a),e}};yx=Hh=tx([nx.registry.register(),ax('design:paramtypes',[String,String,String,String])],yx);let _x=Ph=class extends nx{parent_location_id;sub_location_id;constructor(e,t){super(),this.parent_location_id=e,this.sub_location_id=t}get REGEX(){return/addSubLocation\(\s*"([^"]+?)"\s*,\s*"([^"]+?)"\s*\)/g}create(e){const t=e[0],a=e[1];return new Ph(t,a)}isValid(){return''!==this.parent_location_id.trim()&&''!==this.sub_location_id.trim()}execute(e,t){const a=e.locations.get(this.parent_location_id);if(!a)return e;const n=e.locations.get(this.sub_location_id);return n?(null!==n.parent_location_id||a.sub_location_ids.includes(this.sub_location_id)||(a.sub_location_ids.push(this.sub_location_id),n.parent_location_id=this.parent_location_id),e):e}};_x=Ph=tx([nx.registry.register(),ax('design:paramtypes',[String,String])],_x);let Ex=Gh=class extends nx{id;description;constructor(e,t){super(),this.id=e,this.description=t}get REGEX(){return/setLocationDescription\(\s*"([^"]+?)"\s*,\s*"([^"]+?)"\s*\)/g}create(e){const t=e[0],a=e[1];return new Gh(t,a)}isValid(){return''!==this.id.trim()}execute(e,t){const a=e.locations.get(this.id);return a?(a.description=this.description,e):e}};Ex=Gh=tx([nx.registry.register(),ax('design:paramtypes',[String,String])],Ex);let kx=qh=class extends nx{deadline_year;deadline_month;deadline_date;deadline_hours;deadline_minutes;character_ids;location_id;description;constructor(e,t,a,n,o,r,l,i){super(),this.deadline_year=e,this.deadline_month=t,this.deadline_date=a,this.deadline_hours=n,this.deadline_minutes=o,this.character_ids=r,this.location_id=l,this.description=i}get REGEX(){return/createPromise\(\s*([^,()]+)\s*,\s*([^,()]+)\s*,\s*([^,()]+)\s*,\s*([^,()]+)\s*,\s*([^,()]+)\s*,\s*"([^"]+?)"\s*,\s*"([^"]*?)"\s*,\s*"([^"]+?)"\s*\)/g}create(e){const t=Number(e[0]),a=Number(e[1]),n=Number(e[2]),o=Number(e[3]),r=Number(e[4]),l=e[5],i=e[6],s=e[7],d=l.split(',').map(e=>e.trim());return new qh(t,a,n,o,r,d,i,s)}isValid(){return!isNaN(this.deadline_year)&&(!isNaN(this.deadline_month)&&(!isNaN(this.deadline_date)&&(!isNaN(this.deadline_hours)&&!isNaN(this.deadline_minutes))))}execute(e,t){if(''!==this.location_id&&!e.locations.has(this.location_id))return e;for(const t of this.character_ids)if(!e.hasCharacter(t))return e;const a=new $o(new Date(this.deadline_year,this.deadline_month-1,this.deadline_date,this.deadline_hours,this.deadline_minutes)),n=''===this.location_id?null:this.location_id;return e.addPromise(a,this.character_ids,n,this.description),e}};kx=qh=tx([nx.registry.register(),ax('design:paramtypes',[Number,Number,Number,Number,Number,Array,String,String])],kx);let Vx=Xh=class extends nx{id;constructor(e){super(),this.id=e}get REGEX(){return/removePromise\(\s*"([^,()]+)"\s*\)/g}create(e){const t=e[0];return new Xh(t)}isValid(){return''!==this.id.trim()}execute(e,t){return e.promises.has(this.id)?(e.promises.delete(this.id),e):e}};Vx=Xh=tx([nx.registry.register(),ax('design:paramtypes',[String])],Vx);let Nx=Wh=class extends nx{event;constructor(e){super(),this.event=e}get REGEX(){return/startEvent\(\s*"([^"]+)"\s*\)/g}create(e){const t=e[0];return new Wh(t)}isValid(){return''!==this.event.trim()}execute(e,t){return e.current_event=this.event,e}};Nx=Wh=tx([nx.registry.register(),ax('design:paramtypes',[String])],Nx);let wx=Jh=class extends nx{summary;weighting;constructor(e,t){super(),this.summary=e,this.weighting=t}get REGEX(){return/finishEvent\(\s*"([^"]+)"\s*,\s*([^,()]+)\s*\)/g}create(e){const t=e[0],a=Number(e[1]);return new Jh(t,a)}isValid(){return''!==this.summary.trim()&&!isNaN(this.weighting)}execute(e,t){return e.addSummary(this.summary,this.weighting,t),e.current_event=Oo.CURRENT_EVENT_NULL_VALUE,e}};wx=Jh=tx([nx.registry.register(),ax('design:paramtypes',[String,Number])],wx);let Sx=Zh=class extends nx{id;constructor(e){super(),this.id=e}get REGEX(){return/activateCharacter\(\s*"([^"]+)"\s*\)/g}create(e){const t=e[0];return new Zh(t)}isValid(){return''!==this.id.trim()}execute(e,t){if(!e.deactive_characters.has(this.id))return e;const a=e.deactive_characters.get(this.id);return e.active_characters.set(this.id,a),e.deactive_characters.delete(this.id),e}};Sx=Zh=tx([nx.registry.register(),ax('design:paramtypes',[String])],Sx);let Bx=Qh=class extends nx{id;constructor(e){super(),this.id=e}get REGEX(){return/deactivateCharacter\(\s*"([^"]+)"\s*\)/g}create(e){const t=e[0];return new Qh(t)}isValid(){return''!==this.id.trim()}execute(e,t){if(!e.active_characters.has(this.id))return e;const a=e.active_characters.get(this.id);return e.deactive_characters.set(this.id,a),e.active_characters.delete(this.id),e}};Bx=Qh=tx([nx.registry.register(),ax('design:paramtypes',[String])],Bx);class Cx{commands=[];constructor(e){this.commands=e??[]}pushCommand(e){this.commands.push(e)}static fromString(e){if(!e.includes('<VariableUpdate>'))return new Cx;const t=e.split('<VariableUpdate>'),a=t[t.length-1].split('</VariableUpdate>')[0];let n=[];for(const e of nx.registry.getAll().values())n=n.concat(e.parseString(a));n.sort((e,t)=>e.index-t.index);const o=n.map(e=>e.command);return console.log('[Commands] commands:',o),new Cx(o)}execute(e,t){for(const a of this.commands)a.execute(e,t);return e}*[Symbol.iterator](){for(const e of this.commands)yield e}}eventOn('MESSAGE_SENT',e=>{console.log('[event_listener] MESSAGE_SENT start');const t=Oo.loadFromVariable(e-1),a=getChatMessages(e)[0].message;Cx.fromString(a).execute(t,e),t.saveAsVariable(e),console.log('[event_listener] MESSAGE_SENT end')}),eventOn('MESSAGE_RECEIVED',e=>{console.log('[event_listener] MESSAGE_RECEIVED start');const t=Oo.loadFromVariable(e-1),a=getChatMessages(e)[0].message;Cx.fromString(a).execute(t,e),t.saveAsVariable(e),console.log('[event_listener] MESSAGE_RECEIVED end'),eventEmit('MESSAGE_RECEIVED_PROCESSED',e)}),$(()=>{(0,t.createApp)(Bh).mount('#app')})})();